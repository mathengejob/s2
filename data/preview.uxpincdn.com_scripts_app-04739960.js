function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){outerFn=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,outerFn=Object.create(outerFn.prototype),tryLocsList=new Context(tryLocsList||[]);return outerFn._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){delegate=function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}method=tryCatch(method,delegate.iterator,context.arg);if("throw"===method.type)return context.method="throw",context.arg=method.arg,context.delegate=null,ContinueSentinel;method=method.arg;return method?method.done?(context[delegate.resultName]=method.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):method:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}(delegate,context);if(delegate){if(delegate===ContinueSentinel)continue;return delegate}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";delegate=tryCatch(innerFn,self,context);if("normal"===delegate.type){if(state=context.done?"completed":"suspendedYield",delegate.arg===ContinueSentinel)continue;return{value:delegate.arg,done:context.done}}"throw"===delegate.type&&(state="completed",context.method="throw",context.arg=delegate.arg)}}}(innerFn,self,tryLocsList),outerFn}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var $Symbol={},getProto=(define($Symbol,iteratorSymbol,function(){return this}),Object.getPrototypeOf),getProto=getProto&&getProto(getProto(values([]))),Gp=(getProto&&getProto!==Op&&hasOwn.call(getProto,iteratorSymbol)&&($Symbol=getProto),GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create($Symbol));function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg)})})}function AsyncIterator(generator,PromiseImpl){var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){!function invoke(method,arg,resolve,reject){var result,method=tryCatch(generator[method],generator,arg);if("throw"!==method.type)return(arg=(result=method.arg).value)&&"object"==_typeof(arg)&&hasOwn.call(arg,"__await")?PromiseImpl.resolve(arg.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):PromiseImpl.resolve(arg).then(function(unwrapped){result.value=unwrapped,resolve(result)},function(error){return invoke("throw",error,resolve,reject)});reject(method.arg)}(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var i,iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length))return i=-1,(iteratorMethod=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next}).next=iteratorMethod}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return define(Gp,"constructor",GeneratorFunction.prototype=GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){genFun="function"==typeof genFun&&genFun.constructor;return!!genFun&&(genFun===GeneratorFunction||"GeneratorFunction"===(genFun.displayName||genFun.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this}),define(Gp,"toString",function(){return"[object Generator]"}),exports.keys=function(object){var key,keys=[];for(key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;0<=i;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;0<=i;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}var record=(finallyEntry=finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc?null:finallyEntry)?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;0<=i;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;0<=i;--i){var record,thrown,entry=this.tryEntries[i];if(entry.tryLoc===tryLoc)return"throw"===(record=entry.completion).type&&(thrown=record.arg,resetTryEntry(entry)),thrown}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){var n;if(o)return"string"==typeof o?_arrayLikeToArray(o,minLen):"Map"===(n="Object"===(n=Object.prototype.toString.call(o).slice(8,-1))&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SitemapController(_,$scope,$state,$q,CommentsService,PagesService,UsabilityTestService,Settings,editorSocket,EscapeHtmlService,PreviewNavigation,SitemapService,Engine,hotkeys,CanvasContainerHeight,$document){"use strict";function shouldPreventGoToPrevNextPage(){var focusedElement=$document[0].activeElement,canvasWrapper=$document[0].getElementById(CANVAS_WRAPPER_ID),topBarId=$document[0].getElementById(TOP_BAR_ID),body=$document[0].body;return focusedElement&&![body,canvasWrapper].includes(focusedElement)&&!topBarId.contains(focusedElement)}function goToPage(pageId){CanvasContainerHeight.saveHeightFromDom();var currentState=$state.current.name;$state.go(currentState,{pageId:PagesService.getPageByBreakpoint(pageId),pageName:_.kebabCase(PagesService.getPageName(pageId))}),Engine.stopInteractionLoops()}function hasOnlyOnePage(){return $scope.tree&&$scope.tree.length<=1&&!$scope.tree[0].nodes.length}function resetSitemap(){return PagesService.getPages().then(function(){var d=$q.defer();return $scope.tree=PagesService.pagesTree.nodes,$scope.treeMapped=SitemapService.mapTree($scope.tree),$scope.shouldHideSitemap=hasOnlyOnePage(),$scope.shouldHideSitemap?(PreviewNavigation.disablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP),$scope.isSitemapAvailable=!1):(PreviewNavigation.enablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP),$scope.isSitemapAvailable=!0),Engine.setBreakpointPages(PagesService.getBreakpointPages()),d.resolve(),d.promise})}var KEY_CODES=keysEnums.KEY_CODES,CANVAS_WRAPPER_ID="canvas-wrapper",TOP_BAR_ID="top-bar",recursiveSearch=($scope.isVisible=function(){return PreviewNavigation.isPanelVisible(PreviewNavigation.PREVIEW_PANELS.SITEMAP)},$scope.isActive=function(id){return PagesService.currentPageId===PagesService.getPageByBreakpoint(id)},$scope.isIndent=function(){var isIndent=!1;return PagesService.pagesTree.nodes&&PagesService.pagesTree.nodes.forEach(function(node){if(node.nodes.length)return!(isIndent=!0)}),isIndent},$scope.onClick=function(e,id){goToPage(id)},$scope.focusInput=function(){$scope.searchData.focused=!0},$scope.keyDown=function(e){var keyCode=e.keyCode;e.stopPropagation(),keyCode===KEY_CODES.ESC&&(_.isEmpty($scope.searchData.searchFor)?$scope.searchData.focused=!1:$scope.searchData.searchFor=""),keyCode===KEY_CODES.ENTER&&e.preventDefault()},$scope.comparatorSearch=function(actual){return!!_.isEmpty($scope.searchData.searchFor)||recursiveSearch(actual)},$scope.init=function(id){-1===Settings.minimized.indexOf(String(id))?$scope.minimized[id]=!0:angular.isUndefined($scope.minimized[id])&&($scope.minimized[id]=!1)},$scope.toggleMinimized=function(id){var index;$scope.minimized[id]?(index=Settings.minimized.indexOf(String(id)),Settings.minimized.splice(index,1)):Settings.minimized.push(String(id)),Settings.updateMinimized()},function recursiveSearch(id){var i,page=PagesService.pagesMap[id],children=PagesService.pagesChildrenMap[id];if(search(page.name,$scope.searchData.searchFor))return!0;if(children)for(i=0;i<children.length;i++)if(recursiveSearch(children[i]))return!0;return!1}),search=function(where,what){return-1!==where.toLocaleLowerCase().indexOf(what.toLocaleLowerCase())};$scope.searchData={searchFor:"",focused:!1},$scope.tree=PagesService.pagesTree.nodes,$scope.treeMapped=SitemapService.mapTree($scope.tree),$scope.filterSearch={id:null},$scope.minimized={},$scope.isSitemapAvailable=!0,$scope.isMessageVisible=!0,$scope.message="Waiting for participant",$scope.shouldHideSitemap=hasOnlyOnePage(),$scope.documentationExists=SitemapService.hasPageDocumentation,UsabilityTestService.isSession()&&!$scope.shouldHideSitemap?$scope.isSitemapAvailable=UsabilityTestService.getMyData().settings[LiveShare.enums.ROOM_SETTINGS.SEE_SITEMAP]:$scope.shouldHideSitemap&&(PreviewNavigation.disablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP),$scope.isSitemapAvailable=!1),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.TESTER_JOINED,function(){$scope.$apply(function(){UsabilityTestService.isHostSession()||($scope.isSitemapAvailable=UsabilityTestService.getMyData().settings[LiveShare.enums.ROOM_SETTINGS.SEE_SITEMAP],$scope.isSitemapAvailable)||(PreviewNavigation.setActivePanels(null),PreviewNavigation.disablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP))})}),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.OPTIONS_CHANGED,function(data){data.key===LiveShare.enums.ROOM_SETTINGS.SEE_SITEMAP&&$scope.$apply(function(){UsabilityTestService.isHostSession()&&$scope.shouldHideSitemap||($scope.isSitemapAvailable=data.val,$scope.isSitemapAvailable?(PreviewNavigation.enablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP),PreviewNavigation.setActivePanels([PreviewNavigation.PREVIEW_PANELS.SITEMAP])):(PreviewNavigation.setActivePanels(null),PreviewNavigation.disablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP)))})});function handlePageDeletion(){resetSitemap().then(function(){angular.isUndefined(PagesService.pagesMap[PagesService.currentPageId])&&$scope.onClick(null,PagesService.rootPageId)})}editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_CREATE,resetSitemap),editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_UPDATE,resetSitemap),editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_REORDER,resetSitemap),editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_DOCUMENTATION_SET,resetSitemap),editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_DELETE,handlePageDeletion),editorSocket.on(PreviewEnums.SOCKET.ON_PAGES_DELETE,handlePageDeletion),hotkeys.bindTo($scope).add({combo:"left",description:"Go to previous page",callback:function(){var prevPageId=PagesService.getPrevPageId();if(shouldPreventGoToPrevNextPage())return!1;prevPageId&&!Engine.isPageWithKeyboardActions()&&goToPage(prevPageId)}}).add({combo:"right",description:"Go to next page",callback:function(){var nextPageId=PagesService.getNextPageId();if(shouldPreventGoToPrevNextPage())return!1;nextPageId&&!Engine.isPageWithKeyboardActions()&&goToPage(nextPageId)}})}function exportImage(_,Engine,$q,$document,$window,$http){"use strict";var IMAGE_TYPES={PNG:"png",JPG:"jpg",SVG:"svg",GIF:"gif"},META_TYPES={PNG:"image/png",JPG:"image/jpeg"},optimizedImagesCache={},HEADER_UXPIN_OPTIMIZED="x-amz-meta-uxpin-optimized";function transformExportType(exportType){return exportType===IMAGE_TYPES.JPG?META_TYPES.JPG:META_TYPES.PNG}function dataURIToBlob(dataURI){for(var binStr=atob(dataURI.split(",")[1]),len=binStr.length,arr=new Uint8Array(len),dataURI=dataURI.split(",")[0].split(":")[1].split(";")[0],i=0;i<len;i++)arr[i]=binStr.charCodeAt(i);return new Blob([arr],{type:dataURI})}function blobToDataURI(blob){var deferred=$q.defer(),fileReader=new FileReader;return fileReader.onload=function(e){deferred.resolve(e.target.result)},fileReader.readAsDataURL(blob),deferred.promise}function createSvgFromHTML(htmlString){var div=$document[0].createElement("div"),svg=(div.innerHTML=htmlString.trim(),div.querySelector("svg")),htmlString=svg.querySelectorAll("[*|href]");return $q.all(_.map(htmlString,function(image){var url=image.getAttributeNS("http://www.w3.org/1999/xlink","href");return function(value){if(value)try{return new URL(value),1}catch(e){}}(url)&&!/^data:image/i.test(url)?function(url){var deferred=$q.defer(),xhr=new XMLHttpRequest;return xhr.onload=function(){var reader=new FileReader;reader.onloadend=function(){deferred.resolve(reader.result)},reader.readAsDataURL(xhr.response)},xhr.open("GET",url),xhr.responseType="blob",xhr.send(),deferred.promise}(url).then(function(base64){image.setAttributeNS("http://www.w3.org/1999/xlink","href",base64)}):$q.resolve()})).then(function(){return svg})}function scaleSvg(svg,scale){return createSvgFromHTML(svg).then(function(node){var scaledWidth=parseFloat(node.getAttribute("width"))*scale,scaledHeight=parseFloat(node.getAttribute("height"))*scale;return node.setAttribute("width",scaledWidth),node.setAttribute("height",scaledHeight),_.each(function(domElement){for(var node,treeWalker=$document[0].createTreeWalker(domElement,NodeFilter.SHOW_ELEMENT,null,null),nodes=[],IGNORED_NODE_TAGS=["pattern","g","defs","style","title","desc"];node=treeWalker.nextNode();)-1===IGNORED_NODE_TAGS.indexOf(node.tagName.toLowerCase())&&nodes.push(node);return nodes}(node),function(node){node.setAttribute("vector-effect","non-scaling-stroke")}),node.outerHTML})}function setBackground(canvas,ctx){ctx.fillStyle="#FFF",ctx.fillRect(0,0,canvas.width,canvas.height)}function exportSvgToImage(svg,scale,type){var img,scaledSvg,canvas=$document[0].createElement("canvas"),ctx=canvas.getContext("2d"),deferred=$q.defer();return type=type||META_TYPES.PNG,scaleSvg(svg,scale=scale||1).then(function(_scaledSvg){return createSvgFromHTML(scaledSvg=_scaledSvg).then(function(node){return{width:parseFloat(node.getAttribute("width")),height:parseFloat(node.getAttribute("height"))}})}).then(function(size){return canvas.width=size.width,canvas.height=size.height,createSvgFromHTML(scaledSvg)}).then(convertSvgToBase64).then(function(svgBase64){return(img=new Image).onload=function(){type===META_TYPES.JPG&&setBackground(canvas,ctx),ctx.drawImage(img,0,0),deferred.resolve(dataURIToBlob(canvas.toDataURL(type,1)))},img.onerror=function(e){deferred.reject(e)},img.src=svgBase64,deferred.promise})}function exportSvgToSvgFile(image,scale){var toBlob=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return scaleSvg(image,scale).then(createSvgFromHTML).then(convertSvgToBase64).then(function(base64){return toBlob?dataURIToBlob(base64):base64})}function getOriginalImagePath(src){return src.replace(/(\/files\/)/,"/original$1")}function addTimestampToSrc(src){return src&&-1<src.indexOf("?")?src:"".concat(src,"?timestamp=").concat(Date.now())}function isImageOptimized(src){return optimizedImagesCache[src]?Promise.resolve(!0):$http.head(addTimestampToSrc(src)).then(function(response){response="true"===response.headers()[HEADER_UXPIN_OPTIMIZED];return response&&(optimizedImagesCache[src]=!0),response}).catch(function(){return!1})}function convertSvgToBase64(svg){svg=(new XMLSerializer).serializeToString(svg).replace(/[\u00A0-\u2666]/g,function(c){return"&#".concat(c.charCodeAt(0),";")}),svg=$window.btoa(unescape(encodeURIComponent(svg)));return"data:image/svg+xml;base64,".concat(svg)}function exportImage(image,scale,exportType,originalFile){var url,responseType;return exportType!==IMAGE_TYPES.SVG&&image.type===IMAGE_TYPES.SVG?exportSvgToImage(image.rawSource,scale,transformExportType(exportType)):exportType===IMAGE_TYPES.SVG&&image.type===IMAGE_TYPES.SVG?exportSvgToSvgFile(image.rawSource,scale):exportType===IMAGE_TYPES.SVG&&"url"===image.type&&image.file.extension===IMAGE_TYPES.SVG?getFileContentFromUrl(addTimestampToSrc(image.path)).then(function(svg){return exportSvgToSvgFile(svg,scale)}):exportType!==IMAGE_TYPES.SVG&&"url"===image.type&&image.file.extension===IMAGE_TYPES.SVG?getFileContentFromUrl(addTimestampToSrc(image.path)).then(function(svg){return exportSvgToImage(svg,scale,transformExportType(exportType))}):exportType===IMAGE_TYPES.GIF&&"url"===image.type?getFileContentFromUrl(addTimestampToSrc(image.path),"blob"):exportType!==IMAGE_TYPES.SVG&&"url"===image.type?originalFile?(url=addTimestampToSrc(image.path),responseType="blob",isImageOptimized(url).then(function(optimized){return $http({method:"GET",url:optimized?getOriginalImagePath(url):url,responseType:responseType||""})}).then(function(file){return file.data})):function(image,scale,type){var deferred=$q.defer(),img=new Image,canvas=$document[0].createElement("canvas"),ctx=canvas.getContext("2d");return img.crossOrigin="Anonymous",img.onload=function(){canvas.width=img.width,canvas.height=img.height,type===META_TYPES.JPG&&setBackground(canvas,ctx),ctx.drawImage(img,0,0),compressImage(dataURIToBlob(canvas.toDataURL(type,1)),(image.width||img.width)*scale,(image.height||img.height)*scale).then(function(blob){deferred.resolve(blob)})},img.onerror=function(){deferred.reject(null)},isImageOptimized(image.path).then(function(optimized){optimized=optimized?getOriginalImagePath(image.path):image.path;img.src=addTimestampToSrc(optimized)}),deferred.promise}(image,scale,transformExportType(exportType)):exportType===IMAGE_TYPES.SVG&&"url"===image.type?function(image,scale,type){var deferred=$q.defer(),img=new Image,canvas=$document[0].createElement("canvas"),ctx=canvas.getContext("2d");return img.crossOrigin="Anonymous",img.onload=function(){var svg,imageSvg,width=(image.width||img.width)*scale,height=(image.height||img.height)*scale;canvas.width=img.width,canvas.height=img.height,ctx.drawImage(img,0,0),compressImage(dataURIToBlob(canvas.toDataURL(type,1)),width,height).then(blobToDataURI).then(function(dataURI){svg=$document[0].createElementNS("http://www.w3.org/2000/svg","svg"),imageSvg=$document[0].createElementNS("http://www.w3.org/2000/svg","image"),svg.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),svg.setAttribute("width",width),svg.setAttribute("height",height),svg.setAttribute("viewBox","0 0 ".concat(width," ").concat(height)),imageSvg.setAttribute("xlink:href",dataURI),imageSvg.setAttribute("x",0),imageSvg.setAttribute("y",0),imageSvg.setAttribute("width",width),imageSvg.setAttribute("height",height),svg.appendChild(imageSvg),deferred.resolve(dataURIToBlob(convertSvgToBase64(svg)))})},img.onerror=function(){deferred.reject(null)},img.src="".concat(image.path,"?").concat(Date.now()),deferred.promise}(image,scale,transformExportType(exportType)):void 0}function getFileContentFromUrl(url,responseType){return $http({method:"GET",url:url,responseType:responseType||""}).then(function(svg){return svg.data})}function downloadBlob(name,blob){var lnk=$document[0].createElement("a"),url=URL.createObjectURL(blob),blob=(lnk.download=name,lnk.setAttribute("target","_blank"),lnk.href=url,$document[0].createEvent("MouseEvents"));blob.initEvent("click",!0,!0),lnk.dispatchEvent(blob),$document[0].body.appendChild(lnk),$window.setTimeout(function(){URL.revokeObjectURL(url),$document[0].body.removeChild(lnk)},2e3)}function compressImage(blob,width,height){return(new ImageCompressor).compress(blob,{width:width,height:height,quality:.69})}return{base64ToUrl:function(base64){return URL.createObjectURL(dataURIToBlob(base64))},blobToDataURI:blobToDataURI,convertSvgToBase64:convertSvgToBase64,downloadBlob:downloadBlob,downloadDataURI:function(name,dataURI){downloadBlob(name,dataURIToBlob(dataURI))},export:exportImage,exportAndroid:function(image){return $q.all([exportImage(image,1,IMAGE_TYPES.PNG),exportImage(image,1.5,IMAGE_TYPES.PNG),exportImage(image,2,IMAGE_TYPES.PNG),exportImage(image,3,IMAGE_TYPES.PNG),exportImage(image,4,IMAGE_TYPES.PNG)]).then(function(images){var zip=new JSZip,mdpi=zip.folder("mdpi"),hdpi=zip.folder("hdpi"),xhdpi=zip.folder("xhdpi"),xxhdpi=zip.folder("xxhdpi"),xxxhdpi=zip.folder("xxxhdpi");return mdpi.file("".concat(image.file.name,".png"),images[0],{binary:!0}),hdpi.file("".concat(image.file.name,".png"),images[1],{binary:!0}),xhdpi.file("".concat(image.file.name,".png"),images[2],{binary:!0}),xxhdpi.file("".concat(image.file.name,".png"),images[3],{binary:!0}),xxxhdpi.file("".concat(image.file.name,".png"),images[4],{binary:!0}),zip.generateAsync({type:"blob"})})},exportIOS:function(image){return $q.all([exportImage(image,1,IMAGE_TYPES.PNG),exportImage(image,2,IMAGE_TYPES.PNG),exportImage(image,3,IMAGE_TYPES.PNG)]).then(function(images){var zip=new JSZip;return zip.file("".concat(image.file.name,".png"),images[0],{binary:!0}),zip.file("".concat(image.file.name,"@2.png"),images[1],{binary:!0}),zip.file("".concat(image.file.name,"@3.png"),images[2],{binary:!0}),zip.generateAsync({type:"blob"})})},exportSvgToSvgFile:exportSvgToSvgFile,exportSvgToImage:exportSvgToImage,exportWeb:function(image){return $q.all([exportImage(image,1,IMAGE_TYPES.PNG),exportImage(image,2,IMAGE_TYPES.PNG)]).then(function(images){var zip=new JSZip;return zip.file("".concat(image.file.name,".png"),images[0],{binary:!0}),zip.file("".concat(image.file.name,"@2.png"),images[1],{binary:!0}),zip.generateAsync({type:"blob"})})},getFileContentFromUrl:getFileContentFromUrl,IMAGE_TYPES:IMAGE_TYPES}}!function(global){"use strict";var EASING_MODES={EASING_MODES:EASING_MODES={LINEAR:"easeNone",IN:"easeIn",OUT:"easeOut",IN_OUT:"easeInOut"},EASING_CSS_MODES:{LINEAR:"linear",IN:"ease-in",OUT:"ease-out",IN_OUT:"ease-in-out"},DEFAULT_EASING_MODE:EASING_MODES.OUT,DEFAULT_DURATION_TIME:250};global.AnimationEnums=EASING_MODES}(window),function(){"use strict";window.ElementEnums={TYPE:{ARTBOARD_SKETCH_AREA:"ArtboardSketchArea",AUDIO:"Audio",BITMAP_SKETCH:"BitmapSketch",BOX:"Box",BUTTON:"Button",CANVAS:"Canvas",CHECKBOX:"Checkbox",CIRCLE:"Circle",CODE_COMPONENT:"CodeComponent",COMBINED_SHAPE:"CombinedShape",COMPONENT:"Component",ELEMENT:"Element",GROUP:"Group",GROUP_SKETCH_AREA:"GroupSketchArea",HOTSPOT:"Hotspot",HOTSPOT_SKETCH:"HotspotSketch",ICON:"Icon",IMAGE:"Image",IMAGE_SKETCH:"ImageSketch",INPUT:"Input2",INPUT_WITH_LABEL:"InputWithLabel",MASK_GROUP:"MaskGroup",MULTISTATE:"Multistate",RADIO:"Radio",RICH_TEXT_ELEMENT:"RichTextElement",SELECT_LIST:"Selectlist",SHAPE_SKETCH:"ShapeSketch",SLICE_SKETCH:"SliceSketch",SVG_ARROW:"SvgArrow",SVG_CUSTOM_ICON:"SvgCustomIcon",SVG_LINE:"SvgLine",SVG_POLYGON:"SvgPolygon",SVG_SKETCH:"SvgSketch",SYMBOL_SKETCH_AREA:"SymbolSketchArea",STORYBOOK_ELEMENT:"StorybookElement",TABLE:"Table",TAG:"Tag",TEXT:"Text",TEXT_ELEMENT:"TextElement",TEXT_SKETCH:"TextSketch",TEXTAREA:"Textarea",VIDEO:"Video",VIRTUAL_SKETCH_AREA:"VirtualSketchArea"},TYPE_CLASSES:{AUDIO:"ds-icon--font__elements-audio",BOX:"ds-icon--font__elements-box",BUTTON:"ds-icon--font__elements-button",CHECKBOX:"ds-icon--font__elements-checkbox",CIRCLE:"ds-icon--font__elements-circle",COMPONENT:"ds-icon--font__elements-symbol",CODE_COMPONENT:"ds-icon--font__elements-code-component",GENERIC:"ds-icon--font__elements-generic",GROUP:"ds-icon--font__folder-closed",HOTSPOT:"ds-icon--font__elements-hotspot",IMAGE:"ds-icon--font__elements-image",IMAGE_SKETCH:"ds-icon--font__elements-image",INPUT:"ds-icon--font__elements-input",MASK_GROUP:"ds-icon--font__action-mask",MULTISTATE:"ds-icon--font__elements-multistates",RADIO:"ds-icon--font__elements-radio",RICH_TEXT_ELEMENT:"ds-icon--font__elements-text-element",SELECT_LIST:"ds-icon--font__elements-select-list",SLICE_SKETCH:"ds-icon--font__elements-slice",STORYBOOK_ELEMENT:"ds-icon--font__elements-storybook",SVG_PATH:"ds-icon--font__elements-path",TABLE:"ds-icon--font__elements-table",TEXT:"ds-icon--font__elements-text-element",TEXTAREA:"ds-icon--font__elements-textarea",VIDEO:"ds-icon--font__elements-video"}}}(),function(){"use strict";window.keysEnums={KEY_CODES:{ENTER:13,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40}}}(),function(){"use strict";window.LibraryEnums={ITEM_TYPE:{ASSET:"asset",COLOR:"color",FONTSTYLE:"fontstyle",GRADIENT:"gradient",SYMBOL:"symbol"}}}(),function(){"use strict";window.PreviewEnums={PIN_RADIUS:14,COMMENT_FORM_DELTA_X:40,COMMENT_FORM_DELTA_Y:-24,SHOW_RESOLVED_TIMEOUT:5e3,UNDO_TIMEOUT:6e3,INSPECTOR_SOURCE_CHANGED:"inspectorSourceChanged",INSPECTOR_TARGET_CHANGED:"inspectorTargetChanged",SUBMIT_COMMENT:"submitComment",ADD_COMMENT:"addComment",COMMENT_POINT_CLASS:"comment-point",ADDING_COMMENT:"addingComment",SELECT_COMMENT:"selectComment",RESOLVE_COMMENT:"resolveComment",DELETING_COMMENT:"deletingComment",DELETE_COMMENT:"deleteComment",REPLYING_COMMENT:"replyingComment",DRAGGING_COMMENT:"draggingComment",SORT_COMMENTS:"sortComments",LOADING_COMMENTS:"loadingComments",ON_CHANGE_ELEMENT_VISIBILITY:"onChangeElementVisibility",ON_CHANGE_PAGE:"onChangePage",ON_CHANGE_ZEN_MODE:"onChangeZenMode",ON_CHANGE_RESPONSIVE_MODE:"onChangeResponsiveMode",LAYER_SELECTED:"onLayerSelected",LAYER_HOVERED:"onLayerHovered",ON_PAGE_SCROLL:"onPageScroll",NAVIGATE_HISTORY_BACK:"navigateHistoryBack",NAVIGATE_TO_PAGE:"navigateToPage",ON_CONTENT_LOADED:"onContentLoaded",ON_PAGE_LOADED:"onPageLoaded",ON_PAGE_INITIALIZED:"onPageInitialized",SPEC_MODE_ELEMENT_STATE_CHANGED:"specModeElementStateChanged",SPEC_MODE_REFRESH_ELEMENT_SELECTION:"specModeRefreshElementSelection",SPEC_MODE_RESET_ELEMENT_SELECTION:"specModeResetElementSelection",ON_SHOW_COMMENTS_RESOLVED_SETTINGS_CHANGED:"onShowCommentsResolvedSettingsChanged",ON_MODE_CHANGED:"onModeChanged",ON_PREVIEW_MODE_CHANGED:"onPreviewModeChanged",ON_PANEL_CHANGED:"onPanelChanged",ON_PANEL_TOGGLE_EXPAND:"onPanelToggleExpand",LOADING:"loading",MEDIA_ACCESS:"mediaAccess",SET_ANONYMOUS_NAME:"setAnonymousName",ANONYMOUS_ADD_COMMENT:"anonymousAddComment",ON_ASSIGNMENT_LIST_OPEN:"onOpenAssignmentList",ON_CHANGE_NOTIFICATIONS:"onChangeNotifications",ON_NOTIFICATIONS_UPDATE:"onNotificationsUpdate",ON_SHOW_MENTIONS_LIST:"onShowMentionsList",SELECT_MENTIONS_LIST:"selectMentionsList",SEARCH_MENTIONS_LIST:"searchMentionsList",ON_SELECT_MENTIONS_LIST:"onSelectMentionsList",ON_HIDE_MENTIONS_LIST:"onHideMentionsList",ON_UPDATE_MENTIONS_LIST_POSITION:"onUpdateMentionsListPosition",ON_COMMENT_TYPE_UPDATE:"onCommentTypeUpdate",ON_COMMENT_EDIT:"onCommentEdit",ON_COMMENT_EDIT_EXIT:"onCommentEditExit",ON_COMMENT_CONTENT_UPDATE:"onCommentContentUpdate",ON_COMMENT_ASSIGNED_USER_UPDATE:"onCommentAssignedUserUpdate",ON_APP_VIEW_PROMO_CLOSE:"appViewPromoClose",ON_COMMENTS_FILTER_CHANGE:"onCommentsFilterChange",ON_ZOOM_CHANGE:"onZoomChange",ON_ZOOM_UPDATE:"onZoomUpdate",ON_ZOOM_IN:"zoomIn",ON_ZOOM_OUT:"zoomOut",ON_ZOOM_RESET:"zoomReset",APP_VIEW_PROMO_VIEWED:"appViewPromoViewed",ON_STYLEGUIDE_DATA_LOAD_STARTED:"onStyleGuideDataLoadStarted",ON_STYLEGUIDE_DATA_LOAD_FINISHED:"onStyleGuideDataLoadFinished",COMMENT_NOTIFY_ALL:2,COMMENT_NOTIFY_NONE:0,COMMENT_NOTIFY_CHOSEN:1,FEATURES_AVAILABILITY:"featuresAvailability",DOCUMENTATION_EXISTS:"documentationExists",PAGE_ANIMATION_START:"pageAnimationStart",PAGE_ANIMATION_INIT:"pageAnimationInit",REFRESH_PAGE_WITH_COMPONENT:"refreshPageWithComponent",ZOOM_INITIALIZED:"zoomInitialized",MODES_FLAGS:{ALL:"cmhidv",COMMENTS:"c",DEVICE:"v",DOCUMENTATION:"d",INTERACTIONS:"i",SITEMAP:"m",SPECIFICATION:"h",MIRRORING:"r",FULLSCREEN:"f",FULLSTORY:"s"},MEDIA_ACCESS_TYPE:{REQUEST:"request",ALLOWED:"allowed",DENIED:"denied",HIDE:"hide"},SOCKET:{ON_ACCOUNT_TYPEKIT_KIT_UPDATED:"accountTypekitKitUpdated",ON_BREAKPOINT_UPDATE:"editVersion",ON_BREAKPOINT_ADD:"addVersion",ON_BREAKPOINT_DELETE:"deleteVersion",ON_CHANGE_PROPERTIES:"changeProperties",ON_COMMENT_ASSIGNED_USER_UPDATE:"commentAssignedUserUpdate",ON_COMMENT_CONTENT_UPDATE:"commentContentUpdate",ON_COMMENT_CREATE:"createComment",ON_COMMENT_DELETE:"deleteComment",ON_COMMENT_TYPE_UPDATE:"commentTypeUpdate",ON_COMMENT_UPDATE:"updateComment",ON_COMPONENTS_UPDATE:"componentsUpdate",ON_DELETE_COMPONENT:"deleteComponent",ON_PAGE_CREATE:"addNewPage",ON_PAGE_DELETE:"deletePage",ON_PAGES_DELETE:"deletePages",ON_PAGE_DOCUMENTATION_SET:"pageDocumentationSet",ON_PAGE_REORDER:"savePagesOrder",ON_PAGE_SAVED:"pageSaved",ON_PAGE_UPDATE:"updatePage",ON_CANVAS_SIZE_CHANGE:"onCanvasSizeChange",ON_REFRESH_VARIABLES:"refreshVariables",ON_PROJECT_SETTINGS_CHANGE:"changeProjectSettings",ON_ACTIVATE_ELEMENTS:"activateElements",WILD_CART:"*"},KM_EVENTS:{DELETE_UNDONE:"Preview - comments - delete undone",VIEW_MODE_SET:"Preview - Comments - View mode set",EDITED_COMMENTS:"Preview - Comments - Edited comments",COMMENT_ADDED:"Preview - Comments - Comment added",COMMENT_TYPE_CHANGED:"Preview - Comments - Comment type changed",NOTIFICATION_CHANGED:"Preview - Comments - Notification changed"},APPROVALS:{LABEL:{APPROVE:"Approve",REJECT:"Reject"},STATUS:{APPROVED:"approved",REJECTED:"rejected",PENDING:"pending"}},UPDATE_INFO:{LS:{SEEN:"updateInfoSeen"},MODAL_CONTENT_DIR:"/scripts/modules/core/directives/updateInfo/modal-content"},BROWSERS:{CHROME:"chrome",SAFARI:"safari"},PAGE_SIZE_TYPE:{UNSETTLED:"0",BREAKPOINTS_ENABLED:"1",DPS_ENABLED:"2"},FIT_STRATEGIES:{FIT_TO_SCREEN:"fit-to-screen",FIT_TO_WIDTH:"fit-to-width"}}}(),function(global){"use strict";var ToastifyEnums={SETTINGS:{hideProgressBar:!0,autoClose:!1,transition:uxpinSharedComponents.Toastify.cssTransition({enter:"toastify-opacity-show",exit:"toastify-opacity-hide",duration:100})},STYLES:{BOTTOM_CENTER_WITH_ICON:{position:uxpinSharedComponents.Toastify.toast.POSITION.BOTTOM_CENTER,className:"ds-icon--font__exclamation-mark toast-icon"},TOP_RIGHT:{position:uxpinSharedComponents.Toastify.toast.POSITION.TOP_RIGHT}},CLASSES:{INCREASED_PADDING:"increased-padding",WIDE:"toast-wide"}};global.ToastifyEnums=ToastifyEnums}(window),function(){"use strict";window.UpdateInfoModals={SPEC_MODE_ENTERPRISE:{content:"spec-mode-enterprise.html",start:"2016-10-11T00:00:00",end:"2016-10-17T23:59:59",type:"all",plan:"enterprise",loggedInOnly:!0},SPEC_MODE:{content:"spec-mode.html",start:"2016-10-18T00:00:00",end:"2016-10-18T23:59:59",type:"all",plan:"enterprise",loggedInOnly:!0}}}(),function(){"use strict";window.specModeEnums={SPEC_TABS:{PROPERTIES:"properties",METADATA:"metadata",INTERACTIONS:"interactions"}}}(),function(global){"use strict";global.ElementHelper={getAncestors:function(element){for(var ancestors=[];element.parent;)ancestors.push(element.parent),element=element.parent;return ancestors},isInMultistate:function(element){for(var isInMultistate=!1;element.parent;){if(element.isMultistate()){isInMultistate=!0;break}element=element.parent}return isInMultistate},getRootMultistate:function(element){for(var root=null;element.parent;)element.isMultistate()&&(root=element),element=element.parent;return root}}}(window),function(global){"use strict";var FormEvents={wrapperSelector:".preview-container",dispatchFormEvent:function(e,additionalData){if(LIVE_SHARE&&LIVE_SHARE.eventDispatcher)try{LIVE_SHARE.eventDispatcher.handleEvent(e,_.extend({selector:this.getElementUniqueSelector(e.target),time:+new Date},additionalData||{}))}catch(e){console.error(e)}},getElementUniqueSelector:function(el){var path=[];do{if(el.id){/^el[0-9]+\_/.test(el.id)?path.unshift("[id^=el".concat(this.getIdByElement(el),"_]")):path.unshift("#".concat(el.id));break}}while(path.unshift(el.nodeName.toLowerCase()+(el.className?".".concat(el.className.replace(" ",".")):"")),"html"!==el.nodeName.toLowerCase()&&(el=el.parentNode));return path.join(">")}};LIVE_SHARE&&(FormEvents=_.extend(LIVE_SHARE.FormEvents,FormEvents)),global.FormEvents=FormEvents}(window),function(global){"use strict";var Interactions={active_node_id:"canvas-wrapper",scrolls:[],scrollable_els:null,loading_el:null,getSelector:function(elementId,trigger,event){return!elementId||"keydown"===event.type&&"canvas"===elementId?"window":"hover"===trigger&&"mouseleave"===event.type?"#".concat(this.active_node_id):"[data-id='".concat(elementId,"']")},handleEvent:function(elementId,trigger,event){if("load"!==event&&"scroll"!==event.type){if(LIVE_SHARE&&LIVE_SHARE.eventDispatcher){elementId=this.getSelector(elementId,trigger,event);"hover"===trigger&&"mouseleave"===event.type&&(event=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:window}));try{LIVE_SHARE.eventDispatcher.handleEvent(event,{selector:elementId})}catch(err){return void console.error(err)}}trigger=event.target?event.target.nodeName.toLowerCase():null;if(!(event.keyCode&&-1<["input","textarea","select"].indexOf(trigger))){if("click"===event.type){if("label"===trigger)return;if("input"===trigger&&-1<["checkbox","radio"].indexOf(event.target.getAttribute("type").toLowerCase()))return}_.isFunction(event.preventDefault)&&event.preventDefault()}}}};global.MD5=md5,global.Interactions=_.extend(Interactions,FormEvents)}(window),function(global){"use strict";FADE_IN_DURATION=.1,FADE_OUT_DURATION=.15,isHighlighted=!(HIGHLIGHT_DURATION=.45),getParentPosition=function(element){for(var getParent=function(el){return el.offsetParent||el.parentNode},parent=getParent(element);parent&&parent!==window.document;){if("fixed"===window.getComputedStyle(parent).position)return"fixed";parent=getParent(parent)}return"absolute"},getInteractiveDomElementTransform=function(interactive){var canvasWrapper=document.getElementById("canvas-wrapper"),offset=interactive._getGroupScrollValues(interactive.parent),isAncestorFixed=interactive.isAncestorFixed()||interactive.fixed,canvasOffset=interactive.Page.canvas.scrollOffset,elX=interactive.x,elY=interactive.y,autoLayoutAncestors=function(interactive){for(var parent=interactive.parent,autoLayoutElements=[];parent;)parent.autoLayout&&autoLayoutElements.push(parent),parent=parent.parent;return autoLayoutElements}(interactive),autoLayoutAncestors=(autoLayoutAncestors.length&&(elX=autoLayoutAncestors.reduce(function(res,ancestor){return res-ancestor.x},elX),elY=autoLayoutAncestors.reduce(function(res,ancestor){return res-ancestor.y},elY)),isAncestorFixed?elX+offset.x+canvasOffset.x-canvasWrapper.scrollLeft:elX+offset.x),isAncestorFixed=isAncestorFixed?elY+offset.y+canvasOffset.y-canvasWrapper.scrollTop:elY+offset.y,canvasOffset="translate(".concat(autoLayoutAncestors,"px, ").concat(isAncestorFixed,"px) rotate(").concat(interactive.angle,"deg)");return canvasOffset=function(interactive){interactive=interactive.parent;return interactive&&!interactive.isCanvas()&&interactive.isGroup()&&interactive.isClip}(interactive)||interactive.parent.isMultistate()?"translate(".concat(elX-interactive.parent.x,"px, ").concat(elY-interactive.parent.y,"px) rotate(").concat(interactive.angle,"deg)"):canvasOffset},removeHighlight=function(container,companion){isHighlighted=!1,container.removeChild(companion)},isActionInActiveMultistate=function(element){var rootMultistate,rootMultistateActiveStateChildren;return!ElementHelper.isInMultistate(element)||(rootMultistateActiveStateChildren=(rootMultistate=ElementHelper.getRootMultistate(element)).getActiveStateChildrenIds(),rootMultistate.id===element.id)||_.includes(rootMultistateActiveStateChildren,element.id)};var _animation,FADE_IN_DURATION,FADE_OUT_DURATION,HIGHLIGHT_DURATION,isHighlighted,getParentPosition,getInteractiveDomElementTransform,removeHighlight,isActionInActiveMultistate,Preview={mFixedElems:null,onScroll:null,highlightInteractive:function(page){highlight(page)},onLoadPage:function(container,cb){!function(container,cb){var margin;"W"===ApplicationConfiguration.project.type||ApplicationConfiguration.isDesignSystem||(_.forEach(container.querySelectorAll("textarea, input"),function(el){el.setAttribute("readonly","readonly"),el.removeAttribute("placeholder")}),_.forEach(container.querySelectorAll("textarea"),function(el){margin=el.classList.contains("type-text")||"quote"===el.id?15:el.classList.contains("block")?13:0,autoGrow(el,{margin:margin})}),setTimeout(function(){cb(container.querySelector("div").getBoundingClientRect())},300))}(container,cb),initFixed.call(this),parseLinks(document.querySelector("section.preview-container").querySelectorAll("a")),parsePageLinks()},onChangePage:function(){var i;if(!function(){if(Interactions.timeouts)for(;Interactions.timeouts.length;)clearTimeout(Interactions.timeouts.pop())}(),isHighlighted=!1,Interactions.loading_el=null,this.onScroll&&Interactions.scrollable_els){for(i=0;i<Interactions.scrollable_els.length;i++)Interactions.scrollable_els[i].removeEventListener("scroll",this.onScroll);this.onScroll=null}if(Interactions.scrolls)for(;Interactions.scrolls.length;)for(i=0;i<Interactions.scrollable_els.length;i++)Interactions.scrollable_els[i].removeEventListener("scroll",Interactions.scrolls.pop())},gotoPage:function(pageUrl,animation){pageUrl.match(/^http/)?window.location=pageUrl:(pageUrl=parseInt(pageUrl.replace(/.*\/(\d+)c?d?m?$/,"$1")),angular.element(document.getElementById("page-controller")).scope().gotoPage(pageUrl))},setAnimation:function(animation){_animation=animation},getAnimation:function(){return _animation}};function parseLinks(hrefs){var pages;_.forEach(hrefs,function(href){var pageId;(pages=/\/([\d]+)c?d?m?$/g.exec(href.href))&&pages.length&&(href.onclick=(pageId=pages[1],function(e){e.preventDefault(),Preview.gotoPage(pageId)}))})}function getElementsWithInteractions(elements,elementsWithInteractions){var interactives=elementsWithInteractions||[];return _.each(elements,function(element){element.isVisible()&&!_.isEmpty(element.getAllActions())&&isActionInActiveMultistate(element)&&interactives.push(element),_.isEmpty(element.children)||!element.isVisible()&&!element.isCanvas()||getElementsWithInteractions(element.children,interactives)}),interactives}function highlight(page){var companion;isHighlighted||(page=getElementsWithInteractions([page.getCanvas()]),_.isEmpty(page))||(isHighlighted=!0,_.forEach(page,function(interactive){var newElement,element=interactive.view.domElement;(companion=document.createElement("DIV")).className="interactive highlighted companion",function(companion,interactive){var interactiveDomElement=interactive.view.domElement,interactiveElementComputedStyle=window.getComputedStyle(interactiveDomElement),border=parseInt(interactiveElementComputedStyle.borderWidth),width="canvas"===interactive.id?interactiveElementComputedStyle.width:"".concat(interactive.width,"px"),height="canvas"===interactive.id?interactiveElementComputedStyle.height:"".concat(interactive.height,"px"),interactive="none"===interactiveElementComputedStyle.transform?getInteractiveDomElementTransform(interactive):interactiveElementComputedStyle.transform;companion.style.transform=interactive,companion.style.transformOrigin="0 0 0",companion.style.width=width,companion.style.height=height,companion.style.position="fixed"===interactiveElementComputedStyle.position?"fixed":getParentPosition(interactiveDomElement),border&&(companion.style.width="".concat(parseInt(interactiveElementComputedStyle.width,10)+2*border,"px"),companion.style.height="".concat(parseInt(interactiveElementComputedStyle.height,10)+2*border,"px"))}(companion,interactive),function(container,companion){TweenLite.to(companion,FADE_IN_DURATION,{className:"+=visible-highlighted"}),TweenLite.to(companion,FADE_OUT_DURATION,{className:"-=visible-highlighted",delay:HIGHLIGHT_DURATION,onComplete:removeHighlight.bind(this,container,companion)})}(element.parentElement,companion),interactive=element.parentElement,newElement=companion,element=element,interactive.lastChild===element.nextSibling?interactive.appendChild(newElement):interactive.insertBefore(newElement,element.nextSibling)}))}function initFixed(){if(this.mFixedElems=document.querySelectorAll(".FixedPos"),_.forEach(this.mFixedElems,function(fixed){fixed.originalTop=fixed.style.top,fixed.originalLeft=fixed.style.left}),!this.onScroll&&Interactions.scrollable_els){this.onScroll=function(e){for(var scrollTop=0,scrollLeft=0,i=0,l=Interactions.scrollable_els.length;i<l;i++)scrollTop+=Interactions.scrollable_els[i].scrollTop,scrollLeft+=Interactions.scrollable_els[i].scrollLeft;_.forEach(this.mFixedElems,function(fixed){fixed.style.top="".concat(scrollTop+parseInt(fixed.originalTop),"px"),fixed.style.left="".concat(scrollLeft+parseInt(fixed.originalLeft),"px")})}.bind(this);for(var i=0,l=Interactions.scrollable_els.length;i<l;i++)Interactions.scrollable_els[i].addEventListener("scroll",this.onScroll)}}function parsePageLinks(){var arr,hrefs=document.querySelectorAll('[onclick^="location"]');_.forEach(hrefs,function(href){var pageId;angular.isFunction(href.onclick)&&(arr=/\/([\d]+)c?d?m?\'/g.exec(href.onclick.toString()))&&1<arr.length&&(href.onclick=(pageId=arr[1],function(e){e.preventDefault(),Preview.gotoPage(pageId)}))})}function autoGrow(el,options){options.minHeight=0,options.maxHeight=0;var style=window.getComputedStyle(el),dummy=document.createElement("div"),style=(dummy.style.overflowX="hidden",dummy.style.position="absolute",dummy.style.top=0,dummy.style.left="-9999px",dummy.style.whiteSpace="pre-wrap",dummy.style.fontSize=style.fontSize,dummy.style.fontFamily=style.fontFamily,dummy.style.fontStyle=style.fontStyle,dummy.style.fontVariant=style.fontVariant,dummy.style.fontWeight=style.fontWeight,dummy.style.width=style.width,dummy.style.lineHeight=style.lineHeight,dummy.style.padding=style.padding,document.body.appendChild(dummy),"".concat(el.value.replace(/\n|\r\n/g,"<br>X"),"X"));dummy&&dummy.innerHTML.toLowerCase()!==style.toLowerCase()&&(dummy.innerHTML=style,style=dummy.getBoundingClientRect().height+options.margin,dummy=Math.max(options.minHeight,style),options.maxHeight&&dummy>options.maxHeight&&(dummy=options.maxHeight),el.clientHeight!==dummy)&&(el.style.height="".concat(dummy,"px"))}global.Preview=Preview}(window),function(global){"use strict";global.SocketServiceHelper=function(socketUrl,$rootScope,wildcard){var socket,emit;return"undefined"==typeof io?{on:angular.noop,emit:angular.noop}:(socket=io.connect(socketUrl,{reconnectionAttempts:/\.test$/.test(global.location.host)?1:50,reconnectionDelay:2e3,reconnectionDelayMax:1e4,randomizationFactor:.5,autoConnect:!global.ApplicationConfiguration.enablePerformanceTestsMode}),wildcard&&(socketUrl=io.Manager,emit=socketUrl.prototype.emit,function(socket,next){socket.onevent!==onevent&&(socket.onevent=onevent),next&&next()}(socket)),{on:function(eventName,callback){socket.on(eventName,function(){var args=arguments;$rootScope.$apply(function(){angular.isFunction(callback)&&callback.apply(socket,args)})})},emit:function(eventName,data,callback){socket.emit(eventName,data,function(){var args=arguments;$rootScope.$apply(function(){angular.isFunction(callback)&&callback.apply(socket,args)})})}});function onevent(packet){var args=packet.data||[];return null!=packet.id&&args.push(this.ack(packet.id)),emit.call(this,"*",packet),emit.apply(this,args)}}}(window),function(global){"use strict";global.ApplicationConfiguration=_.defaults(global.ApplicationConfiguration||{},{applicationModuleName:"uxpin-preview",applicationModuleVendorDependencies:["restangular","ui.router","pascalprecht.translate","LocalStorageModule","ngclipboard","custom.ui.bootstrap","youtube-embed","ngSanitize","ngCookies","cfp.hotkeys","duScroll"],registerModule:function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module("uxpin-preview").requires.push(moduleName)},project:{hash:0}})}(window),function(angular){"use strict";var SCREENCASTIFY_SCRIPTS=["https://www.screencastify.com/libs-api/castify-api.js","https://static.opentok.com/v2/js/opentok.min.js"];function loadScript(scriptUrl,onScriptLoaded,onScriptFailed){var scriptElement=document.createElement("script");scriptElement.type="text/javascript",scriptElement.onload=onScriptLoaded,scriptElement.onerror=function(){onScriptFailed(),onScriptLoaded()},document.head.appendChild(scriptElement),scriptElement.src=scriptUrl}angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies,function($rootScopeProvider){$rootScopeProvider.digestTtl(50)}),angular.element(document).ready(function(){var configuration=window.ApplicationConfiguration;if("#_=_"===window.location.hash&&(window.location.hash="#"),configuration.project)return angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName]);var getAndRemoveFromCache=window.ajaxCache.getAndRemoveFromCache;getAndRemoveFromCache("/data/".concat(window.getProjectHash()).concat(window.location.search)).then(function(data){var project,loadedScriptsCount;if(!(data&&data.protected&&data.page))return configuration.permissions=data.permissions,configuration.project=data.project,configuration.userData=data.user,delete configuration.project.is_owner,delete configuration.project.is_in_projects_account,function(project,appTitle){var sanitizeName;project.name&&project.iteration_name&&project.id_original_project?(sanitizeName=project.iteration_name.replace(/\{\{/g,"").replace(/\}\}/g,""),document.title="".concat(project.name," | Iteration: ").concat(sanitizeName," - ").concat(appTitle)):document.title="".concat(project.name," - ").concat(appTitle)}(configuration.project,configuration.appTitle),function(project){return project&&project.features&&project.features.live_share&&!project.features.user_testing}(project=data.project)?loadScript("https://static.opentok.com/v2/js/opentok.min.js",function(){angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])},function(){}):function(project){return project&&project.features&&project.features.user_testing}(project)?(loadedScriptsCount=0,void SCREENCASTIFY_SCRIPTS.forEach(function(scriptUrl){loadScript(scriptUrl,onScriptLoaded,onScriptFailed)})):angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName]);function onScriptLoaded(){(loadedScriptsCount+=1)===SCREENCASTIFY_SCRIPTS.length&&angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}function onScriptFailed(){console.error("Failed loading Usability Testing script"),window._failedLoadingUserTestingScript=!0}!function(data){var head=(data=data.page).match(/<head>(.|\n)*<\/head>/)[0],data=data.match(/<body>(.|\n)*<\/body>/)[0],scriptElement=((head=head.match(/src="(.*?\.js)"/))&&1<head.length&&(head=head[1],(scriptElement=document.createElement("script")).type="text/javascript",document.head.appendChild(scriptElement),scriptElement.src=head),data.match(/<script.*?>((.|\n)*?)<\/script>/g));scriptElement&&scriptElement.length?(data=data.replace(/<script.*?>((.|\n)*?)<\/script>/g,""),document.body.innerHTML=data,scriptElement.forEach(function(scriptTag){var newScript,scriptTag=scriptTag.match(/<script.*?>((.|\n)*?)<\/script>/);scriptTag&&1<scriptTag.length&&(newScript=document.createElement("script"),scriptTag=document.createTextNode(scriptTag[1]),newScript.appendChild(scriptTag),document.body.appendChild(newScript))})):document.body.innerHTML=data,(head=document.getElementById("location"))&&(head.value=window.location.href)}(data)})})}(window.angular),ApplicationConfiguration.registerModule("comments"),ApplicationConfiguration.registerModule("designSystem"),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("documentation"),ApplicationConfiguration.registerModule("experiment"),ApplicationConfiguration.registerModule("specification"),ApplicationConfiguration.registerModule("styleguide"),function(){"use strict";var VALUES={TEAM:"team",PUBLIC:"public"};angular.module("comments").constant("COMMENT_TYPES",{VALUES:VALUES,BASIC_OPTIONS:[{value:VALUES.PUBLIC,text:"Public comment",className:"comment-public"}],ALL_OPTIONS:[{value:VALUES.PUBLIC,text:"Public comment",className:"comment-public"},{value:VALUES.TEAM,text:"Team comment",className:"comment-team"}],STORAGE_KEYS:{LAST_USED_COMMENT_TYPE:"lastUsedCommentType"}})}(),function(){"use strict";var TYPE_VALUES={PUBLIC_COMMENTS:"publicComments",TEAM_COMMENTS:"teamComments"};angular.module("comments").constant("COMMENTS_FILTER",{TYPE_VALUES:TYPE_VALUES,ALL_TYPE_OPTIONS:[{value:TYPE_VALUES.PUBLIC_COMMENTS,text:"Public",hint:"P",className:"comment-public",shortcut:["shift","alt","p"]},{value:TYPE_VALUES.TEAM_COMMENTS,text:"Team",hint:"T",className:"comment-team",shortcut:["shift","alt","t"]}],STORAGE_KEYS:{TYPE_FILTER:"commentTypeFilter"}})}(),function(){"use strict";function CommentsFiltersCtrl(AssignHelper,UsersService,CommentsSettings,PreviewNavigation){this.isAssignmentActive=AssignHelper.isAssignmentActive(),this.isCommentTypeActive=CommentsSettings.commentTypesActive(),this.isAnonymous=UsersService.isAnonymous(),this.isVisible=function(){return PreviewNavigation.isPanelVisible(PreviewNavigation.PREVIEW_PANELS.FILTERS)}}angular.module("comments").controller("CommentsFiltersCtrl",CommentsFiltersCtrl),CommentsFiltersCtrl.$inject=["AssignHelper","UsersService","CommentsSettings","PreviewNavigation"]}(),function(){"use strict";function CommentsNotesCtrl(_,$rootScope,$scope,$sce,AssignHelper,CommentsService,CommentsFilter,PagesService,UsersService,BreakpointsService,ProjectsService,Settings,ScrollService,PreviewNavigation,CommentsListApi,CommentsTreeApi){var commentIdsInPage,pagesBreakpoints,breakpoints,onComments,onCommentsFilterChange,onCommentTypeUpdate,onCommentAssignedUserUpdate,onLoadingComments,onSelectComment,onShowCommentsResolvedChanged,onAssignmentListOpen,onPageLoaded,MIN_ITEM_HEIGHT={LOGGED:120,ANONYMOUS:70},vm=this;function handlePanelChange(){vm.isVisible()&&!vm.areCommentsInitialized&&(vm.areCommentsInitialized=!0,getComments().then(initCommentsEvents))}function initCommentsEvents(){onComments=$scope.$watchCollection("vm.comments",handleCommentsChange),onCommentsFilterChange=$rootScope.$on(PreviewEnums.ON_COMMENTS_FILTER_CHANGE,update),onCommentTypeUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_TYPE_UPDATE,update),onCommentAssignedUserUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_ASSIGNED_USER_UPDATE,update),onLoadingComments=$rootScope.$on(PreviewEnums.LOADING_COMMENTS,handleLoadingComments),onSelectComment=$rootScope.$on(PreviewEnums.SELECT_COMMENT,handleSelectComment),onAssignmentListOpen=$rootScope.$on(PreviewEnums.ON_ASSIGNMENT_LIST_OPEN,handleAssignmentOpen),onPageLoaded=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,handlePageLoaded),onShowCommentsResolvedChanged=$rootScope.$on(PreviewEnums.ON_SHOW_COMMENTS_RESOLVED_SETTINGS_CHANGED,handleShowResolvedChange),$scope.$on("$destroy",destroyCommentsEvents)}function destroyCommentsEvents(){onLoadingComments(),onSelectComment(),onComments(),onShowCommentsResolvedChanged(),onCommentsFilterChange(),onCommentTypeUpdate(),onCommentAssignedUserUpdate(),onAssignmentListOpen(),onPageLoaded()}function handleCommentsChange(newValue){newValue&&update()}function handleLoadingComments(event,value){vm.showCurrentPageOnly&&(vm.loading=value)}function handleSelectComment(event,id,type){id&&"canvas"===type&&(vm.showCurrentPageOnly?CommentsListApi:CommentsTreeApi).scrollTo(vm.commentsListId,id)}function handleShowResolvedChange(event,value){vm.showResolved=value,update()}function handleAssignmentOpen(event,elementId,type){"panel"===type&&ScrollService.scrollToElement(vm.commentsListId,elementId)}function handlePageLoaded(){vm.showCurrentPageOnly&&CommentsListApi.reloadList(vm.commentsListId)}function getPageName(id){id=PagesService.pagesMap[id];return(null===id.version_of?id:PagesService.pagesMap[id.version_of]).name}function getBreakpointName(id){return $sce.trustAsHtml(BreakpointsService.breakpointsMap[id].name)}function testSearch(comment){var childrenComments;return!vm.searchFor||(childrenComments=CommentsService.commentsTree[comment._id]||[],childrenComments=[].concat(_toConsumableArray(childrenComments),[comment._id]).find(function(childId){childId=CommentsService.commentsMap[childId];return CommentsFilter.hasMatch({comment:childId.comment,userId:childId.user.id,userName:childId.user.is_anonymous?childId.user.name:null,assignedUserId:childId.assignedUserId,pageName:getPageName(childId.id_page),showCurrentPageOnly:vm.showCurrentPageOnly,searchString:vm.searchFor})}),vm.showCurrentPageOnly||(comment=PagesService.pagesMap[comment.id_page].version_of||comment.id_page,childrenComments&&CommentsTreeApi.isPageHidden(vm.commentsListId,comment)&&CommentsTreeApi.togglePage(vm.commentsListId,comment)),childrenComments)}function canDisplayComment(comment){return!comment._parent_comment&&function(comment){return vm.showResolved||!comment.resolved.is}(comment)&&function(comment){return vm.isDocument||!vm.showCurrentPageOnly||PagesService.pagesMap[comment.id_page].version_type===PagesService.currentBreakpointId}(comment)&&testSearch(comment)}function update(){var page;vm.showCurrentPageOnly?(vm.list=[],_.forEach(vm.comments,function(comment){CommentsFilter.canDisplayComment(comment)&&canDisplayComment(comment)&&vm.list.push(comment)})):(vm.tree=[],_.forEach(pagesBreakpoints,function(breakpointIds,pageId){page=function(pageId,breakpointIds){var breakpoint,page={id:pageId,name:getPageName(pageId),breakpoints:[]};return _.forEach(breakpointIds,function(breakpointPageId,breakpointId){breakpoint=function(breakpointId,pageId){var comment,breakpoint={id:breakpointId,name:getBreakpointName(breakpointId),comments:[]};return _.forEach(commentIdsInPage[pageId],function(commentId){comment=CommentsService.commentsMap[commentId],CommentsFilter.canDisplayComment(comment)&&canDisplayComment(comment)&&breakpoint.comments.push(comment)}),breakpoint}(breakpointId,breakpointPageId),_.isEmpty(breakpoint.comments)||page.breakpoints.push(breakpoint)}),page}(pageId,breakpointIds),_.isEmpty(page.breakpoints)||vm.tree.push(page)}))}function getComments(){return vm.loading=!0,CommentsService.getComments(vm.showCurrentPageOnly).then(function(comments){vm.loading=!1,vm.comments=comments,commentIdsInPage=CommentsService.commentIdsInPage,pagesBreakpoints=PagesService.pagesBreakpoints,breakpoints=PagesService.breakpointIds})}vm.commentsListId="comments-list",vm.showResolved=Settings.showResolvedComments,vm.isDocument=ProjectsService.isDocument(),vm.showCurrentPageOnly=Settings.showCurrentPageOnly||vm.isDocument,vm.searchFor=CommentsService.searchFor,vm.areCommentsInitialized=!1,vm.loading=!0,vm.tree=[],vm.list=[],vm.minItemHeight=0,vm.isVisible=function(){return PreviewNavigation.isPanelVisible(PreviewNavigation.PREVIEW_PANELS.COMMENTS)},vm.addNewComment=function(){PreviewNavigation.isModeActive(PreviewNavigation.PREVIEW_MODES.COMMENT)||PreviewNavigation.setActiveMode(PreviewNavigation.PREVIEW_MODES.COMMENT)},vm.onShowCurrentPageOnly=function(){getComments()},vm.getPageName=getPageName,vm.getBreakpointName=getBreakpointName,vm.showBreakpoints=function(){return 1<breakpoints.length},vm.handleSearch=function(searchText){CommentsService.searchFor=searchText,$rootScope.$emit("searchComments"),update()},vm.minItemHeight=UsersService.isAnonymous()?MIN_ITEM_HEIGHT.ANONYMOUS:MIN_ITEM_HEIGHT.LOGGED,ProjectsService=$rootScope.$on(PreviewEnums.ON_PANEL_CHANGED,handlePanelChange),$scope.$on("$destroy",ProjectsService)}angular.module("comments").controller("CommentsNotesCtrl",CommentsNotesCtrl),CommentsNotesCtrl.$inject=["_","$rootScope","$scope","$sce","AssignHelper","CommentsService","CommentsFilter","PagesService","UsersService","BreakpointsService","ProjectsService","Settings","ScrollService","PreviewNavigation","CommentsListApi","CommentsTreeApi"]}(),angular.module("comments").directive("addComment",[function(){"use strict";return{restrict:"A",scope:!1,link:function(scope,element){function isChildOf(childElement,parentClass){for(;childElement&&childElement!==element[0];){if(childElement.classList&&childElement.classList.contains(parentClass))return 1;childElement=childElement.parentNode}}element.on("click",function(e){scope.commentMode&&function(e){return!isChildOf(e.target,PreviewEnums.COMMENT_POINT_CLASS)&&!isChildOf(e.target,"comments-group")}(e)&&(scope.onAddCommentClick(e),e.stopPropagation())})}}}]),function(){"use strict";function CommentsFilter(AssignHelper,CommentsFilterSettings,COMMENTS_FILTER,COMMENT_TYPES){var TYPES=COMMENT_TYPES.VALUES,TYPE_FILTERS=COMMENTS_FILTER.TYPE_VALUES;return{canDisplayComment:canDisplayComment,canDisplayCanvasComment:function(comment){return CommentsFilterSettings.getPinsVisibility()&&canDisplayComment(comment)},validateType:validateType,validateAssignment:validateAssignment,hasMatch:function(_ref5){var comment=_ref5.comment,userId=_ref5.userId,assignedUserId=_ref5.assignedUserId,userName=_ref5.userName,showCurrentPageOnly=_ref5.showCurrentPageOnly,searchString=_ref5.searchString,_ref5=_ref5.pageId;if(""===searchString)return!0;{var searchName;if(function(searchString){return 1<searchString.length&&"@"===searchString.charAt(0)}(searchString))return searchName=searchString.replace("@",""),function(_ref){var userId=_ref.userId,userName=_ref.userName,_ref=_ref.searchName;if(userName)return search(userName,_ref);userName=AssignHelper.getOptions().find(function(user){return user.id_user===parseInt(userId,10)});return!(!userName||!search(userName.name,_ref)&&!search(userName.email,_ref))}({userId:userId,userName:userName,searchName:searchName})||function(_ref2){var assignedUserId=_ref2.assignedUserId,_ref2=_ref2.searchName,assignedUser=AssignHelper.getOptions().find(function(user){return user.id_user===parseInt(assignedUserId,10)});return!(!assignedUser||!search(assignedUser.name,_ref2)&&!search(assignedUser.email,_ref2))}({assignedUserId:assignedUserId,searchName:searchName})}return function(_ref3){var comment=_ref3.comment,_ref3=_ref3.searchString;return search(comment,_ref3)}({comment:comment,searchString:searchString})||function(_ref4){var _ref4$showCurrentPage=_ref4.showCurrentPageOnly,_ref4$showCurrentPage=void 0!==_ref4$showCurrentPage&&_ref4$showCurrentPage,pageName=_ref4.pageName,_ref4=_ref4.searchString;return!_ref4$showCurrentPage&&search(pageName,_ref4)}({showCurrentPageOnly:showCurrentPageOnly,pageId:_ref5,searchString:searchString})}};function canDisplayComment(comment){return _.every([validateType(comment),validateAssignment(comment)])}function validateType(comment){var typeFilters=CommentsFilterSettings.getTypeFilters();return!!(-1!==typeFilters.indexOf(TYPE_FILTERS.PUBLIC_COMMENTS)&&function(comment){return!comment.type||comment.type===TYPES.PUBLIC}(comment)||-1!==typeFilters.indexOf(TYPE_FILTERS.TEAM_COMMENTS)&&function(comment){return comment.type===TYPES.TEAM}(comment))}function validateAssignment(comment){var isDisabled=CommentsFilterSettings.isAssignmentFilterDisabled(),assignmentFilter=CommentsFilterSettings.getAssignmentFilter();return!!isDisabled||(_.isNull(assignmentFilter)?!comment.assignedUserId:-1!==assignmentFilter.indexOf(parseInt(comment.assignedUserId)))}function search(where,what){return!(!where||!what)&&-1!==where.substring(0,what.length).toLocaleLowerCase().indexOf(what.toLocaleLowerCase())}}angular.module("comments").factory("CommentsFilter",CommentsFilter),CommentsFilter.$inject=["AssignHelper","CommentsFilterSettings","COMMENTS_FILTER","COMMENT_TYPES"]}(),function(){"use strict";function CommentsFilterSettings($rootScope,CommentsSettings,localStorageService,COMMENTS_FILTER,ApprovalsService,_){var filters={types:null,assignment:"disabled"},pinsVsibility=!0;return{isAssignmentFilterDisabled:function(){return"disabled"===filters.assignment},disableAssignmentFilter:function(){setAssignmentFilter("disabled")},getAssignmentFilter:function(){return filters.assignment},setAssignmentFilter:setAssignmentFilter,getTypeFilterOptions:function(){return CommentsSettings.commentTypesActive()?COMMENTS_FILTER.ALL_TYPE_OPTIONS:[]},getPinsVisibility:function(){return pinsVsibility},setPinsVisibility:function(value){pinsVsibility=value,$rootScope.$emit(PreviewEnums.ON_COMMENTS_FILTER_CHANGE)},getTypeFilters:function(){if(ApprovalsService.getIsActive())return getAllCommentsType();filters.types||(filters.types=function(){var lastUsedTypeFilters=localStorageService.get(COMMENTS_FILTER.STORAGE_KEYS.TYPE_FILTER);return function(filters){var commentsType=getAllCommentsType();return _.isArray(filters)&&filters.every(function(filter){return-1!==commentsType.indexOf(filter)})}(lastUsedTypeFilters)?lastUsedTypeFilters:null}());return filters.types||getAllCommentsType()},setTypeFilters:function(value){(function(value){localStorageService.set(COMMENTS_FILTER.STORAGE_KEYS.TYPE_FILTER,value)})(filters.types=value),$rootScope.$emit(PreviewEnums.ON_COMMENTS_FILTER_CHANGE)},DISABLED:"disabled"};function setAssignmentFilter(value){filters.assignment=value,$rootScope.$emit(PreviewEnums.ON_COMMENTS_FILTER_CHANGE)}function getAllCommentsType(){return COMMENTS_FILTER.ALL_TYPE_OPTIONS.map(function(type){return type.value})}}angular.module("comments").factory("CommentsFilterSettings",CommentsFilterSettings),CommentsFilterSettings.$rootScope=["$rootScope","CommentsSettings","localStorageService","COMMENTS_FILTER","ApprovalsService","_"]}(),function(){"use strict";function CommentsSettings(UsersService,FeatureToggler,localStorageService,COMMENT_TYPES){return{commentTypes:COMMENT_TYPES.VALUES,commentTypesActive:commentTypesActive,getCommentTypeOptions:function(){return commentTypesActive()?COMMENT_TYPES.ALL_OPTIONS:COMMENT_TYPES.BASIC_OPTIONS},getLastUsedCommentType:function(){return localStorageService.get(COMMENT_TYPES.STORAGE_KEYS.LAST_USED_COMMENT_TYPE)},setLastUsedCommentType:function(commentType){localStorageService.set(COMMENT_TYPES.STORAGE_KEYS.LAST_USED_COMMENT_TYPE,commentType)}};function commentTypesActive(){return FeatureToggler.teamComments&&UsersService.isInProjectsAccount()}}angular.module("comments").factory("CommentsSettings",CommentsSettings),CommentsSettings.$inject=["UsersService","FeatureToggler","localStorageService","COMMENT_TYPES"]}(),function(){"use strict";angular.module("comments").factory("CommentsState",function(){return{groupInEditModeId:null,selectedGroupId:null}})}(),function(){"use strict";function commentTooltip($document,$rootScope,PreviewNavigation){return{restrict:"A",scope:!1,link:function(scope,element){function changeText(text){$tooltipElement&&$tooltipElement[0].textContent!==text&&($tooltipElement[0].textContent=text)}var $tooltipElement,textAdding="Click to reposition the comment",tooltip={element:'<span class="comment-tooltip">'.concat("Click to add comment","</span>"),offset:5},overflowedPage=$document[0].querySelector("[overflowed-page]"),$body=$document.find("body").eq(0),posX=0,posY=0,addTooltip=function(){$tooltipElement||($tooltipElement=angular.element(tooltip.element),$body.append($tooltipElement))},removeTooltip=function(){$tooltipElement&&($tooltipElement.remove(),$tooltipElement=null)},onElementMouseMove=function(e){scope.commentMode&&!scope.dragging&&(scope.addingComment?changeText(textAdding):changeText("Click to add comment"),function(e){var scrollX=0,scrollY=0;overflowedPage&&"auto"!==overflowedPage.style.overflow&&(scrollX=overflowedPage.scrollLeft,scrollY=overflowedPage.scrollTop),posX=Math.round(e.clientX+tooltip.offset+scrollX),posY=Math.round(e.clientY+tooltip.offset+scrollY),$tooltipElement&&($tooltipElement.css("top","".concat(posY,"px")),$tooltipElement.css("left","".concat(posX,"px")))}(e),e.stopPropagation())},onModeChangedOff=$rootScope.$on(PreviewEnums.ON_PREVIEW_MODE_CHANGED,function(){PreviewNavigation.isModeActive(PreviewNavigation.PREVIEW_MODES.COMMENT)?(element.on("mouseenter",addTooltip),element.on("mouseleave",removeTooltip),element.on("mousemove",onElementMouseMove)):(element.off("mouseenter",addTooltip),element.off("mouseleave",removeTooltip),element.off("mousemove",onElementMouseMove),removeTooltip())}),onAddingCommentChange=$rootScope.$on(PreviewEnums.ADDING_COMMENT,function(){changeText(textAdding)}),onDeselectCommentChange=$rootScope.$on(PreviewEnums.SELECT_COMMENT,function(event,id){changeText(null===id?"Click to add comment":textAdding)});scope.$on("$destroy",function(){onModeChangedOff(),onAddingCommentChange(),onDeselectCommentChange()})}}}angular.module("comments").directive("commentTooltip",commentTooltip),commentTooltip.$inject=["$document","$rootScope","PreviewNavigation"]}(),function(){"use strict";function CommentsService(_,$q,$rootScope,Rest,UsersService,ProjectsService,PagesService,DocumentsService,ExportService,Settings,editorSocket,CommentsSettings,ApprovalsService,RestWithCache,PreviewCache,moment){return{commentsCached:null,comments:[],commentsMap:{},commentsTree:{},commentIdsInPage:{},pageId:null,selectedCommentId:null,selectedCommentShowNotificationPanel:!1,searchFor:"",addComment:function(comment){var _this=this,d=$q.defer();return this.getComments().then(function(){Rest.all("comments").post(comment).then(function(response){_this.applyAddComment(response,{updateCommentsModelOnly:!1}),d.resolve(response),editorSocket.emit(PreviewEnums.SOCKET.ON_COMMENT_CREATE,response),PreviewCache.removeComments(ProjectsService.currentProjectHash,PagesService.currentPageId)},function(error){d.reject(error)})}),d.promise},getComments:function(isPageLimited){if(ProjectsService.isDocument())return this.getDocumentComments();return this.getPageComments(isPageLimited)},getPageComments:function(isPageLimited){var _this2=this,pageId=PagesService.currentPageId,projectHash=ProjectsService.currentProjectHash;return this.isCached(isPageLimited,pageId)||(this.pageId=pageId,Settings.setShowCurrentPageOnly(angular.isUndefined(isPageLimited)?Settings.showCurrentPageOnly:isPageLimited),this.commentsCached=$q.defer(),function(projectHash,pageId){var d;if(ExportService.isExport())return(d=$q.defer()).resolve([]),d.promise;d=Settings.showCurrentPageOnly?RestWithCache.one("projects",projectHash).one("pages",pageId):Rest.one("projects",projectHash);pageId={};ApprovalsService.getIsActive()&&(pageId={"stakeholder[id]":ApplicationConfiguration.stakeholder.id});return d.all("comments").getList(pageId)}(projectHash,pageId).then(function(comments){for(;_this2.comments.length;)_this2.comments.pop();comments.forEach(function(comment){_this2.comments.push(comment)}),_this2.sort(_this2.comments),_this2.generateCommentsMap(_this2.comments),_this2.generateCommentsTree(_this2.comments),_this2.commentsCached.resolve(_this2.comments)})),this.commentsCached.promise},getDocumentComments:function(){var _this3=this,documentId=DocumentsService.currentDocumentId,projectHash=ProjectsService.currentProjectHash;return this.commentsCached||(this.documentId=documentId,this.commentsCached=$q.defer(),Rest.one("projects",projectHash).one("documents",documentId).all("comments").getList().then(function(comments){for(;_this3.comments.length;)_this3.comments.pop();comments.forEach(function(comment){_this3.comments.push(comment)}),_this3.sort(_this3.comments),_this3.generateCommentsMap(_this3.comments),_this3.generateCommentsTree(_this3.comments),_this3.commentsCached.resolve(_this3.comments)})),this.commentsCached.promise},getComment:function(id){var d=$q.defer();return this.getComments().then(function(comments){comments.forEach(function(comment){comment._id===id&&d.resolve(comment)})}),d.promise},updateCommentResolve:function(id,isResolved){var _this8=this;return this.updateComment(id,{is_resolved:isResolved}).then(function(res){_this8.applyUpdateCommentResolve(id,res)})},updateCommentType:function(id,type){var _this4=this;return Rest.one("comments",id).customPUT({type:type}).then(function(res){return type!==CommentsSettings.commentTypes.PUBLIC||_.isEmpty(_this4.commentsTree[id])||(res.children=_.map(_this4.commentsTree[id],function(childId){return _this4.commentsMap[childId]})),editorSocket.emit(PreviewEnums.SOCKET.ON_COMMENT_TYPE_UPDATE,res),PreviewCache.removeComments(ProjectsService.currentProjectHash,PagesService.currentPageId),_this4.applyUpdateCommentType(id,type),res})},updateCommentContent:function(id,content,mentions){var _this5=this,mentions={comment:content,mentions:mentions};ApprovalsService.getIsActive()&&(mentions.stakeholder={id:UsersService.me.id_user});return Rest.one("comments",id).customPUT(mentions).then(function(res){return editorSocket.emit(PreviewEnums.SOCKET.ON_COMMENT_CONTENT_UPDATE,res),PreviewCache.removeComments(ProjectsService.currentProjectHash,PagesService.currentPageId),_this5.applyUpdateCommentContent(id,content),res})},updateAssignedUser:function(id,assignedUserId){var _this6=this;return Rest.one("comments",id).customPUT({assignedUserId:assignedUserId}).then(function(res){editorSocket.emit(PreviewEnums.SOCKET.ON_COMMENT_ASSIGNED_USER_UPDATE,res),PreviewCache.removeComments(ProjectsService.currentProjectHash,PagesService.currentPageId),_this6.applyUpdateAssignedUser(id,assignedUserId)})},updateComment:function(id,properties){var _this7=this,d=$q.defer(),shouldEmitCommentChange=_.isUndefined(properties.is_read)||1!==Object.keys(properties).length;return this.getComment(id).then(function(){ApprovalsService.getIsActive()&&(properties.stakeholder={id:UsersService.me.id_user}),Rest.one("comments",id).customPUT(properties).then(function(response){shouldEmitCommentChange&&(editorSocket.emit(PreviewEnums.SOCKET.ON_COMMENT_UPDATE,response),PreviewCache.removeComments(ProjectsService.currentProjectHash,PagesService.currentPageId)),_this7.applyUpdateComment(id,response).then(function(){d.resolve(response)})},function(error){d.reject(error)})}),d.promise},deleteComment:function(id){var _this10=this,d=$q.defer(),headers={"Content-Type":"application/json;charset=utf-8"},payload={id:id};ApprovalsService.getIsActive()&&(payload.stakeholder={id:UsersService.me.id_user});return this.getComment(id).then(function(){Rest.one("comments",id).customDELETE(void 0,void 0,headers,payload).then(function(response){_this10.applyDeleteComment(response),editorSocket.emit(PreviewEnums.SOCKET.ON_COMMENT_DELETE,response),PreviewCache.removeComments(ProjectsService.currentProjectHash,PagesService.currentPageId),d.resolve(response)})}),d.promise},fastDeletOnExit:function(id){Rest.one("comments",id).remove(),editorSocket.emit(PreviewEnums.SOCKET.ON_COMMENT_DELETE,this.commentsMap[id])},applyAddComment:function(data,options){ApprovalsService.getIsActive()&&data.type===CommentsSettings.commentTypes.PUBLIC||(this.addToCommentsTree(data),this.addToCommentsMap(data),this.addToCommentIdsInPage(data),_.find(this.comments,{_id:data._id})||this.comments.push(data),options&&!options.updateCommentsModelOnly&&$rootScope.$emit(PreviewEnums.ADD_COMMENT,data._id,data._parent_comment))},applyUpdateCommentResolve:function(id,data){var _this9=this;this.getComments().then(function(comments){_this9.sort(comments),$rootScope.$emit(PreviewEnums.SORT_COMMENTS)}),$rootScope.$emit(PreviewEnums.RESOLVE_COMMENT,id,data.resolved.is)},applyUpdateCommentType:function(id,type){this.getComment(id).then(function(comment){comment.type=type,$rootScope.$emit(PreviewEnums.ON_COMMENT_TYPE_UPDATE,id,type)})},applyUpdateCommentContent:function(id,content){this.getComment(id).then(function(comment){comment.comment=content,$rootScope.$emit(PreviewEnums.ON_COMMENT_CONTENT_UPDATE,id,content)})},applyUpdateAssignedUser:function(id,assignedUserId){this.getComment(id).then(function(comment){comment.assignedUserId=assignedUserId,$rootScope.$emit(PreviewEnums.ON_COMMENT_ASSIGNED_USER_UPDATE,id,assignedUserId)})},applyUpdateComment:function(id,data){var _this11=this,d=$q.defer();return this.getComment(id).then(function(comment){var changeResolved=comment.resolved.is!==data.resolved.is;angular.isFunction(data.plain)&&_.forIn(data.plain(),function(value,key){comment[key]=value}),changeResolved&&(_this11.getComments().then(function(comments){_this11.sort(comments),$rootScope.$emit(PreviewEnums.SORT_COMMENTS)}),$rootScope.$emit(PreviewEnums.RESOLVE_COMMENT,id,data.resolved.is)),d.resolve(comment)},function(error){d.reject(error)}),d.promise},applyDeleteComment:function(comment){this.removeFromCommentsMap(comment),this.removeFromCommentIdsInPage(comment),this.removeFromCommentsTree(comment),this.removeById(comment._id),$rootScope.$emit(PreviewEnums.DELETE_COMMENT,comment._id,!!comment._parent_comment)},getIndex:function(pageId,id){if(id)return this.commentIdsInPage[pageId].indexOf(id)+1;return this.commentIdsInPage[pageId]?this.commentIdsInPage[pageId].length+1:1},isLoved:function(comment){var isLoved=!1;return _.forEach(comment.lovers,function(lover){if(lover.id_user===UsersService.me.id_user)return!(isLoved=!0)}),isLoved},canEdit:function(comment){return!comment.user.is_anonymous&&comment.user.id===UsersService.me.id_user||ApprovalsService.getIsActive()&&comment.user.id===UsersService.me.id_user||UsersService.me.is_owner},canEditContent:function(comment){return!comment.user.is_anonymous&&comment.user.id===UsersService.me.id_user||ApprovalsService.getIsActive()&&comment.user.id===UsersService.me.id_user},isCached:function(isPageLimited,pageId){return this.commentsCached&&(pageId===this.pageId||!Settings.showCurrentPageOnly)&&(angular.isUndefined(isPageLimited)||isPageLimited===Settings.showCurrentPageOnly)},isGroup:function(id){return!!this.commentsTree[id]},sort:function(comments){comments.sort(function(c1,c2){return moment(c1.created_at)<moment(c2.created_at)?-1:1}),this.generateCommentIdsInPage(comments)},generateCommentsTree:function(comments){var _this12=this;_.forIn(this.commentsTree,function(value,key){delete _this12.commentsTree[key]}),comments.forEach(function(comment){_this12.addToCommentsTree(comment)})},addToCommentsTree:function(comment){var pageId=comment.id_page||comment.id_document;(PagesService.pagesMap[pageId]||ProjectsService.isDocument())&&comment._parent_comment&&(this.commentsTree[comment._parent_comment]||(this.commentsTree[comment._parent_comment]=[]),-1===_.indexOf(this.commentsTree[comment._parent_comment],comment._id))&&this.commentsTree[comment._parent_comment].push(comment._id)},removeFromCommentsTree:function(comment){var _this13=this;{var comments,index;comment._parent_comment?(comments=this.commentsTree[comment._parent_comment],index=comments.indexOf(comment._id),comments.splice(index,1),comments.length||delete this.commentsTree[comment._parent_comment]):this.commentsTree[comment._id]&&(_.forEach(this.commentsTree[comment._id],function(id){_this13.removeById(_this13.commentsMap[id]),_this13.removeFromCommentsMap(_this13.commentsMap[id])}),delete this.commentsTree[comment._id])}},generateCommentIdsInPage:function(comments){var _this14=this;_.forIn(this.commentIdsInPage,function(value){for(;value.length;)value.pop()}),comments.forEach(function(comment){_this14.addToCommentIdsInPage(comment)})},addToCommentIdsInPage:function(comment){var pageId=comment.id_page||comment.id_document;!PagesService.pagesMap[pageId]&&!ProjectsService.isDocument()||comment._parent_comment||(this.commentIdsInPage[pageId]||(this.commentIdsInPage[pageId]=[]),-1===_.indexOf(this.commentIdsInPage[pageId],comment._id)&&this.commentIdsInPage[pageId].push(comment._id))},removeFromCommentIdsInPage:function(comment){{var pageId;comment._parent_comment||(pageId=comment.id_page||comment.id_document,0<=(comment=this.commentIdsInPage[pageId].indexOf(comment._id))&&this.commentIdsInPage[pageId].splice(comment,1))}},generateCommentsMap:function(comments){var _this15=this;_.forIn(this.commentsMap,function(value,key){delete _this15.commentsMap[key]}),comments.forEach(function(comment){_this15.addToCommentsMap(comment)})},addToCommentsMap:function(comment){var pageId=comment.id_page||comment.id_document;(PagesService.pagesMap[pageId]||ProjectsService.isDocument())&&(this.commentsMap[comment._id]=comment)},removeFromCommentsMap:function(comment){delete this.commentsMap[comment._id]},markAsRead:function(id){this.updateComment(id,{is_read:!0})},getRedirectId:function(commentId){if(!this.commentsMap[commentId])return null;if(this.commentsMap[commentId]._parent_comment)return this.commentsMap[commentId]._parent_comment;return commentId},findById:function(commentId,returnIndex){var index=-1;if(this.comments.some(function(comment,i){return comment._id===commentId&&(index=i,!0)}),returnIndex)return index;return this.comments[index]},removeById:function(commentId){commentId=this.findById(commentId,!0);0<=commentId&&this.comments.splice(commentId,1)}}}angular.module("comments").factory("CommentsService",CommentsService),CommentsService.$inject=["_","$q","$rootScope","Rest","UsersService","ProjectsService","PagesService","DocumentsService","ExportService","Settings","editorSocket","CommentsSettings","ApprovalsService","RestWithCache","PreviewCache","moment"]}(),function(){"use strict";function config($stateProvider){ApplicationConfiguration.isDesignSystem&&(window.ApplicationConfiguration.libraryHash,window.ApplicationConfiguration.idSymbol,$stateProvider.state("designSystem",{abstract:!1,url:"",views:{canvas:{templateUrl:"/scripts/modules/core/views/canvas.view.html",controller:"CanvasController"},topBar:{templateUrl:"/scripts/modules/core/views/topBar.view.html",controller:"TopBarController",controllerAs:"vm"},layers:{templateUrl:"/scripts/modules/core/views/layers.view.html",controller:"LayersController",controllerAs:"vm"},specification:{templateUrl:"/scripts/modules/specification/views/specification.view.html",controller:"SpecificationController",controllerAs:"vm"}},resolve:{isSpecModeEnabled:function($q,Settings){$q=$q.defer();return Settings.disableSpecification?$q.reject():$q.resolve(),$q.promise}}}))}angular.module("designSystem").config(config),config.$inject=["$stateProvider"]}(),function(){"use strict";function DesignSystemLayout(FeatureToggler,$rootScope,$scope,$window,PreviewNavigation,SpecificationService,Engine,uxpinSharedComponents){var vm=this,USER_AGENT=navigator.userAgent;vm.isSpecModeFeature=SpecificationService.isSpecificationVisible(),vm.PREVIEW_MODES=PreviewNavigation.PREVIEW_MODES,vm.PREVIEW_PANELS=PreviewNavigation.PREVIEW_PANELS,vm.MAIN_PANELS=PreviewNavigation.MAIN_PANELS,vm.isLoading=!0,vm.isModeActive=PreviewNavigation.isModeActive,vm.isPanelVisible=PreviewNavigation.isPanelVisible,vm.isPanelExpanded=PreviewNavigation.isPanelExpanded,vm.leftPanelVisible=!1,vm.browser=uxpinSharedComponents.getBrowserName(USER_AGENT),vm.OS=uxpinSharedComponents.getOS(USER_AGENT),$rootScope.$on("$stateChangeError",function(){$window.location="/404"}),$rootScope.$on(PreviewEnums.LOADING,function(e,value){vm.isLoading=value}),$scope.$watch(PreviewNavigation.isLeftPanelVisible,function(value,oldValue){(vm.leftPanelVisible=value)!==oldValue&&Engine.updateCanvasRectangle()})}angular.module("designSystem").controller("DesignSystemLayout",DesignSystemLayout),DesignSystemLayout.$inject=["FeatureToggler","$rootScope","$scope","$window","PreviewNavigation","SpecificationService","Engine","uxpinSharedComponents"]}(),angular.module("core").config(["$compileProvider",function($compileProvider){"use strict";$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|data|file|blob):/)}]),function(){"use strict";function config($stateProvider,$urlRouterProvider,$compileProvider,$locationProvider){var url;$locationProvider.hashPrefix(""),$compileProvider.debugInfoEnabled(ApplicationConfiguration.debugInfoEnabled),ApplicationConfiguration.isStyleguide||ApplicationConfiguration.isDesignSystem||($locationProvider="/pages",$compileProvider="/pages/{pageId}",0===window.location.hash.indexOf("#/p/")&&("p"!==(url=(url=window.location.hash).split("/"))[1]||isNaN(parseInt(url[2],10))||"string"!=typeof url[3]||"string"!=typeof url[4]?window.location.hash="/pages/".concat(function(url){return url=url.split("/"),isNaN(parseInt(url[2],10))?"":url[2]}(window.location.hash)):($locationProvider="/p",$compileProvider="/p/{pageId}/{projectName}/{pageName}")),"W"===ApplicationConfiguration.project.type?("/pages"===$locationProvider&&$urlRouterProvider.otherwise("/pages").when("/pages","/pages/{pageId}").when("/pages/{pageId}/usability-test/","/pages/{pageId}/usability-test/1"),"/p"===$locationProvider&&$urlRouterProvider.otherwise("/p").when("/p","/p/{pageId}/{projectName}/{pageName}").when("/p/{pageId}/{projectName}/{pageName}/usability-test/","/p/{pageId}/{projectName}/{pageName}/usability-test/1")):$urlRouterProvider.otherwise(function($injector){$injector.get("$state").go("home.document")}),url=function($q,$stateParams,PreviewNavigation){$q=$q.defer();return $stateParams.previewMode===PreviewNavigation.PREVIEW_MODES.COMMENT?$q.resolve(!0):$q.reject(!1),$q.promise},$locationProvider=function(UsersService,$location){if(UsersService.me.is_anonymous)return $location.path("/")},$stateProvider.state("home",{url:"",abstract:!0,views:{"":{templateUrl:"/scripts/modules/core/views/home.view.html",controller:function(){}},comments:{templateUrl:"/scripts/modules/comments/views/commentsNotes.view.html",controller:"CommentsNotesCtrl",controllerAs:"vm"},filters:{templateUrl:"/scripts/modules/comments/views/commentsFilters.view.html",controller:"CommentsFiltersCtrl",controllerAs:"vm"},sitemap:{templateUrl:"/scripts/modules/core/views/sitemap.view.html",controller:"SitemapController"},specification:{templateUrl:"/scripts/modules/specification/views/specification.view.html",controller:"SpecificationController",controllerAs:"vm"},documentation:{templateUrl:"/scripts/modules/documentation/views/documentation.view.html",controller:"DocumentationController",controllerAs:"vm"},canvas:{templateUrl:"/scripts/modules/core/views/canvas.view.html",controller:"CanvasController"},breadcrumbs:{templateUrl:"/scripts/modules/core/views/breadcrumbs.view.html",controller:"BreadcrumbsController"},topBar:{templateUrl:"/scripts/modules/core/views/topBar.view.html",controller:"TopBarController",controllerAs:"vm"},"approvalProcess@home":{templateUrl:"/scripts/modules/core/views/approvalProcess/approvalProcessControls.view.html",controller:"ApprovalProcessController",controllerAs:"vm"},tasks:{templateUrl:"/scripts/modules/core/views/tasks.view.html",controller:"UsabilityTestTasksController"},layers:{templateUrl:"/scripts/modules/core/views/layers.view.html",controller:"LayersController",controllerAs:"vm"},onboarding:{templateUrl:"/scripts/modules/core/views/onboarding.view.html",controller:"OnboardingCtrl",controllerAs:"vm"}},resolve:{collaborators:function($q,UsersService){return UsersService.getCollaborators()},documents:function($q,DocumentsService,ProjectsService){$q=$q.defer();return ProjectsService.isDocument()?DocumentsService.getDocuments():($q.resolve(null),$q.promise)},notifications:function(NotificationsService){return NotificationsService.getNotifications()},isMobile:function(){return"mobile"===new UAParser(navigator.userAgent).getDevice().type}}}).state("home.page",{url:"".concat($compileProvider,"?mode&userId&zoom&elementId"),template:'<div id="page-controller" ui-view></div>',controller:"PageController",resolve:{initialData:function($stateParams,ProjectsService,PreloadService,PagesService,BreakpointsService){return ProjectsService.isDocument()?Promise.resolve(null):PreloadService.getInitialData($stateParams.pageId).then(function(initialData){return Promise.all([PagesService.getPages($stateParams.pageId),BreakpointsService.getBreakpoints()]).then(function(data){return{redirectToPageId:initialData.redirect?initialData.pageId:null,pages:data[0],breakpoints:data[1]}})})}}}).state("home.page.live-share-configuration",{url:"/live-presentation-configuration",controller:function($modal){$modal.open({templateUrl:"/scripts/modules/core/views/liveShare/configuration.view.html",controller:"LiveShareConfigurationController"})},resolve:{isAuthenticated:$locationProvider}}).state("home.page.live-share-start",{url:"/live-presentation-start?options&type",templateUrl:"/scripts/modules/core/views/liveShare/initialize.view.html",controller:"LiveShareInitializeCtrl",resolve:{isAuthenticated:$locationProvider}}).state("home.page.live-share-join",{url:"/live-presentation-join/{sessionId}?type",templateUrl:"/scripts/modules/core/views/liveShare/initialize.view.html",controller:"LiveShareInitializeCtrl"}).state("home.page.live-share-finish",{url:"/live-presentation-finish/{type}/",templateUrl:"/scripts/modules/core/views/liveShare/finish.view.html",controller:"LiveShareFinishController"}).state("home.page.usability-test",{url:"/usability-test/{step:[1-5]{1}}",controller:"UsabilityTestController",resolve:{isAuthenticated:$locationProvider}}).state("home.page.usability-test-video-upload",{url:"/usability-test-video-upload",templateUrl:"/scripts/modules/core/views/usabilityTest/videoUpload.view.html",controller:"VideoUploadCtrl",controllerAs:"vm"}).state("home.page.mode",{url:"/{previewMode}/{panels}",controller:"NavController",params:{panels:{value:"",squash:!0}}}).state("home.page.mode.comment",{url:"/{commentId}",resolve:{isCommentMode:url}}).state("home.document",{url:"/documents/{documentId}?mode&zoom&elementId",template:'<div id="document-controller" ui-view></div>',controller:"DocumentController"}).state("home.document.mode",{url:"/{previewMode}/{panels}",controller:"NavController",params:{panels:{value:"",squash:!0}}}).state("home.document.mode.comment",{url:"/{commentId}",resolve:{isCommentMode:url}}))}angular.module("core").config(config),config.$inject=["$stateProvider","$urlRouterProvider","$compileProvider","$locationProvider"]}(),angular.module("core").config(function($translateProvider){"use strict";$translateProvider.useSanitizeValueStrategy("escape"),$translateProvider.preferredLanguage("en"),$translateProvider.translations("en",{BTN_REPLY:"Reply",BTN_RESOLVE:"Resolve",BTN_UNRESOLVE:"Unresolve",BTN_DELETE:"Delete",BTN_ADD_COMMENT:"Add comment",BTN_NOTIFY:"Notify those people",BTN_ADD_USER:"Notify also",BTN_SEND_NOTIFICATION:"Send notification",BTN_UNDO:"Undo",LBL_COMMENTS:"Comments",LBL_NOTES:"Notes",LBL_SHOW_RESOLVED:"Show resolved comments",LBL_CURRENT_PAGE:"Current page only",LBL_SEARCH:"Search",LBL_RESOLVED:"Resolved",INFO_DELETED:"You've deleted this comment.",INFO_NO_COMMENTS:"There are no comments yet.",INFO_ADD_FIRST:"Add first comment",INFO_ENTER_COMMENT_MODE:"Enter comment mode",INFO_ADD_FIRST_NOTE:"Add your first note",INFO_NO_NOTES:"This is your private notepad.\nNo one can see it.",INFO_SEARCH:"Search in comments",INFO_SEARCH_SITEMAP:"Type here to search",INFO_FEEDBACK:"Put your feedback",TIP_COMMENT_MODE:"Comment mode",TIP_ADD_NEW_COMMENT:"Add new comment",TIP_COLLABORATION:"Collaboration",TIP_COMMENTS_NOTES:"Comments / Notes",TIP_SITEMAP:"Sitemap",TIP_LIVE_SHARE:"Start Live Presentation",TIP_SPECIFICATION:"Enter spec mode",TIP_USABILITY_TEST:"Create usability test",TIP_RESOLVE:"Resolve",TIP_DELETE:"Delete",TIP_CANT_DELETE:"Only owner can delete his comments",TIP_FINISH_SESSION:"Finish session",LOVE_IT:"Love it",DONT_LOVE_IT:"Love it not",RESOLVED_BY:"Resolved by {{name}}",LS_OPTION_CAN_COMMENT:"Viewers can comment during session",LS_OPTION_SHOW_CURSOR:"Show viewers' cursors",LS_OPTION_FOLLOW_CURSOR:"Viewers always follow my cursor",LS_OPTION_DISABLE_VOICE:"Disable voice calls",LS_SESSION_QUIT:"You left {{projectName}} session. Redirecting to preview...",LS_SESSION_BANNED:"You've been banned from {{projectName}}.",LS_SESSION_OVER:"{{projectName}} session is over.",LS_SESSION_404:"No session found.",LS_USERS:"Live Presentation users",LS_FOLLOW_CURSOR:"Follow cursor",LS_SETTINGS:"Live Presentation settings",LS_SESSION_SETTINGS:"Session settings",LS_LINK_TO_SESSION:"Link to session",LS_LINK_HAS_BEEN_COPIED:"Link has been copied to your clipboard!",LS_TOGGLE_MUTE:"Toggle mute",LS_COPY:"Copy",LS_LEAVE_SESSION:"Leave session",LS_NAME_SHARING:"Live Presentation session",LS_NAME_TESTING:"usability test",LS_BACK_TO_PREVIEW:"Back to preview",UT_INTRODUCTION_TEXT:"Hello {Name of the participant}, thank you for coming. My name is {your name} and Im a researcher for {name of the product}  Im going to walk you through the session today.\n\nBefore well start I have some information for you.\n\nWere currently testing {name of the product} to learn as much as we can about the way people use it. Every product is intended to work in a certain way by its creators, but as you know  the reality might be quite different. The goal of this research is to get us as close to the reality as possible.\n\nThe session will take about an hour.\n\nPlease remember, during the next hour, that were testing {name of the product} not you. Dont worry at all about mistakes. If they happen, its the fault of the product. Finding about it is absolutely fantastic and gets us closer to creating a great product.\n\nDuring the whole test, please try to think out loud. Share anything thats in your head. Tell me what you are looking at on the screen, what your thoughts are, what you like and what dont you like, et cetera. We want to learn about your honest reactions to {name of the product}.\n\nIf you have any doubts during the test, feel free to ask me any questions. However, please remember that I might not be able to answer them during the test. We want to learn about your experience with {name of the product}, so I cant guide you. Ill be glad to answer all your questions after the test.\n\nWith your permission, were going to record the session. Well record your voice, face and actions on the screen  that will give us the full picture of the session for further analysis. Were not going to share these recordings outside of the team directly working on {name of the product}.\n\nIf you dont mind, Id like to ask you to sign this permission form. It simply states that you give us the permission to record the session and that were going to secure this data and make it available only to the team working on {name of the product}.\n\nAlso, I hope you dont mind, but Im going to take notes. It helps me with analyzing the session.",UT_OPTION_CAN_CLOSE_TASK:"Participants can close tasks themselves",UT_OPTION_SEE_SITEMAP:"Participants can see sitemap",UT_THANKS_FOR_CONTRIBUTION:"This session is over, thank you for your contribution.",UT_SETTINGS:"Usability test settings",UT_USERS:"Usability test users",UM_CLOSE_MOVIE:"Close movie",UM_MODAL_HEADER:"Show your design,\nshare your screen and allow others to follow your actions!",UM_MODAL_TEXT:"With Live Presentation you'll be able to create an outstanding real-time presentation for your team. By means of voice calls, collaboration will be smooth and easy.",UM_CLOSE_MODAL:"Close modal",UM_HOW_IT_WORKS:"Show me how it works",UM_UPGRADE_NOW:"Upgrade now!",UM_SYSTEMS_TEXT:"Live Presentation is available in Systems Plan.",UM_SYSTEMS:"Systems"})}),angular.module("core").config(["localStorageServiceProvider",function(localStorageServiceProvider){"use strict";localStorageServiceProvider.setPrefix("Preview"),localStorageServiceProvider.setStorageCookieDomain(ApplicationConfiguration.cookieDomain)}]),angular.module("core").config(["RestangularProvider",function(RestangularProvider){"use strict";RestangularProvider.setDefaultHttpFields({timeout:2e4})}]),function(){"use strict";var CODE_EDITOR_MODES={CSS:"css",HTML_MIXED:"htmlmixed",JAVA:"clike",JAVASCRIPT:"javascript",JSX:"jsx",MARKDOWN:"markdown",OBJECTIVE_C:"clike",PHP:"php",RUBY:"ruby",SLIM:"slim",SMARTY:"smarty",SWIFT:"swift"};angular.module("core").constant("CODE_EDITOR",{MODES:CODE_EDITOR_MODES,MODES_OPTIONS:[{text:"CSS",value:CODE_EDITOR_MODES.CSS},{text:"HTML",value:CODE_EDITOR_MODES.HTML_MIXED},{text:"Java",value:CODE_EDITOR_MODES.JAVA},{text:"JavaScript",value:CODE_EDITOR_MODES.JAVASCRIPT},{text:"JSX",value:CODE_EDITOR_MODES.JSX},{text:"PHP",value:CODE_EDITOR_MODES.PHP},{text:"Ruby",value:CODE_EDITOR_MODES.RUBY},{text:"Slim",value:CODE_EDITOR_MODES.SLIM},{text:"Smarty",value:CODE_EDITOR_MODES.SMARTY},{text:"Other",value:CODE_EDITOR_MODES.MARKDOWN}]})}(),function(){"use strict";angular.module("core").constant("MODES",{DOCUMENTATION:"documentation",COMMENT:"comment_preview",PREVIEW:"preview",SPEC:"spec"})}(),function(){"use strict";function UsabilityTestController(_,$rootScope,$state,$stateParams,$modal,UsabilityTestService,PreviewNavigation,ScreencastifyService){var onStateChangeSuccess;UsabilityTestService.isWizardOpen||ScreencastifyService.isInstalled().then(function(isInstalled){var dialog;isInstalled?(dialog=$modal.open({controller:"UsabilityTestWizardController",templateUrl:"/scripts/modules/core/views/usabilityTest/wizard.view.html",keyboard:!1}),UsabilityTestService.isWizardOpen=!0,dialog.result.finally(function(){$state.includes("**.usability-test.**")&&$state.go("home.page.mode",_.extend({},PreviewNavigation.getCurrentUrlParams(),{pageId:$stateParams.pageId})),_.isFunction(onStateChangeSuccess)&&onStateChangeSuccess(),UsabilityTestService.isWizardOpen=!1}),onStateChangeSuccess=$rootScope.$on("$stateChangeSuccess",function(e,toState,toParams){toParams.step||dialog.close()})):($modal.open({controller:"ScreencastifyDownloadCtrl",controllerAs:"vm",templateUrl:"/scripts/modules/core/views/usabilityTest/screencastifyDownload.view.html"}),$state.go("home.page.mode",_.extend({},PreviewNavigation.getCurrentUrlParams(),{pageId:$stateParams.pageId})))})}angular.module("core").controller("UsabilityTestController",UsabilityTestController),UsabilityTestController.$inject=["_","$rootScope","$state","$stateParams","$modal","UsabilityTestService","PreviewNavigation","ScreencastifyService"]}(),function(){"use strict";function ApprovalProcessController($scope,$modal,ApprovalsService){var vm=this;function isApproved(){return vm.approvalData.getStatus()===PreviewEnums.APPROVALS.STATUS.APPROVED}function isRejected(){return vm.approvalData.getStatus()===PreviewEnums.APPROVALS.STATUS.REJECTED}vm.approvalData={isActive:ApprovalsService.getIsActive,isPending:ApprovalsService.getIsPending,getStatus:ApprovalsService.getApprovalStatus,getApproveLabel:function(){return isApproved()?"Approved":"Approve"},getRejectLabel:function(){return isRejected()?"Rejected":"Reject"},isApproved:isApproved,isRejected:isRejected},vm.approvalButtonClick=function(isApproval,event){event.preventDefault(),vm.approvalData.isPending()&&$modal.open({templateUrl:"/scripts/modules/core/views/approvalProcess/accept.view.html",controller:"ApprovalProcessModalboxController",controllerAs:"vm",resolve:{approvalData:function(){return{isApproval:isApproval}}}})},ApplicationConfiguration.approvalRequestsCount&&1===ApplicationConfiguration.approvalRequestsCount&&!ApplicationConfiguration.approvalRequest.seenAt&&ApplicationConfiguration.approvalRequest.status===PreviewEnums.APPROVALS.STATUS.PENDING&&$modal.open({templateUrl:"/scripts/modules/core/views/approvalProcess/welcome.view.html",controller:"ApprovalProcessReviewModalboxController",controllerAs:"vm"}),ApplicationConfiguration.approvalRequestsCount&&1<ApplicationConfiguration.approvalRequestsCount&&!ApplicationConfiguration.approvalRequest.seenAt&&$modal.open({templateUrl:"/scripts/modules/core/views/approvalProcess/review.view.html",controller:"ApprovalProcessReviewModalboxController",controllerAs:"vm"})}angular.module("core").controller("ApprovalProcessController",ApprovalProcessController),ApprovalProcessController.$inject=["$scope","$modal","ApprovalsService"]}(),function(){"use strict";function ApprovalProcessModalboxController($scope,$modalInstance,approvalData,ApprovalsService){var vm=this;function closeModal(event){event&&event.preventDefault(),$modalInstance.close()}function getStatus(){return approvalData.isApproval?PreviewEnums.APPROVALS.STATUS.APPROVED:PreviewEnums.APPROVALS.STATUS.REJECTED}vm.approvalLabel=approvalData.isApproval?PreviewEnums.APPROVALS.LABEL.APPROVE:PreviewEnums.APPROVALS.LABEL.REJECT,vm.sendApproval=function(){ApprovalsService.sendApproval({status:getStatus(),idApproval:ApprovalsService.getIdApproval(),idRequest:ApprovalsService.getIdRequest(),feedback:vm.feedback,urlHash:ApprovalsService.getUrlHash()}).then(function(request){ApprovalsService.setApprovalStatus(getStatus()),closeModal()})},vm.closeModal=closeModal}angular.module("core").controller("ApprovalProcessModalboxController",ApprovalProcessModalboxController),ApprovalProcessModalboxController.$inject=["$scope","$modalInstance","approvalData","ApprovalsService"]}(),function(){"use strict";function ApprovalProcessReviewModalboxController($scope,$modalInstance){this.closeModal=function(event){event&&event.preventDefault();$modalInstance.close()}}angular.module("core").controller("ApprovalProcessReviewModalboxController",ApprovalProcessReviewModalboxController),ApprovalProcessReviewModalboxController.$inject=["$scope","$modalInstance"]}(),angular.module("core").controller("BreadcrumbsController",["$rootScope","$scope","$sce","PagesService","BreakpointsService","LiveSessionInstanceService",function($rootScope,$scope,$sce,PagesService,BreakpointsService,LiveSessionInstanceService){"use strict";function getBreadcrumbs(){for(var id=PagesService.currentPageId,breadcrumbs=[];breadcrumbs.unshift(getPageName(id)),id=PagesService.pagesMap[id].parent;);return breadcrumbs}function getPageName(id){return PagesService.pagesMap[id].name}function getBreakpointName(id){return $sce.trustAsHtml(BreakpointsService.breakpointsMap[PagesService.currentBreakpointId].name)}LiveSessionInstanceService=LiveSessionInstanceService.get();$scope.breadcrumbs=[],$scope.breakpoint=null,LiveSessionInstanceService.isSession()&&(LiveSessionInstanceService.getType()===LiveShare.enums.SESSION_TYPES.TESTING&&LiveSessionInstanceService.isHostSession()||!LiveSessionInstanceService.isHostSession())&&($scope.breadcrumbs=getBreadcrumbs(),$scope.breakpoint=getBreakpointName()),LiveSessionInstanceService.registerObserverCallback("finish",function(){$scope.breadcrumbs=[],$scope.breakpoint=null}),$rootScope.$on(PreviewEnums.ON_CONTENT_LOADED,function(e,id){$scope.breadcrumbs=getBreadcrumbs(),$scope.breakpoint=getBreakpointName()})}]),function(){"use strict";function CanvasController(_,$document,$rootScope,$scope,$state,$timeout,$q,PagesService,DocumentsService,CommentsService,CommentsFilter,ProjectsService,Settings,animate,editorSocket,UsersService,LiveSessionInstanceService,UsabilityTestService,LiveShareService,ScrollService,Engine,PreloadService,PreviewNavigation,SpecificationService,PreviewCache,$window,DesignSystem,CanvasContainerHeight,DeviceFrameService,ProjectSettings,Mirroring,ShadowService,uxpinSharedComponents,GuidesService,tabKeyHandler,FitCanvas,ResponsiveModeService){$scope.canvasWrapperId="canvas-wrapper",$scope.mockupContainerClass="frame-container",$scope.canvasContainerClass="canvas-main-container",$scope.isMirroringEnabled=Settings.enableMirroring,$scope.addingComment=!1,$scope.commentMode=!1,$scope.isLoading=!1,$scope.useAntiFlicker=!!$window.useAntiFlicker,$scope.dimensions=null,$scope.overflow=null,$scope.onClick=null,$scope.clickX=0,$scope.clickY=0,$scope.list={},$scope.isDocument=ProjectsService.isDocument(),$scope.isUXTestDocument=ProjectsService.isUXTestDocument(),$scope.visibleComments=[],$scope.showNewCommentWindow=!1,$scope.isSpecMode=function(){return PreviewNavigation.isModeActive(PreviewNavigation.PREVIEW_MODES.SPEC)},$scope.previewBackground=ProjectSettings.getPreviewBackgroundColor(),$scope.previewShadow=ShadowService.getBoxShadowValue(ProjectSettings.getPreviewShadow()),$scope.deviceClass="",$scope.width=0,$scope.height=0;var body,workbenchNode,canvasWrapper,mockupContainer,canvasContainer,refreshStylesTimeout,verticalScrollRatio,horizontalScrollRatio,isSomeElementMovedAddedDeletedResized,USER_AGENT=navigator.userAgent,BROWSERS=PreviewEnums.BROWSERS,OPTIMIZABLE_BROWSERS=[BROWSERS.SAFARI,BROWSERS.CHROME],browser=uxpinSharedComponents.getBrowserName(USER_AGENT),isOptimizableBrowser=uxpinSharedComponents.isDesktopApp||OPTIMIZABLE_BROWSERS.includes(browser),container=null,content=null,contentDimensions={width:0,height:0},contentCropping={x:!1,y:!1},mouseStartPosition={x:null,y:null},scrollStartPosition={x:null,y:null},WORKBENCH={CLASSES:{CANVAS:"ng-canvas",PRESS:"grab",DRAG:"dragging",WITH_FIXED_ELEMENT:"with-fixed-element"}},MOUSEDOWN_CLASS="mousedown",KEY_CODES=keysEnums.KEY_CODES,MIN_WIDTH=1,MIN_HEIGHT=1,STORYBOOK_TYPE="StorybookElement",WAS_LANDING_PAGE_SHOWN="wasLandingPageShown",WILL_CHANGE={DEFAULT:"auto",TRANSFORM:"transform"},pNav=PreviewNavigation,spaceHeld=!1,scale=Engine.getScale(),pageHasFixedElementsOrResponsiveMode=!1,shouldUpdateCanvasDimensions=!1,refreshCanvasNodeStylesDebouced=($scope.$on("$destroy",function(){onAddComment(),onSelectComment(),onChangePage(),onComments(),onShowCommentsResolvedChanged(),onCommentsFilterChange(),onCommentTypeUpdate(),onCommentAssignedUserUpdate(),onModeChanged(),onResponsiveModeChanged(),onAssignmentListOpen(),onPreviewModeOff(),onZoomChange(),removeEventListeners(),removeChangeStateEventListener(),onRefreshPageWithComponent()}),Mirroring.init(),$scope.highlightInteractions=function(event){var event=event.target,classNames=event.classList,canvasClass=WORKBENCH.CLASSES.CANVAS;Settings.disableInteractionsHighlight||!event.parentNode||isInteractiveElement(event)||$scope.isLiveSession||$scope.isUTSession||!pNav.isModeActive(pNav.PREVIEW_MODES.SIMULATE)||classNames.contains("interactive")&&!classNames.contains(canvasClass)||isChildOf(event,"interactive",canvasClass)&&!classNames.contains(canvasClass)||Preview.highlightInteractive(Engine.getPage())},$scope.onContentLoaded=function(){var LiveSessionService=LiveSessionInstanceService.get();LiveSessionService&&LiveSessionService.isSession()?LiveSessionService.executeEventsQueue().then(function(){onContentLoaded(),$scope.$apply()}).catch(function(){onContentLoaded(),$scope.$apply()}):onContentLoaded()},$scope.onAddCommentClick=function(e){UsersService.isAnonymous()&&!UsersService.isAnonymousNameSet()&&$rootScope.$emit(PreviewEnums.ANONYMOUS_ADD_COMMENT);var overflowedPage=$document[0].querySelector("[overflowed-page]"),scrollX=0,scrollY=0,overflowedPage=(overflowedPage&&(scrollX=overflowedPage.scrollLeft,scrollY=overflowedPage.scrollTop),$rootScope.$emit(PreviewEnums.SELECT_COMMENT,null),content.getBoundingClientRect());$scope.clickX=Math.round(e.clientX-PreviewEnums.PIN_RADIUS-overflowedPage.left+scrollX),$scope.clickY=Math.round(e.clientY-PreviewEnums.PIN_RADIUS-overflowedPage.top+scrollY),addComment(!0)},$scope.handleElementStateChanged=function(e,element){ApplicationConfiguration.isDesignSystem&&(updateCanvasDimensionsFromEngine(Engine.getPage()),Engine.updateCanvasRectangle()),$rootScope.$emit(PreviewEnums.SPEC_MODE_REFRESH_ELEMENT_SELECTION,element)},_.debounce(function(scale){var prevWillChange;browser===BROWSERS.SAFARI?workbenchNode.style.willChange=1===scale&&shouldOptimizeCanvas()?WILL_CHANGE.TRANSFORM:WILL_CHANGE.DEFAULT:($timeout.cancel(refreshStylesTimeout),1!==scale&&shouldOptimizeCanvas()&&(prevWillChange=workbenchNode.style.willChange,workbenchNode.style.willChange=WILL_CHANGE.DEFAULT,refreshStylesTimeout=$timeout(function(){workbenchNode.style.willChange=prevWillChange},50)))},200)),shouldOptimizeCanvas=function(){return isOptimizableBrowser&&!pageHasFixedElementsOrResponsiveMode},isSimulateMode=function(){return PreviewNavigation.isModeActive(PreviewNavigation.PREVIEW_MODES.SIMULATE)},removeChangeStateEventListener=$rootScope.$on(PreviewEnums.SPEC_MODE_ELEMENT_STATE_CHANGED,$scope.handleElementStateChanged),isInteractiveElement=function(element){element=element.tagName.toLowerCase();return-1!==["input","label","select","option"].indexOf(element)},isChildOf=function(childElement,parentClass,excludedParentClass){for(;childElement&&childElement!==canvasWrapper;){if(childElement.classList&&!childElement.classList.contains(excludedParentClass)&&(childElement.classList.contains(parentClass)||isInteractiveElement(childElement)))return!0;childElement=childElement.parentNode}return!1},removeEventListeners=function(){$document[0].removeEventListener("keydown",handleKeyDown),$document[0].removeEventListener("keyup",handleKeyUp)},onContentLoaded=function(){var canvasWrapper=$document[0].querySelector("#canvas-wrapper");$rootScope.$emit(PreviewEnums.LOADING,!1),$rootScope.$emit(PreviewEnums.ON_CONTENT_LOADED),Preview.onLoadPage($document[0].querySelector(".canvas-content"),ProjectsService.isDocument()?function(rect){$scope.$apply(function(){contentDimensions.height=rect.height,$scope.dimensions.height="".concat(contentDimensions.height,"px"),FitCanvas.setCanvasSize(contentDimensions.width,contentDimensions.height)})}:null),$timeout(function(){$scope.isLoading=!1,canvasWrapper&&$document[0].activeElement===$document[0].body&&(canvasWrapper.tabIndex=-1,canvasWrapper.focus())},0)},onAddComment=$rootScope.$on(PreviewEnums.ADD_COMMENT,function(){addComment(!1)}),onSelectComment=$rootScope.$on(PreviewEnums.SELECT_COMMENT,function(e,id,type){var comment;addComment(!1),$scope.visibleComments.splice(0,$scope.visibleComments.length),(comment=_.find($scope.comments,{_id:id}))&&CommentsFilter.canDisplayCanvasComment(comment)&&canDisplayComment(comment)&&($scope.visibleComments.push(comment),scrollToComment(id,type,.7))}),onPreviewModeOff=$rootScope.$on(PreviewEnums.ON_PREVIEW_MODE_CHANGED,function(e,mode){$scope.commentMode=mode===pNav.PREVIEW_MODES.COMMENT,updateDeviceFrameVisibility(mode===pNav.PREVIEW_MODES.SIMULATE)}),onChangePage=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(){Engine.isLoadingFinished().then(function(){$scope.isDocument=ProjectsService.isDocument(),$scope.useAntiFlicker=!!$window.useAntiFlicker,addComment(!1),update(),ProjectsService.isDocument()?getContent().then(function(){scrollToCommentDelayed()}):($scope.isLoading=!0,PreviewCache.isPageDataInCache(ProjectsService.currentProjectHash,PagesService.currentPageId)||$rootScope.$emit(PreviewEnums.LOADING,!0),loadPage(PagesService.currentPageId),"home.page.mode.comment"===$state.current.name&&scrollToCommentDelayed()),Preview.onChangePage()})}),onRefreshPageWithComponent=$rootScope.$on(PreviewEnums.REFRESH_PAGE_WITH_COMPONENT,function(e,pageId){PagesService.currentPageId===parseInt(pageId,10)&&updateCurrentPage()}),scrollToCommentDelayed=function(){container.scrollLeft=0,container.scrollTop=0,$timeout(function(){scrollToComment(CommentsService.selectedCommentId,"panel",0)},0)},onCanvasSizeChange=$window.useAntiFlicker?function(){shouldUpdateCanvasDimensions=!0,updateCanvasOuterAndInnerDimensions(),$scope.$$phase||$scope.$digest(),Engine.updateOffset()}:_.throttle(function(){$window.requestAnimationFrame(function(){shouldUpdateCanvasDimensions=!0,updateCanvasOuterAndInnerDimensions(),$scope.$digest(),Engine.updateOffset()})},50,{leading:!0,trailing:!0}),updateCurrentPage=function(){return PagesService.getCanvasData(PagesService.currentPageId).then(function(data){var page=Engine.getPage();Engine.updateOffset(),Engine.stopInteractionLoops(),clearPage(),page.load(data,(Engine.setBreakpointPages(PagesService.getBreakpointPages()),Engine.setProjectName(ProjectsService.currentProjectName),page.on($window.uxpinEngine.Page.Events.LOAD_FUNCTION_FINISHED,onLoadAfterUpdate),void page.on($window.uxpinEngine.Page.Events.CANVAS_SIZE_CHANGED,onCanvasSizeChange)))})},getSketchArtboard=function(){var canvasSketchArtboard=Engine.getCanvasSketchArtboard();return canvasSketchArtboard&&canvasSketchArtboard.width&&canvasSketchArtboard.height?canvasSketchArtboard:{}},updateCanvasDimensionsFromEngine=function(page,forceWidth,forceHeight){var page=page.getCanvas().calculateBoundingBox(),minWidth=PagesService.currentPageProperties?MIN_WIDTH:0,minHeight=PagesService.currentPageProperties?MIN_HEIGHT:0,forceWidth=forceWidth||_.max([page.width,minWidth]),forceHeight=forceHeight||_.max([page.height,minHeight]);$scope.width=forceWidth,$scope.height=forceHeight,updateCanvasDimensions($scope.width,$scope.height)},getCanvasOverflow=function(currentPageSize){return ResponsiveModeService.isResponsiveMode()?{overflow:"auto"}:ApplicationConfiguration.isDesignSystem?{overflow:"visible"}:{"overflow-x":currentPageSize&&currentPageSize.scrollx?"auto":"hidden","overflow-y":currentPageSize&&currentPageSize.scrolly?"auto":"hidden"}},updateCanvasDimensions=function(width,height){Engine.isLoadingFinished().then(function(){var currentPageSize=_.get(PagesService,"currentPageProperties.size",null),sketchArtboard=getSketchArtboard();width&&height||(currentPageSize&&(width=width||currentPageSize.width,height=height||currentPageSize.height),_.isEmpty(sketchArtboard))||(width=width||sketchArtboard.width,height=height||sketchArtboard.height),$scope.dimensions={width:"".concat(width*scale,"px"),height:"".concat(height*scale,"px")},FitCanvas.setCanvasSize(width,height),$scope.overflow=getCanvasOverflow(currentPageSize)})},getElementsRefs=function(){body=$document[0].getElementsByTagName("body")[0],canvasWrapper=$document[0].getElementById($scope.canvasWrapperId),mockupContainer=$document[0].querySelector(".".concat($scope.mockupContainerClass)),canvasContainer=$document[0].querySelector(".".concat($scope.canvasContainerClass))},shouldRenderDeviceFrame=function(deviceFrame){return!Settings.disableDeviceFrame&&!Settings.enableMirroring&&ProjectSettings.isDeviceFrameAvailable(deviceFrame)},renderDeviceFrame=function(deviceFrame){var isInitiallyHidden=!isSimulateMode();return $scope.deviceClass=isInitiallyHidden?"":DeviceFrameService.getClassName(deviceFrame),canvasContainer.addEventListener("mousedown",handleContainerMouseDown,!0),DeviceFrameService.render(mockupContainer,deviceFrame,scale,isInitiallyHidden)},clearDeviceFrame=function(){DeviceFrameService.destroy(),$scope.deviceClass="",canvasContainer.removeEventListener("mousedown",handleContainerMouseDown,!0)},updateDeviceFrameVisibility=function(isVisible){DeviceFrameService.toggle(isVisible),$scope.deviceClass=isVisible?DeviceFrameService.getClassName():""},refreshDeviceFrame=function(deviceFrame){clearDeviceFrame(),shouldRenderDeviceFrame(deviceFrame)&&renderDeviceFrame(deviceFrame)},updatePreviewStyles=function(){ResponsiveModeService.isResponsiveMode()?($scope.previewBackground=Engine.getPage().canvas.backgroundColor||"white",$scope.previewShadow="none"):($scope.previewBackground=ProjectSettings.getPreviewBackgroundColor(),$scope.previewShadow=ShadowService.getBoxShadowValue(ProjectSettings.getPreviewShadow(),scale))},updateCanvasDimensionsFromBreakpoint=function(page){var breakpointWidth=_.get(PagesService,"currentPageProperties.size.width",null),breakpointHeight=_.get(PagesService,"currentPageProperties.size.height",null);!_.isEmpty(getSketchArtboard())&&PagesService.currentPageProperties?updateCanvasDimensions(breakpointWidth,breakpointHeight):updateCanvasDimensionsFromEngine(page,breakpointWidth,breakpointHeight)},initDeviceFrame=function(){var deferred=$q.defer(),deviceFrame=ProjectSettings.getDeviceFrame();return shouldRenderDeviceFrame(deviceFrame)?renderDeviceFrame(deviceFrame):(clearDeviceFrame(),deferred.resolve(),deferred.promise)},handleContainerMouseDown=function(){body.classList.add(MOUSEDOWN_CLASS),canvasContainer.addEventListener("mouseup",handleContainerMouseUp,!0)},handleContainerMouseUp=function handleContainerMouseUp(){body.classList.remove(MOUSEDOWN_CLASS),canvasContainer.removeEventListener("mouseup",handleContainerMouseUp,!0)},onLoad=function(){var page=Engine.getPage();$window.useAntiFlicker&&(page=Engine.getLoadingPage()),workbenchNode=page.canvas.view.domElement,shouldUpdateCanvasDimensions=!0,onLoadAfterUpdate(page),initCanvasMove(),Preview.getAnimation()&&($rootScope.$emit(PreviewEnums.PAGE_ANIMATION_START),Preview.setAnimation(null)),FitCanvas.init()},setFixedElementClass=function(enable){var canvasContainer=$document[0].querySelector(".ng-canvas-container");enable?(canvasContainer.classList.remove(WORKBENCH.CLASSES.WITH_FIXED_ELEMENT),$timeout(function(){canvasContainer.classList.add(WORKBENCH.CLASSES.WITH_FIXED_ELEMENT)},0)):canvasContainer.classList.remove(WORKBENCH.CLASSES.WITH_FIXED_ELEMENT)},updateCanvasOuterAndInnerDimensions=function(currentPage){var currentPage=currentPage||Engine.getPage(),width=(ApplicationConfiguration.isDesignSystem?$scope:PagesService.currentPageProperties.size).width,height=(ApplicationConfiguration.isDesignSystem?$scope:PagesService.currentPageProperties.size).height;pageHasFixedElementsOrResponsiveMode=currentPage.hasFixedElements()||ResponsiveModeService.isResponsiveMode(),setNgCanvasDimensions(currentPage,height,width),shouldUpdateCanvasDimensions&&(updateCanvasDimensionsFromBreakpoint(currentPage),shouldUpdateCanvasDimensions=!1,$window.requestAnimationFrame(function(){Engine.refreshGrid(),$rootScope.$emit(PreviewEnums.ON_CANVAS_SIZE_CHANGE)}))},onLoadAfterUpdate=function(page){$document[0].querySelector(".ng-canvas").style.marginTop=0,$document[0].querySelector("#canvas-wrapper").scrollTop=0,updateCanvasOuterAndInnerDimensions(page),disableContextMenuForInteractives(),setFixedElementClass(pageHasFixedElementsOrResponsiveMode),GuidesService.setGuides(GuidesService.areGuidesVisible(),PagesService.currentPageId)},clearPage=function(){var page=Engine.getPage();page&&($window.useAntiFlicker||page.clear(),page.off($window.uxpinEngine.Page.Events.LOAD_FUNCTION_FINISHED,onLoad),page.off($window.uxpinEngine.Page.Events.LOAD_FUNCTION_FINISHED,onLoadAfterUpdate),page.off($window.uxpinEngine.Page.Events.CANVAS_SIZE_CHANGED,onCanvasSizeChange))},loadPage=function(pageId){FitCanvas.destroy(),PagesService.getCanvasData(pageId).then(function(data){if(hasStorybookElement(data)&&!wasLandingPageShown(data)&&!UsersService.isInProjectsAccount())return $scope.pageId=pageId,showLandingPage(data);var page,currentPageSize,width,height;getElementsRefs(),Engine.clearLoadingFontsFlag(),page=$window.useAntiFlicker?(clearPage(),Engine.initPage(container,content)):Engine.getPage()||Engine.initPage(container,content),data.pageId=parseInt(pageId),SpecificationService.setLastUpdateDate(data.last_update),data.pageId===page.pageId?($rootScope.$emit(PreviewEnums.LOADING,!1),FitCanvas.init()):(currentPageSize=_.get(PagesService,"currentPageProperties.size",{}),width=currentPageSize.width,height=currentPageSize.height,Engine.updateOffset(),pNav.isModeActive(pNav.PREVIEW_MODES.SPEC)&&Engine.updateCanvasRectangle(),initDeviceFrame().then(function(){return PreloadService.preloadImagesInBackground(data)}).then(function(){var sketchArtboard;$window.useAntiFlicker||clearPage(),updatePreviewStyles(),page.load(data,(Engine.setBreakpointPages(PagesService.getBreakpointPages()),Engine.setProjectName(ProjectsService.currentProjectName),page.on($window.uxpinEngine.Page.Events.LOAD_FUNCTION_FINISHED,onLoad),void page.on($window.uxpinEngine.Page.Events.CANVAS_SIZE_CHANGED,onCanvasSizeChange))),width&&(sketchArtboard=getSketchArtboard(),height=height||sketchArtboard.height||$scope.height||MIN_HEIGHT,updateCanvasDimensions(width,height))}).then(function(){$scope.onContentLoaded()}).then(PreloadService.preloadAllPages))})},hasStorybookElement=function(data){var _data$page=(null==data||null==(_data$page=data.page)||null==(_data$page=_data$page.canvas)||null==(_data$page=_data$page.props)?void 0:_data$page.storedElements)||null;return!(!_data$page||_data$page.length<=0)&&_data$page.some(function(element){var _data$page2;return(null==data||null==(_data$page2=data.page)||null==(_data$page2=_data$page2[element])?void 0:_data$page2.type)===STORYBOOK_TYPE})},getProjectHashFromDataParentResource=function getProjectHashFromDataParentResource(parentResource){return"projects"===parentResource.route?parentResource.id:getProjectHashFromDataParentResource(parentResource.parentResource)},wasLandingPageShown=function(data){data=getProjectHashFromDataParentResource(null==data?void 0:data.parentResource)||null;return!!data&&"true"===sessionStorage.getItem("".concat(WAS_LANDING_PAGE_SHOWN,"_").concat(data))},showLandingPage=function(data){var documentHash=getProjectHashFromDataParentResource(null==data?void 0:data.parentResource)||null;$scope.documentHash=documentHash,$scope.pageName=PagesService.getPageName(data.parentResource.id),$scope.isVisible=!0,angular.element(document.querySelector(".loader")).remove()},onComments=($scope.handleOpenStorybookPage=function(){sessionStorage.setItem("".concat(WAS_LANDING_PAGE_SHOWN,"_").concat($scope.documentHash),"true"),$scope.isVisible=!1,loadPage($scope.pageId)},$scope.$watchCollection("comments",function(value){value&&update()})),addComment=function(value){$scope.addingComment=value,$rootScope.$emit(PreviewEnums.ADDING_COMMENT,$scope.addingComment)},getContent=function(silent){var d=$q.defer();return ProjectsService.isDocument()?($scope.isLoading=!0,silent||$rootScope.$emit(PreviewEnums.LOADING,!0),DocumentsService.getDocument(DocumentsService.currentDocumentId).then(function(content){contentDimensions.width=content.size.width,contentDimensions.height=content.size.height,contentCropping=PagesService.getContentCropping(),$scope.contentPath="".concat(content.content,"?").concat((new Date).getTime()),$scope.dimensions={width:"".concat(contentDimensions.width*scale,"px"),height:"".concat(contentDimensions.height*scale,"px")},FitCanvas.setCanvasSize(contentDimensions.width,contentDimensions.height),$scope.overflow={"overflow-x":contentCropping.x?"auto":"hidden","overflow-y":contentCropping.y?"auto":"hidden"},$scope.isUXTestDocument&&($scope.dimensions=null),d.resolve(content)})):d.resolve(),d.promise},canScrollToComment=function(id,type){var comment=CommentsService.commentsMap[id];return!!comment&&id&&"panel"===type&&comment.id_page===PagesService.currentPageId&&(Settings.showResolvedComments||!comment.resolved.is)},scrollToComment=function(id,type,delay){var left,maxScrollLeft;canScrollToComment(id,type)&&(type=container.scrollHeight-container.offsetHeight,maxScrollLeft=container.scrollWidth-container.offsetWidth,(left=(id=CommentsService.commentsMap[id].position).x-container.offsetWidth/2)<0?left=0:maxScrollLeft<left&&(left=maxScrollLeft),(maxScrollLeft=id.y-container.offsetHeight/2)<0?maxScrollLeft=0:type<maxScrollLeft&&(maxScrollLeft=type),0<delay?animate(container,delay,{ease:"easeInOutPower2",scrollLeft:left,scrollTop:maxScrollLeft}):(container.scrollLeft=left,container.scrollTop=maxScrollLeft))},canDisplayComment=function(comment){return!comment._parent_comment&&comment.id_page===PagesService.currentPageId&&!Settings.disableComments&&(Settings.showResolvedComments||!comment.resolved.is)},update=function(){$scope.list=[],_.forEach($scope.comments,function(comment){CommentsFilter.canDisplayCanvasComment(comment)&&canDisplayComment(comment)&&$scope.list.push(comment)})},disableContextMenuForInteractives=function(){for(var handler=function(e){e.preventDefault()},elementList=$document[0].querySelectorAll(".interactive"),i=0,len=elementList.length;i<len;i++)elementList[i].addEventListener("contextmenu",handler,!1)},setNgCanvasDimensions=function(page,canvasContainerHeight,canvasContainerWidth){var width,sketchArtboard=getSketchArtboard(),ngCanvas=page.canvas.view.domElement,canvasContainerWidth=_.isEmpty(sketchArtboard)?(page=page.getCanvas().calculateBoundingBox(),width=Math.max(page.width,canvasContainerWidth),Math.max(page.height,canvasContainerHeight)):(width=sketchArtboard.width,sketchArtboard.height);canvasContainerWidth=_.max([canvasContainerWidth,MIN_HEIGHT]),width=_.max([width,MIN_WIDTH]),ngCanvas.style.height="".concat(canvasContainerWidth,"px"),ngCanvas.style.width="".concat(width,"px"),ngCanvas.style.willChange=shouldOptimizeCanvas()?WILL_CHANGE.TRANSFORM:WILL_CHANGE.DEFAULT,setScrollableContainer(canvasContainerWidth),GuidesService.refreshGuides()},setScrollableContainer=function(height){var canvasContainer=$document[0].querySelector(".ng-canvas-container"),canvasWrapper=$document[0].querySelector("#canvas-wrapper");_.isEmpty(getSketchArtboard())&&height!==CanvasContainerHeight.getHeight()?(PagesService.currentPageProperties&&PagesService.currentPageProperties.size.scrolly&&Engine.setScrollableContainer(canvasContainer),Engine.setScrollableWrapper(canvasWrapper)):(Engine.setScrollableContainer(canvasContainer),Engine.setScrollableWrapper(container))},onResponsiveModeChanged=$rootScope.$on(PreviewEnums.ON_CHANGE_RESPONSIVE_MODE,function(e,value){pageHasFixedElementsOrResponsiveMode=!!value||Engine.getPage().hasFixedElements(),updatePreviewStyles(),$scope.overflow=getCanvasOverflow(_.get(PagesService,"currentPageProperties.size",null)),setFixedElementClass(pageHasFixedElementsOrResponsiveMode),workbenchNode.style.willChange=1===scale&&shouldOptimizeCanvas()?WILL_CHANGE.TRANSFORM:WILL_CHANGE.DEFAULT,Engine.getPage().canvas.view.domElement.style.willChange=shouldOptimizeCanvas()?WILL_CHANGE.TRANSFORM:WILL_CHANGE.DEFAULT}),onShowCommentsResolvedChanged=$rootScope.$on(PreviewEnums.ON_SHOW_COMMENTS_RESOLVED_SETTINGS_CHANGED,update.bind(this)),onCommentTypeUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_TYPE_UPDATE,update.bind(this)),onCommentAssignedUserUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_ASSIGNED_USER_UPDATE,update.bind(this)),onCommentsFilterChange=$rootScope.$on(PreviewEnums.ON_COMMENTS_FILTER_CHANGE,update.bind(this)),onModeChanged=$rootScope.$on(PreviewEnums.ON_MODE_CHANGED,update.bind(this)),onAssignmentListOpen=$rootScope.$on(PreviewEnums.ON_ASSIGNMENT_LIST_OPEN,function(event,elementId,commentType){"canvas"===commentType&&ScrollService.scrollToElement($scope.canvasWrapperId,elementId)}),onZoomChange=$rootScope.$on(PreviewEnums.ON_ZOOM_CHANGE,function(e,value){var delay=!0,scrollLeft=container.scrollLeft,scrollTop=container.scrollTop,maxVerticalScrollPos=container.scrollHeight-container.offsetHeight,maxHorizontalScrollPos=container.scrollWidth-container.offsetWidth,oldScale=scale;verticalScrollRatio=scrollTop/maxVerticalScrollPos,horizontalScrollRatio=scrollLeft/maxHorizontalScrollPos,parseInt(100*Math.abs(scale-Engine.getScale()))<=1&&(delay=!1),scale=Engine.getScale(),pageHasFixedElementsOrResponsiveMode&&(1===scale&&1!==oldScale?setFixedElementClass(!0):1!==scale&&1===oldScale&&setFixedElementClass(!1)),updateCanvasDimensions($scope.width,$scope.height),Engine.updateOffset(),pNav.isModeActive(pNav.PREVIEW_MODES.SPEC)&&Engine.updateCanvasRectangle(),DeviceFrameService.updatePosition(scale),$scope.previewShadow=ResponsiveModeService.isResponsiveMode()?"none":ShadowService.getBoxShadowValue(ProjectSettings.getPreviewShadow(),scale),function(delay){function setScrollPosition(){container.scrollLeft=horizontalScrollRatio*(Math.floor(parseInt($scope.dimensions.width,10))-container.offsetWidth),container.scrollTop=verticalScrollRatio*(Math.floor(parseInt($scope.dimensions.height,10))-container.offsetHeight)}delay?_.delay(setScrollPosition):setScrollPosition()}(delay),refreshCanvasNodeStylesDebouced(scale)}),container=$document[0].querySelector("main > section.scrolled-container > section.scrolled-content"),content=$document[0].querySelector("main > section.scrolled-container > section.scrolled-content > section.canvas-container > section.preview-container"),initCanvasMove=(container.addEventListener("scroll",function(e){if(e.metaKey||e.ctrlKey)return e.preventDefault(),!1}),function(){$document[0].addEventListener("keydown",handleKeyDown),$document[0].addEventListener("keyup",handleKeyUp),workbenchNode.addEventListener("mousedown",handleMouseDown,!0)}),handleKeyDown=function(event){if(!(tabKeyHandler.handle(event)||-1<["input","textarea","select"].indexOf(event.target.tagName.toLowerCase()))){if(event.keyCode===KEY_CODES.ESC&&pNav.isModeActive(pNav.PREVIEW_MODES.COMMENT)){if(event.preventDefault(),$scope.addingComment||$scope.visibleComments.length)return void $rootScope.$emit(PreviewEnums.SELECT_COMMENT,null);pNav.setActiveMode(pNav.PREVIEW_MODES.SIMULATE)}event.keyCode===KEY_CODES.SPACE&&1<scale&&(spaceHeld=!0,workbenchNode.classList.add(WORKBENCH.CLASSES.PRESS),event.preventDefault())}},handleKeyUp=function(event){event.keyCode===KEY_CODES.SPACE&&(spaceHeld=!1,workbenchNode.classList.remove(WORKBENCH.CLASSES.PRESS))},handleMouseMove=function(event){var scrollPaneContent=$document[0].querySelector("#canvas-wrapper");scrollPaneContent.scrollLeft=scrollStartPosition.x+(mouseStartPosition.x-event.screenX),scrollPaneContent.scrollTop=scrollStartPosition.y-(event.screenY-mouseStartPosition.y),event.preventDefault(),event.stopImmediatePropagation()},handleMouseUp=function handleMouseUp(){mouseStartPosition={x:null,y:null},scrollStartPosition={x:null,y:null},workbenchNode.classList.remove(WORKBENCH.CLASSES.PRESS),workbenchNode.classList.remove(WORKBENCH.CLASSES.DRAG),$window.removeEventListener("mousemove",handleMouseMove,!0),$window.removeEventListener("mouseup",handleMouseUp)},handleMouseDown=function(event){var scrollPaneContent;spaceHeld&&(scrollPaneContent=$document[0].querySelector("#canvas-wrapper"),event.stopImmediatePropagation(),mouseStartPosition={x:event.screenX,y:event.screenY},scrollStartPosition={x:scrollPaneContent.scrollLeft,y:scrollPaneContent.scrollTop},workbenchNode.classList.add(WORKBENCH.CLASSES.DRAG),$window.addEventListener("mousemove",handleMouseMove,!0),$window.addEventListener("mouseup",handleMouseUp))};$scope.handleMouseDown=handleMouseDown,ApplicationConfiguration.isDesignSystem?angular.element(document).ready(function(){var symbol,accountPageOptions;ApplicationConfiguration.isDesignSystem&&(symbol=DesignSystem.getSymbolContent(),accountPageOptions=DesignSystem.getAccountPageOptions(),symbol.pageContent)&&(accountPageOptions=Engine.getPage()||Engine.initPage(container,content,accountPageOptions),Engine.updateOffset(),clearPage(),PreloadService.preloadImagesInBackground(symbol.pageContent),accountPageOptions.on($window.uxpinEngine.Page.Events.LOAD_FUNCTION_FINISHED,function(){onLoad(),PreviewNavigation.setActiveMode(pNav.PREVIEW_MODES.SPEC),pNav.isModeActive(pNav.PREVIEW_MODES.SPEC)&&Engine.updateCanvasRectangle()}),FitCanvas.destroy(),accountPageOptions.load(Object.assign({pageId:symbol.id,isComponent:!0},symbol.pageContent)),SpecificationService.setLastUpdateDate(symbol.pageContent.last_update),$scope.onContentLoaded(),PreloadService.preloadAllPages())}):($scope.$on("$viewContentLoaded",function(){ProjectsService.isDocument()?getContent():loadPage(PagesService.currentPageId)}),CommentsService.getComments().then(function(comments){getContent().then(function(){$scope.comments=comments,$timeout(function(){scrollToComment(CommentsService.selectedCommentId,"panel",0)},0)})}),LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.START,function(){$scope.isLiveSession=!0}),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.START,function(){$scope.isLiveSession=!0,$scope.isUTSession=!0}),LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,function(){$scope.isLiveSession=!1}),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,function(){$scope.isLiveSession=!1,$scope.isUTSession=!1}),editorSocket.on(PreviewEnums.SOCKET.ON_REFRESH_VARIABLES,function(){Engine.fetchAndUpdateVariables()}),editorSocket.on(PreviewEnums.SOCKET.ON_PROJECT_SETTINGS_CHANGE,function(data){var brakepointId=PagesService.currentBreakpointId;_.isEmpty(data.previewBackground)||(angular.isDefined(data.previewBackground[brakepointId])&&($scope.previewBackground=data.previewBackground[brakepointId]),ProjectSettings.updateSettings("previewBackground",data.previewBackground)),_.isEmpty(data.previewShadow)||(angular.isDefined(data.previewShadow[brakepointId])&&($scope.previewShadow=ShadowService.getBoxShadowValue(data.previewShadow[brakepointId],scale)),ProjectSettings.updateSettings("previewShadow",data.previewShadow)),_.isEmpty(data.deviceFrame)||(angular.isDefined(data.deviceFrame[brakepointId])&&refreshDeviceFrame(data.deviceFrame[brakepointId]),ProjectSettings.updateSettings("deviceFrame",data.deviceFrame))}),editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_SAVED,function(data){var dataObject;try{dataObject=angular.isString(data)?angular.fromJson(data):data}catch(e){}data=LiveSessionInstanceService.get();data&&data.isSession()||dataObject&&PagesService.currentPageId===parseInt(dataObject.id_page)&&updateCurrentPage()}.bind(this)),editorSocket.on(PreviewEnums.SOCKET.ON_COMMENT_CREATE,function(data){CommentsService.applyAddComment(data,{updateCommentsModelOnly:!0})}),editorSocket.on(PreviewEnums.SOCKET.ON_COMMENT_UPDATE,function(data){CommentsService.applyUpdateComment(data._id,data)}),editorSocket.on(PreviewEnums.SOCKET.ON_COMMENT_TYPE_UPDATE,function(data){CommentsService.applyUpdateCommentType(data._id,data.type)}),editorSocket.on(PreviewEnums.SOCKET.ON_COMMENT_CONTENT_UPDATE,function(data){CommentsService.applyUpdateCommentContent(data._id,data.comment)}),editorSocket.on(PreviewEnums.SOCKET.ON_COMMENT_ASSIGNED_USER_UPDATE,function(data){CommentsService.applyUpdateAssignedUser(data._id,data.assignedUserId)}),editorSocket.on(PreviewEnums.SOCKET.ON_COMMENT_DELETE,function(data){CommentsService.applyDeleteComment(data)}),editorSocket.on(PreviewEnums.SOCKET.ON_ACCOUNT_TYPEKIT_KIT_UPDATED,function(data){Engine.updateTypekitKit(data)}),editorSocket.on(PreviewEnums.SOCKET.ON_BREAKPOINT_UPDATE,function(data){var isDPS=data.page_size_type===PreviewEnums.PAGE_SIZE_TYPE.DPS_ENABLED;(isDPS&&PagesService.currentPageId===data.pageId||!isDPS&&PagesService.currentBreakpointId===data.version&&_.get(PagesService,"currentPageProperties.size",null))&&(_.set(PagesService,"currentPageProperties.size.width",_.get(data,"variation_data.width",null)),_.set(PagesService,"currentPageProperties.size.height",_.get(data,"variation_data.height",null)),_.set(PagesService,"currentPageProperties.size.scrollx",_.get(data,"variation_data.scrollx",null)),_.set(PagesService,"currentPageProperties.size.scrolly",_.get(data,"variation_data.scrolly",null)),shouldUpdateCanvasDimensions=!0,updateCanvasOuterAndInnerDimensions())}),isSomeElementMovedAddedDeletedResized=function(changedElements){return _.some(changedElements,function(element){return _.isNumber(_.get(element,"props.x"))||_.isNumber(_.get(element,"props.y"))||_.isNumber(_.get(element,"props.width"))||_.isNumber(_.get(element,"props.height"))||_.isNumber(_.get(element,"props.scaleX"))||_.isNumber(_.get(element,"props.scaleY"))||_.get(element,"props.storedElements")})},editorSocket.on(PreviewEnums.SOCKET.ON_CHANGE_PROPERTIES,function(data){data=data.changed_elements,_.get(PagesService,"currentPageProperties.size",null)&&isSomeElementMovedAddedDeletedResized(data)&&(shouldUpdateCanvasDimensions=!0)}))}angular.module("core").controller("CanvasController",CanvasController),CanvasController.$inject=["_","$document","$rootScope","$scope","$state","$timeout","$q","PagesService","DocumentsService","CommentsService","CommentsFilter","ProjectsService","Settings","animate","editorSocket","UsersService","LiveSessionInstanceService","UsabilityTestService","LiveShareService","ScrollService","Engine","PreloadService","PreviewNavigation","SpecificationService","PreviewCache","$window","DesignSystem","CanvasContainerHeight","DeviceFrameService","ProjectSettings","Mirroring","ShadowService","uxpinSharedComponents","GuidesService","tabKeyHandler","FitCanvas","ResponsiveModeService"]}(),angular.module("core").controller("DocumentController",["$rootScope","$scope","$state","$stateParams","DocumentsService","Settings","PreviewNavigation",function($rootScope,$scope,$state,$stateParams,DocumentsService,Settings,PreviewNavigation){"use strict";Settings.setMode($stateParams.mode),$stateParams.documentId||$state.go($state.current.name,{documentId:DocumentsService.currentDocumentId}),PreviewNavigation.initNavigation($state.params.previewMode,($state.params.panels||"").split(","))}]),function(){"use strict";angular.module("core").controller("HomeController",["$rootScope","$scope","$state","$timeout","$window","LiveShareService","UsabilityTestService","ProjectsService","PagesService","UsersService","Settings","editorSocket","socket","deviceDetectorHelper","AssignHelper","Engine","PageExitService","ApprovalsService","PreviewNavigation","FeatureToggler","hotkeys","_","uxpinSharedComponents","PreviewCache","BreakpointsService","Integrations",function($rootScope,$scope,$state,$timeout,$window,LiveShareService,UsabilityTestService,ProjectsService,PagesService,UsersService,Settings,editorSocket,socket,deviceDetectorHelper,AssignHelper,Engine,PageExitService,ApprovalsService,PreviewNavigation,FeatureToggler,hotkeys,_,uxpinSharedComponents,PreviewCache,BreakpointsService,Integrations){function onBreakpointsChange(){PreviewCache.removePagesList(),PreviewCache.removeBreakpoints();var mainPageVersion=PagesService.pagesMap[PagesService.currentPageId].version_of;Promise.all([PagesService.getPages(),BreakpointsService.getBreakpoints()]).then(function(data){data=data[0];$scope.breakpoints=PagesService.getPageBreakpoints(PagesService.currentPageId),0<data.length&&!function(pages,pageId){return _.some(pages,function(page){return page.id_page===pageId})}(data,PagesService.currentPageId)?$state.go($state.current.name,{pageId:mainPageVersion}):$scope.$digest()})}ApprovalsService.getIsActive()&&ApprovalsService.updateSeenAt(),socket.emit("addCollaborator",{socketRoomId:ProjectsService.currentProjectHash,isAnonymous:UsersService.isAnonymous(),isProject:UsersService.isInProjectsAccount()}),editorSocket.emit("addCollaborator",{socketRoomId:ProjectsService.currentProjectHash,isAnonymous:UsersService.isAnonymous(),isProject:UsersService.isInProjectsAccount(),accountId:window.ApplicationConfiguration.project.id_account}),editorSocket.on(PreviewEnums.SOCKET.ON_BREAKPOINT_ADD,onBreakpointsChange),editorSocket.on(PreviewEnums.SOCKET.ON_BREAKPOINT_DELETE,onBreakpointsChange),editorSocket.on(PreviewEnums.SOCKET.ON_BREAKPOINT_UPDATE,onBreakpointsChange);function liveSessionFinished(){$scope.breakpointsVisible=!ProjectsService.isDocument()&&1<$scope.breakpoints.length,$scope.breadcrumbsVisible=!1,$scope.isLiveSession=!1,$scope.isUsabilityTestingSession=!1,$scope.isParticipant=!1}socket=navigator.userAgent;$scope.PREVIEW_MODES=PreviewNavigation.PREVIEW_MODES,$scope.PREVIEW_PANELS=PreviewNavigation.PREVIEW_PANELS,$scope.MAIN_PANELS=PreviewNavigation.MAIN_PANELS,$scope.USER_AGENT=navigator.userAgent,$scope.isModeActive=PreviewNavigation.isModeActive,$scope.isPanelVisible=PreviewNavigation.isPanelVisible,$scope.isPanelExpanded=PreviewNavigation.isPanelExpanded,$scope.browser=uxpinSharedComponents.getBrowserName(socket),$scope.OS=uxpinSharedComponents.getOS(socket),$scope.leftPanelVisible=!1,$scope.rightPanelVisible=!1,$scope.tasksVisible=!1,$scope.specificationVisible=!1,$scope.panelFadeIn=!1,$scope.sitemapFadeIn=!1,$scope.specificationFadeIn=!1,$scope.isVisible=!1,$scope.breakpointsVisible=!ProjectsService.isDocument(),$scope.breakpoints=[],$scope.breadcrumbsVisible=!1,$scope.isLiveSession=!1,$scope.isUsabilityTestingSession=!1,$scope.dragging=!1,$scope.isLoading=!0,$scope.isParticipant=!1,$scope.isCommentsEnabled=!Settings.disableComments&&!ApprovalsService.getIsActive(),$scope.isAssignmentActive=AssignHelper.isAssignmentActive(),$scope.isMirroringEnabled=Settings.enableMirroring,$scope.showCrosshairCursor=!1,$scope.isAppViewAvailable=deviceDetectorHelper.isAppViewAvailable(),$scope.isSpecModeFeature=FeatureToggler.specMode,$scope.isDocumentationModeFeature=FeatureToggler.documentationMode,$scope.canShowSpecMode=!1,$scope.canShowDocumentationMode=!1,$scope.keyDown=function(e){8!==e.which||/INPUT|SELECT|TEXTAREA/i.test(e.target.tagName)&&!e.target.disabled&&!e.target.readOnly||e.preventDefault(),$rootScope.$emit("keyDown",e)},$rootScope.$on(PreviewEnums.LOADING,function(e,value){$scope.isLoading=value}),$rootScope.$on(PreviewEnums.SET_ANONYMOUS_NAME,function(e,name){name&&UsersService.setAnonymousName(name)}),$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(e){$scope.breakpointsVisible=1<PagesService.getPageBreakpoints(PagesService.currentPageId).length,$scope.breakpoints=PagesService.getPageBreakpoints(PagesService.currentPageId)}),$rootScope.$on(PreviewEnums.ON_MODE_CHANGED,function(e){$scope.isCommentsEnabled=!Settings.disableComments&&!ApprovalsService.getIsActive(),$scope.isMirroringEnabled=Settings.enableMirroring}),$rootScope.$on(PreviewEnums.DRAGGING_COMMENT,function(e,value){$scope.dragging=value}),$rootScope.$on(PreviewEnums.FEATURES_AVAILABILITY,function(e,features){$scope.canShowDocumentationMode=features.documentation,$scope.canShowSpecMode=features.specification}),LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.START,function(SessionService){$scope.isLiveSession=!0,SessionService.isHostSession()||($scope.breakpointsVisible=!1,$scope.breadcrumbsVisible=!0)}.bind(this,LiveShareService)),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.START,function(SessionService){$scope.isLiveSession=!0,$scope.isUsabilityTestingSession=!0,$scope.isVisible=!0,PreviewNavigation.setActiveMode(PreviewNavigation.PREVIEW_MODES.SIMULATE),PreviewNavigation.showPanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP),$scope.isParticipant=!SessionService.isHostSession()}.bind(this,UsabilityTestService));LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,liveSessionFinished.bind(this)),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,liveSessionFinished.bind(this)),angular.element($window).bind("resize",function(){Settings.isResponsive&&PagesService.setPageResponsive($window.innerWidth)}),$rootScope.$on(PreviewEnums.ON_APP_VIEW_PROMO_CLOSE,function(){$scope.isAppViewAvailable=!1}),$rootScope.$on(PreviewEnums.ON_PREVIEW_MODE_CHANGED,function(e,mode){$scope.currentMode=mode,$scope.showCrosshairCursor=$scope.isModeActive($scope.PREVIEW_MODES.COMMENT)}),$scope.$watchCollection(function(){return[PreviewNavigation.isLeftPanelVisible(),PreviewNavigation.isRightPanelVisible()]},function(val){$scope.leftPanelVisible=val[0],$scope.rightPanelVisible=val[1]}),uxpinSharedComponents.setDesktopAppLoadedClassName(),UsersService.initSettings(),Integrations.init()}])}(),function(){"use strict";function LayersController(_,$scope,$rootScope,Engine,ElementService,$timeout,PreviewNavigation,$document,$window,tinycolor){var timeout,vm=this,data=[],nodeMap={},KEY_CODES=keysEnums.KEY_CODES,MAX_ITEM_COUNT=50,MIN_SIZE=270;function onResize(e){e=setLeftPanelWidth(e.clientX);$window.localStorage.setItem("leftPanelWidth",e),$scope.$apply()}function resizeEnd(){$document[0].removeEventListener("mousemove",onResize),$document[0].removeEventListener("mouseup",resizeEnd),Engine.updateCanvasRectangle(),$document[0].onselectstart=null}function setLeftPanelWidth(value){var MAX_SIZE=$window.innerWidth/2,MAX_SIZE="".concat(Math.min(MAX_SIZE,Math.max(MIN_SIZE,value)),"px");return vm.layersWidthStyles={width:MAX_SIZE},$document[0].querySelector("main.canvas-main-container ").style.left=MAX_SIZE,parseInt(MAX_SIZE,10)}function clearLeftPanelWidth(){vm.layersWidthStyles={width:null},$document[0].querySelector("main.canvas-main-container ").style.left=null}vm.searchFor="",vm.focused=!1,vm.focusInput=function(){vm.focused=!0},vm.filterCollection=function(){var newCollection=[];vm.searchFor.trim()?($timeout.cancel(timeout),timeout=$timeout(function(){angular.forEach(vm.collection,function(element){var regex=new RegExp(quote(vm.searchFor.trim()),"i"),filteredChildren=function filterChildren(children){var filteredChildren=[];angular.forEach(children,function(element){var regex=new RegExp(quote(vm.searchFor),"i"),grandChildren=filterChildren(element.children);(regex.test(element.name)||grandChildren.length||isNodeIncludedByFontName(element,vm.searchFor.trim())||isNodeIncludedByColor(element,vm.searchFor.trim()))&&filteredChildren.push(_.extend({},element,{children:grandChildren}))});return filteredChildren}(element.children);(regex.test(element.name)||isNodeIncludedByFontName(element,vm.searchFor.trim())||isNodeIncludedByColor(element,vm.searchFor.trim())||filteredChildren.length)&&newCollection.push(_.extend({},element,{children:filteredChildren}))}),vm.filteredCollection=newCollection,vm.visibleItems=vm.filteredCollection.slice(0,MAX_ITEM_COUNT)},100)):(vm.filteredCollection=_.clone(vm.collection),vm.visibleItems=vm.filteredCollection.slice(0,MAX_ITEM_COUNT))},vm.resetSearch=resetSearch,vm.keyDown=function(event){var keyCode=event.keyCode;event.stopPropagation(),keyCode===KEY_CODES.ESC&&(_.isEmpty(vm.searchFor)?resetSearch():(vm.searchFor="",vm.filterCollection()));keyCode===KEY_CODES.ENTER&&event.preventDefault()},vm.nodeMap=nodeMap,vm.loadMore=function(){var length=vm.visibleItems.length,length=vm.filteredCollection.slice(length,length+MAX_ITEM_COUNT);length.length&&vm.visibleItems.push.apply(vm.visibleItems,length)},vm.isInitializationNeeded=!1,vm.layersWidthStyles={},vm.resizeStart=function(){$document[0].addEventListener("mousemove",onResize),$document[0].addEventListener("mouseup",resizeEnd),$document[0].onselectstart=function(){return!1}};var handlePanelChange=$rootScope.$on(PreviewEnums.ON_PANEL_CHANGED,function(e,mode){vm.isVisible=mode===PreviewNavigation.PREVIEW_PANELS.LAYERS,vm.isVisible&&vm.isInitializationNeeded&&init(),vm.isVisible&&vm.visibleItems&&vm.visibleItems.length&&(vm.visibleItems=vm.filteredCollection.slice(0,MAX_ITEM_COUNT)),vm.isVisible?(mode=$window.localStorage.getItem("leftPanelWidth"))&&setLeftPanelWidth(parseInt(mode,10)):clearLeftPanelWidth()}),handlePageLoad=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,function(){(PreviewNavigation.isPanelVisible(PreviewNavigation.PREVIEW_PANELS.LAYERS)?init:(vm.isInitializationNeeded=!0,clearLeftPanelWidth))()});function init(){var canvas=Engine.getPage().getCanvas();data=[];for(var i=canvas.children.length-1;0<=i;i--){var el=mapElement(canvas.children[i]);el.isHotspot||el.isTag||(!function addChildren(el,children){if(!children||!children.length||el.type===ElementEnums.TYPE.COMBINED_SHAPE)return;el.type===ElementEnums.TYPE.CODE_COMPONENT&&children.reverse();for(var i=children.length-1;0<=i;i--){var child=mapElement(children[i]);child.isHotspot||child.isTag||(addChildren(child,children[i].children),el.children.push(child),nodeMap[child.id]=child)}}(el,canvas.children[i].children),nodeMap[el.id]=el,data.push(el))}vm.collection=data,vm.filteredCollection=_.clone(vm.collection),vm.visibleItems=vm.filteredCollection.slice(0,MAX_ITEM_COUNT),vm.isInitializationNeeded=!1;var currentWidth=$window.localStorage.getItem("leftPanelWidth");currentWidth&&setLeftPanelWidth(parseInt(currentWidth,10))}function resetSearch(){vm.searchFor="",vm.focused=!1,vm.filterCollection()}function quote(str){return str.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function isNodeIncludedByFontName(node,name){return name&&3<=name.length&&node.searchIndex&&node.searchIndex.fonts&&node.searchIndex.fonts.find(function(font){return 0===(null==font?void 0:font.toLowerCase().trim().indexOf(name.toLowerCase().trim()))})}function isNodeIncludedByColor(node,name){return name&&node.searchIndex&&node.searchIndex.colors&&node.searchIndex.colors.find(function(color){return 4<=name.length&&0===(null==color?void 0:color.toLowerCase().trim().indexOf(name.toLowerCase().trim()))||tinycolor(name).isValid()&&tinycolor.equals(color,name)})}function mapElement(el){return{canHide:!function(el){return-1!==[ElementEnums.TYPE.GROUP_SKETCH_AREA,ElementEnums.TYPE.SYMBOL_SKETCH_AREA,ElementEnums.TYPE.VIRTUAL_SKETCH_AREA,ElementEnums.TYPE.ARTBOARD_SKETCH_AREA].indexOf(el.type)}(el),children:[],id:el.elementPath,type:el.type,typeSketch:el.typeSketch,name:el.name,searchIndex:el.serializeSearchIndex(),hasClippingMask:el.hasClippingMask,isMask:!!el.isMasked,isGroup:ElementService.isGroup(el),isMaskGroup:ElementService.isMaskGroup(el),isHotspot:ElementService.isHotspot(el),isTag:ElementService.isTag(el),isVisible:el.isVisible(),isSketchArtboard:ElementService.isSketchArtboard(el),isSymbol:function(el){return el.type===ElementEnums.TYPE.COMPONENT}(el),raw:el}}$scope.$on("$destroy",function(){handlePanelChange(),handlePageLoad()})}angular.module("core").controller("LayersController",LayersController),LayersController.$inject=["_","$scope","$rootScope","Engine","ElementService","$timeout","PreviewNavigation","$document","$window","tinycolor"]}(),angular.module("core").controller("LiveShareConfigurationController",["$scope","$state","$translate","$modal","$modalInstance","LiveShareService",function($scope,$state,$translate,$modal,$modalInstance,LiveShareService){"use strict";LiveShareService.getConfigurationOptions().then(function(options){$scope.liveShareOptions=options}),$scope.contributors=[],$scope.inviteUrl=null,LiveShareService.roomId()?$scope.inviteUrl=LiveShareService.getInviteURL(LiveShareService.roomId):LiveShareService.makeRoomReservation().then(function(roomId){$scope.inviteUrl=LiveShareService.getInviteURL(roomId)},function(){$modalInstance.close(),$state.reload()}),$scope.start=function(){var options;LiveShareService.startInitializing({options:(options=[],$scope.liveShareOptions.forEach(function(option){option.value&&options.push(option.param)}),options.join(","))}),$modalInstance.close()},$scope.onClickLink=function($event){$event.target.select()}}]),angular.module("core").controller("LiveShareFinishController",["$scope","$state","$stateParams","$timeout","PagesService","ProjectsService","LiveSessionInstanceService",function($scope,$state,$stateParams,$timeout,PagesService,ProjectsService,LiveSessionInstanceService){"use strict";var isLiveShareSession,TYPES=LiveShare.enums.SESSION_STATUS,LiveSessionInstanceService=LiveSessionInstanceService.get();switch($scope.backUrl=document.URL.split("#")[0],$scope.projectName=ProjectsService.currentProjectName,$scope.onClickBackToPreview=function($event){$event.preventDefault(),window.location.replace($scope.backUrl)},LiveSessionInstanceService.getType()===LiveShare.enums.SESSION_TYPES.TESTING?(isLiveShareSession=!1,LiveSessionInstanceService.finishTestingSession()):isLiveShareSession=!0,$stateParams.type){case TYPES.QUIT:$scope.message="LS_SESSION_QUIT",$timeout(function(){window.location.replace($scope.backUrl)},3e3);break;case TYPES.BANNED:$scope.message="LS_SESSION_BANNED";break;case TYPES.OVER:isLiveShareSession?$scope.message="LS_SESSION_OVER":($scope.backUrl=!1,$scope.message="UT_THANKS_FOR_CONTRIBUTION");break;default:$scope.message="LS_SESSION_404"}}]),function(){"use strict";function LiveShareInitializeCtrl(_,$q,$rootScope,$scope,$state,$stateParams,$timeout,$modal,ProjectsService,LiveSessionInstanceService,UsersService,UsabilityTestService,LiveShareService){LiveSessionInstanceService.get()||($stateParams.type===LiveShare.enums.SESSION_TYPES.TESTING?LiveSessionInstanceService.set(UsabilityTestService):LiveSessionInstanceService.set(LiveShareService));var LiveSessionInstance=LiveSessionInstanceService.get(),isLiveShareSession=LiveSessionInstance===LiveShareService;if(LiveSessionInstance.isSession())return $state.go("home.page");var myData={settings:{muted:LiveSessionInstance.muted}};function createSession(){var options,settings,roomData={roomID:LiveSessionInstance.roomId(),url:LiveSessionInstance.getDestinationUrl(),name:ProjectsService.currentProjectName,roomSettings:(options=$stateParams.options,settings=isLiveShareSession?{leadCursor:"host",triggerEvents:"host"}:{triggerEvents:"all",showCursor:"tester",leadCursor:"tester",toggleFollow:!1},options&&options.split(",").forEach(function(optionName){var optionName=LiveSessionInstance.translateOption(optionName,!0),key=Object.keys(optionName)[0];settings[key]=optionName[key]}),settings),type:LiveSessionInstance.getType()};myData=_.extend(myData,{sessionId:UsersService.me.id_session,name:$scope.userName}),isLiveShareSession?LiveSessionInstance.create(roomData,myData).then(sessionInitialized,sessionInitializationFailed):(LiveSessionInstance.getTestData(),LiveSessionInstance.save().then(function(testData){LiveSessionInstance.setDataId(testData._id),roomData.testDataId=testData._id,LiveSessionInstance.create(roomData,myData).then(function(roomData){sessionInitialized(roomData)},sessionInitializationFailed)}))}function joinToSession(){var onContentLoaded=$rootScope.$on(PreviewEnums.ON_CONTENT_LOADED,function(){var d;onContentLoaded(),d=$q.defer(),""!==$scope.userName.trim()&&d.resolve($scope.userName),$scope.$watch("userName",function(newValue){newValue&&""!==newValue.trim()&&d.resolve(newValue)}),d.promise.then(function(name){myData=_.extend(myData,{name:$scope.userName}),LiveSessionInstance!==UsabilityTestService||UsabilityTestService.getTestData()?LiveSessionInstance.join($stateParams.sessionId,myData).then(sessionInitialized,sessionInitializationFailed):(myData=_.extend(myData,{type:LiveShare.enums.USER_TYPES.TESTER}),LiveSessionInstance.join($stateParams.sessionId,myData).then(function(roomData){UsabilityTestService.setDataId(roomData.testDataId),UsabilityTestService.fetch().then(sessionInitialized.bind(this,roomData),sessionInitializationFailed)},sessionInitializationFailed))})})}function sessionInitialized(roomData){LiveSessionInstance.roomId(roomData.roomID),$scope.loadingProgress=100,$timeout(function(){$state.go("home.page",{pageId:$stateParams.pageId}),isLiveShareSession||LiveSessionInstance.isHostSession()?LiveSessionInstance.startSession():$modal.open({templateUrl:"/scripts/modules/core/views/usabilityTest/introduction.view.html",controller:"UsabilityTestIntroductionController",keyboard:!1,closeBlocked:!0})},800)}function sessionInitializationFailed(event){$state.go("home.page.live-share-finish",{type:LiveShare.enums.SESSION_STATUS.OVER}),window.console.error(event.stack)}$scope.sessionTypeName=isLiveShareSession?"LS_NAME_SHARING":"LS_NAME_TESTING",$scope.loadingProgress=0,$scope.projectName=ProjectsService.currentProjectName,$scope.userName="",$scope.loginUrl=null,UsersService.isAnonymous()?($scope.name=UsersService.isAnonymousNameSet()?UsersService.me.name:"",$scope.loginUrl="".concat(ApplicationConfiguration.loginPageURL,"?cb=").concat(encodeURIComponent(document.URL))):($scope.userName=UsersService.me.name||"",myData.customData={avatar:UsersService.me.avatar||null,uxpin_id:UsersService.me.id_user,id_session:UsersService.me.id_session}),$scope.onFormSubmit=function(name){$scope.working=!0,$scope.userName=name,UsersService.setAnonymousName(name)},($stateParams.sessionId?joinToSession:createSession)()}angular.module("core").controller("LiveShareInitializeCtrl",LiveShareInitializeCtrl),LiveShareInitializeCtrl.$inject=["_","$q","$rootScope","$scope","$state","$stateParams","$timeout","$modal","ProjectsService","LiveSessionInstanceService","UsersService","UsabilityTestService","LiveShareService"]}(),angular.module("core").controller("NavController",["PreviewNavigation","_","$rootScope","$scope","$state","$stateParams","$modal","CommentsService","LiveShareService","UsabilityTestService","UsersService","ProjectsService","UXPinService","Settings","ApprovalsService","CommentsState","Engine","appStateManager","FitCanvas","$timeout",function(PreviewNavigation,_,$rootScope,$scope,$state,$stateParams,$modal,CommentsService,LiveShareService,UsabilityTestService,UsersService,ProjectsService,UXPinService,Settings,ApprovalsService,CommentsState,Engine,appStateManager,FitCanvas,$timeout){"use strict";var onContentLoadedOff,onSelectCommentOff,onDeleteCommentOff,onStateChangeSuccessOff,onModeChangedOff,onPanelChangedOff;function selectComment(commentId,redirect){CommentsService.selectedCommentId=commentId,CommentsState.selectedGroupId=commentId?"canvas-".concat(commentId):null,$rootScope.$emit(PreviewEnums.SELECT_COMMENT,CommentsService.selectedCommentId,null,redirect),commentId&&redirect&&CommentsService.groupToOpen.push(commentId)}function handleCommentState(){$state.params.commentId&&CommentsService.selectedCommentId!==$state.params.commentId&&CommentsService.getComments().then(function(){var id=CommentsService.getRedirectId($state.params.commentId);selectComment(id,id!==$state.params.commentId)})}function enterState(state,params,options){$state.go(state,params,options)}$scope.$on("$destroy",function(){onSelectCommentOff(),onDeleteCommentOff(),onStateChangeSuccessOff(),onModeChangedOff(),onPanelChangedOff(),onContentLoadedOff&&onContentLoadedOff()}),$state.current.name===PreviewNavigation.getAddCommentState()&&(Engine.isPageLoaded()?handleCommentState():onContentLoadedOff=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,handleCommentState)),onSelectCommentOff=$rootScope.$on(PreviewEnums.SELECT_COMMENT,function(e,id,type,redirect){redirect=redirect?{location:"replace"}:null;{var pageId;(id=CommentsService.getRedirectId(id))?(UsersService.isAnonymous()||CommentsService.markAsRead(id),pageId=CommentsService.commentsMap[id].id_page,CommentsService.selectedCommentId=id,CommentsState.selectedGroupId="".concat(type,"-").concat(id),enterState(PreviewNavigation.getAddCommentState(),{pageId:pageId,commentId:id},redirect)):$state.current.name!==PreviewNavigation.getModeState()&&(CommentsService.selectedCommentId=null,CommentsState.selectedGroupId=null,enterState(PreviewNavigation.getModeState(),null,redirect))}}),onDeleteCommentOff=$rootScope.$on(PreviewEnums.DELETE_COMMENT,function(e,id){id===CommentsService.selectedCommentId&&selectComment(null)}),onStateChangeSuccessOff=$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){toParams.mode!==fromParams.mode&&Settings.setMode(toParams.mode);toState.name===PreviewNavigation.getModeState()&&(toParams.previewMode===fromParams.previewMode&&toParams.mode===fromParams.mode||PreviewNavigation.setActiveMode(toParams.previewMode),toParams.panels!==fromParams.panels||toParams.mode!==fromParams.mode)&&PreviewNavigation.setActivePanels((toParams.panels||"").split(","))}),onModeChangedOff=$rootScope.$on(PreviewEnums.ON_PREVIEW_MODE_CHANGED,function(){var state={mode:PreviewNavigation.getCurrentMode()};!angular.isUndefined($state.params.mode)&&$state.params.mode.includes("l")||appStateManager.saveState(state),$timeout(function(){PreviewNavigation.getCurrentMode()===PreviewNavigation.PREVIEW_MODES.COMMENT?(FitCanvas.block(),FitCanvas.resetZoom()):(FitCanvas.unblock(),FitCanvas.calculateAndSetZoom())},0)}),onPanelChangedOff=$rootScope.$on(PreviewEnums.ON_PANEL_CHANGED,function(){var state={panels:PreviewNavigation.getCurrentPanels()};appStateManager.saveState(state)})}]),function(){"use strict";var createElement=uxpinSharedComponents.React.createElement,createElement=[createElement("div",{},[createElement("p",{className:"text",key:"1p1"},"On the next few pages, youll find examples of really cool interactions and animations."),createElement("p",{className:"text",key:"1p2"},[createElement("strong",{key:"1p2s1"},"Select one of the photos")," in the gallery and click the ",createElement("strong",{key:"1p2s2"},"green button")," on the prototype to proceed."])]),createElement("div",{},[createElement("p",{className:"text",key:"2p1"},"Unlike in other prototyping tools, in UXPin elements like box or input are really native HTML elements. Meaning theyll behave just like your final product, website or app."),createElement("p",{className:"text",key:"2p2"},[createElement("strong",{key:"2p2s1"},"Write your post")," to see how the elements change with the power of conditional interactions. Once youreready, click the ",createElement("strong",{key:"2p2s2"},"Send")," button."])]),createElement("div",{},[createElement("figure",{className:"image-wrapper",key:"gif3"},[createElement("img",{src:"https://s3.amazonaws.com/uxpin/app/images/onboarding/widget/onboarding-step8.gif",srcSet:"https://s3.amazonaws.com/uxpin/app/images/onboarding/widget/onboarding-step8@2x.gif 2x, https://s3.amazonaws.com/uxpin/app/images/onboarding/widget/onboarding-step8.gif 1x",alt:"",key:"img3"})]),createElement("p",{className:"text",key:"3p1"},["Switch between the tabs in the top bar by clicking ",createElement("strong",{key:"3p1s1"},"Comment")," and ",createElement("strong",{key:"3p1s2"},"Spec"),".Try adding comments or inspect elements in the prototype to see how UXPin can improve your collaboration!"])]),createElement("div",{},[createElement("figure",{className:"image-wrapper",key:"gif4"},[createElement("img",{src:"https://s3.amazonaws.com/uxpin/app/images/onboarding/widget/onboarding-step9.gif",srcSet:"https://s3.amazonaws.com/uxpin/app/images/onboarding/widget/onboarding-step9@2x.gif 2x, https://s3.amazonaws.com/uxpin/app/images/onboarding/widget/onboarding-step9.gif 1x",alt:"",key:"img4"})]),createElement("p",{className:"text",key:"4p1"},["Our little journey ends here. To exit this tutorial, open the menu in the top left corner and select",createElement("strong",{key:"4p1s"},"Go to project"),"."])])],OnboardingSlides=[{header:"Test the interactions",content:createElement[0]},{header:"Prototypes that feel real",content:createElement[1]},{header:"Make your collaboration easier",content:createElement[2]},{header:"Make your collaboration easier",content:createElement[3]}],buttonLabels={next:"Next step",prev:"Previous step"},customNextLabels={3:"Open Dashboard"};function OnboardingCtrl($state,$window,PagesService,ProjectsService,UXPinService){var vm=this,startPageId=PagesService.pagesFlatList[2],isOnboardingDoc="My first project"===ProjectsService.currentProjectName,ProjectsService="EDU_PATH_ONBOARDING_COLLECTION"===ProjectsService.currentCollectionType;vm.isOnboardingCollection=ProjectsService&&isOnboardingDoc,vm.isOnboardingCollection&&(startPageId!==PagesService.currentPageId&&PagesService.setCurrentPageId(startPageId),vm.widgetContent=OnboardingSlides,vm.slidesOffset=5,vm.customSlidesCount=9,vm.currentPageId=PagesService.currentPageId,vm.buttonLabels=buttonLabels,vm.customNextLabels=customNextLabels,vm.customPrevActions={0:function(){var documentUrl=UXPinService.getCurrentDocumentURL($state.params.port);$window.location.href=documentUrl}},vm.customNextActions={2:function(callback){callback()},3:function(){$window.location.href=UXPinService.getDashboardURL()}},vm.showSlideEvent=function(slideNumber){"".concat("2018 educational prototype step viewed"," - step number")})}angular.module("core").controller("OnboardingCtrl",OnboardingCtrl),OnboardingCtrl.$inject=["$state","$window","PagesService","ProjectsService","UXPinService"]}(),function(){"use strict";function PageController($window,$timeout,_,$rootScope,$scope,$state,$stateParams,PagesService,CommentsService,ExportService,Settings,isMobile,PreviewNavigation,appStateManager,initialData){isMobile||ExportService.isExport()?(isMobile=$stateParams.mode||"",Settings.setMode(PreviewEnums.MODES_FLAGS.COMMENTS+PreviewEnums.MODES_FLAGS.SPECIFICATION+isMobile)):Settings.setMode($stateParams.mode),$scope.gotoPage=function(id,redirect,animation){id===parseInt($state.params.pageId)&&$timeout(function(){Preview.getAnimation()&&($rootScope.$emit(PreviewEnums.PAGE_ANIMATION_START),Preview.setAnimation(null))}),$state.go($state.current.name,{pageId:id},redirect?{location:"replace"}:null)},$scope.previousPageId=PagesService.currentPageId;ExportService=appStateManager.getCurrentState();if(initialData.redirectToPageId){ExportService.breakpoint&&PagesService.changePageBreakpoint(ExportService.breakpoint);isMobile=PagesService.getPageByBreakpoint(initialData.redirectToPageId);PagesService.setCurrentPageId(isMobile),$scope.gotoPage(PagesService.currentPageId,!0)}else{var pageId=parseInt($stateParams.pageId),Settings=!!PagesService.currentPageId;if(PagesService.pagesMap[pageId]&&null===PagesService.pagesMap[pageId].version_type)return ExportService=_.find(PagesService.pagesMap,function(page){return page.version_type===PagesService.defaultBreakpointId&&page.version_of===pageId}),PagesService.setCurrentPageId(ExportService.id_page),$scope.gotoPage(ExportService.id_page,!0);PagesService.pagesMap[pageId]?pageId!==PagesService.currentPageId&&(PagesService.setCurrentPageId(pageId),Settings)&&($rootScope.$emit(PreviewEnums.ADDING_COMMENT,!1),$rootScope.$emit(PreviewEnums.LOADING_COMMENTS,!0),CommentsService.getComments().then(function(){$rootScope.$emit(PreviewEnums.LOADING_COMMENTS,!1)})):(PagesService.setCurrentPageId(PagesService.getRootPage()),$scope.gotoPage(PagesService.currentPageId,!0))}var onNavigateToOff=$rootScope.$on(PreviewEnums.NAVIGATE_TO_PAGE,function(e,pageId,animation){animation?($rootScope.$emit(PreviewEnums.PAGE_ANIMATION_INIT,animation),$window.requestAnimationFrame(function(){$scope.gotoPage(pageId,!1,animation)})):$scope.gotoPage(pageId,!1)}),onNavigateBackOff=$rootScope.$on(PreviewEnums.NAVIGATE_HISTORY_BACK,function(){$scope.previousPageId&&$scope.gotoPage($scope.previousPageId)}),onPageInitializedOff=$rootScope.$on(PreviewEnums.ON_PAGE_INITIALIZED,function(){var currentState=appStateManager.getCurrentState();-1===$state.current.name.indexOf("home.page.live")&&-1===$state.current.name.indexOf("home.page.usability-test")&&PreviewNavigation.initNavigation($state.params.previewMode||currentState.mode,$state.params.panels?($state.params.panels||"").split(","):currentState.panels)});$scope.$on("$destroy",function(){onNavigateToOff(),onNavigateBackOff(),onPageInitializedOff()})}angular.module("core").controller("PageController",PageController),PageController.$inject=["$window","$timeout","_","$rootScope","$scope","$state","$stateParams","PagesService","CommentsService","ExportService","Settings","isMobile","PreviewNavigation","appStateManager","initialData"]}(),angular.module("core").controller("PlanUpgradeController",["$scope","$modal","$modalInstance","$transition","$window","localStorageService","UXPinService","$sce",function($scope,$modal,$modalInstance,$transition,$window,localStorageService,UXPinService,$sce){"use strict";var videoElem=null,onYoutubePlayerReady=null;$scope.video={id:"DN81evKgaW8",player:null},onYoutubePlayerReady=$scope.$on("youtube.player.ready",function($event,player){$scope.video.player=player,videoElem=angular.element(document.querySelector("section.movie-part"))}),$scope.getUpgradeUrl=function(){return $sce.trustAsResourceUrl(UXPinService.upgradePlanURL)},$scope.playMovie=function($event){$transition(videoElem,"movie-on").then(function(){$scope.video.player.playVideo()})},$scope.closeMovie=function($event){$transition(videoElem,videoElem.removeClass("movie-on")).then(function(){$scope.video.player.stopVideo()})},$scope.closeModal=function($event){$modalInstance.close()},$scope.upgradePlan=function($event){$event.preventDefault(),$modalInstance.close(),$modal.open({templateUrl:"/scripts/modules/core/views/planUpgrade/modalUpgrade.view.html",controller:"PlanUpgradeController",windowClass:"iframe-modal-box upgrade-plan-modal-box"})},$scope.$on("$destroy",function(){onYoutubePlayerReady()})}]),function(){"use strict";function ScreencastifyDownloadCtrl($scope,$state,$stateParams,$timeout,$window,ScreencastifyService){var timer,vm=this;vm.isChrome=!!$window.chrome,vm.isInstalled=!1,vm.downloadURL="https://chrome.google.com/webstore/detail/screencastify-screen-vide/mmeijimgabbpbgpdklnllpncmdofkcpn",vm.helpPageURL="https://uxpin.desk.com/customer/portal/articles/1775664",vm.createUsabilityTest=function(event){event.preventDefault(),$state.go("home.page.usability-test",{pageId:$stateParams.pageId,page:1}),$scope.$close()},vm.verifyInstallation=function verifyInstallation(){ScreencastifyService.isInstalled().then(function(isInstalled){isInstalled?$scope.$apply(function(){vm.isInstalled=!0}):timer=$timeout(verifyInstallation,1e3)})},$scope.$on("$destroy",function(){timer&&$timeout.cancel(timer)})}angular.module("core").controller("ScreencastifyDownloadCtrl",ScreencastifyDownloadCtrl),ScreencastifyDownloadCtrl.$inject=["$scope","$state","$stateParams","$timeout","$window","ScreencastifyService"]}(),angular.module("core").controller("SitemapController",SitemapController),SitemapController.$inject=["_","$scope","$state","$q","CommentsService","PagesService","UsabilityTestService","Settings","editorSocket","EscapeHtmlService","PreviewNavigation","SitemapService","Engine","hotkeys","CanvasContainerHeight","$document"],function(){"use strict";function TopBarController(_,$rootScope,$scope,$window,ApprovalsService,DesignSystem,DocumentationService,editorSocket,Engine,ExportService,FeatureToggler,LiveShareService,MODES,PagesService,PreviewNavigation,ProjectsService,Settings,SitemapService,SpecificationService,UsabilityTestService,UsersService,ScreencastifyRecorderApi,ResponsiveModeService){var onPreviewModeChangedOff,onPageLoadOff,vm=this,onChangePageOff=(vm.PREVIEW_MODES=PreviewNavigation.PREVIEW_MODES,vm.PREVIEW_PANELS=PreviewNavigation.PREVIEW_PANELS,vm.isModeActive=PreviewNavigation.isModeActive,vm.isAnonymous=UsersService.isAnonymous(),vm.isExport=ExportService.isExport(),vm.isExportMenuEnabled=!vm.isExport||ExportService.isMenuEnabled(),vm.isModeMenuEnabled=!vm.isExport||!!ApplicationConfiguration.modeMenuEnabled,vm.isSpecModeFeature=SpecificationService.isSpecificationVisible(),vm.isSpecModeStyleguideFeature=FeatureToggler.specModeStyleguide&&!ApplicationConfiguration.isDesignSystem,vm.isDocumentationModeFeature=FeatureToggler.documentationMode,vm.isResponsiveModeFeature=FeatureToggler.responsiveMode,vm.isApprovalMode=ApprovalsService.getIsActive(),vm.isHostSession=!1,vm.isLiveShareSession=!1,vm.isUserTestingSession=!1,vm.isRecording=!1,vm.finishWhenVideoReady=!1,vm.isLoaded=!1,vm.referer=getReferer(),vm.currentProjectHash=ProjectsService.currentProjectHash,vm.sessionStartTime=null,vm.hasProjectDocumentation=DocumentationService.hasProjectDocumentation(),vm.recorderId="UTRecorder",vm.isDesignSystem=ApplicationConfiguration.isDesignSystem,vm.symbolName=vm.isDesignSystem?_.unescape(DesignSystem.getSymbolContent().name):"",vm.toggleMode=function(event,mode){event&&event.target.classList.contains("icon-general-help")||(PreviewNavigation.setActiveMode(mode),mode===vm.PREVIEW_MODES.SPEC&&$window.mixpanel.track("spec_mode_opened"))},vm.togglePanel=function(event,panel){event.preventDefault(),PreviewNavigation.togglePanel(panel)},vm.isInteractionsHighlightDisabled=function(){return Settings.disableInteractionsHighlight},vm.isPanelVisible=function(panel){return PreviewNavigation.isPanelVisible(panel)},vm.canShowSitemap=function(){return!ProjectsService.isDocument()&&!Settings.disableSitemap&&!PreviewNavigation.isPanelDisabled(PreviewNavigation.PREVIEW_PANELS.SITEMAP)},vm.canShowActionsMenu=function(){return!(vm.isExport||vm.isApprovalMode||vm.isUserTestingSession||vm.isLiveShareSession||vm.isDesignSystem)},vm.canShowCommentMode=function(){return!vm.isUserTestingSession&&!vm.isLiveShareSession&&!Settings.disableComments},vm.canShowSpecMode=function(){return vm.isSpecModeFeature&&!vm.isApprovalMode&&!Settings.disableSpecification&&!vm.isUserTestingSession&&!vm.isLiveShareSession&&(FeatureToggler.specModeNoLogin||!FeatureToggler.specModeNoLogin&&!ApplicationConfiguration.userData.is_anonymous)},vm.canShowZoom=function(){return(vm.isModeActive(vm.PREVIEW_MODES.SIMULATE)||vm.isModeActive(vm.PREVIEW_MODES.SPEC)||vm.isModeActive(vm.PREVIEW_MODES.DOCUMENTATION))&&!ProjectsService.isDocument()&&!vm.isUserTestingSession&&!vm.isLiveShareSession},vm.canShowDocumentationMode=function(){return vm.hasProjectDocumentation&&!Settings.disableDocumentation&&!ProjectsService.isDocument()&&!vm.isUserTestingSession&&!vm.isLiveShareSession},vm.updateReferer=function(){vm.referer=getReferer()},vm.toggleInteractionsHighlightMode=function(event){event.preventDefault(),Settings.toggleSingleMode(PreviewEnums.MODES_FLAGS.INTERACTIONS)},vm.handleRecordingStart=function(){vm.isRecording=!0},vm.handleRecordingStop=function(){vm.isRecording=!1},vm.startResponsiveMode=function(event){event.preventDefault(),vm.isResponsiveMode=!0,document.body.classList.add("zen-mode"),document.querySelector("html").classList.add("preview-uxpin-responsive-view"),ResponsiveModeService.setResponsiveMode(!0),Engine.setMode(MODES.PREVIEW),Engine.setScale(1),$rootScope.$emit(PreviewEnums.ON_ZOOM_CHANGE),Engine.setResponsiveMode(!0),resetMultistates()},vm.stopResponsiveMode=function(event){event.preventDefault(),vm.isResponsiveMode=!1,ResponsiveModeService.setResponsiveMode(!1),Engine.setResponsiveMode(!1),document.body.classList.remove("zen-mode"),document.querySelector("html").classList.remove("preview-uxpin-responsive-view")},vm.handleVideoReady=function(videoData){UsabilityTestService.storeVideoData(videoData),vm.finishWhenVideoReady&&(UsabilityTestService.quit(),PreviewNavigation.enablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP),PreviewNavigation.setActivePanels(null))},vm.isResponsiveMode=!1,vm.isZenMode=!1,$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(e,id){var page=SitemapService.getPage(id),page=page&&page.version_of?page.version_of:id;vm.currentPageName=SitemapService.getUnescapedPageName(page),vm.shouldShowIndicator=SitemapService.hasPageDocumentation(id)})),onChangeZenModeOff=$rootScope.$on(PreviewEnums.ON_CHANGE_ZEN_MODE,function(event,zenMode){vm.isZenMode=zenMode,isSpecModeActive()&&!zenMode?Engine.setMode(MODES.SPEC):(Engine.setMode(MODES.PREVIEW),resetMultistates())}),onPanelChangedOff=$rootScope.$on(PreviewEnums.ON_PANEL_CHANGED,function(){vm.isExport&&Engine.updateCanvasRectangle()}),onPageDocumentationSetOff=editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_DOCUMENTATION_SET,function(data){var id;data&&(id=data.idPage,PagesService.getPages().then(function(){return vm.shouldShowIndicator=PagesService.currentPageId===id&&SitemapService.hasPageDocumentation(id),vm.hasProjectDocumentation=DocumentationService.hasProjectDocumentation(PagesService.pagesMap),!0}))});function setEngineMode(){isSpecModeActive()?(Engine.setMode(MODES.SPEC),Engine.setInteractionsEnabled(!1),Engine.clearSpecMode()):vm.isModeActive(vm.PREVIEW_MODES.DOCUMENTATION)?(Engine.setMode(MODES.DOCUMENTATION),Engine.setInteractionsEnabled(!1),resetMultistates()):isCommentsModeActive()?(Engine.setMode(MODES.COMMENT),Engine.setInteractionsEnabled(!1)):(Engine.setMode(MODES.PREVIEW),Engine.setInteractionsEnabled(!isCommentsModeActive()),resetMultistates()),Engine.stopInteractionLoops()}function getReferer(){return"".concat(ApplicationConfiguration.loginPageURL,"/?cb=").concat(encodeURIComponent($window.location.href))}function isCommentsModeActive(){return vm.isModeActive(vm.PREVIEW_MODES.COMMENT)}function isSpecModeActive(){return vm.isModeActive(vm.PREVIEW_MODES.SPEC)}function resetMultistates(){var elements;Engine.getPage()&&(elements=Engine.getPage().ElementsManager.elements,_.forEach(elements,function(element){element.isMultistate()&&element.showDefaultState()}))}function liveSessionStarted(SessionService){vm.toggleMode(!1,vm.PREVIEW_MODES.SIMULATE),vm.isLiveShareSession=!0,SessionService.isHostSession()&&(vm.isHostSession=!0),SessionService===UsabilityTestService&&(vm.isUserTestingSession=!0)}function liveSessionFinished(){vm.isLiveShareSession=!1,vm.isHostSession=!1,vm.isUserTestingSession=!1}$scope.$watch(SpecificationService.getLastUpdateDate,function(){var lastUpdatedDate=SpecificationService.getLastUpdateDate();vm.lastUpdatedDate=lastUpdatedDate?lastUpdatedDate.fromNow:"",vm.lastUpdatedDateTitle=lastUpdatedDate?lastUpdatedDate.full:""}),$scope.$on("$destroy",function(){onChangePageOff(),onChangeZenModeOff(),onPanelChangedOff(),onPageDocumentationSetOff(),onPreviewModeChangedOff&&onPreviewModeChangedOff()}),!ProjectsService.isDocument()&&vm.isModeMenuEnabled?onPageLoadOff=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,function(){var features={documentation:vm.canShowDocumentationMode(),specification:vm.canShowSpecMode()};setEngineMode(),$rootScope.$emit(PreviewEnums.FEATURES_AVAILABILITY,features),onPreviewModeChangedOff=$rootScope.$on(PreviewEnums.ON_PREVIEW_MODE_CHANGED,setEngineMode),onPanelChangedOff=$rootScope.$on(PreviewEnums.ON_PANEL_CHANGED,setEngineMode),vm.isLoaded=!0,onPageLoadOff()}):vm.isLoaded=!0,vm.isLiveSessionRunning=function(){return vm.isUserTestingSession||vm.isLiveShareSession},vm.finishLiveSession=function(){vm.isUserTestingSession?vm.isRecording?(vm.finishWhenVideoReady=!0,ScreencastifyRecorderApi.stopRecording(vm.recorderId)):(UsabilityTestService.quit(),PreviewNavigation.enablePanel(PreviewNavigation.PREVIEW_PANELS.SITEMAP),PreviewNavigation.setActivePanels(null)):LiveShareService.quit()},ApplicationConfiguration.isDesignSystem||(LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.START,liveSessionStarted.bind(this,LiveShareService)),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.START,liveSessionStarted.bind(this,UsabilityTestService)),LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,liveSessionFinished),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,liveSessionFinished))}angular.module("core").controller("TopBarController",TopBarController),TopBarController.$inject=["_","$rootScope","$scope","$window","ApprovalsService","DesignSystem","DocumentationService","editorSocket","Engine","ExportService","FeatureToggler","LiveShareService","MODES","PagesService","PreviewNavigation","ProjectsService","Settings","SitemapService","SpecificationService","UsabilityTestService","UsersService","ScreencastifyRecorderApi","ResponsiveModeService"]}(),angular.module("core").controller("UsabilityTestIntroductionController",["$rootScope","$scope","$sce","$filter","$modalInstance","UsabilityTestService","ProjectsService",function($rootScope,$scope,$sce,$filter,$modalInstance,UsabilityTestService,ProjectsService){"use strict";var testData=UsabilityTestService.getTestData();$scope.params={projectName:ProjectsService.currentProjectName,introduction:(ProjectsService=angular.copy(testData.meta.introduction),$sce.trustAsHtml($filter("newLine")(ProjectsService))),agreement:!1,activeStep:1,answerVideo:!1,blockVideo:!1},$scope.isActiveStep=function(number){return $scope.params.activeStep===number},$scope.onClickNextStep=function(number){$scope.params.activeStep=number},$scope.onClickStartSession=function(){var modalBoxWrapper=document.getElementById("modalBoxWrapper");$modalInstance.close(),document.body.removeChild(modalBoxWrapper),UsabilityTestService.startSession(LiveShare.enums.USER_TYPES.TESTER)},$scope.$on("$destroy",function(){onAllowCamera()});var onAllowCamera=$rootScope.$on(PreviewEnums.MEDIA_ACCESS,function(e,value){$scope.$apply(function(){$scope.params.answerVideo=!0,$scope.params.blockVideo=PreviewEnums.MEDIA_ACCESS_TYPE.DENIED===value})})}]),angular.module("core").controller("UsabilityTestTasksController",["$scope","$sce","$filter","UsabilityTestService",function($scope,$sce,$filter,UsabilityTestService){"use strict";var EVENTS=LiveShare.enums.EVENTS,ROOM_SETTINGS=LiveShare.enums.ROOM_SETTINGS;function formatTasks(tasksCollection){function formatTask(task){return task.content=function(string){if(string&&angular.isString(string))return $sce.trustAsHtml($filter("newLine")(string));throw new TypeError("String param required")}(task.content),task}return angular.isArray(tasksCollection)?tasksCollection.map(formatTask):formatTask(tasksCollection)}UsabilityTestService.registerObserverCallback(EVENTS.UPDATE_TASKS,function(tasks){$scope.$apply(function(){$scope.params.tasks=formatTasks(tasks)})}),$scope.isResolveButton=UsabilityTestService.getMyData().settings[ROOM_SETTINGS.CAN_CLOSE_TASKS],UsabilityTestService.registerObserverCallback(EVENTS.OPTIONS_CHANGED,function(data){data.key===ROOM_SETTINGS.CAN_CLOSE_TASKS&&$scope.$apply(function(){$scope.isResolveButton=data.val})}),UsabilityTestService.fetch().then(function(data){$scope.params={tasks:formatTasks(angular.copy(data.meta.tasks))}}),$scope.onClickResolveTask=function($event,task){$event.preventDefault(),UsabilityTestService.resolveTask(task.id)},UsabilityTestService.isHostSession()&&UsabilityTestService.startSession(LiveShare.enums.USER_TYPES.HOST)}]),angular.module("core").controller("UsabilityTestWizardController",["$q","_","$scope","$rootScope","$state","$timeout","$translate","$stateParams","UsabilityTestService","PagesService","ProjectsService","UsersService","animate",function($q,_,$scope,$rootScope,$state,$timeout,$translate,$stateParams,UsabilityTestService,PagesService,ProjectsService,UsersService,animate){"use strict";$scope.forms={},$scope.params={loading:!1,projectName:ProjectsService.currentProjectName,activeStepIndex:0,steps:[{breadcrumbs:!0,label:"Introduction",introduction:""},{breadcrumbs:!0,label:"Tasks",tasks:[],newTask:{title:"",content:""},onStart:function(){setFocusToNewTaskTitle()}},{breadcrumbs:!0,label:"Settings",options:[],breakpoints:{name:"Display selected breakpoints",enabled:!1,list:PagesService.getCurrentPageBreakpoints().map(function(breakpoint){return breakpoint.value=0,breakpoint})}},{breadcrumbs:!0,label:"Participant",inviteURL:"",onStart:function(){var step=$scope.getStep(3);step.inviteURL||UsabilityTestService.makeRoomReservation().then(function(){step.inviteURL=UsabilityTestService.getInviteURL()})}},{breadcrumbs:!1,label:"Finish"}]},$translate("UT_INTRODUCTION_TEXT").then(function(UT_INTRODUCTION_TEXT){$scope.params.steps[0].introduction=UT_INTRODUCTION_TEXT}),UsabilityTestService.getConfigurationOptions().then(function(options){$scope.getStep(2).options=options}),$scope.getStepsWithBreadcrumbs=function(){return _.filter($scope.params.steps,"breadcrumbs")},$scope.getStep=function(index){var value="next"===index?$scope.params.steps[$scope.params.activeStepIndex+1]:"prev"===index?$scope.params.steps[$scope.params.activeStepIndex-1]:void 0!==index?$scope.params.steps[index]:$scope.params.steps[$scope.params.activeStepIndex];if(value)return value;throw new RangeError('"'.concat(index,'" is out of range'))},$scope.getStepFormObject=function(index){return void 0===index?$scope.forms["step".concat($scope.params.activeStepIndex)]:$scope.forms["step".concat(index)]},$scope.isActiveStep=function(stepIndex){if(void 0===stepIndex)throw new TypeError("stepIndex argument is required.");return $scope.params.activeStepIndex===stepIndex},$scope.onClickNextStep=function(){var breakpoints=$scope.getStep().breakpoints;breakpoints&&breakpoints.enabled&&breakpoints.list&&checkIfCurrentBreakpointIsLocked(breakpoints.list,PagesService.currentBreakpointId)&&PagesService.setCurrentBreakpointId(getFirstUnlockedBreakpointId(breakpoints.list)),goToStep($scope.params.activeStepIndex+2)},$scope.onClickPrevStep=function(){goToStep($scope.params.activeStepIndex)},$scope.onClickAddNewTask=function(model){$scope.getStep(1).tasks.push(angular.copy(model)),model.title="",model.content="",scrollTaskListToBottom(),setFocusToNewTaskTitle()},$scope.onClickDeleteTask=function($event,$index){var step=$scope.getStep(1);$event.preventDefault(),angular.isNumber($index)?(step.tasks[$index].deleting=!0,$timeout(function(){step.tasks.splice($index,1)},300)):step.tasks.length?($index=step.tasks.length-1,step.tasks[$index].deleting=!0,step.newTask.title=step.tasks[$index].title,step.newTask.content=step.tasks[$index].content,$timeout(function(){step.tasks.splice($index,1)},300)):(step.newTask.title="",step.newTask.content="")};var newTaskTitleInput,scrollTaskListToBottom=function(){var contentWrapper=document.querySelector("#wizard-content");animate(contentWrapper,1,{scrollTop:contentWrapper.scrollHeight-contentWrapper.scrollTop+contentWrapper.scrollTop})},setFocusToNewTaskTitle=function(){(newTaskTitleInput=newTaskTitleInput||document.getElementById("new-task-title")).focus()},checkIfCurrentBreakpointIsLocked=($scope.onClickInput=function($event){$event.target.select()},$scope.onCopySuccess=function(){$scope.params.isCopied=!0,$timeout(function(){$scope.params.isCopied=!1},1e3)},$scope.onClickSessionStart=function(){var options;UsabilityTestService.startInitializing({testData:getStepsData(),options:(options=[],$scope.getStep(2).options.forEach(function(option){option.value&&options.push(option.param)}),options.join(","))})},$scope.$on("$destroy",function(){onStateChangeSuccess()}),function(breakpoints,breakpointId){var locked=!1;return _.forEach(breakpoints,function(breakpoint){if(breakpoint.id===breakpointId&&!breakpoint.value)return!(locked=!0)}),locked}),getFirstUnlockedBreakpointId=function(breakpoints){var breakpointId=null;return _.forEach(breakpoints,function(breakpoint){if(breakpoint.value)return breakpointId=breakpoint.id,!1}),breakpointId},goToStep=function(stepNumber){$scope.params.activeStepIndex!==stepNumber-1&&$state.go("home.page.usability-test",_.extend($stateParams,{step:stepNumber,pageId:PagesService.getPageByBreakpoint($stateParams.pageId)}))},onStateChangeSuccess=$rootScope.$on("$stateChangeSuccess",function(e,toState,toParams){$state.includes("**.usability-test.**")&&(toParams=parseInt(toParams.step,10)-1,isNaN(toParams)||($scope.params.activeStepIndex=toParams||0,toParams=$scope.getStep(),angular.isFunction(toParams.onStart)&&$timeout(toParams.onStart,100)))}),getStepsData=function(){return{meta:{introduction:angular.copy($scope.getStep(0).introduction),tasks:(step=$scope.getStep(1),tasks=angular.copy(step.tasks),step.newTask.title.trim()&&step.newTask.content.trim()&&tasks.push(angular.copy(step.newTask)),tasks.map(function(task,index){return task.id=index+1,task}))},user:{id:UsersService.me.id_user,is_trial:UsersService.me.is_trial},settings:(options=[],$scope.getStep(2).options.forEach(function(option){option.value&&options.push({param:option.param})}),options),project:{hash:ProjectsService.currentProjectHash,available_breakpoints:(step=$scope.getStep(2).breakpoints).enabled&&step.list?(available=[],step.list.forEach(function(breakpoint){breakpoint.value&&available.push({id:breakpoint.id})}),available):null}};var available,options,step,tasks}}]),function(){"use strict";function VideoUploadCtrl($scope,$window,ProjectsService,UXPinService,UsabilityTestService,UTVideoService){var vm=this;function prepareUploadData(){return UTVideoService.getUploadUrl(vm.videoName,vm.projectData).then(function(res){vm.uploadData=res.data},handleUploadError)}function upload(){setUploadState(vm.uploadStates.UPLOADING),UTVideoService.uploadVideo({url:vm.uploadData.uploadUrl,data:vm.videoData.file,uploadEventHandlers:{progress:handleUploadProgress}}).then(createDocument,handleUploadError)}function createDocument(){var recordingTime=(new Date).getTime();UTVideoService.createDocument({id_collection:vm.projectData.collectionId,video_url:vm.uploadData.downloadUrl,test_name:vm.videoName,height:vm.videoData.height,width:vm.videoData.width,duration:vm.videoData.duration,recording_time:recordingTime}).then(handleUploadSuccess,handleUploadError)}function handleUploadProgress(event){event.loaded&&event.total&&(vm.uploadProgress=Math.floor(event.loaded/event.total*100))}function handleUploadSuccess(){setUploadState(vm.uploadStates.UPLOADED),$window.removeEventListener("beforeunload",handleBeforeUnload)}function handleUploadError(){setUploadState(vm.uploadStates.ERROR)}function handleBeforeUnload(event){event.returnValue=!0}function setUploadState(state){vm.uploadState=state}vm.uploadStates={UPLOADING:"uploading",UPLOADED:"uploaded",ERROR:"error"},vm.projectData={collectionId:ProjectsService.currentCollectionId,projectId:ProjectsService.currentProjectId},vm.projectName=ProjectsService.currentProjectName,vm.dashboardURL=UXPinService.getCurrentCollectionURL(),vm.downloadURL="",vm.videoName="",vm.videoData=null,vm.uploadState=vm.uploadStates.UPLOADING,vm.uploadData=null,vm.uploadProgress=0,vm.retry=function(){vm.uploadProgress=0,vm.uploadData?upload():prepareUploadData().then(upload)},vm.videoData=UsabilityTestService.getVideoData(),vm.videoName="".concat(vm.projectName,".webm"),vm.downloadURL=function(file){return $window.URL.createObjectURL(file,{type:"video/webm"})}(vm.videoData.file),$window.addEventListener("beforeunload",handleBeforeUnload),$scope.$on("$destroy",function(){$window.removeEventListener("beforeunload",handleBeforeUnload)}),prepareUploadData().then(upload)}angular.module("core").controller("VideoUploadCtrl",VideoUploadCtrl),VideoUploadCtrl.$inject=["$scope","$window","ProjectsService","UXPinService","UsabilityTestService","UTVideoService"]}(),function(){"use strict";function capitalizeFirstLetters(_){return function(string){var wordsUpper,wordUpper;return string?parseInt(string)?string:(string=string.split(" "),wordsUpper=[],wordUpper="",_.forEach(string,function(word){wordUpper=word.charAt(0).toUpperCase()+word.slice(1),wordsUpper.push(wordUpper)}),wordsUpper.join(" ")):""}}angular.module("core").filter("capitalizeFirstLetters",capitalizeFirstLetters),capitalizeFirstLetters.$inject=["_"]}(),angular.module("core").filter("moment",function(){"use strict";return function(dateString,format){return moment(dateString).format(format)}}),angular.module("core").filter("momentFromNow",function(){"use strict";return function(dateString){return moment(dateString).fromNow()}}),angular.module("core").filter("newLine",function(){"use strict";return function(text){return text.replace(/\n/g,"<br/>")}}),function(){"use strict";angular.module("core").filter("notifyLabel",function(){return function(input,filters){switch(!0){case filters.all:return"All";case filters.none:return"None";case filters.projectMembers:return"Project members";case 1===input:return"1 person";default:return"".concat(input," people")}}})}(),function(){"use strict";angular.module("core").filter("parseUrl",function(){var URL_REGEXP=function(){var regex="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:").concat("(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return new RegExp(regex,"ig")}(),element=document.createElement("div");return function(html){var textNodes,uniqueUrls=[],urlsSeen={};return html&&(element.innerHTML=html,textNodes=function(el){for(var node,textNodes=[],walk=document.createTreeWalker(el,NodeFilter.SHOW_TEXT,null,!1);node=walk.nextNode();)textNodes.push(node);return textNodes}(element),angular.forEach(textNodes,function(textNode){textNode=textNode.textContent.match(URL_REGEXP);angular.forEach(textNode,function(url){url=url.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),urlsSeen[url]||(uniqueUrls.push(url),urlsSeen[url]=!0)})}),uniqueUrls.length)&&(textNodes=new RegExp(uniqueUrls.join("|"),"gi"),html=html.replace(textNodes,function(matched){return href="",href=/^https?:/.test(matched=matched)?matched:"http://".concat(matched),"".concat('<a class="underline-link blue-link" target="_blank"href="').concat(href,'">').concat(matched,"</a>");var href})),html}})}(),angular.module("core").filter("simpleMarkdown",function(){"use strict";return function(text){return text.replace(/\[(.*?)\]\(mailto:(.*?)\)/g,'<a class="md-email" href="mailto:$2">$1</a>')}}),function(){"use strict";function timer(_){function formatNumber(number){return number<10?"0".concat(number):number}return function(input){var hours,minutes;return!_.isNumber(input)||input<=0?"00:00:00":(hours=Math.floor(input/3600),minutes=Math.floor((input-3600*hours)/60),input=Math.floor(input-3600*hours-60*minutes),"".concat(formatNumber(hours),":").concat(formatNumber(minutes),":").concat(formatNumber(input)))}}angular.module("core").filter("timer",timer),timer.$inject=["_"]}(),function(){"use strict";angular.module("core").filter("toFloat",function(){return function(data,precision){return(precision?parseFloat(parseFloat(data).toFixed(precision)):parseFloat(data))||data}})}(),angular.module("core").filter("toInt",function(){"use strict";return function(data){return parseInt(data)||data}}),angular.module("core").filter("toPx",["_",function(_){"use strict";return function(data){var number=parseInt(data);return number&&_.isNumber(number)?"".concat(number,"px"):data}}]),function(){"use strict";function unitFilter(_,UnitService){function filter(value,skipRounding){return _.isNumber(value)?UnitService.convertPx(value,skipRounding):value}return filter.$stateful=!0,filter}angular.module("core").filter("unit",unitFilter),unitFilter.$inject=["_","UnitService"]}(),angular.module("core").directive("previewCloud",function($document){"use strict";function PreviewCloud($scope,$element){this.$scope=$scope,this.$element=$element,this.eventRefs={},this.cloudEl=$element[0].querySelector(".".concat("cloud"))}return PreviewCloud.prototype.start=function(){var _this16=this;angular.element(this.$element[0].querySelector("[preview-cloud-trigger]")).on("click",this.onClickToggle.bind(this)),this.$scope.$watch("previewCloud",function(value){value?_this16.open():_this16.close()})},PreviewCloud.prototype.open=function(){this.$element[0].classList.add("active"),this.cloudEl.classList.add("visible"),this.attachEvents()},PreviewCloud.prototype.close=function(){this.$element[0].classList.remove("active"),this.cloudEl.classList.remove("visible"),this.detachEvents()},PreviewCloud.prototype.clickOnDocument=function(e){e.target===this.$element[0]||this.$element[0].contains(e.target)||this.toggle(!1)},PreviewCloud.prototype.keyDown=function(e){27===e.keyCode&&this.toggle(!1)},PreviewCloud.prototype.attachEvents=function(){this.eventRefs.clickOnDocument=this.clickOnDocument.bind(this),this.eventRefs.keyDown=this.keyDown.bind(this),$document.on("click",this.eventRefs.clickOnDocument),$document.on("keydown",this.eventRefs.keyDown)},PreviewCloud.prototype.detachEvents=function(){$document.off("click",this.eventRefs.clickOnDocument),$document.off("keydown",this.eventRefs.keyDown)},PreviewCloud.prototype.onClickToggle=function(){this.toggle()},PreviewCloud.prototype.toggle=function(isOpen){var _this17=this,value=!this.$scope.previewCloud;void 0!==isOpen&&(value=!!isOpen),this.$scope.$apply(function(){_this17.$scope.previewCloud=value})},{restrict:"A",scope:{previewCloud:"=?"},link:function(scope,element){new PreviewCloud(scope,element).start()}}}),function(){"use strict";angular.module("core").directive("autoHeight",function($timeout){return{restrict:"A",link:function($scope,element,attrs){$scope.$watch(attrs.ngModel,function(){var el=element[0];$timeout(function(){el.style.height="auto",el.style.height="".concat(el.offsetHeight-el.clientHeight+el.scrollHeight,"px")},0)})}}})}(),angular.module("core").directive("captureVideo",["$rootScope","$timeout",function($rootScope,$timeout){"use strict";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return{restrict:"E",replace:!0,template:"<video autoplay></video>",link:function($scope,$element,attrs){var localMediaStream,video=$element[0];attrs.width&&($element.width=attrs.width),attrs.height&&($element.height=attrs.height),$element.on("$destroy",function(){localMediaStream&&(localMediaStream.stop(),video.src="")}),navigator.getUserMedia&&navigator.getUserMedia({video:!0,audio:!0},function(stream){localMediaStream=stream,video.src=window.URL.createObjectURL(stream),$rootScope.$emit(PreviewEnums.MEDIA_ACCESS,PreviewEnums.MEDIA_ACCESS_TYPE.ALLOWED)},function(err){window.console.error(err.stack),$rootScope.$emit(PreviewEnums.MEDIA_ACCESS,PreviewEnums.MEDIA_ACCESS_TYPE.DENIED)})}}}]),angular.module("core").directive("clickOutside",["$compile","$document",function($compile,$document){"use strict";function ClickOutside(scope,element){this._scope=scope,this._element=element,this._eventsRef={},this.attachEvents()}ClickOutside.prototype.attachEvents=function(){this._eventsRef.onClick=this.clickOutside.bind(this),document.addEventListener("click",this._eventsRef.onClick),this._element.on("$destroy",function(){this.detachEvents()}.bind(this))},ClickOutside.prototype.detachEvents=function(){document.removeEventListener("click",this._eventsRef.onClick)},ClickOutside.prototype.clickOutside=function(e){e.target===this._element[0]||this._element[0].contains(e.target)||this._scope.callback()};return{restrict:"A",scope:{callback:"&"},link:function(scope,element,attrs){new ClickOutside(scope,element)}}}]),function(){"use strict";function clipboardCopy(ClipboardService,$timeout,_){return{restrict:"A",scope:{successContainerClass:"@?",childSelector:"@?",skipCopyInfo:"=?"},link:function(scope,element,attrs){var clipboard,copyInfoElement,codeMirror,clickedLine,timeout,COPIED_INFO='<span class="copied-info custom-color">Copied</span>',SUCCES_CLASSNAME="copied",ANIMATION_DELAY=200,TIMEOUT_DELAY=400,container=scope.successContainerClass?findParent(element,scope.successContainerClass):element,CODE_MIRROR={WRAPPER_CLASS:"CodeMirror",COPIED_PLACE:"gutter",COPIED_CLASS:"copied"};function removeLineClass(lineNumber){codeMirror.removeLineClass(lineNumber,CODE_MIRROR.COPIED_PLACE,CODE_MIRROR.COPIED_CLASS)}function findParent(el,className){for(;el[0]&&(el=el.parent())&&!el.hasClass(className););return el}clipboard=scope.childSelector?new ClipboardService(scope.childSelector,{text:function(trigger){return trigger.textContent}}):new ClipboardService(element[0]),scope.childSelector&&setTimeout(function(){var codeMirrorEl=element[0].querySelector(".".concat(CODE_MIRROR.WRAPPER_CLASS));codeMirrorEl&&(codeMirror=codeMirrorEl.CodeMirror)},100),clipboard.on("success",function(e){return function(e,el){if(function(){if(!_.isEmpty(container)&&!scope.skipCopyInfo)copyInfoElement=angular.element(COPIED_INFO),container.append(copyInfoElement)}(),$timeout.cancel(timeout),codeMirror){for(var lineCount=codeMirror.lineCount(),i=0;i<lineCount;i++)removeLineClass(i);clickedLine=function(node){for(var children=node.parentNode.childNodes,num=0,i=0;i<children.length;i++){if(children[i]==node)return num;1==children[i].nodeType&&num++}return-1}(e.trigger.parentElement)}if(codeMirror&&scope.childSelector){e=findParent(angular.element(e.trigger),CODE_MIRROR.WRAPPER_CLASS);if(!_.isEqual(e[0].CodeMirror,codeMirror))return}$timeout(function(){var lineNumber;codeMirror&&scope.childSelector?(lineNumber=clickedLine,codeMirror.addLineClass(lineNumber,CODE_MIRROR.COPIED_PLACE,CODE_MIRROR.COPIED_CLASS)):el.addClass(SUCCES_CLASSNAME)},0),timeout=$timeout(function(){codeMirror&&scope.childSelector?removeLineClass(clickedLine):el.removeClass(SUCCES_CLASSNAME)},TIMEOUT_DELAY),$timeout(function(){if(copyInfoElement)copyInfoElement.remove()},TIMEOUT_DELAY+ANIMATION_DELAY)}(e,container)})}}}angular.module("core").directive("clipboardCopy",clipboardCopy),clipboardCopy.$inject=["ClipboardService","$timeout","_"]}(),angular.module("core").directive("highlight",["$compile",function($compile){"use strict";function sanitize(comment){return comment.replace(/{{/g,"{\x3c!-- --\x3e{").replace(/}}/g,"}\x3c!-- --\x3e}")}function highlight(search,comment){return angular.isString(comment)&&(comment=comment.replace(/&#10;/g,"<br>").replace(/\n/g,"<br>")),comparatorSearch(removeAtChar(search),comment)?comment.replace(new RegExp(removeAtChar(search),"gi"),function(match){return'<span class="highlight">'.concat(match,"</span>")}):comment}var comparatorSearch=function(search,comment){return!(!comment||!search)&&-1!==comment.toLocaleLowerCase().indexOf(search.toLocaleLowerCase())},removeAtChar=function(search){return 1<(null==search?void 0:search.length)&&"@"===search.charAt(0)?search.replace("@","").toLowerCase():search};return{restrict:"A",scope:{inputText:"=",searchFor:"="},link:function(scope,element,attrs){scope.$watch("inputText",function(value){element.html(sanitize(highlight(scope.searchFor,value))),$compile(element.contents())(scope)}),scope.$watch("searchFor",function(value){element.html(sanitize(highlight(value,scope.inputText))),$compile(element.contents())(scope)})}}}]),function(){"use strict";function overflowedPage($rootScope,PagesService,CommentsService,$timeout,$document,$window){return{restrict:"A",scope:!0,link:function(scope,element){var pageInfo;element.on("scroll",function(e){var domElement=element[0];$rootScope.$emit(PreviewEnums.ON_PAGE_SCROLL,domElement.scrollLeft,domElement.scrollTop)});var debounceFixScrollbars=_.debounce(function(){var domElement=element[0],initialOverflowX=domElement.style.overflowX,initialOverflowY=domElement.style.overflowY;"auto"!==initialOverflowX&&"auto"!==initialOverflowY||(domElement.style.overflowX="hidden",domElement.style.overflowY="hidden",$timeout(function(){domElement.style.overflowX=initialOverflowX,domElement.style.overflowY=initialOverflowY},300))}.bind(this,!0),100),onChangePage=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(){var domElement,canvasWrapper,scrollTopValue;$window.useAntiFlicker||(domElement=element[0],canvasWrapper=$document[0].querySelector("#canvas-wrapper"),scrollTopValue=domElement.scrollTop||canvasWrapper.scrollTop,$document[0].querySelector(".ng-canvas").style.marginTop="-".concat(scrollTopValue,"px"),domElement.scrollTop=0,domElement.scrollLeft=0,canvasWrapper.scrollTop=0)}),onPageLoaded=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,function(){debounceFixScrollbars()}),onZoomChange=$rootScope.$on(PreviewEnums.ON_ZOOM_CHANGE,function(e){debounceFixScrollbars()}),onSelectComment=$rootScope.$on(PreviewEnums.SELECT_COMMENT,function(e,id,type){var _overflowedPage,scrollY,scrollX;id&&PagesService&&PagesService.currentPageProperties&&(PagesService.currentPageProperties.size.scrollx||PagesService.currentPageProperties.size.scrolly)&&(id=CommentsService.commentsMap[id],scrollX=(_overflowedPage=element[0]).scrollLeft,scrollY=_overflowedPage.scrollTop,pageInfo=pageInfo||_overflowedPage.getBoundingClientRect(),function(pinX,scrollX){return!pageInfo||0<pinX+PreviewEnums.PIN_RADIUS-scrollX&&pinX-scrollX<pageInfo.width-PreviewEnums.PIN_RADIUS}(id.position.x,scrollX)||(scrollX=id.position.x+PreviewEnums.PIN_RADIUS-Math.round(_overflowedPage.offsetWidth/2),scrollX=Math.min(pageInfo.width,scrollX),_overflowedPage.scrollLeft=scrollX),!function(pinY,scrollY){return!pageInfo||0<pinY-scrollY&&pinY-scrollY<pageInfo.height-PreviewEnums.PIN_RADIUS}(id.position.y,scrollY))&&(scrollX=id.position.y+PreviewEnums.PIN_RADIUS-Math.round(_overflowedPage.offsetHeight/2),scrollX=Math.min(pageInfo.height,scrollX),_overflowedPage.scrollTop=scrollX)});scope.$on("$destroy",function(){onChangePage(),onPageLoaded(),onZoomChange(),onSelectComment()})}}}angular.module("core").directive("overflowedPage",overflowedPage),overflowedPage.$inject=["$rootScope","PagesService","CommentsService","$timeout","$document","$window"]}(),function(){"use strict";function pageAnimation($rootScope,PageAnimationFactory){return{restrict:"A",link:function(scope,element){$rootScope.$on(PreviewEnums.PAGE_ANIMATION_INIT,function(e,animation){Preview.setAnimation(animation),PageAnimationFactory.init(element,animation)}),$rootScope.$on(PreviewEnums.PAGE_ANIMATION_START,function(){PageAnimationFactory.startAnimation()})}}}angular.module("core").directive("pageAnimation",pageAnimation),pageAnimation.$inject=["$rootScope","PageAnimationFactory"]}(),function(){"use strict";function pvHideEmpty($timeout){return{restrict:"A",link:function(scope,el,attrs){$timeout(function(){_.isEmpty(el[0].innerHTML.trim())&&(el[0].style.display="none")})}}}angular.module("core").directive("pvHideEmpty",pvHideEmpty),pvHideEmpty.$inject=["$timeout"]}(),angular.module("core").directive("script",[function(){"use strict";return{restrict:"E",scope:!1,link:function(scope,element,attrs){"text/javascript"===attrs.type&&"1"===attrs.evaluate&&(attrs=element.text().replace(/(window.location.href)(\s*=\s*)([\w]+((\.)?[\w]+)*)/gim,"Preview.gotoPage($3)"),new Function(attrs)())}}}]),angular.module("core").directive("syncFocusWith",function($timeout,$rootScope){"use strict";return{restrict:"A",scope:{focusValue:"=syncFocusWith"},link:function($scope,$element,attrs){$scope.$watch("focusValue",function(currentValue,previousValue){!0!==currentValue||previousValue?!1===currentValue&&previousValue&&$element[0].blur():$timeout(function(){$element[0].focus()},10)})}}}),angular.module("core").directive("timeCounter",["moment",function(moment){"use strict";var startTime,element,interval;return{restrict:"E",replace:!0,template:"<time></time>",link:function($scope,$element,attrs){if(element=$element[0],attrs.class&&(element.className=attrs.class),!attrs.startTime)throw new Error("start-time attribute is required");startTime=attrs.startTime,interval=setInterval(function(){var diff=moment(new Date).diff(moment(startTime));element.textContent=moment(diff).format("mm:ss")},1e3),$element.on("$destroy",function(){clearInterval(interval)})}}}]),function(){"use strict";angular.module("core").directive("toggleable",["$document","$rootScope",function($document,$rootScope){function Toggleable(scope,element){this._scope=scope,this._element=element}function commentWindowNotHit(x,y){var comments=$document[0].querySelectorAll("section.comments-group");return!comments||Array.prototype.every.call(comments,function(el){return point={x:x,y:y},el=el.getBoundingClientRect(),!(point.x>=el.left&&point.x<=el.right&&point.y>=el.top&&point.y<=el.bottom);var point})}function onClick(e){var elementsToIgnore=$document[0].querySelectorAll("section.comments-group");(function(target,elementsToIgnore){return Array.prototype.every.call(elementsToIgnore,function(el){return el!==target&&!el.contains(target)})})(e.target,elementsToIgnore)&&commentWindowNotHit(e.clientX,e.clientY)&&$rootScope.$emit(PreviewEnums.SELECT_COMMENT,null)}Toggleable.prototype.toggle=function(e){this._scope.toggle(e)};return{restrict:"A",link:function(scope,element){var el=new Toggleable(scope,element);element.on("click",function(e){el.toggle(e),e.stopPropagation()}),$document.on("click",onClick),scope.$on("$destroy",function(){$document.off("click",onClick)})}}}])}(),function(){"use strict";angular.module("core").directive("whenScrolled",function(){return{restrict:"A",link:function(scope,element,attrs){var raw=element[0];element.bind("scroll",function(){raw.scrollTop+raw.offsetHeight>=raw.scrollHeight-100&&scope.$apply(attrs.whenScrolled)})}}})}(),function(){"use strict";function AssignHelper(UsersService,FeatureToggler){return{getOptions:function(){var projectMembers=UsersService.getProjectMembersWithoutMe(),otherMembers=UsersService.getOtherMembers(),options=[],me=_.clone(UsersService.me);return me.id_user=parseInt(me.id_user),options.push(me),options=options.concat(projectMembers,otherMembers)},isAssignmentActive:function(){return FeatureToggler.commentsAssignment&&UsersService.isInProjectsAccount()}}}angular.module("core").factory("AssignHelper",AssignHelper),AssignHelper.$inject=["UsersService","FeatureToggler"]}(),angular.module("core").factory("CommentsHelper",[function(){"use strict";return{getDiscussionRootCommentId:function(comment){return comment._parent_comment||comment._id},stripText:function(text){return text.replace(/(<([^>]+)>)/gi,"")},encodeMentions:function(text){var matches=text.match(/\[(.*?)\]\(mailto:(.*?)\)/g);return matches&&matches.forEach(function(string){text=text.replace(string,encodeURIComponent(string))}),text},decodeMentions:function(text){var matches=text.match(/%5B(.*?)%5D\(mailto%3A(.*?)\)/g);return matches&&matches.forEach(function(string){text=text.replace(string,decodeURIComponent(string))}),text}}}]),function(){"use strict";function deviceDetectorHelper(_,localStorageService){var ua=new UAParser(navigator.userAgent);return _.extend(ua,{isAppViewAvailable:function(){var uaData=this.getResult();return"iOS"===uaData.os.name&&"Mobile Safari"===uaData.browser.name?!window.navigator.standalone&&!localStorageService.get(PreviewEnums.APP_VIEW_PROMO_VIEWED):"Android"===uaData.os.name&&"Chrome"===uaData.browser.name&&!localStorageService.get(PreviewEnums.APP_VIEW_PROMO_VIEWED)}})}angular.module("core").factory("deviceDetectorHelper",deviceDetectorHelper),deviceDetectorHelper.$inject=["_","localStorageService"]}(),function(){"use strict";function NotifyHelper($cookies,NotificationsService,UsersService){var NOTIFY_SELECTION_COOKIE_NAME="notifyselection";return{getPeople:function(){var guestEmails=getGuestsEmails(),people=[];return _.each(UsersService.collaboratorsMap,function(collaborator){people.push(function(collaborator){return{id:collaborator.id_user,name:collaborator.name,email:collaborator.email,avatar:collaborator.avatar,isOwner:collaborator.is_owner}}(collaborator))}),_.each(guestEmails,function(email){people.push(function(email){return{id:MD5(email),name:email,email:email}}(email))}),_.sortBy(people,function(person){return(person.name||person.email).toLowerCase()})},getGuestsEmails:getGuestsEmails,getSelectedEmails:function(commentId){var notification=NotificationsService.notificationsMap[commentId];return commentId&&!_.isEmpty(notification)?_.map(notification.emails,function(item){return item.email}):remindSelection()||getDefaultSelectedEmails()},getDefaultSelectedEmails:getDefaultSelectedEmails,formatNotify:function(selectedEmails,mentionEmails){var map={};return _.each(selectedEmails,function(email){map[email]=getNotifyObject(email,0)}),_.each(mentionEmails,function(email){map[email]?map[email].is_mention=1:map[email]=getNotifyObject(email,1)}),_.toArray(map)},rememberSelection:function(selection){$cookies[NOTIFY_SELECTION_COOKIE_NAME]=angular.toJson(selection)},remindSelection:remindSelection};function getGuestsEmails(){var collaboratorsEmails=UsersService.collaboratorEmails,guestEmails=[];return _.each(NotificationsService.notificationsMap,function(notifiacation){_.each(notifiacation.emails,function(item){-1===collaboratorsEmails.indexOf(item.email)&&guestEmails.push(item.email)})}),_.uniq(guestEmails)}function getDefaultSelectedEmails(){var emails=[];return _.each(UsersService.collaboratorsMap,function(collaborator){collaborator.is_owner&&emails.push(collaborator.email)}),emails}function remindSelection(){var cookie=$cookies[NOTIFY_SELECTION_COOKIE_NAME];return"undefined"===cookie||_.isEmpty(cookie)||(cookie=angular.fromJson(cookie)),_.isArray(cookie)?cookie:null}function getNotifyObject(email,isMention){return{email:email,is_mention:isMention}}}angular.module("core").factory("NotifyHelper",NotifyHelper),NotifyHelper.$inject=["$cookies","NotificationsService","UsersService"]}(),function(){"use strict";function tabKeyHandler(_,Engine){return{handle:function(event){if("Tab"===event.key){var activeElement=document.activeElement;if(activeElement){var autoLayoutGroup=function(element){for(var result,parent=element;parent;)parent.classList.contains("auto-layout")&&(result=parent),parent=parent.parentElement;return result}(activeElement),elements=Engine.getAllElements(),elements=_.find(elements,function(elem){return elem.view.domElement===autoLayoutGroup});if(elements){elements=elements.getAllFormElements();try{var index=_.findIndex(elements,function(elem){return elem===activeElement||activeElement.contains(elem)});if(elements[index=(index+=1)===elements.length?0:index]&&elements[index].focus)return event.preventDefault(),elements[index].focus(),!0}catch(e){console.warn(e)}}}}return!1}}}angular.module("core").factory("tabKeyHandler",tabKeyHandler),tabKeyHandler.$inject=["_","Engine"]}(),angular.module("core").factory("ValidationHelper",[function(){"use strict";return{isEmail:function(email){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}}}]),function(){"use strict";function pvScrollTo($parse,$document,$timeout,animate){return{restrict:"A",link:function(scope,el,attrs){var model=$parse(attrs.pvScrollTo);function handleScroll(){scope.$apply(function(){model.assign(scope,null),el.off("scroll",handleScroll)})}scope.$watch(model,function(value){$timeout(function(){var targetEl=$document[0].getElementById(value);targetEl&&(animate(el[0],.5,{ease:"easeInOutPower2",scrollTop:function(targetEl){return targetEl.getBoundingClientRect().top-el[0].getBoundingClientRect().top+el[0].scrollTop}(targetEl)-10}),el.on("scroll",handleScroll))})})}}}angular.module("core").directive("pvScrollTo",pvScrollTo),pvScrollTo.$inject=["$parse","$document","$timeout","animate"]}(),function(){"use strict";function pvScrollToBottom($parse){return{restrict:"A",link:function(scope,el,attrs){var model=$parse(attrs.pvScrollToBottom);function onScroll(){var scrollOnBottom=0<el[0].scrollTop&&el[0].scrollHeight-el[0].scrollTop===el[0].clientHeight;scope.$apply(function(){model.assign(scope,scrollOnBottom),scrollOnBottom||el.off("scroll",onScroll)})}scope.$watch(model,function(value){value&&(el[0].scrollTop=el[0].scrollHeight,el.on("scroll",onScroll))})}}}angular.module("core").directive("pvScrollToBottom",pvScrollToBottom),pvScrollToBottom.$inject=["$parse"]}(),angular.module("core").run(["$templateCache",function($templateCache){$templateCache.put("/scripts/modules/comments/views/commentsFilters.view.html",'<section class="right-panel aside-panel" id="comments-filters" ng-if="vm.isVisible()">\n    <section id="comments-filter-panel" class="panel-container" ng-class="{\'loading\' : loading}">\n       <header>\n         <h2 class="g-heading-2">Filter comments</h2>\n       </header>\n\n      <section class="scrolled-container">\n        <section class="scrolled-content">\n\n          <comments-type-filters ng-if="!vm.isAnonymous && vm.isCommentTypeActive"></comments-type-filters>\n          <comments-assignee-filters ng-if="!vm.isAnonymous && vm.isAssignmentActive"></comments-assignee-filters>\n          <comments-other-filters></comments-other-filters>\n\n        </section>\n      </section>\n    </section>\n</section>\n'),$templateCache.put("/scripts/modules/comments/views/commentsNotes.view.html",'<section class="right-panel aside-panel" id="comments-notes">\n    <section id="comments-panel" class="panel-container" ng-class="{\'loading\' : vm.loading}" ng-if="vm.isVisible()">\n        <header>\n            <h2 class="g-heading-2 title">\n                {{::\'LBL_COMMENTS\' | translate}}\n                <div class="filter">\n                    <input type="checkbox" id="show-current-page-only-comments" class="state-helper" ng-model="vm.showCurrentPageOnly" ng-change="vm.onShowCurrentPageOnly()" ng-disabled="vm.isDocument">\n                    <label for="show-current-page-only-comments" class="fake-choose-label fake-checkbox">{{::\'LBL_CURRENT_PAGE\' | translate}}</label>\n                </div>\n            </h2>\n            <pv-comments-search search-for="vm.searchFor" on-search="vm.handleSearch($searchText)"></pv-comments-search>\n        </header>\n        <pv-comments-list\n          ng-if="vm.showCurrentPageOnly"\n          list-id="{{::vm.commentsListId}}"\n          min-item-height="{{::vm.minItemHeight}}"\n          comments="vm.list">\n        </pv-comments-list>\n        <pv-comments-tree\n          ng-if="!vm.showCurrentPageOnly"\n          tree-id="{{::vm.commentsListId}}"\n          min-item-height="{{::vm.minItemHeight}}"\n          tree="vm.tree"\n          show-breakpoints="vm.showBreakpoints()">\n        </pv-comments-tree>\n    </section>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/breadcrumbs.view.html",'<li ng-repeat="breadcrumb in breadcrumbs">\n    <span>{{breadcrumb}}</span>\n    <span ng-if="$last" class="breakpoint" ng-bind-html="breakpoint"></span>\n</li>\n'),$templateCache.put("/scripts/modules/core/views/canvas.view.html",'<main class="{{canvasContainerClass}} {{deviceClass}}" ng-class="{ \'hide-scrollbars\': isMirroringEnabled }" ng-style="{ background: previewBackground }">\n    <section ng-if="isVisible" class="preview-protected-screen live-share-landing full-page-landing with-input visible">\n      <img width="140" class="logo-merge" src="/img/merge-logo-dark.png" alt="Made with UXPin">\n      <div class="centering-block">\n          <img src="/img/merge-preview.svg" class="landing-center-image" alt="Merge protection preview">\n          <h1 class="ds-headline-7">You\'re going to open <strong>{{pageName}}</strong> page.</h1>\n          <h1 class="ds-headline-7">This page is from outside of your organization, and may contain malicious programs.</h1>\n          <form id="merge-protection-form" name="protection-form">\n              <button ng-click="handleOpenStorybookPage()" id="submit-button" class="ds-btn ds-btn--style-default centered-button" type="submit">Proceed</button>\n          </form>\n      </div>\n    </section>\n    <section class="scrolled-container">\n        <section id="{{canvasWrapperId}}" class="scrolled-content">\n            <section class="canvas-container" ng-style="dimensions" ng-class="{\'document-uxtest\': isUXTestDocument}">\n                <div class="{{mockupContainerClass}}"></div>\n                <inspector ng-if="isSpecMode()"></inspector>\n                <section\n                    class="preview-container"\n                    ng-click="highlightInteractions($event)"\n                    ng-style="{ \'box-shadow\': previewShadow }"\n                    add-comment>\n                    <div ng-if="isDocument" ng-include="contentPath" onload="onContentLoaded()" class="canvas-content" ng-style="overflow">\n                    </div>\n\n                    <div ng-if="isDocument">\n                      <preview-pin ng-show="addingComment" comment x="{{clickX}}" y="{{clickY}}"></preview-pin>\n                      <preview-pin\n                          ng-if="isModeActive(PREVIEW_MODES.COMMENT)"\n                          ng-repeat="comment in list track by comment._id"\n                          comment="comment"\n                          x="{{comment.position.x}}"\n                          y="{{comment.position.y}}">\n                      </preview-pin>\n                    </div>\n\n                    <div ng-if="!isDocument" overflowed-page class="ng-canvas-container" page-animation ng-style="overflow">\n                      <div comment-tooltip class="ng-canvas" ng-mousedown="handleMouseDown($event)"></div>\n                      <div ng-if="useAntiFlicker" comment-tooltip class="offscreen-ng-canvas" style="display: none" ng-mousedown="handleMouseDown($event)"></div>\n\n                      <div class="ng-overlay"></div>\n\n                      <preview-pin ng-show="addingComment" comment x="{{clickX}}" y="{{clickY}}"></preview-pin>\n                      <preview-pin\n                          ng-if="isModeActive(PREVIEW_MODES.COMMENT)"\n                          ng-repeat="comment in list track by comment._id"\n                          comment="comment"\n                          x="{{comment.position.x}}"\n                          y="{{comment.position.y}}">\n                      </preview-pin>\n                    </div>\n\n                    <preview-comment-container\n                      ng-if="addingComment"\n                      comment\n                      group-id="groupId"\n                      comment-type="commentType"\n                      type="canvas"\n                      x="clickX"\n                      y="clickY" >\n                    </preview-comment-container>\n\n                    <preview-comment-container\n                      ng-repeat="comment in visibleComments"\n                      comment="comment"\n                      group-id="groupId"\n                      comment-type="commentType"\n                      type="canvas"\n                      x="comment.position.x"\n                      y="comment.position.y" >\n                    </preview-comment-container>\n                </section>\n            </section>\n        </section>\n    </section>\n    <uxpin-badge></uxpin-badge>\n\n    <media-access-tip ng-if="isLiveSession || isUTSession"></media-access-tip>\n    <toastify></toastify>\n</main>\n'),$templateCache.put("/scripts/modules/core/views/home.view.html","<ui-view></ui-view>\n\n"),$templateCache.put("/scripts/modules/core/views/layers.view.html",'<section ng-style="vm.layersWidthStyles" class="left-panel aside-panel" id="layers">\n  <section id="layers-panel" class="panel-container">\n    <header>\n      <h2 class="g-heading-2">Layers</h2>\n      <form action="#" class="search" ng-submit="$event.preventDefault()">\n        <label for="layers-search" class="icon-font-search only-icon-font" ng-click="onSearchClick($event)">Search</label>\n        <input type="text"\n               placeholder="Search layers by name, color, font"\n               id="layers-search"\n               ng-class="{\'active\' : vm.searchFor}"\n               ng-model="vm.searchFor"\n               ng-change="vm.filterCollection()"\n               ng-focus="vm.focusInput()"\n               ng-keydown="vm.keyDown($event)"\n               sync-focus-with="vm.focused"\n               autocomplete="off">\n        <span class="reset-search" ng-click="vm.resetSearch()">Reset search</span>\n      </form>\n    </header>\n    <section class="scrolled-container section-layers">\n      <layers-list  when-scrolled="vm.loadMore()" ng-if="vm.isVisible" collection="vm.visibleItems" node-map="vm.nodeMap"></layers-list>\n    </section>\n  </section>\n  <div ng-mousedown="vm.resizeStart()" class="section-resize-handler"></div>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/onboarding.view.html",'<onboarding-widget\n  ng-if="vm.isOnboardingCollection"\n  start-page-id="vm.currentPageId"\n  slides-offset="vm.slidesOffset"\n  custom-slides-count="vm.customSlidesCount"\n  custom-prev-actions="vm.customPrevActions"\n  custom-next-actions="vm.customNextActions"\n  button-labels="vm.buttonLabels"\n  custom-next-labels="vm.customNextLabels"\n  hide-buttons="vm.hideButtons"\n  show-slide-event="vm.showSlideEvent"\n  content="vm.widgetContent">\n</onboarding-widget>\n'),$templateCache.put("/scripts/modules/core/views/sitemap.view.html",'<script type="text/ng-template" id="node_template.html">\n    <input class="state-helper expander-state-helper"\n           ng-if="node.nodes.length"\n           type="checkbox"\n           id="{{::\'node-\' + node.id}}"\n           ng-model="minimized[node.id]"\n           ng-change="toggleMinimized(node.id)">\n    <label ng-class="{\'expander\': true, \'is-expanded\': minimized[node.id]}" ng-if="node.nodes.length" for="{{::\'node-\' + node.id}}"></label>\n    <div class="option-name element-with-action-menu" ng-init="init(node.id)" ng-class="{\'selected\' : isActive(node.id)}" ng-click="onClick($event,node.id)">\n      <span ng-if="documentationExists(node.id)" class="only-icon-font icon-general-documentation"></span>\n      <a class="action-context-menu-available" ng-href="">\n        <span class="option-name-text" data-test="{{::\'sitemap-node-\' + node.name}}" highlight search-for="searchData.searchFor" input-text="::node.name"></span>\n      </a>\n    </div>\n    <ul ng-if="minimized[node.id]" class="branch">\n        <li ng-repeat="node in node.nodes | filter : filterSearch : comparatorSearch" ng-include="\'node_template.html\'"></li>\n    </ul>\n<\/script>\n\n<section ng-if="isSitemapAvailable && isVisible()" class="left-panel aside-panel"\n         id="sitemap">\n    <section id="sitemap-panel" class="panel-container" data-test="sitemap-panel">\n      <header>\n        <h2 class="g-heading-2">Sitemap</h2>\n        <form action="#" class="search">\n          <label for="pages-list-search" class="icon-font-search only-icon-font">Search</label>\n          <input type="text"\n                 placeholder="{{::\'INFO_SEARCH_SITEMAP\' | translate}}"\n                 id="pages-list-search"\n                 class="g-field"\n                 ng-class="{\'active\' : searchData.searchFor}"\n                 ng-model="searchData.searchFor"\n                 ng-keydown="keyDown($event)"\n                 ng-focus="focusInput($event)"\n                 sync-focus-with="searchData.focused"\n                 autocomplete="off">\n          <span class="reset-search" ng-click="searchData.searchFor=\'\'; focused=false;">Reset search</span>\n        </form>\n      </header>\n      <section class="scrolled-container">\n        <section class="pages-list scrolled-content" ng-class="{\'indent\' : isIndent()}">\n          <ul class="sitemap nav-tree" data-test="sitemap-nav-tree">\n            <li ng-repeat="node in treeMapped | filter : searchData.searchFor" ng-include="\'node_template.html\'" data-test="nav-tree-child-{{$index}}"></li>\n          </ul>\n        </section>\n      </section>\n    </section>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/tasks.view.html",'<section class="right-panel aside-panel" id="tasks">\n  <section id="tasks-panel" class="panel-container">\n    <header>\n      <h2 class="g-heading-2">Tasks</h2>\n    </header>\n    <section class="scrolled-container">\n      <section id="tasks-list" class="tasks-list scrolled-content">\n        <ul class="g-unordered-list">\n          <li class="task-container" ng-repeat="task in params.tasks" ng-class="{\'resolved\': task.resolved}">\n            <h3 class="g-heading-3"><span>Task {{$index + 1}}:</span>{{task.title}}</h3>\n            <section class="task-body">\n              <p ng-bind-html="task.content"></p>\n\n              <button class="btn-solid blue"\n                      ng-if="isResolveButton"\n                      ng-click="onClickResolveTask($event, task)"\n                      ng-disabled="task.resolved">Mark as resolved</button>\n            </section>\n          </li>\n        </ul>\n      </section>\n    </section>\n  </section>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/topBar.view.html",'<header id="top-bar" ng-if="vm.isLoaded">\n  <div class="left-actions" ng-class="{\'with-sitemap\': vm.canShowSitemap()}" ng-if="!vm.isZenMode">\n    <ul class="g-unordered-list options-list">\n      <li ng-if="!vm.isAnonymous && vm.canShowActionsMenu()" class="actions" data-test="menu-actions">\n        <actions></actions>\n      </li>\n      <li ng-if="vm.isAnonymous && vm.canShowActionsMenu()" class="sign-in">\n        <a class="underline-link blue-link"\n           ng-href="{{vm.referer}}"\n           ng-mouseover="vm.updateReferer()">Sign in</a>\n      </li>\n      <li class="separator reduce-right" ng-if="!vm.isDesignSystem && (vm.canShowActionsMenu() && vm.canShowSitemap() || vm.isModeActive(vm.PREVIEW_MODES.SPEC))"></li>\n      <li class="layers" ng-if="vm.isModeActive(vm.PREVIEW_MODES.SPEC)">\n        <a href="#layers"\n           ng-click="vm.togglePanel($event, vm.PREVIEW_PANELS.LAYERS)"\n           class="icon-general-layers gray-link button-style"\n           ng-class="{\'active\': vm.isPanelVisible(vm.PREVIEW_PANELS.LAYERS)}">\n            <span class="ellipsis-helper" title="{{vm.currentPageName}}">\n              <span class="underline">\n                Layers\n              </span>\n            </span>\n        </a>\n      </li>\n      <li ng-if="vm.canShowSitemap() && vm.isExportMenuEnabled && !vm.isDesignSystem">\n          <a href="#sitemap"\n             data-test="show-sitemap-button"\n             ng-click="vm.togglePanel($event, vm.PREVIEW_PANELS.SITEMAP)"\n             class="icon-general-sitemap gray-link button-style"\n             ng-class="{\'active\': vm.isPanelVisible(vm.PREVIEW_PANELS.SITEMAP)}"\n             data-show-node="tooltip">\n           <span class="label">Sitemap:</span>\n            <span class="ellipsis-helper" title="{{vm.currentPageName}}">\n              <span class="underline" data-test="show-sitemap-button-page-name">\n                {{vm.currentPageName}}\n              </span>\n            </span>\n            <em class="tooltip">Sitemap</em>\n          </a>\n      </li>\n      <li class="breakpoints" ng-if="!vm.isDesignSystem">\n        <pv-breakpoints breakpoints="breakpoints"></pv-breakpoints>\n      </li>\n      <li class="symbol-name" ng-if="vm.isDesignSystem">\n        <h2 class="g-heading-2">{{vm.symbolName}}</h2>\n      </li>\n    </ul>\n  </div>\n\n  <nav class="main-actions nav-tabbed small-tabs nav-top-bar" ng-if="vm.isModeMenuEnabled && !vm.isZenMode && !vm.isDesignSystem">\n    <ul class="tabs-wrapper">\n      <li class="tab with-icon"\n          ng-if="!vm.isLiveSessionRunning()"\n          ng-click="vm.toggleMode($event, vm.PREVIEW_MODES.SIMULATE)"\n          ng-class="{active: vm.isModeActive(vm.PREVIEW_MODES.SIMULATE)}"\n          data-test="top-bar-simulate-icon">\n        <a href class="tab-link icon-general-simulate">Simulate</a>\n      </li>\n      <li class="tab with-icon"\n          ng-if="vm.canShowCommentMode()"\n          ng-click="vm.toggleMode($event, vm.PREVIEW_MODES.COMMENT)"\n          ng-class="{active: vm.isModeActive(vm.PREVIEW_MODES.COMMENT)}"\n          data-test="top-bar-comment-icon">\n        <a href class="tab-link icon-general-comment">Comment</a>\n      </li>\n      <li class="tab with-icon"\n          ng-if="vm.canShowSpecMode()"\n          ng-click="vm.toggleMode($event, vm.PREVIEW_MODES.SPEC)"\n          ng-class="{active: vm.isModeActive(vm.PREVIEW_MODES.SPEC)}"\n          data-test="top-bar-spec-icon">\n        <a href class="tab-link icon-general-spec">Get Code</a>\n      </li>\n      <li class="tab with-icon"\n          ng-if="vm.canShowDocumentationMode()"\n          ng-click="vm.toggleMode($event, vm.PREVIEW_MODES.DOCUMENTATION)"\n          ng-class="{active: vm.isModeActive(vm.PREVIEW_MODES.DOCUMENTATION), indicator: vm.shouldShowIndicator}"\n          data-test="top-bar-documentation-icon">\n        <a href class="tab-link icon-general-documentation">\n          Documentation\n        </a>\n      </li>\n      <li class="tab-button wide red"\n          ng-if="vm.isLiveSessionRunning()"\n          ng-click="vm.finishLiveSession()"\n          ng-class="{\'red\': vm.isHostSession}">\n        {{vm.isHostSession ? \'End session\' : \'Leave session\'}}\n      </li>\n      <pv-screencastify-recorder\n        ng-if="vm.isUserTestingSession && vm.isHostSession"\n        id="{{vm.recorderId}}"\n        on-start-recording="vm.handleRecordingStart()"\n        on-stop-recording="vm.handleRecordingStop()"\n        on-video-ready="vm.handleVideoReady($videoData)"></pv-screencastify-recorder>\n    </ul>\n  </nav>\n\n  <div class="right-actions">\n    <live-share ng-if="vm.isLiveSessionRunning()"\n                is-host-session="vm.isHostSession"\n                is-live-share-session="vm.isLiveShareSession"\n                is-user-testing-session="vm.isUserTestingSession"></live-share>\n    <ul class="g-unordered-list options-list">\n      <li ng-if="vm.canShowZoom()" class="zoom-option">\n        <zoom></zoom>\n      </li>\n      <li ng-if="vm.isModeActive(vm.PREVIEW_MODES.SIMULATE) && !vm.isLiveSessionRunning() && !vm.isZenMode">\n        <mirror-app></mirror-app>\n      </li>\n      <li ng-if="vm.isModeActive(vm.PREVIEW_MODES.SPEC) && vm.isSpecModeStyleguideFeature && !vm.isZenMode" class="styleguide">\n        <a href="/styleguide/{{vm.currentProjectHash}}"\n           class="icon-general-external-link gray-link with-icon underline-link"\n           target="_blank"\n           data-url-browser="true">\n          Style guide\n        </a>\n      </li>\n      <li ng-if="(vm.isModeActive(vm.PREVIEW_MODES.SPEC) && vm.isSpecModeStyleguideFeature || vm.isDesignSystem) && !vm.isZenMode" class="last-updated">\n        Updated:\n        <time title="{{vm.lastUpdatedDateTitle}}">\n          {{vm.lastUpdatedDate}}\n        </time>\n      </li>\n      <li ng-if="vm.isModeActive(vm.PREVIEW_MODES.SIMULATE) && !vm.isLiveSessionRunning() && !vm.isZenMode">\n        <a href="#interactions"\n           class="btn-icon icon-general-interaction"\n           ng-class="{\'active\': !vm.isInteractionsHighlightDisabled()}"\n           ng-click="vm.toggleInteractionsHighlightMode($event)"\n           data-show-node="tooltip">\n          <em class="tooltip float-right">Highlight Interactions</em>\n        </a>\n      </li>\n      <div\n        ng-if="vm.isZenMode"\n        id="full-screen-draggable-bar">\n      </div>\n      <li ng-if="vm.isModeActive(vm.PREVIEW_MODES.SIMULATE) && !vm.isLiveSessionRunning() && !vm.isExport">\n        <zen-mode>\n          <a href="#full-screen"\n             ng-if="!vm.isZenMode"\n             class="btn-icon btn-fullscreen-on icon-general-fullscreen"\n             data-show-node="tooltip">\n            <em class="tooltip" ng-class="{\'float-right\': vm.isModeActive(vm.PREVIEW_MODES.SIMULATE)}">Full screen</em>\n          </a>\n          <a\n              ng-if="vm.isZenMode"\n              href="#full-screen"\n              class="btn-fullscreen-off">\n            Exit fullscreen\n          </a>\n        </zen-mode>\n      </li>\n\n      <li ng-if="vm.isModeActive(vm.PREVIEW_MODES.SIMULATE) && !vm.isLiveSessionRunning() && !vm.isExport && vm.isResponsiveModeFeature">\n        <a href="#responsive-mode"\n           ng-click="vm.startResponsiveMode($event)"\n           class="btn-icon btn-fullscreen-on icon-general-responsive"\n           data-show-node="tooltip">\n          <em class="tooltip" ng-class="{\'float-right\': vm.isModeActive(vm.PREVIEW_MODES.SIMULATE)}">Responsive mode</em>\n        </a>\n        <a\n          ng-if="vm.isResponsiveMode"\n          ng-click="vm.stopResponsiveMode($event)"\n          href="#full-screen"\n          ng-style="{ width: \'110px\'}"\n          class="btn-fullscreen-off">\n          Exit Responsive\n        </a>\n      </li>\n\n      <li>\n      <filter ng-if="vm.isModeActive(vm.PREVIEW_MODES.COMMENT) && !vm.isZenMode" toggle-panel="vm.togglePanel" is-panel-visible="vm.isPanelVisible"></filter>\n      <li ng-if="vm.isModeActive(vm.PREVIEW_MODES.COMMENT) && !vm.isZenMode">\n        <a href="#comments"\n           ng-click="vm.togglePanel($event, vm.PREVIEW_PANELS.COMMENTS)"\n           class="icon-general-comments-multiple gray-link comments button-style"\n           ng-class="{\'active\': vm.isPanelVisible(vm.PREVIEW_PANELS.COMMENTS)}">\n          <span class="underline">Comments</span>\n        </a>\n      </li>\n      <li ng-if="vm.isUserTestingSession && !vm.isZenMode">\n        <a href="#tasks"\n           ng-click="vm.togglePanel($event, vm.PREVIEW_PANELS.TASKS)"\n           class="tasks button-style"\n           ng-class="{\'active\': vm.isPanelVisible(vm.PREVIEW_PANELS.TASKS)}">\n          <span class="underline">Tasks list</span>\n        </a>\n      </li>\n      <li ui-view="approvalProcess"></li>\n    </ul>\n  </div>\n</header>\n'),$templateCache.put("/scripts/modules/documentation/views/documentation.view.html",'<section class="right-panel aside-panel" id="documentation" ng-if="vm.isVisible()">\n  <section class="panel-container">\n    <section class="scrolled-container">\n      <section class="scrolled-content">\n          <annotations-list\n              ng-if="vm.hasPageDocumentation"\n              data="vm.documentation">\n          </annotations-list>\n          <div class="empty-annotations"\n               ng-if="!vm.hasPageDocumentation">\n            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjAuMiwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDEyOS44IDE0OC4zIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjkuOCAxNDguMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtkaXNwbGF5Om5vbmU7fQoJLnN0MXtkaXNwbGF5OmlubGluZTtvcGFjaXR5OjAuNTtmaWxsOm5vbmU7ZW5hYmxlLWJhY2tncm91bmQ6bmV3ICAgIDt9Cgkuc3Qye2Rpc3BsYXk6aW5saW5lO2ZpbGw6bm9uZTtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30KCS5zdDN7b3BhY2l0eTowLjU7ZmlsbDojRDVERUU0O30KCS5zdDR7ZmlsbDpub25lO3N0cm9rZTojQ0NENkRCO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9Cgkuc3Q1e2ZpbGw6bm9uZTtzdHJva2U6I0UwRTBFMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQoJLnN0NntmaWxsOm5vbmU7c3Ryb2tlOiNFMEUwRTA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwO30KPC9zdHlsZT4KPGcgaWQ9IkxheWVyXzEiIGNsYXNzPSJzdDAiPgoJCgkJPGltYWdlIHN0eWxlPSJkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlOyIgd2lkdGg9IjYwIiBoZWlnaHQ9IjgwIiB4bGluazpocmVmPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUR3QUFBQlFBZ01BQUFBNHBQN0FBQUFBQkdkQlRVRUFBTEdQQy94aEJRQUFBQ0JqU0ZKTgpBQUI2SmdBQWdJUUFBUG9BQUFDQTZBQUFkVEFBQU9wZ0FBQTZtQUFBRjNDY3VsRThBQUFBREZCTVZFWFUzdVBVM3VQVTN1TUFBQUQ0Ck8vV01BQUFBQTNSU1RsTXNkb0JmL0NZS0FBQUFBV0pMUjBRREVReE04Z0FBQUFsd1NGbHpBQUFMRWdBQUN4SUIwdDErL0FBQUFBZDAKU1UxRkIrRUNDZ2s2TXVZZVpmVUFBQUFwU1VSQlZEakxZNUJhaFF5V01HU2g4RmN5ckVJRm8veFIvaWgvbEQ5aytGa28zSlVNVWlqOApKUUJyZmh0Z3hPRnBEZ0FBQUFCSlJVNUVya0pnZ2c9PSIgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgMSAzNC4wNTg0IDQyLjQ0OTYpIj4KCTwvaW1hZ2U+Cgk8cGF0aCBjbGFzcz0ic3QxIiBkPSJ6Ii8+CgkKCQk8aW1hZ2Ugc3R5bGU9ImRpc3BsYXk6aW5saW5lO292ZXJmbG93OnZpc2libGU7IiB3aWR0aD0iMTMwIiBoZWlnaHQ9IjE0OCIgeGxpbms6aHJlZj0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFJSUFBQUNVQ0FNQUFBQm9VZ0ZKQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUNCalNGSk4KQUFCNkpnQUFnSVFBQVBvQUFBQ0E2QUFBZFRBQUFPcGdBQUE2bUFBQUYzQ2N1bEU4QUFBQ0VGQk1WRVVBQUFETTFkdk0xZHZNMWR2TQoxZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNCjFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZmMzkvZjM5L2YzOS9mMzkvZjM5L2YKMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZgozOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mCjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YKMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZgozOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvZjM5L2YzOS9mCjM5L2YzOS9mMzkvZjM5L2YzOS9mMzkvTTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0KMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZNMWR2TTFkdk0xZHZmMzk4QQpBQUM0Z0MxZUFBQUFyWFJTVGxNQUFYSGU2SWdJbHRkSEVEYkR1Q3J6R2dyZFVHeXNoWk9yOHR4Rk5NRzVBblBnNllrREIxb2x6UmxiCjhZYmZPQXVlNkVYQVZTM1h1aGVqY21iemVRS1A3bjBWYUtzQlE3TDJMMHZKSTVEeWUrY05iOXY5S2xZUXF1b3ljUkprUFR2bW53a1kKWXIvTW5QbnRFK0Z1THJBUEE3bW1yOXlDMUhZbVAwaWdqWWs1RWRWbm1zbzZ3dnIwZ0V4UkhQc2ZwVGpBL1BxM0xEdjBkQmtjZ2U0cgp5VzZHc2cwamI3RTVkaDJEdi92NXRSVTRYbGtBQUFBQllrdEhSQUNJQlIxSUFBQUFDWEJJV1hNQUFBc1NBQUFMRWdIUzNYNzhBQUFBCkIzUkpUVVVINFFJS0NUb3k1aDVsOVFBQUFkMUpSRUZVZU5ydDNPay9WR0VZeHZGNzJoUTFUQkVSU28xOTdNdklJR3BRR1pTdDBHSmYKeWs1WlNwWVNxUWhKbHV3Vk5lZHY3RG42QjNwM2ZYQjlYOXozeS9QN1BPYzhiNCtJem5Ea3FQUFk4Uk1DNUhMeWxLdmI2VE1HWElIUgozVU5OMDlsenVBUlByNzExM2h1WTRBTlBNRjd3VU5Qa0Mzd1I2blAwYzczb0h4QUlUREJjdXV3TXVnSzlsTXBWOFBPSmlJaUlpSWhvCmZ6RUhvd3RDUXJVd2JFRjRSS1FsQ2hrUUhSTWJKL0VKd0lMRXBHU3JTTW8xWEVHcUxTMWRyY2dNWEVMbzljd3N0VzdjeENYWXMzTnkKWTI3SjdUdTRCQ1hQa1I5ZlVBaE5FTGw3cjZnWW5DQ1NYb0l1SUNJaW92M0JYRnFHVHJqL3dGS09MYWl3VkZiWUhpSUxIdG5VRVR4KwpVbFVOSzZncHJOV1h0YTdlakVxb2EvaTNveHF6VUFsTm1YWjlOVDk5aGlxUWxxTFdOcEgyams1WWdVaGJWM2VMOUR5UEJpYUkvWVhOCkVkR0xMRkQ2T3ZyQkJVUkVSRVJFUkVSMHFGUU5vQXZrcFJZbjFsZUR5SVRYVFVOcCtkb3c5QmhHTkczMERUS2cvSzAyOXE0U1dWQTIKbGpzK29UbVFDZkorVWlUbncwZG9nNUwzeVlwT0lDSWlJaUlpb2dNdEVQaXptejFUMDU5blp1ZVFCVi9tdnk1OFcxeGFCaWFzZk5mbgo2aHF1d09SYzE5ZkcvS0ZPa0pWTmZhNXVBUk8yM1g4cy9QeTFaQVFtaU52Tzd1OC8vM1VoL2dKdUpsUkFqS1YwSHdBQUFBQkpSVTVFCnJrSmdnZz09IiB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAxIDUuODQxMTQwZS0wMiAtMC41NTA0KSI+Cgk8L2ltYWdlPgoJPHBhdGggY2xhc3M9InN0MiIgZD0ieiIvPgoJCgkJPGltYWdlIHN0eWxlPSJkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlOyIgd2lkdGg9IjYyIiBoZWlnaHQ9IjgyIiB4bGluazpocmVmPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUQ0QUFBQlNDQVFBQUFDbS9xL3VBQUFBQkdkQlRVRUFBTEdQQy94aEJRQUFBQ0JqU0ZKTgpBQUI2SmdBQWdJUUFBUG9BQUFDQTZBQUFkVEFBQU9wZ0FBQTZtQUFBRjNDY3VsRThBQUFBQW1KTFIwUUFBS3FOSXpJQUFBQUpjRWhaCmN3QUFDeElBQUFzU0FkTGRmdndBQUFBSGRFbE5SUWZoQWdvSk9qTG1IbVgxQUFBQitrbEVRVlJvM3UyYVAyNGFRUnhHSDhQeVQ2c0EKY2RaWWRrbVJCbEZGTkpZb2ZBOXVZWVhFa1F0a3lRWWM1Ulk1aDgrUTFoMFZVbVFqd0dZeGEyQW56WHBFTHNCWGVGLzViZkUwMHVvMwp1ek1mM0dHWmtPT05VMklzbGpsbGx6WFpZTEdFMUZ4V0o4SmlpYWk3ckVhSXhiS2g2Ykl5Y3l5V21GT1g1WmhndWZNNDR3Ky9XYnNICjk5eFNCUDZ5Y05tSUlUNHdaZXF5TVFNcXdKeXh5NmJjOGhFSUdibHN3WUFqWU1XOXk5YmMwT0VNSGpoSHdUa1A0RW5Vb0RTbnlNalMKWnNsU1lEN2tDOFFNSmNzZUVoc3lGQ1R5QWhrakVTZVkvOGJqUGhremh4SVppVHhEU2VKTmtaS2x4WktWd0Z5bENWdjZrbVgzMlJxTQo2SlV2WWNRVEx1UlJZbjRraEFNMHF6Y2NTTHdwVXJJMFdPNzhMTzBQbjgrdzVscXk3R3ZXQmc5Zkl2Znh4Qk11WWlZeHo0amdlT2RnCllKL2tPSlo0VThUVUtVcThSZW9RY1NXUlh4RVo4anZuYmZ1a1RGNDg0VjU1a3BpZmVCVy9jQ252RCttV3VxSW5rZmRZR1FwVUpmSXEKQmZHRTJ4Qkt6Q0ViYU1nK25Sc1NiNG9ZNmJISWdrdUovSktGd1NlUXlBTjg4WVNMZVpHWVg0aWhKZHRZV2hKdmloanAxZGFNcmtUZQpaV2FvY0NLUm4xQVJUemhMSkRGSFdHaHpLSkVIdENYZUZESFNlcEt3bU9VUjBBRit1ZkFUWDVOSzJwQTR5VDd3UGFtazNiajdtQ0lYClNTV3Q3MjZoYy94SUtta0RucFBNOEMycHBQMWtzcVB1RUtBczQvMER2anViMnNTTHZyOEFBQUFBU1VWT1JLNUNZSUk9IiB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAxIDI0LjA1ODQgMzIuNDQ5NikiPgoJPC9pbWFnZT4KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9InoiLz4KPC9nPgo8ZyBpZD0iTGF5ZXJfNCI+Cgk8cGF0aCBjbGFzcz0ic3QzIiBkPSJNOTIuMSwxMjIuNGgtNTZjLTEuMSwwLTItMC45LTItMnYtNzZjMC0xLjEsMC45LTIsMi0yaDU2YzEuMSwwLDIsMC45LDIsMnY3NgoJCUM5NC4xLDEyMS42LDkzLjIsMTIyLjQsOTIuMSwxMjIuNHoiLz4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZD0iTTg1LjMsMTE0LjZoLTEuNWMtMC40LDAtMC44LTAuMy0wLjgtMC44czAuMy0wLjgsMC44LTAuOGgwLjh2LTAuOGMwLTAuNCwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44djEuNQoJCQkJTDg1LjMsMTE0LjZ6Ii8+CgkJPC9nPgoJCTxnPgoJCQk8cGF0aCBkPSJNNzYuNiwxMTQuNmgtMi45Yy0wLjQsMC0wLjgtMC4zLTAuOC0wLjhzMC4zLTAuOCwwLjgtMC44aDIuOWMwLjQsMCwwLjgsMC4zLDAuOCwwLjhTNzcsMTE0LjYsNzYuNiwxMTQuNnogTTY2LjYsMTE0LjYKCQkJCWgtMi45Yy0wLjQsMC0wLjgtMC4zLTAuOC0wLjhzMC4zLTAuOCwwLjgtMC44aDIuOWMwLjQsMCwwLjgsMC4zLDAuOCwwLjhTNjcsMTE0LjYsNjYuNiwxMTQuNnogTTU2LjUsMTE0LjZoLTIuOQoJCQkJYy0wLjQsMC0wLjgtMC4zLTAuOC0wLjhzMC4zLTAuOCwwLjgtMC44aDIuOWMwLjQsMCwwLjgsMC4zLDAuOCwwLjhTNTYuOSwxMTQuNiw1Ni41LDExNC42eiBNNDYuNCwxMTQuNmgtMi45CgkJCQljLTAuNCwwLTAuOC0wLjMtMC44LTAuOHMwLjMtMC44LDAuOC0wLjhoMi45YzAuNCwwLDAuOCwwLjMsMC44LDAuOFM0Ni45LDExNC42LDQ2LjQsMTE0LjZ6IE0zNi40LDExNC42aC0yLjkKCQkJCWMtMC40LDAtMC44LTAuMy0wLjgtMC44czAuMy0wLjgsMC44LTAuOGgyLjljMC40LDAsMC44LDAuMywwLjgsMC44UzM2LjgsMTE0LjYsMzYuNCwxMTQuNnoiLz4KCQk8L2c+CgkJPGc+CgkJCTxwYXRoIGQ9Ik0yNi4zLDExNC42aC0xLjVsLTAuOC0wLjh2LTEuNWMwLTAuNCwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44djAuOGgwLjhjMC40LDAsMC44LDAuMywwLjgsMC44CgkJCQlTMjYuNywxMTQuNiwyNi4zLDExNC42eiIvPgoJCTwvZz4KCQk8Zz4KCQkJPHBhdGggZD0iTTI0LjgsMTA1LjljLTAuNCwwLTAuOC0wLjMtMC44LTAuOHYtMi45YzAtMC40LDAuMy0wLjgsMC44LTAuOHMwLjgsMC4zLDAuOCwwLjh2Mi45QzI1LjYsMTA1LjYsMjUuMiwxMDUuOSwyNC44LDEwNS45egoJCQkJIE0yNC44LDk1LjljLTAuNCwwLTAuOC0wLjMtMC44LTAuOHYtMi45YzAtMC40LDAuMy0wLjgsMC44LTAuOHMwLjgsMC4zLDAuOCwwLjh2Mi45QzI1LjYsOTUuNSwyNS4yLDk1LjksMjQuOCw5NS45eiBNMjQuOCw4NS44CgkJCQljLTAuNCwwLTAuOC0wLjMtMC44LTAuOHYtMi45YzAtMC40LDAuMy0wLjgsMC44LTAuOHMwLjgsMC4zLDAuOCwwLjhWODVDMjUuNiw4NS40LDI1LjIsODUuOCwyNC44LDg1Ljh6IE0yNC44LDc1LjcKCQkJCWMtMC40LDAtMC44LTAuMy0wLjgtMC44di0yLjljMC0wLjQsMC4zLTAuOCwwLjgtMC44czAuOCwwLjMsMC44LDAuOFY3NUMyNS42LDc1LjQsMjUuMiw3NS43LDI0LjgsNzUuN3ogTTI0LjgsNjUuNwoJCQkJYy0wLjQsMC0wLjgtMC4zLTAuOC0wLjhWNjJjMC0wLjQsMC4zLTAuOCwwLjgtMC44czAuOCwwLjMsMC44LDAuOHYyLjlDMjUuNiw2NS4zLDI1LjIsNjUuNywyNC44LDY1Ljd6IE0yNC44LDU1LjYKCQkJCWMtMC40LDAtMC44LTAuMy0wLjgtMC44VjUyYzAtMC40LDAuMy0wLjgsMC44LTAuOHMwLjgsMC4zLDAuOCwwLjh2Mi45QzI1LjYsNTUuMywyNS4yLDU1LjYsMjQuOCw1NS42eiBNMjQuOCw0NS41CgkJCQljLTAuNCwwLTAuOC0wLjMtMC44LTAuOHYtMi45YzAtMC40LDAuMy0wLjgsMC44LTAuOHMwLjgsMC4zLDAuOCwwLjh2Mi45QzI1LjYsNDUuMiwyNS4yLDQ1LjUsMjQuOCw0NS41eiIvPgoJCTwvZz4KCQk8Zz4KCQkJPHBhdGggZD0iTTI0LjgsMzUuNWMtMC40LDAtMC44LTAuMy0wLjgtMC44di0xLjVsMC44LTAuOGgxLjVjMC40LDAsMC44LDAuMywwLjgsMC44UzI2LjcsMzQsMjYuMywzNGgtMC44djAuOAoJCQkJQzI1LjYsMzUuMSwyNS4yLDM1LjUsMjQuOCwzNS41eiIvPgoJCTwvZz4KCQk8Zz4KCQkJPHBhdGggZD0iTTc2LjYsMzRoLTIuOWMtMC40LDAtMC44LTAuMy0wLjgtMC44czAuMy0wLjgsMC44LTAuOGgyLjljMC40LDAsMC44LDAuMywwLjgsMC44Uzc3LDM0LDc2LjYsMzR6IE02Ni42LDM0aC0yLjkKCQkJCWMtMC40LDAtMC44LTAuMy0wLjgtMC44czAuMy0wLjgsMC44LTAuOGgyLjljMC40LDAsMC44LDAuMywwLjgsMC44UzY3LDM0LDY2LjYsMzR6IE01Ni41LDM0aC0yLjljLTAuNCwwLTAuOC0wLjMtMC44LTAuOAoJCQkJczAuMy0wLjgsMC44LTAuOGgyLjljMC40LDAsMC44LDAuMywwLjgsMC44UzU2LjksMzQsNTYuNSwzNHogTTQ2LjQsMzRoLTIuOWMtMC40LDAtMC44LTAuMy0wLjgtMC44czAuMy0wLjgsMC44LTAuOGgyLjkKCQkJCWMwLjQsMCwwLjgsMC4zLDAuOCwwLjhTNDYuOSwzNCw0Ni40LDM0eiBNMzYuNCwzNGgtMi45Yy0wLjQsMC0wLjgtMC4zLTAuOC0wLjhzMC4zLTAuOCwwLjgtMC44aDIuOWMwLjQsMCwwLjgsMC4zLDAuOCwwLjgKCQkJCVMzNi44LDM0LDM2LjQsMzR6Ii8+CgkJPC9nPgoJCTxnPgoJCQk8cGF0aCBkPSJNODUuMywzNS41Yy0wLjQsMC0wLjgtMC4zLTAuOC0wLjhWMzRoLTAuOGMtMC40LDAtMC44LTAuMy0wLjgtMC44czAuMy0wLjgsMC44LTAuOGgxLjVsMC44LDAuOHYxLjUKCQkJCUM4Ni4xLDM1LjEsODUuNywzNS41LDg1LjMsMzUuNXoiLz4KCQk8L2c+CgkJPGc+CgkJCTxwYXRoIGQ9Ik04NS4zLDEwNS45Yy0wLjQsMC0wLjgtMC4zLTAuOC0wLjh2LTIuOWMwLTAuNCwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44djIuOUM4Ni4xLDEwNS42LDg1LjcsMTA1LjksODUuMywxMDUuOXoKCQkJCSBNODUuMyw5NS44Yy0wLjQsMC0wLjgtMC4zLTAuOC0wLjh2LTIuOWMwLTAuNCwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44djIuOUM4Ni4xLDk1LjUsODUuNyw5NS44LDg1LjMsOTUuOHogTTg1LjMsODUuOAoJCQkJYy0wLjQsMC0wLjgtMC4zLTAuOC0wLjh2LTIuOWMwLTAuNCwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44Vjg1Qzg2LjEsODUuNCw4NS43LDg1LjgsODUuMyw4NS44eiBNODUuMyw3NS43CgkJCQljLTAuNCwwLTAuOC0wLjMtMC44LTAuOHYtMi45YzAtMC40LDAuMy0wLjgsMC44LTAuOHMwLjgsMC4zLDAuOCwwLjhWNzVDODYuMSw3NS40LDg1LjcsNzUuNyw4NS4zLDc1Ljd6IE04NS4zLDY1LjcKCQkJCWMtMC40LDAtMC44LTAuMy0wLjgtMC44VjYyYzAtMC40LDAuMy0wLjgsMC44LTAuOHMwLjgsMC4zLDAuOCwwLjh2Mi45Qzg2LjEsNjUuMyw4NS43LDY1LjcsODUuMyw2NS43eiBNODUuMyw1NS42CgkJCQljLTAuNCwwLTAuOC0wLjMtMC44LTAuOFY1MmMwLTAuNCwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44djIuOUM4Ni4xLDU1LjMsODUuNyw1NS42LDg1LjMsNTUuNnogTTg1LjMsNDUuNQoJCQkJYy0wLjQsMC0wLjgtMC4zLTAuOC0wLjh2LTIuOWMwLTAuNCwwLjMtMC44LDAuOC0wLjhzMC44LDAuMywwLjgsMC44djIuOUM4Ni4xLDQ1LjIsODUuNyw0NS41LDg1LjMsNDUuNXoiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkxheWVyXzMiPgoJPGc+CgkJPGNpcmNsZSBjbGFzcz0ic3Q0IiBjeD0iOC44IiBjeT0iNC41IiByPSIzLjUiLz4KCQk8Y2lyY2xlIGNsYXNzPSJzdDQiIGN4PSI5MC42IiBjeT0iMTQzLjgiIHI9IjMuNSIvPgoJPC9nPgoJPGc+CgkJPGxpbmUgY2xhc3M9InN0NSIgeDE9IjU0LjciIHkxPSIxMDYuMSIgeDI9IjQ4LjYiIHkyPSIxMDkuNiIvPgoJCTxsaW5lIGNsYXNzPSJzdDUiIHgxPSI0OS45IiB5MT0iMTA0LjgiIHgyPSI1My40IiB5Mj0iMTEwLjkiLz4KCTwvZz4KCTxwb2x5Z29uIGNsYXNzPSJzdDYiIHBvaW50cz0iMTIwLjksNDEuNiAxMjcuOCwzNi40IDEyOC44LDQ1IAkiLz4KCTxwYXRoIGNsYXNzPSJzdDYiIGQ9Ik01LjEsNzJsLTMuNy0yLjljLTAuNC0wLjMtMC41LTEtMC4yLTEuNGwyLjktMy43YzAuMy0wLjQsMS0wLjUsMS40LTAuMmwzLjcsMi45YzAuNCwwLjMsMC41LDEsMC4yLDEuNAoJCWwtMi45LDMuN0M2LjIsNzIuMiw1LjYsNzIuMyw1LjEsNzJ6Ii8+CjwvZz4KPC9zdmc+Cg==" width="130" height="148" />\n            <h3 class="g-heading-3">\n              No Documentation has been <br />\n              added to this page\n            </h3>\n            <p>\n              Go to the sitemap and choose the <br />\n              page with documentation icon <span class="icon-general-documentation"></span> or add the <br />\n              documentation in the editor.\n            </p>\n          </div>\n      </section>\n    </section>\n  </section>\n</section>\n'),$templateCache.put("/scripts/modules/experiment/views/topBar.view.html",'<header id="top-bar" ng-if="vm.isLoaded">\n  <div class="left-actions" ng-if="!vm.isZenMode">\n    <ul class="g-unordered-list options-list">\n      <li ng-if="!vm.isAnonymous" class="actions">\n        <actions></actions>\n      </li>\n      <li ng-if="vm.isAnonymous" class="sign-in">\n        <a class="underline-link blue-link"\n           ng-href="{{vm.referer}}"\n           ng-mouseover="vm.updateReferer()">Sign in</a>\n      </li>\n    </ul>\n  </div>\n  <p class="mode-label">UXPin Experimental Mode</p>\n  <div class="right-actions">\n    <ul class="g-unordered-list options-list">\n      <li class="zoom-option">\n        <zoom></zoom>\n      </li>\n      <li ng-if="!vm.isZenMode">\n        <a href="#interactions"\n           class="btn-icon icon-general-interaction"\n           ng-class="{\'active\': !vm.isInteractionsHighlightDisabled()}"\n           ng-click="vm.toggleInteractionsHighlightMode($event)"\n           data-show-node="tooltip">\n          <em class="tooltip float-right">Highlight Interactions</em>\n        </a>\n      </li>\n      <li>\n        <zen-mode>\n          <a href="#full-screen"\n             ng-if="!vm.isZenMode"\n             class="btn-icon btn-fullscreen-on icon-general-fullscreen"\n             data-show-node="tooltip">\n            <em class="tooltip" ng-class="{\'float-right\': vm.isModeActive(vm.PREVIEW_MODES.SIMULATE)}">Full screen</em>\n          </a>\n          <a href="#full-screen"\n             ng-if="vm.isZenMode"\n             class="btn-fullscreen-off">\n            Exit fullscreen\n          </a>\n      </li>\n    </ul>\n  </div>\n</header>\n'),$templateCache.put("/scripts/modules/specification/views/specification.view.html",'<section class="right-panel aside-panel" id="specification" ng-hide="!vm.isLoaded" ng-style="vm.specWidthStyles">\n  <section\n    class="panel-container"\n    ng-class="{\'with-parent-info\': !!vm.activeElementDSInfo, \'with-state-switcher\': vm.isMultistate}">\n    <header-canvas\n        ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CANVAS)"\n        current-page-name="vm.currentPageName"\n        last-updated-date="vm.lastUpdatedDate"\n        last-updated-date-title="vm.lastUpdatedDateTitle">\n    </header-canvas>\n    <header-element\n        ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.ELEMENT) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.STORYBOOK_ELEMENT)"\n        name="vm.name"\n        class="vm.typeClass"\n        has-parent="vm.hasParent"\n        element-parent="vm.elementParent"\n        element-parent-type="vm.elementParentType"\n        element-parent-type-class="vm.elementParentTypeClass"\n        select-element="vm.selectElement"\n        is-multistate="vm.isMultistate"\n        selected-state="vm.selectedState"\n        change-state="vm.changeState"\n        states="vm.states">\n    </header-element>\n    <header-group\n        ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT)"\n        name="vm.name"\n        type="vm.type"\n        class="vm.typeClass"\n        has-parent="vm.hasParent"\n        element-parent="vm.elementParent"\n        element-parent-type="vm.elementParentType"\n        element-parent-type-class="vm.elementParentTypeClass"\n        select-element="vm.selectElement"\n        is-multistate="vm.isMultistate"\n        selected-state="vm.selectedState"\n        change-state="vm.changeState"\n        states="vm.states">\n    </header-group>\n    <header-design-system\n        ng-if="vm.activeElementDSInfo"\n        documentation="vm.activeElementDSInfo.documentation"\n        element="vm.activeElementDSInfo.element"\n        select-element="vm.selectElement">\n    </header-design-system>\n    <ul class="panel-tabs g-unordered-list" ng-if="vm.metadata.length || vm.interactions.length">\n      <li ng-class="{\'active\': vm.activeTab === vm.SPEC_TABS.PROPERTIES}"\n          ng-click="vm.changeTab(vm.SPEC_TABS.PROPERTIES)">\n        <a href="#properties" class="icon-general-drop">Properties</a>\n      </li>\n      <li ng-if="vm.metadata.length"\n          ng-class="{\'active\': vm.activeTab === vm.SPEC_TABS.METADATA}"\n          ng-click="vm.changeTab(vm.SPEC_TABS.METADATA)">\n        <a href="#specification" class="icon-general-info">Specification</a>\n      </li>\n      <li ng-if="vm.interactions.length"\n          ng-class="{\'active\': vm.activeTab === vm.SPEC_TABS.INTERACTIONS}"\n          ng-click="vm.changeTab(vm.SPEC_TABS.INTERACTIONS)">\n        <a href="#interactions" class="icon-general-thunder">Interactions</a>\n      </li>\n    </ul>\n    <section class="scrolled-container">\n      <section class="scrolled-content">\n        <div class="content" ng-if="vm.activeTab === vm.SPEC_TABS.PROPERTIES">\n          <canvas-data\n            width="vm.width"\n            height="vm.height"\n            left="vm.left"\n            top="vm.top"\n            fixed="vm.fixed"\n            name="vm.name"\n            type="vm.currentObjectType"\n            angle="vm.angle"\n            opacity="vm.opacity"\n            mix-blend-mode="vm.mixBlendMode">\n          </canvas-data>\n\n          <grid-data\n          ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CANVAS) && vm.hasGridOfType(\'layout\')"\n            section-title="\'Column grid\'"\n            grid-type="\'layout\'"\n            grid="vm.getGridOfType(\'layout\')">\n          </grid-data>\n\n          <grid-data\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CANVAS) && vm.hasGridOfType(\'baseline\')"\n            section-title="\'Baseline grid\'"\n            grid-type="\'baseline\'"\n            grid="vm.getGridOfType(\'baseline\')">\n          </grid-data>\n\n          <grid-data\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CANVAS) && vm.hasGridOfType(\'square\')"\n            section-title="\'Square grid\'"\n            grid-type="\'square\'"\n            grid="vm.getGridOfType(\'square\')">\n          </grid-data>\n\n          <storybook\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.STORYBOOK_ELEMENT)"\n            url="vm.iframeUrl">\n          </storybook>\n\n          <colors-list\n            ng-if="!vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && !vm.isActiveObject(vm.SPEC_OBJECT_TYPES.STORYBOOK_ELEMENT)"\n            colors="vm.colors"\n            design-systems="vm.designSystems"\n            canvas-bg="vm.canvasBg"\n            gradients="vm.gradients"\n            type="vm.currentObjectType">\n          </colors-list>\n\n          <fonts-list\n            fonts="vm.fonts"\n            type="vm.currentObjectType">\n          </fonts-list>\n\n          <border-data\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.ELEMENT) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP)"\n            should-show-border="vm.shouldShowBorder"\n            should-show-border-radius="vm.shouldShowBorderRadius"\n            is-border-radius-set="vm.isBorderRadiusSet"\n            border="vm.border">\n          </border-data>\n\n          <design-system\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP) && vm.activeElementDocumentation"\n            documentation="vm.activeElementDocumentation">\n          </design-system>\n\n          <blur-data\n            ng-if="(vm.isActiveObject(vm.SPEC_OBJECT_TYPES.ELEMENT) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP)) && vm.blur"\n            blur="vm.blur">\n          </blur-data>\n\n          <shadows-list\n            ng-if="(vm.isActiveObject(vm.SPEC_OBJECT_TYPES.ELEMENT) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP)) && vm.shadows.length"\n            shadows="vm.shadows"\n            section-label="Shadows">\n          </shadows-list>\n\n          <shadows-list\n            ng-if="(vm.isActiveObject(vm.SPEC_OBJECT_TYPES.ELEMENT) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP)) && vm.innerShadows.length"\n            shadows="vm.innerShadows"\n            section-label="Inner Shadows">\n          </shadows-list>\n\n          <component-metadata\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && vm.componentMetadata"\n            library-name="vm.libraryName"\n            repository-pointer-name="vm.repositoryPointerName"\n            metadata="vm.componentMetadata">\n          </component-metadata>\n\n          <code-export\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && vm.specModeCode.fullApp"\n            element-path="vm.elementPath"\n            value="vm.specModeCode.fullApp">\n          </code-export>\n\n          <dependencies\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && vm.specModeCode.imports"\n            value="vm.specModeCode.imports">\n          </dependencies>\n\n          <functions\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && vm.specModeCode.functions"\n            value="vm.specModeCode.functions">\n          </functions>\n\n          <jsx-code\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && !vm.isTailwindComponent"\n            value="vm.specModeCode.componentCode">\n          </jsx-code>\n\n          <html-code\n                  is-css="true"\n                  header="CSS Code"\n                  ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && vm.isTailwindComponent && vm.specModeCode.css"\n                  value="vm.specModeCode.css">\n          </html-code>\n\n          <html-code\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CODE_COMPONENT) && vm.isTailwindComponent"\n            value="vm.specModeCode.componentCode">\n          </html-code>\n\n          <css-code\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.ELEMENT) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP)"\n            value="vm.cssCode">\n          </css-code>\n\n          <content-data\n            value-trimmed="vm.textContentTrimmed"\n            is-text-list="vm.isTextList">\n          </content-data>\n\n          <images-list\n            ng-if="vm.isActiveObject(vm.SPEC_OBJECT_TYPES.ELEMENT) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.CANVAS) || vm.isActiveObject(vm.SPEC_OBJECT_TYPES.GROUP)"\n            images="vm.images"\n            background="vm.background">\n          </images-list>\n        </div>\n\n        <metadata metadata="vm.metadata" ng-if="vm.metadata.length && vm.activeTab === vm.SPEC_TABS.METADATA"></metadata>\n        <interactions ng-if="vm.interactions.length && vm.activeTab === vm.SPEC_TABS.INTERACTIONS"></interactions>\n        </section>\n      </section>\n    </section>\n    <div ng-mousedown="vm.resizeStart()" class="section-resize-handler"></div>\n</section>\n\n'),$templateCache.put("/scripts/modules/styleguide/views/styleguide.view.html",'<div id="styleguide" ng-if="vm.isLoaded">\n  <header class="header">\n    <h2 class="g-heading-2 name">\n      Style guide\n      <a href="/{{vm.currentProjectHash}}" class="underline-link">\n        {{vm.currentProjectName}}\n      </a>\n    </h2>\n    <h5 ng-if="vm.lastUpdatedDate" class="g-heading-5 last-updated">\n      Updated:\n      <time title="{{vm.lastUpdatedDateTitle}}">\n        {{vm.lastUpdatedDate}}\n      </time>\n    </h5>\n    <a href="{{vm.homepageURL}}" class="uxpin-logo" target="_blank">\n      <img src="/img/UXPin-Logo-BlackFill.svg" \n        class="image-general-uxpin-logo" \n        alt="UXPin-Logo-Black">\n    </a>\n  </header>\n\n  <div class="content" ng-class="{empty: vm.isProjectEmpty()}">\n    <div ng-if="vm.isProjectEmpty()">\n      <figure>\n        <img src="/img/empty-styleguide.svg" width="200" height="200" />\n      </figure>\n      <h3 class="empty-title">There is nothing here, yet</h3>\n      <p class="empty-info">Styleguide is autogenerated summary for your document. Add some elements<br />to get info about <strong>colors</strong>, <strong>typography</strong> and <strong>assets</strong> used in this document.</p>\n    </div>\n    <aside ng-if="!vm.isProjectEmpty()" class="aside-nav">\n      <ul nav-bar data-initial-section="{{vm.initialSection}}" du-scroll-container="scroll-container" class="g-unordered-list nav-list">\n        <li ng-if="vm.colors.length"><a du-scrollspy du-smooth-scroll  offset="30" href="#colors-guide">Colors</a></li>\n        <li ng-if="vm.fonts.length"><a du-scrollspy du-smooth-scroll offset="20"  href="#typography-guide">Typography</a></li>\n        <li ng-if="vm.images.length || vm.svgs.length"><a du-scrollspy du-smooth-scroll offset="60" href="#assets-guide">Assets</a></li>\n      </ul>\n    </aside>\n\n    <article ng-if="!vm.isProjectEmpty()" id="scroll-container" class="scrolled-content"  image-lazy-loading image-lazy-loading-parent-tag-name="li">\n      <colors-guide-list\n        ng-if="vm.colors.length"\n        colors="vm.colors"\n        design-systems="vm.designSystems">\n      </colors-guide-list>\n      <fonts-guide-list\n        ng-if="vm.fonts.length"\n        fonts="vm.fonts">\n      </fonts-guide-list>\n      <images-guide-list ng-if="vm.images.length || vm.svgs.length"\n        images="vm.images"\n        project-name="vm.currentProjectName"\n        svgs="vm.svgs"\n      ></images-guide-list>\n    </article>\n  </div>\n</div>\n<page-loader pages-ids="vm.pagesIds"></page-loader>\n'),$templateCache.put("/scripts/modules/comments/directives/commentsAssigneeFilters/commentsAssigneeFilters.html",'<dl class="assign-filters" ng-class="{disabled: vm.isDisabled}">\n  <dt>By assignee</dt>\n  <dd>\n    <input id="show-me"\n           class="state-helper"\n           ng-click="$event.preventDefault()"\n           ng-checked="vm.isSelected(vm.me)"\n           type="checkbox" />\n    <label ng-click="vm.onSelect(vm.me)" class="fake-choose-label fake-checkbox" for="show-me">\n      Me\n    </label>\n  </dd>\n  <dd>\n    <input id="show-not-assigned"\n           class="state-helper"\n           ng-click="$event.preventDefault()"\n           ng-checked="vm.isSelected(null)"\n           type="checkbox" />\n    <label ng-click="vm.onSelect(null)" class="fake-choose-label fake-checkbox" for="show-not-assigned">\n      Not assigned\n    </label>\n  </dd>\n  <dd ng-if="vm.options.length">\n    <cloud default-position="bottom"\n           on-open="vm.onCloudOpen"\n           on-close="vm.onCloudClose"\n           offset="vm.cloudOffset"\n           auto-fit="true">\n        <input id="show-selected"\n               class="state-helper"\n               ng-click="$event.preventDefault()"\n               ng-checked="vm.isUserSelected() || vm.isAllUsersSelected()"\n               type="checkbox" />\n        <label class="fake-choose-label fake-checkbox"\n               for="show-selected"\n               ng-click="vm.onUserSelect(vm.getUsersIds(), true)"></label>\n        <div data-trigger class="with-ellipsis">\n          <span>Selected:</span>\n          <a href="#"\n             class="underline-link icon-general-chevron"\n             ng-class="{active: vm.isOpen}">\n            <span>{{vm.getLabelName()}}</span>\n          </a>\n        </div>\n      <div data-cloud class="cloud options-cloud assignee-filters-cloud">\n        <span class="selection-trigger">\n          <a href ng-class="{\'active\' : vm.isAllUsersSelected()}" ng-click="vm.onUserSelect(vm.getUsersIds())">All</a>\n          <a href ng-class="{\'active\' : !vm.isUserSelected()}" ng-click="vm.onUserSelect([])">None</a>\n        </span>\n        <div class="separator more-spacing"></div>\n        <pv-multi-select-list\n          class="list-wrapper"\n          options="vm.options"\n          key="id_user"\n          ng-model="vm.selectedUsers"\n          ng-change="vm.onUserSelect()">\n        </pv-multi-select-list>\n      </div>\n    </cloud>\n  </dd>\n</dl>\n'),$templateCache.put("/scripts/modules/comments/directives/commentsList/pvCommentsList.html",'<section id="{{::vm.listId}}" class="scrolled-content" pv-when-scroll-ends="vm.loadMoreRecords()" pv-when-height-known="vm.onHeightKnown($height)" pv-when-scroll-top="vm.unloadRecords($scrollTop)" pv-scroll-to="vm.scrollTo">\n  <preview-comment-container ng-repeat="comment in vm.visibleItems track by comment._id" type="panel" comment="comment"></preview-comment-container>\n  <section class="empty-list" ng-class="{\'hidden\' : vm.comments.length}">\n    <h1>{{::\'INFO_NO_COMMENTS\' | translate}}</h1>\n  </section>\n</section>\n'),$templateCache.put("/scripts/modules/comments/directives/commentsOtherFilters/commentsOtherFilters.html",'<dl class="other-filters">\n  <dd>\n    <input id="show-comment-pins"\n           class="state-helper"\n           ng-click="$event.preventDefault()"\n           ng-checked="vm.arePinsVisible()"\n           type="checkbox" />\n    <label ng-click="vm.togglePinsVisibility()" class="fake-choose-label fake-checkbox" for="show-comment-pins">\n      Show comment pins\n    </label>\n    <span class="hint">\n        Shift + Alt + H\n    </span>\n  </dd>\n  <dd>\n    <input id="show-resolved"\n           class="state-helper"\n           ng-click="$event.preventDefault()"\n           ng-checked="vm.areResolvedCommentsVisible()"\n           type="checkbox" />\n    <label ng-click="vm.toggleResolvedCommentsVisibility()" class="fake-choose-label fake-checkbox" for="show-resolved">\n      Show resolved\n    </label>\n  </dd>\n</dl>\n'),$templateCache.put("/scripts/modules/comments/directives/commentsSearch/pvCommentsSearch.html",'<form class="search">\n  <label for="comments-list-search" class="icon-font-search only-icon-font">Search</label>\n  <input id="comments-list-search"\n         type="text"\n         class="g-field"\n         ng-class="{\'active\' : vm.searchFor}"\n         placeholder="{{::\'INFO_SEARCH\' | translate}}"\n         ng-model="vm.searchFor"\n         ng-model-options="{ debounce: 300 }"\n         ng-focus="vm.handleFocus()"\n         ng-keydown="vm.handleKeyDown($event)"\n         sync-focus-with="vm.focused">\n  <span class="reset-search" ng-click="vm.resetSearch()">Reset search</span>\n</form>\n<small class="ds-tip ds-tip--size-xs">start with @ to search by author or assignee</span>\n'),$templateCache.put("/scripts/modules/comments/directives/commentsTree/pvCommentsTree.html",'<section id="{{::vm.treeId}}" class="scrolled-content" pv-scroll-to="vm.scrollTarget" pv-when-scroll-ends="vm.loadMoreRecords()" pv-when-scroll-top="vm.unloadRecords($scrollTop)" pv-when-height-known="vm.onHeightKnown($height)">\n  <section ng-if="vm.showBreakpoints">\n    <section class="page-grouped-comments" ng-repeat="page in vm.visibleTree track by page.id" ng-class="{\'all-page-comments-hidden\' : vm.hiddenPages[page.id]}">\n      <h3 class="g-heading-3" highlight search-for="vm.searchFor" input-text="page.name" ng-click="vm.togglePage(page.id)"></h3>\n      <section ng-if="!vm.hiddenPages[page.id]" class="page-grouped-breakpoints" ng-repeat="breakpoint in page.breakpoints track by breakpoint.id">\n        <h4 ng-bind-html="breakpoint.name"></h4>\n        <preview-comment-container ng-repeat="comment in breakpoint.comments track by comment._id" type="panel" comment="comment"></preview-comment-container>\n      </section>\n    </section>\n  </section>\n  <section ng-if="!vm.showBreakpoints">\n    <section class="page-grouped-comments" ng-repeat="page in vm.visibleTree track by page.id" ng-class="{\'all-page-comments-hidden\' : vm.hiddenPages[page.id]}">\n      <h3 class="g-heading-3" highlight search-for="vm.searchFor" input-text="page.name" ng-click="vm.togglePage(page.id)"></h3>\n      <section ng-if="!vm.hiddenPages[page.id]" class="page-grouped-breakpoints" ng-repeat="breakpoint in page.breakpoints track by breakpoint.id">\n        <preview-comment-container ng-repeat="comment in breakpoint.comments track by comment._id" type="panel" comment="comment"></preview-comment-container>\n      </section>\n    </section>\n  </section>\n  <section class="empty-list" ng-class="{\'hidden\' : vm.tree.length}">\n    <h1>{{::\'INFO_NO_COMMENTS\' | translate}}</h1>\n  </section>\n</section>\n'),$templateCache.put("/scripts/modules/comments/directives/commentsTypeFilters/commentsTypeFilters.html",'<dl class="type-filters">\n  <dt>By type</dt>\n  <dd ng-repeat="option in vm.filterOptions track by $index"\n      ng-class="{\'selected\': vm.isSelected(option)}">\n    <input class="state-helper"\n           type="checkbox"\n           ng-click="$event.preventDefault()"\n           ng-checked="vm.isSelected(option)" />\n    <label ng-click="vm.changeActiveFilter(option.value)" class="fake-choose-label fake-checkbox">\n                <span class="comment-type" ng-class="option.className">\n                  {{option.text}}\n                </span>\n    </label>\n    <span class="hint">\n        Shift + Alt + {{option.hint}}\n    </span>\n  </dd>\n</dl>\n'),$templateCache.put("/scripts/modules/comments/directives/preview-comment/pvComment.html",'<article class="single-comment" ng-class="{\'new-comment\' : isNew(), \'reply\' : reply, \'reply-form active\' : replyForm}">\n  <section\n    ng-if="isNew()"\n    class="comment-body"\n    ng-click="newCommentClick($event)"\n    ng-include="\'/scripts/modules/comments/directives/preview-comment/pvNewComment.html\'">\n  </section>\n\n  <div\n    ng-if="isEditMode()"\n    ng-include="\'/scripts/modules/comments/directives/preview-comment/pvEditComment.html\'">\n  </div>\n\n  <div\n    ng-if="isPreviewMode()"\n    ng-include="\'/scripts/modules/comments/directives/preview-comment/pvPreviewComment.html\'">\n  </div>\n</article>\n'),$templateCache.put("/scripts/modules/comments/directives/preview-comment/pvEditComment.html",'<pv-avatar\n  url="::avatarUrl"\n  name="::userName"\n  avatar-class="light-bg">\n</pv-avatar>\n\n<section class="comment-wrapper edit-mode">\n  <div class="comment-body edit-mode">\n    <form novalidate>\n      <div class="mention-container">\n        <textarea\n          pv-mention\n          pv-collaborator-mention\n          pv-focus-me="form.focused"\n          ng-class="{\'error\' : isError, \'disabled\' : inputDisabled}"\n          class="fake-textarea g-textarea"\n          ng-model="form.text"\n          mentions="form.mentions"\n          ng-disabled="inputDisabled"\n          ng-mousedown="onTextareaMouseDown($event)"\n          ng-keydown="onTextareaKeyDown($event)"\n          placeholder="Edit your comment"\n          data-test="edit-comment-input"></textarea>\n\n        <div\n          ng-class="{ \'visible\': $pvMention.searching }"\n          class="cloud options-cloud mention-cloud"\n          ng-style="$pvMention.menuPosition">\n\n          <ul class="g-unordered-list options-list mention-people-list scroll-helper">\n            <li ng-repeat="option in $pvMention.options track by $index"\n                ng-class="{\'active\': $pvMention.activeOption === option}"\n                ng-click="$pvMention.select(option)">\n              <a href="">{{option.name}}</a>\n            </li>\n            <li>\n              <span ng-if="$pvMention.options.length === 0" class="no-users disabled">\n                No users found\n              </span>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <ul class="submit-menu btns-group">\n        <li>\n          <button\n              type="button"\n              class="btn-solid blue add-comment"\n              ng-mousedown="submitMe($event)"\n              ng-class="{\'working\' : working}"\n              ng-disabled="inputDisabled"\n              data-test="edit-comment-button{{working ? \'-working\' : \'\'}}">\n            Save\n          </button>\n        </li>\n        <li>\n          <a href="" class="ds-link ds-link--style-neutral" ng-click="cancelEdit($event)">\n            <span class="ds-link__text">Cancel</span>\n          </a>\n        </li>\n      </ul>\n    </form>\n  </div>\n</section>\n\n'),$templateCache.put("/scripts/modules/comments/directives/preview-comment/pvNewComment.html",'<anonymous-name ng-if="isAnonymousWithName()"></anonymous-name>\n<form novalidate ng-class="{\'form-hidden\': isFormHidden(), \'without-footer\': isAnonymous}">\n  <div class="mention-container">\n    <textarea\n      pv-mention\n      pv-collaborator-mention\n      pv-focus-me="form.focused"\n      ng-class="{\'error\' : isError}"\n      class="fake-textarea g-textarea"\n      ng-model="form.text"\n      mentions="form.mentions"\n      ng-trim="false"\n      ng-mousedown="onTextareaMouseDown($event)"\n      ng-keydown="onTextareaKeyDown($event)"\n      placeholder="{{inputPlaceholder}}"\n      data-test="new-comment-input"></textarea>\n\n    <div\n      ng-class="{ \'visible\': $pvMention.searching }"\n      class="cloud standard options-cloud mention-cloud"\n      ng-style="$pvMention.menuPosition">\n\n      <ul class="g-unordered-list options-list mention-people-list scroll-helper">\n        <li ng-repeat="option in $pvMention.options track by $index"\n            ng-class="{\'active\': $pvMention.activeOption === option}"\n            ng-click="$pvMention.select(option)">\n          <a href="">{{option.name}}</a>\n        </li>\n        <li>\n          <span ng-if="$pvMention.options.length === 0" class="no-users disabled">\n            No users found\n          </span>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <section class="submit-menu">\n    <button\n      type="button"\n      class="btn-solid blue add-comment"\n      ng-mousedown="submitMe($event)"\n      ng-class="{\'working\' : working}"\n      data-test="add-comment-button{{working ? \'-working\' : \'\'}}">\n      {{::\'BTN_ADD_COMMENT\' | translate}}\n    </button>\n  </section>\n\n  <footer class="comment-footer" ng-if="!isAnonymous">\n    <div ng-if="isAssignmentActive" class="assign-wrapper">\n      <pv-select\n        config="assign.config"\n        options="assign.options"\n        ng-model="assign.selected"\n        ng-change="assign.onChange()"\n        on-open="onAssignOpen()">\n      </pv-select>\n    </div>\n    <div ng-if="replyForm" class="resolve-wrapper" ng-class="{\'resolved\' : parentComment.resolved.is}">\n      <pv-toggler\n        ng-model="parentComment.resolved.is"\n        title="Resolve"\n        true-label="Solved"\n        false-label="Resolve"\n        ng-change="resolveMe(parentComment.resolved.is)"></pv-toggler>\n    </div>\n  </footer>\n</form>\n'),$templateCache.put("/scripts/modules/comments/directives/preview-comment/pvPreviewComment.html",'<pv-avatar\n  url="::avatarUrl"\n  name="::userName"\n  avatar-class="light-bg">\n</pv-avatar>\n\n<section class="comment-wrapper">\n  <div class="comment-body" data-test="comment-body">\n    <p>\n      <strong>\n        <span highlight search-for="searchFor" input-text="authorText" class="author-name" data-test="comment-body-author"></span>\n      </strong>\n      <span highlight search-for="searchFor" input-text="previewText" data-test="comment-body-text"></span>\n    </p>\n  </div>\n\n  <div class="comment-options">\n    <span class="time-stamp" data-timestamp="{{commentCreatedAt}}"></span>\n    <a ng-href=""\n       class="love-it icon-general-heart-outline"\n       ng-class="{\'active\' : isLoved()}"\n       ng-click="loveMe($event)"\n       title="{{getLoveIconTitle()}}"\n       data-test="comment-love-icon{{isLoved() ? \'-active\' : \'\'}}">\n      <span ng-if="comment.lovers.length" data-lovers-count="{{comment.lovers.length}}"></span>\n    </a>\n  </div>\n\n  <menu class="cloud-wrapper comment-menu" ng-if="canEdit">\n    <a class="icon-general-cog only-icon-font" data-test="comment-settings" ng-click="toggleMe($event)"></a>\n    <ul class="cloud standard options-cloud small" ng-class="{\'is-open\': isCloudOpen()}">\n      <li>\n        <a ng-href=""\n           class="edit"\n           ng-if="canEditContent"\n           ng-class="{\'disabled\': isEditDisabled()}"\n           ng-click="editMe($event)"\n           data-test="edit-comment">\n          Edit comment\n        </a>\n        <a ng-href="" class="delete danger" ng-click="deleteMe($event)" data-test="delete-comment">\n          Delete comment\n        </a>\n      </li>\n    </ul>\n  </menu>\n</section>\n\n'),$templateCache.put("/scripts/modules/comments/directives/preview-comment-anonymous/preview-comment-anonymous.directive.html",'<article class="single-comment">\n  <h2>\n    Hi stranger! In order to comment<br />\n    you need first to <a ng-href="{{vm.referer}}" class="underline-link blue-link">Log in</a>.\n  </h2>\n</article>\n<article class="single-comment">\n  <p>\n    Don\'t have UXPin account? At least set your<br />\n    name so others know who you are.\n  </p>\n  <anonymous-name></anonymous-name>\n</article>\n'),$templateCache.put("/scripts/modules/comments/directives/preview-comment-container/preview-comment-container.directive.html",'<section\n  class="comments-group"\n  id="group-{{comment ? comment._id : \'new\'}}-{{type}}"\n  ng-class="classes"\n  ng-click="toggle($event)">\n\n  <section class="comment-top-bar" ng-if="!isAnonymous">\n    <pv-select\n      class="left-column"\n      link-class="comment-type"\n      ng-if="commentTypesActive"\n      options="commentType.options"\n      ng-model="commentType.selected"\n      ng-change="handleCommentTypeChange()">\n    </pv-select>\n\n    <pv-notify\n      class="right-column"\n      people="notify.people"\n      ng-model="notify.selected"\n      on-open="onNotifyOpen()"\n      on-close="onNotifyClose()">\n    </pv-notify>\n  </section>\n\n  <preview-comment-group\n    ng-if="isNew() && !isAnonymousWithoutName()"\n    type="{{type}}"\n    x="{{x}}"\n    y="{{y}}"\n    comment-type="commentType.selected"\n    notifications="notify.selected">\n  </preview-comment-group>\n\n  <preview-comment-anonymous\n    ng-if="isNew() && isAnonymousWithoutName()"\n    class="comment-anonymous"\n    x="{{x}}"\n    y="{{y}}">\n  </preview-comment-anonymous>\n\n  <preview-comment-group\n    ng-if="!isNew()"\n    type="{{type}}"\n    reply="selected"\n    group-id="groupId"\n    comment="comment"\n    comment-type="commentType.selected"\n    comment-children="children"\n    notifications="notify.selected">\n  </preview-comment-group>\n\n  <section class="deleting-info" ng-if="deleting">\n    <p>\n      {{::\'INFO_DELETED\' | translate}}\n      <a ng-href="" class="undo-delete" ng-click="onClickUndo($event)">\n        {{::\'BTN_UNDO\' | translate}}\n      </a>\n    </p>\n  </section>\n</section>\n'),$templateCache.put("/scripts/modules/comments/directives/preview-comment-group/preview-comment-group.directive.html",'<section>\n  <preview-comment-panel\n    ng-if="!isNew() && isPanel()"\n    group-id="groupId"\n    comment="comment"\n    comment-type="commentType"\n    notifications="notifications">\n  </preview-comment-panel>\n\n  <div\n    ng-if="!isNew() && isGroup() && !isCanvas() && toggler.isVisible"\n    class="toggle-replies"\n    ng-click="onTogglerClick($event)"\n    ng-class="{\'replies-hidden\': toggler.isOpen}">\n    <span class="underline-helper">{{toggler.isOpen ? \'Hide\' : commentCountInfo()}} replies</span>\n  </div>\n\n  <preview-comment-panel\n    ng-if="!isNew() && isPanel()"\n    ng-repeat="c in childrenToDisplay track by c._id"\n    group-id="groupId"\n    comment="c"\n    comment-type="commentType"\n    reply="{{reply}}"\n    notifications="notifications">\n  </preview-comment-panel>\n\n  <preview-comment-panel\n    ng-if="!isNew() && reply && isPanel() && !isAnonymousWithoutName()"\n    group-id="groupId"\n    comment-type="commentType"\n    notifications="notifications"\n    parent-id="{{comment._id}}"\n    reply-form="{{reply}}">\n  </preview-comment-panel>\n\n  <preview-comment-canvas\n    ng-if="isNew() && isCanvas()"\n    comment-type="commentType"\n    notifications="notifications"\n    x="{{x}}"\n    y="{{y}}">\n  </preview-comment-canvas>\n\n  <preview-comment-canvas\n    ng-if="!isNew() && isCanvas()"\n    group-id="groupId"\n    comment="comment"\n    comment-type="commentType"\n    notifications="notifications">\n  </preview-comment-canvas>\n\n  <div\n    ng-if="!isNew() && isGroup() && isCanvas() && toggler.isVisible"\n    class="toggle-replies"\n    ng-click="onTogglerClick($event)"\n    ng-class="{\'replies-hidden\': toggler.isOpen}">\n    <span class="underline-helper">{{toggler.isOpen ? \'Hide\' : commentCountInfo()}} replies</span>\n  </div>\n\n  <preview-comment-canvas\n    ng-if="!isNew() && isCanvas()"\n    ng-repeat="c in childrenToDisplay track by c._id"\n    group-id="groupId"\n    comment="c"\n    comment-type="commentType"\n    notifications="notifications"\n    reply="{{reply}}">\n  </preview-comment-canvas>\n\n  <preview-comment-canvas\n    ng-if="!isNew() && reply && isCanvas() && !isAnonymousWithoutName()"\n    group-id="groupId"\n    comment-type="commentType"\n    notifications="notifications"\n    group-id="groupId"\n    parent-id="{{comment._id}}"\n    reply-form="{{reply}}">\n  </preview-comment-canvas>\n\n  <preview-comment-anonymous\n      ng-if="!isNew() && reply && isCanvas() && isAnonymousWithoutName()"\n      class="comment-anonymous">\n  </preview-comment-anonymous>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/anonymousName/anonymousName.directive.html",'<section class="anonymous-login-form"\n         ng-class="vm.displayForm ? \'show-form\' : \'\'">\n  <form>\n    <div class="ds-input">\n      <input\n          class="ds-input__field"\n          type="text"\n          placeholder="Your name"\n          ng-class="{error: vm.showError}"\n          ng-model="vm.anonymousName"\n          ng-keydown="vm.onKeyDown($event)"\n          ng-change="vm.onChange()"\n          sync-focus-with="vm.displayForm"\n          required />\n    </div>\n    <button class="btn-solid btn-wide"\n            ng-click="vm.setName()"\n            ng-show="vm.displayBtn"\n            type="button">Save</button>\n  </form>\n  <p ng-if="vm.isAnonymousNameSet" class="anonymous-name">\n    <span class="label">Commenting as:</span>\n    <strong class="ellipsis-helper" title="{{vm.anonymousName}}">{{vm.anonymousName}}</strong>\n    <a href="#" class="underline-link" ng-click="vm.changeName($event)">Change</a>\n  </p>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/appViewPromo/appViewPromo.directive.html",'<section id="install-on-device" class="mobile-overlay" ng-class="{\'is-android\': isAndroid, \'is-ios\': !isAndroid}">\n    <div class="centering-container">\n        <div class="white-cloud" ng-if="!isAndroid">\n            <p>Add prototypes to your Home Screen<br>to view them  without browser toolbars.</p>\n            <p class="instruction">Tap<span class="mobile-share ios-share icon-general-ios-share only-icon-font"></span>then "Add to Home Screen"</p>\n\n            <a ng-click="close()" class="close-overlay only-icon-font icon-general-close">close</a>\n        </div>\n        <div class="white-cloud" ng-if="isAndroid">\n            <p>Add prototypes to your Home Screen<br>to view them  without browser toolbars.</p>\n            <p class="instruction">Tap<span class="mobile-share android-share icon-general-ellipsis only-icon-font"></span>then "Add to Home Screen"</p>\n\n            <a ng-click="close()" class="close-overlay only-icon-font icon-general-close">close</a>\n        </div>\n    </div>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/avatar/pvAvatar.html",'<figure class="user-avatar {{ avatarClass }}" >\n  <img ng-src="{{ vm.getUserAvatar() }}" alt="">\n  <strong class="initials" ng-if="!vm.url || vm.imageError">{{ vm.initials }}</strong>\n</figure>\n'),$templateCache.put("/scripts/modules/core/directives/breakpoints/pvBreakpoints.html",'<cloud ng-if="vm.areBreakpointsVisible"\n       on-open="vm.onCloudOpen"\n       on-close="vm.onCloudClose"\n       default-position="bottom"\n       auto-close="{{true}}">\n  <a href="#actions" ng-class="{active: vm.isOpen}"  class="g-link breakpoints-trigger icon-general-chevron" data-trigger>\n    <span>{{vm.getActiveBreakPoint().name}}</span>\n  </a>\n\n  <div data-cloud class="cloud options-cloud brakepoints-cloud">\n    <ul class="g-unordered-list options-list scroll-ready">\n      <li ng-repeat="breakpoint in vm.breakpoints track by breakpoint.id">\n        <a ng-class="{\'active\' : vm.isActive(breakpoint.id)}"\n           ng-click="vm.onClick(breakpoint.id)"\n           class="icon-general-live-presentation"\n           title="{{breakpoint.name}}">\n          {{breakpoint.name}}\n        </a>\n      </li>\n\n    </ul>\n    <form class="separator" ng-if="!vm.isUTSession && !vm.isLiveSession">\n      <input ng-model="vm.isResponsive" ng-change="vm.onResponsive()" type="checkbox" id="auto-set-brakepoints" class="state-helper" value="on">\n      <label class="fake-choose-label fake-checkbox inside-cloud" for="auto-set-brakepoints">Auto set breakpoints</label>\n    </form>\n  </div>\n</cloud>\n'),$templateCache.put("/scripts/modules/core/directives/cloud/cloud.html","<div ng-transclude></div>\n"),$templateCache.put("/scripts/modules/core/directives/codeEditor/codeMirror.html","<textarea></textarea>\n"),$templateCache.put("/scripts/modules/core/directives/controls/pvToggler.html",'<a ng-href="" class="mark-resolved icon-general-ticker" data-test="comment-mark-resolved" title="{{title}}"></a>\n'),$templateCache.put("/scripts/modules/core/directives/imageDownloader/imageDownloader.html",'<form action="/api/utils/image/download" method="post">\n  <input type="hidden" name="name" value="{{name}}" />\n  <input type="hidden" name="content" value="{{content}}" />\n  <input type="hidden" name="type" value="{{type}}" />\n</form>\n'),$templateCache.put("/scripts/modules/core/directives/input/inputMinMax.view.html",'<input\n  type="text"\n  ng-focus="vm.handleFocus($event)"\n  ng-blur="vm.handleBlur($event)"\n  ng-keydown="vm.handleKeyDown($event)"\n  ng-change="vm.handleChange($event)"\n  ng-model="vm.model"\n  class="ds-input__field ds-input__field--size-s ds-input__field--weight-light ds-input__field--text-center"\n/>\n'),$templateCache.put("/scripts/modules/core/directives/layers/layersList.view.html",'<section id="layers-list" class="layers-list-container scrolled-content">\n  <script type="text/ng-template" id="layer_node_template.html">\n    <button\n      class="group-expander only-icon-font"\n      ng-class="{\'ds-icon--font__chevron-down is-expanded\': vm.expandStatus[node.id], \'ds-icon--font__chevron-right\': !vm.expandStatus[node.id]}"\n      ng-if="node.children && node.children.length && !node.isMaskGroup"\n      ng-click="vm.toggleExpandStatus($event, node.id)">\n      Expand group elements\n    </button>\n\n    <div class="layer" ng-class="{\'layer-mask-group\': node.isMaskGroup, \'layer-symbol\': node.isSymbol}" draggable="true">\n      <span ng-if="node.isMask" class="layer-type only-icon-font ds-icon--font__mask mask-indicator"></span>\n      <span\n        class="layer-type only-icon-font {{::vm.getListItemClassByType(node.type, node.typeSketch, node.hasClippingMask)}}"\n        ng-class="{\'clipping-element\': node.hasClippingMask}">\n      </span>\n      <span class="layer-name" title="{{::node.name}}">{{::node.name}}</span>\n      <nav class="hover-actions">\n        <button\n          ng-if="node.canHide"\n          class="icon-switcher btn-hover-actions ds-icon--font__visibility-visible ds-icon--size-xs only-icon-font"\n          ng-class="{\'ds-icon--font__visibility-visible\': !vm.isHidden(node), \'ds-icon--font__visibility-hidden\': vm.isHidden(node)}"\n          ng-click="vm.toggleVisibility($event, node)"\n          title="Hide element">\n          Hide element\n        </button>\n      </nav>\n    </div>\n\n    <ul ng-if="node.isMaskGroup || node.children && node.children.length && vm.expandStatus[node.id]" class="branch">\n      <li\n        class="item"\n        ng-mouseover="vm.onMouseEnter($event, node)"\n        ng-mouseout="vm.onMouseLeave($event,node)"\n        ng-click="vm.select($event, node)"\n        ng-class="{\'group\': node.isGroup, \'selected\': vm.isSelected(node.id), \'element-hidden\': vm.isHidden(node), \'mask-group\': node.isMaskGroup}"\n        ng-repeat="node in node.children track by node.id"\n        ng-include="\'layer_node_template.html\'">\n      </li>\n    </ul>\n  <\/script>\n\n  <ul class="layers-list">\n    <li\n      class="item"\n      ng-if="!node.isSketchArtboard"\n      ng-class="{\'group\': node.isGroup, \'selected\': vm.isSelected(node.id), \'element-hidden\': vm.isHidden(node), \'mask-group\': node.isMaskGroup}"\n      ng-click="vm.select($event, node)"\n      ng-mouseover="vm.onMouseEnter($event,node)"\n      ng-mouseout="vm.onMouseLeave($event,node)"\n      ng-repeat="node in vm.collection track by node.id"\n      ng-include="\'layer_node_template.html\'">\n    </li>\n  </ul>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/mediaAccessTip/mediaAccessTip.directive.html",'<section ng-class="{\'visible\': isTipVisible, \'denied\': isDenied}" class="warning-tooltip">\n    <p ng-if="!isDenied">\n      UXPin needs <strong>access to your microphone and camera</strong> to record audio or to embed a camera feed.\n    </p>\n    <p ng-if="isDenied">\n      You have denied access. You are not able to record Usability testing. <strong>Change your browser settings.</strong>\n    </p>\n\n    <a ng-click="onClickClose()" class="icon-general-close only-icon-font close-info">close info</a>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/notify/pvNotify.html",'<div class="notify-wrapper">\n  <a ng-href="" class="icon-general-chevron" ng-class="{\'active\': vm.isOpen}" ng-click="vm.toggle()">\n    <span class="underline-helper">\n      <span class="label">Notify:</span>\n      <span class="ellipsis-helper">{{vm.selected.length | notifyLabel:vm.filters}}</span>\n    </span>\n  </a>\n\n  <section ng-if="vm.isOpen" class="cloud big standard notify-users options-cloud visible">\n    <span class="selection-trigger">\n      <a\n        href=""\n        id="select-all"\n        ng-class="{\'active\': vm.filters.all}"\n        ng-click="vm.selectAll()">\n        All</a>\n       <a\n         href=""\n         id="select-project-members"\n         ng-class="{\'active\': vm.filters.projectMembers}"\n         ng-click="vm.selectProjectMembers()">\n        Project members</a>\n      <a\n        href=""\n        id="select-none"\n        ng-class="{\'active\': vm.filters.none}"\n        ng-click="vm.selectNone()">\n        None</a>\n    </span>\n\n    <pv-multi-select-list\n      class="list-wrapper"\n      options="vm.people"\n      scroll-to-bottom="vm.scrollToBottom"\n      ng-model="vm.selected"\n      ng-change="vm.updateFilters()">\n    </pv-multi-select-list>\n\n    <textarea\n      class="dark-style g-textarea"\n      cols="30"\n      rows="3"\n      placeholder="Not on the list? Add email address and send notification"\n      ng-model="vm.customEmails"\n      ng-keydown="$event.stopPropagation()"\n      pv-enter="vm.onTextareaEnter()"\n      pv-emails-parser=",">\n    </textarea>\n  </section>\n</div>\n'),$templateCache.put("/scripts/modules/core/directives/preview-pin/preview-pin.directive.html",'<section class="comment-point pin"\n         ng-class="classes"\n         ng-dblclick="onDblclick($event)"\n         ng-style="getCommentPointStyle()">\n\n    <section class="comment-pin" ng-mousedown="startDrag($event)" ng-mouseup="endDrag($event)" toggleable>{{index}}</section>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/progressBar/pvProgressBar.html",'<div class="progressbar static with-percentage">\n    <span class="progress" ng-style="{ width: (value < 100 ? value : 100) + \'%\'}"></span>\n    <span class="percentages" ng-transclude></span>\n</div>\n'),$templateCache.put("/scripts/modules/core/directives/screencastify/pvScreencastifyRecorder.html",'<ul class="ut-recorder">\n  <li class="tab-button wide with-spacing"\n      ng-if="!vm.isRecording"\n      ng-click="vm.startRecording()">\n    Start recording\n  </li>\n  <li class="tab-button recording with-spacing"\n      ng-if="vm.isRecording">\n    Recording {{ vm.duration | timer }}\n  </li>\n</ul>\n'),$templateCache.put("/scripts/modules/core/directives/search/pvSearch.html",'<form class="search-form">\n  <label class="icon-general-search only-icon-font" for="search-form-generic">\n    {{vm.config.label}}\n  </label>\n  <input\n    id="search-form-generic"\n    class="g-field with-icon old-input"\n    type="text"\n    autocomplete="off"\n    placeholder="{{vm.config.placeholder}}"\n    ng-model="vm.searchValue"\n    ng-keyup="vm.search()"\n    ng-keydown="$event.stopPropagation()"/>\n  <button\n    class="icon-general-close only-icon-font"\n    type="reset"\n    ng-click="vm.resetSearch()">\n    Clear\n  </button>\n</form>\n'),$templateCache.put("/scripts/modules/core/directives/select/pvMultiSelectList.html",'<div ng-transclude></div>\n\n<form class="search-form">\n  <label class="icon-general-search only-icon-font" for="search-form-generic">Search for the user...</label>\n  <input\n      id="search-form-generic"\n      class="g-field with-icon old-input"\n      type="text"\n      placeholder="Type to search..."\n      ng-model="vm.searchValue"\n      ng-keyup="vm.search()"\n      ng-keydown="$event.stopPropagation()"/>\n  <button class="icon-general-close only-icon-font" type="reset" ng-click="vm.resetSearch()">Clear</button>\n</form>\n\n<ul class="checkbox-list" pv-scroll-to-bottom="scrollToBottom">\n  <li class="fake-checkbox-with-image" ng-repeat="option in vm.filteredOptions track by $index">\n    <form>\n      <input type="checkbox" id=user_{{$index}} class="state-helper" ng-model="option.checked" ng-change="vm.select(option)">\n      <label class="fake-choose-label fake-checkbox inside-cloud" for=user_{{$index}}>\n        <figure class="user-avatar">\n          <pv-avatar url="option.avatar" name="option.name"></pv-avatar>\n          <figcaption>{{option.name}}</figcaption>\n        </figure>\n      </label>\n    </form>\n  </li>\n</ul>\n'),$templateCache.put("/scripts/modules/core/directives/select/pvSelect.html",'<menu class="cloud-wrapper" ng-class="{ \'cloud-disabled\': vm.disabled }">\n  <a class="icon-general-chevron {{vm.selectedOption.className + \' \' + linkClass}}"\n     ng-class="{\'active\' : vm.isDropdownOpen}"\n     ng-click="vm.toggleDropdown()"\n     ng-include="\'/scripts/modules/core/directives/select/inputTpl/\' + vm.config.inputTpl">\n  </a>\n\n  <section\n    id="{{vm.config.cloudId}}"\n    ng-if="!vm.config.disabled"\n    class="cloud standard options-cloud"\n    ng-class="{\'visible\' : vm.isDropdownOpen}">\n\n    <span ng-if="vm.config.deselect" class="selection-trigger separator bottom more-spacing">\n      <a href="" ng-click="vm.deselectOption()">{{vm.config.deselectLabel}}</a>\n    </span>\n\n    <pv-search\n      ng-if="vm.config.withSearch"\n      config="vm.config.search"\n      options="vm.options"\n      on-search="vm.onSearch(filteredOptions)"\n      on-reset="vm.onReset()">\n    </pv-search>\n\n    <ul class="g-unordered-list scroll-helper options-list">\n      <li\n        ng-repeat="option in vm.filteredOptions track by $index"\n        ng-class="{\'selected\': option === vm.selectedOption}"\n        ng-click="vm.selectOption(option)"\n        ng-include="\'/scripts/modules/core/directives/select/optionTpl/\' + vm.config.optionTpl">\n      </li>\n    </ul>\n    <div class="separator" ng-transclude pv-hide-empty></div>\n  </section>\n</menu>\n'),$templateCache.put("/scripts/modules/core/directives/select/pvSingleSelectList.html",'<pv-search\n  ng-if="vm.config.withSearch"\n  config="vm.config.search"\n  options="vm.options"\n  on-search="vm.onSearch(filteredOptions)"\n  on-reset="vm.onResetSearch()">\n</pv-search>\n\n<ul class="g-unordered-list scroll-helper options-list">\n  <li\n    ng-repeat="option in vm.filteredOptions track by $index"\n    ng-class="{\'selected\': option === vm.selectedOption}"\n    ng-click="vm.selectOption(option)"\n    ng-include="\'/scripts/modules/core/directives/select/optionTpl/\' + vm.config.optionTpl">\n  </li>\n</ul>\n'),$templateCache.put("/scripts/modules/core/directives/shortcut/pvShortcut.html",'<small>\n  <span\n    class="custom-color"\n    ng-repeat="key in vm.keys track by $index"\n    ng-class="key.className">\n    {{key.alt}}\n  </span>\n</small>\n'),$templateCache.put("/scripts/modules/core/directives/updateInfo/updateInfo.html",'<section id="modal-box-update-info" class="visible dialogbox-container modal-box-update-info">\n  <a ng-click="closeModal($event)" class="close-modal-button icon-general-close only-icon-font">{{::\'UM_CLOSE_MODAL\'|translate}}</a>\n  <ng-include src="content" class="modal-box-content"></ng-include>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/uxpinBadge/uxpin-badge.html",'<a\n  ng-href="{{vm.homepageUrl}}"\n  ng-show="vm.isOpen"\n  class="uxpin-badge"\n  target="_blank">\n  <img src="img/uxpin-badge.svg" alt="Made with UXPin" class="badge-img">\n</a>\n'),$templateCache.put("/scripts/modules/core/directives/videoStream/videoStream.html",'<section ng-if="vm.isUsabilityTestingSession" ng-show="vm.isHost" class="streaming-video" id="publisher"></section>\n<section ng-if="vm.isUsabilityTestingSession" ng-show="vm.isHost" class="streaming-video" id="subscribers">\n  <div class="waiting-for-transmission working" ng-if="vm.isMessageVisible">\n    <p>{{vm.message}}</p>\n  </div>\n</section>'),$templateCache.put("/scripts/modules/core/directives/zoom/zoom.view.html",'<div>\n  <cloud default-position="bottom" on-open="vm.onCloudOpen" on-close="vm.onCloudClose">\n    <ul data-trigger class="zoom" ng-class="{active: vm.isZoomActive}" ng-click="vm.handleZoomFocus()">\n      <li class="default">\n        <fieldset class="with-unit" data-unit="%">\n          <div class="ds-input ds-input--zoom-control with-icon-on-right ds-icon--size-s ds-input--element-property ds-input--dark-version-available"><input-min-max on-change-value-key-action="vm.handleOnChange" on-change="vm.handleOnChange" values="vm.ZOOM_VALUES" min-value="vm.MIN_VALUE" max-value="vm.MAX_VALUE" model="vm.zoom"></input-min-max></div>\n        </fieldset>\n      </li>\n      <li class="cloud-indicator">\n        <span ng-class="{active: vm.isOpen}" class="icon-general-chevron"></span>\n      </li>\n    </ul>\n    <ul data-cloud\n        class="cloud options-cloud arrow-top zoom-cloud">\n      <li>\n        <a href="#"\n           ng-mousedown="vm.handleMouseDownZoomIn()"\n           ng-click="vm.handleClick($event)"\n        >\n          Zoom in <small class="ds-icon--custom__key-cmd">&nbsp;+</small>\n        </a>\n      </li>\n      <li>\n        <a href="#"\n           ng-mousedown="vm.handleMouseDownZoomOut()"\n           ng-click="vm.handleClick($event)"\n        >\n          Zoom out <small class="ds-icon--custom__key-cmd">&nbsp;-</small>\n        </a>\n      </li>\n      <li class="separator">\n        <div ng-click="vm.setZoomStrategy(\'\')" class="ds-radio-button ds-choose-base ds-choose-base--style-chameleon " role="presentation">\n          <input ng-model="vm.zoomStrategy" class="ds-choose-base__input" id="actual-size" name="fitCanvas" type="radio" value="{{vm.ACTUAL_SIZE}}">\n          <label class="ds-choose-base__label ds-label ds-label--style-chameleon" for="actual-size">\n            <span class="ds-choose-base__helper"></span>Actual size (100%)\n          </label>\n        </div>\n      </li>\n      <li>\n        <div ng-click="vm.setZoomStrategy(vm.zoomStrategies.FIT_TO_WIDTH)" class="ds-radio-button ds-choose-base ds-choose-base--style-chameleon " role="presentation">\n          <input ng-model="vm.zoomStrategy" class="ds-choose-base__input" id="fit-to-width" name="fitCanvas" type="radio" value="{{vm.zoomStrategies.FIT_TO_WIDTH}}">\n          <label class="ds-choose-base__label ds-label ds-label--style-chameleon" for="fit-to-width">\n            <span class="ds-choose-base__helper"></span>Fit to width\n          </label>\n        </div>\n      </li>\n      <li>\n        <div ng-click="vm.setZoomStrategy(vm.zoomStrategies.FIT_TO_SCREEN)" class="ds-radio-button ds-choose-base ds-choose-base--style-chameleon " role="presentation">\n          <input ng-model="vm.zoomStrategy" class="ds-choose-base__input" id="fit-to-screen" name="fitCanvas" type="radio" value="{{vm.zoomStrategies.FIT_TO_SCREEN}}">\n          <label class="ds-choose-base__label ds-label ds-label--style-chameleon" for="fit-to-screen">\n            <span class="ds-choose-base__helper"></span>Fit to screen\n          </label>\n        </div>\n      </li>\n\n    </ul>\n  </cloud>\n</div>\n'),$templateCache.put("/scripts/modules/core/views/approvalProcess/accept.view.html",'<section id="approval-process-modal-box" class="modal-box-content">\n  <article>\n    <h2 class="g-heading-2">{{ vm.approvalLabel }} Design</h2>\n    <textarea class="g-textarea" ng-model="vm.feedback" placeholder="You can add some optional feedback to explain your decision"></textarea>\n    <ul class="btns-group">\n      <li>\n        <a href="" class="gray-style cancel-button action-close" ng-click="vm.closeModal($event)">Cancel</a>\n      </li>\n      <li>\n        <button type="button" class="btn-solid btn-wide blue" ng-click="vm.sendApproval()">{{ vm.approvalLabel }}</button>\n      </li>\n    </ul>\n  </article>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/approvalProcess/approvalProcessControls.view.html",'<ul class="g-unordered-list btns-group options-list approval-process-controls" ng-if="vm.approvalData.isActive()">\n  <li class="separator"></li>\n  <li ng-if="vm.approvalData.isPending() || vm.approvalData.isApproved()">\n    <button type="button"\n            class="btn-ghost green with-icon icon-general-ticker"\n            ng-click="vm.approvalButtonClick(true, $event)"\n            ng-class="{disabled: !vm.approvalData.isPending()}">\n      <span>{{vm.approvalData.getApproveLabel()}}</span>\n    </button>\n  </li>\n  <li ng-if="vm.approvalData.isPending() || vm.approvalData.isRejected()">\n    <button type="button"\n            class="btn-ghost red with-icon icon-general-close"\n            ng-click="vm.approvalButtonClick(false, $event)"\n            ng-class="{disabled: !vm.approvalData.isPending()}">\n      <span>{{vm.approvalData.getRejectLabel()}}</span>\n    </button>\n  </li>\n</ul>\n'),$templateCache.put("/scripts/modules/core/views/approvalProcess/review.view.html",'<section id="approval-process-modal-box" class="modal-box-content info updated">\n  <article>\n    <h2 class="g-heading-2">Design updated</h2>\n    <figure>\n      <img width="185" height="149" src="/img/design-updated.svg" alt="Design updated">\n    </figure>\n    <p>\n      Thanks for your previous feedback. The design has been revised. Please review the changes. Once again, you can either approve or reject it.\n    </p>\n    <ul class="btns-group">\n      <li>\n        <button type="button" class="btn-solid btn-wide blue" ng-click="vm.closeModal()">Review changes</button>\n      </li>\n    </ul>\n  </article>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/approvalProcess/welcome.view.html",'<section id="approval-process-modal-box" class="modal-box-content info welcome">\n  <article>\n    <h2 class="g-heading-2">Design approval request</h2>\n    <figure>\n      <img src="/img/review-design.png" srcset="/img/review-design-@2x.png 2x, /img/review-design.png 1x" alt="Design approval request">\n    </figure>\n    <p>\n      Please review the following design. You can either approve it or reject it using the buttons in the top right corner. Youll also be able to leave additional comments afterward.\n    </p>\n    <ul class="btns-group">\n      <li>\n        <button type="button" class="btn-solid btn-wide blue" ng-click="vm.closeModal()">Got it</button>\n      </li>\n    </ul>\n  </article>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/liveShare/configuration.view.html",'<section id="live-share-settings" class="modal-box-content">\n    <article>\n        <h2 class="g-heading-2">Live Presentation</h2>\n        <section class="session-settings standard-list-container options-list">\n            <h3 class="g-heading-3">Session settings</h3>\n            <ul class="g-unordered-list">\n                <li ng-repeat="option in liveShareOptions">\n                    <input id="initial-config-{{$index}}" class="state-helper" ng-model="option.value" type="checkbox" checked>\n                    <label for="initial-config-{{$index}}" class="fake-choose-label fake-checkbox">{{option.name}}</label>\n                </li>\n            </ul>\n        </section>\n        <h3 class="g-heading-3">Link to session</h3>\n        <div ng-class="{\'working\': !inviteUrl}" class="invite-link-container no-button">\n            <input ng-click="onClickLink($event)" class="g-field" type="text" readonly ng-model="inviteUrl">\n        </div>\n        <button ng-click="start()" class="btn-solid blue">Start live session</button>\n    </article>\n    <aside>\n\n    </aside>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/liveShare/finish.view.html",'<section class="live-share-landing full-page-landing visible">\n    <div class="centering-block" ng-switch="type">\n        <img src="/img/UXPin-Logo-BlackFill.svg" \n          class="image-general-uxpin-logo" \n          alt="UXPin-Logo-Black">\n\n        <h2 translate translate-values="{\'projectName\': projectName}">{{message}}</h2>\n        <a ng-href="#" ng-if="backUrl" ng-click="onClickBackToPreview($event)" class="back-to-preview">{{ ::\'LS_BACK_TO_PREVIEW\' | translate }}</a>\n    </div>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/liveShare/initialize.view.html",'<section class="live-share-landing full-page-landing with-input visible">\n  <div class="centering-block">\n    <img src="/img/UXPin-Logo-BlackFill.svg" \n      class="image-general-uxpin-logo" \n      alt="UXPin-Logo-Black">\n    <pv-progress-bar ng-if="!loginUrl" value="loadingProgress"></pv-progress-bar>\n\n    <h2>Loading <strong>{{::projectName}}</strong> {{::sessionTypeName|translate}}.</h2>\n    <form name="setNameForm" ng-if="loginUrl" ng-submit="onFormSubmit(name)">\n      <fieldset>\n        <p>My name is</p>\n        <input required autofocus type="text" ng-model="name" name="name"><em>*</em>\n        <button ng-disabled="setNameForm.$invalid" type="submit" class="btn-solid blue" ng-class="{\'working\': working}">That\'s me</button>\n        <small class="tip">* To join {{::projectName}} live preview session you need to set your name.</small>\n      </fieldset>\n    </form>\n  </div>\n  <section ng-if="loginUrl" class="login-toolbar bottom visible">Are you registered UXPin user? <a href="{{loginUrl}}">Please login</a>.</section>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/planUpgrade/modal.view.html",'<section id="liveshare-dialogbox" class="visible dialogbox-container with-video modal-box-content">\n    <section class="movie-part">\n        <h2 class="icon-general-uxpin-logo only-icon-font">UXPin</h2>\n\n        <a ng-click="closeMovie($event)" class="close-movie action-close-movie">{{::\'UM_CLOSE_MOVIE\'|translate}}</a>\n\n        <figure class="movie-cover">\n            <img width="394px" height="400px" src="/img/welcome-modal-pic.jpg" alt="">\n        </figure>\n\n        <youtube-video video-id="video.id" player="video.player" class="movie-container"></youtube-video>\n    </section>\n    <section class="content-part">\n        <h2 translate>{{::\'UM_MODAL_HEADER\'|translate}}</h2>\n\n        <p>{{::\'UM_MODAL_TEXT\'|translate}}</p>\n\n        <a ng-click="closeModal($event)" class="close-modal-button icon-general-close only-icon-font close-movie action-close-movie">{{::\'UM_CLOSE_MODAL\'|translate}}</a>\n\n        <a ng-click="playMovie($event)" class="btn-ghost btn-inline icon-general-play with-icon action-close-dialogbox show-me">{{::\'UM_HOW_IT_WORKS\'|translate}}</a>\n\n        <p class="small-tip"><span class="pro-label">{{::\'UM_SYSTEMS\'|translate}}</span> {{::\'UM_SYSTEMS_TEXT\'|translate}}\n          <a ng-click="upgradePlan($event)" href="{{upgradePlanURL}}" class="btn-solid blue upgrade-now">\n            {{::\'UM_UPGRADE_NOW\'|translate}}\n          </a>\n        </p>\n    </section>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/planUpgrade/modalUpgrade.view.html",'<iframe ng-src={{getUpgradeUrl()}} frameBorder="0" />'),$templateCache.put("/scripts/modules/core/views/usabilityTest/introduction.view.html",'<section id="user-testing-wizard" class="modal-box-content wizard subject-welcome" ng-if="!isActiveStep(4)">\n    <article class="wizard-content">\n        <div class="steps">\n            <section class="step" ng-class="{\'active\': isActiveStep(1)}">\n                <h2>Welcome to <strong>{{params.projectName}}</strong> Usability Testing </h2>\n                <section class="agreement" ng-bind-html="params.introduction"></section>\n                <section class="wizard-pagination">\n                    <div class="agreement-checkbox">\n                        <input id="agreement" class="state-helper" type="checkbox" ng-model="params.agreement">\n                        <label for="agreement" class="fake-choose-label fake-checkbox">I grant permission to record this session</label>\n                    </div>\n                    <button ng-disabled="!params.agreement" ng-click="onClickNextStep(2)" class="btn-solid next">Next: <b>Tasks</b></button>\n                </section>\n            </section>\n\n            <section class="step" ng-class="{\'active\': isActiveStep(2)}">\n                <h2>Tasks list</h2>\n\n                <ul class="tasks-list" ng-controller="UsabilityTestTasksController">\n                    <li ng-repeat="task in params.tasks">\n                        <h3 class="g-heading-3"><span>Task {{$index + 1}}:</span>{{task.title}}</h3>\n                        <p ng-bind-html="task.content"></p>\n                    </li>\n                </ul>\n\n                <section class="wizard-pagination">\n                    <button ng-disabled="!params.agreement" ng-click="onClickNextStep(3)" class="btn-solid next">Next: <b>Set camera</b></button>\n                </section>\n            </section>\n\n            <section class="step camera-setup" ng-class="{\'active\': isActiveStep(3)}">\n                <h2>Set your face inside camera area</h2>\n                <section class="camera-access-info icon-general-mic-line-on" ng-class="{\'hidden\' : params.answerVideo}">\n                    <p>Google Chrome needs access to your <strong>microphone</strong> and <strong>camera</strong> <br>to record audio or to embed a camera feed.</p>\n                    <p>Please give access to start recording.</p>\n                </section>\n\n                <section class="camera-access-info icon-general-mic-line-on denied hidden" ng-class="{\'hidden\' : !params.blockVideo}">\n                    <p>You rejected giving media access. Recording usability test wouldn\'t be available.</p>\n\n                    \x3c!-- <p><a href="#">Learn</a> how to enable media access.</p> --\x3e\n                </section>\n\n                <capture-video ng-if="isActiveStep(3)" width="750" height="250"></capture-video>\n\n                <section class="wizard-pagination">\n                    Ready? <button ng-disabled="!params.answerVideo" ng-click="onClickStartSession()" class="btn-solid next">Start session!</button>\n                </section>\n            </section>\n        </div>\n    </article>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/usabilityTest/pluginConfirm.view.html",""),$templateCache.put("/scripts/modules/core/views/usabilityTest/screencastifyDownload.view.html",'<section id="user-testing-plugin" class="modal-box-content" ng-if="::vm.isChrome">\n  <article>\n    <h2>Screencastify extension for Chrome</h2>\n\n    <p>\n      If you want to create Usability Testing session, you need to install Chrome extension. <br>Please go to Chrome Web Store to install it.\n    </p>\n\n    <section class="plugin-false" ng-if="!vm.isInstalled">\n      <a ng-href="{{::vm.downloadURL}}"\n         class="btn-solid blue"\n         ng-click="vm.verifyInstallation()"\n         target="_blank">\n        Install extension from Chrome Web Store\n      </a>\n      <a ng-href="{{::vm.helpPageURL}}" target="_blank" class="help">Need help with plugin installation?</a>\n    </section>\n\n    <section class="plugin-true" ng-if="vm.isInstalled">\n      <div class="extension-installed">Extension installed!</div>\n      <button class="btn-solid" ng-click="vm.createUsabilityTest($event)">Create usability test</button>\n    </section>\n  </article>\n</section>\n<section id="user-testing-plugin" class="modal-box-content not-avaible" ng-if="::!vm.isChrome">\n  <article>\n    <h2>You need Chrome!</h2>\n    <p>Currently UXPin Usability Testing Beta is supported only by Google Chrome browser. You can download Google Chrome browser <a class="g-link" href="https://www.google.com/intl/en/chrome/browser/" target="_blank">here</a>, and Usability Testing plugin <a class="g-link" ng-href="{{::vm.downloadURL}}" target="_blank">here</a>.</p>\n    <p>Enjoy your test!</p>\n  </article>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/usabilityTest/videoUpload.view.html",'<section class="live-share-landing full-page-landing visible">\n  <div class="centering-block" ng-switch="vm.uploadState">\n    <h1 class="icon-general-uxpin-logo only-icon-font">UXPin</h1>\n    <h2>You left {{::vm.projectName}} session.</h2>\n\n    <div class="content" ng-switch-when="uploading">\n      <p>The recording is being uploaded to project\'s dashboard. Please don\'t close this tab.</p>\n      <pv-progress-bar value="vm.uploadProgress">{{vm.uploadProgress + \'%\'}}</pv-progress-bar>\n    </div>\n    <div class="content" ng-switch-when="error">\n      <p>The recording is being uploaded to project\'s dashboard. Please don\'t close this tab.</p>\n      <section class="error-message">\n        <p>Sorry, something went wrong</p>\n        <p class="btns">\n          <a class="underline-link blue-link icon-general-revert" ng-click="vm.retry()" type="button">Retry</a>\n          or\n          <a class="underline-link blue-link icon-general-exit" ng-href="{{::vm.downloadURL}}" download="{{::vm.videoName}}">Download</a>\n        </p>\n      </section>\n    </div>\n    <div class="content" ng-switch-when="uploaded">\n      <p>File uploaded successfully. <a ng-href="{{::vm.dashboardURL}}" class="underline-link blue-link">Back to dashboard</a>.</p>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/core/views/usabilityTest/wizard.view.html",'<section id="user-testing-wizard" class="modal-box-content wizard">\n    <article ng-if="!isActiveStep(4)">\n        <h2>Create usability test: {{params.projectName}}</h2>\n\n        <ul class="wizard-breadcrumbs g-unordered-list">\n            <li ng-repeat="step in getStepsWithBreadcrumbs()" ng-class="{\'active\': isActiveStep($index), \'completed\': $index < params.activeStepIndex}">\n                <span class="step-count">{{$index+1}}</span>\n                <span class="step-label">{{step.label}}</span>\n            </li>\n        </ul>\n\n        <section class="wizard-content" id="wizard-content">\n            <div novalidation class="step step-1" ng-class="{\'active\': isActiveStep(0)}" ng-form="forms.step0">\n                <textarea class="g-textarea" required ng-model="params.steps[0].introduction"></textarea>\n            </div>\n\n            <section class="step step-2" ng-class="{\'active\': isActiveStep(1)}" ng-form="forms.step1">\n                <ul class="g-unordered-list">\n                    <li class="task-container" ng-repeat="task in getStep(1).tasks" ng-class="{\'visible\': !task.deleting}">\n                        <header class="title">\n                            <label for="task-{{$index}}">Task {{$index + 1}}:</label>\n                            <input required type="text" id="task-{{$index}}" ng-model="task.title">\n                            <a ng-href="#" ng-click="onClickDeleteTask($event, $index)" class="icon-general-trash only-icon-font delete"><span class="tooltip small-style">Delete this task</span></a>\n                        </header>\n                        <textarea class="g-textarea" required ng-model="task.content"></textarea>\n                    </li>\n                    <li class="task-container visible">\n                        <header class="title">\n                            <label for="new-task-title">Task {{getStep(1).tasks.length + 1}}:</label>\n                            <input required autofocus type="text" id="new-task-title" ng-model="getStep(1).newTask.title" placeholder="Enter task name">\n                            <a ng-if="getStep(1).tasks.length || getStep(1).newTask.title || getStep(1).newTask.content" ng-href="#" ng-click="onClickDeleteTask($event)" class="icon-general-trash only-icon-font delete"><span class="tooltip small-style">Delete this task</span></a>\n                        </header>\n                        <textarea class="g-textarea" required ng-model="getStep(1).newTask.content" placeholder="Enter task description"></textarea>\n                    </li>\n                </ul>\n            </section>\n\n            <section class="step step-3" ng-class="{\'active\': isActiveStep(2)}" ng-form="forms.step2">\n                <section class="standard-list-container options-list-container">\n                    <ul class="g-unordered-list">\n                        <li ng-repeat="option in getStep(2).options">\n                            <input id="option-{{$index}}" class="state-helper" type="checkbox" ng-model="option.value">\n                            <label for="option-{{$index}}" class="fake-choose-label fake-checkbox">{{option.name}}</label>\n                        </li>\n                        <li >\n                            <input id="breakpoint-enable-option" class="state-helper" type="checkbox" ng-model="getStep(2).breakpoints.enabled">\n                            <label for="breakpoint-enable-option" class="fake-choose-label fake-checkbox">{{getStep(2).breakpoints.name}}</label>\n                        </li>\n                    </ul>\n                    <ul class="breakpoints-list">\n                        <li ng-repeat="breakpoint in getStep(2).breakpoints.list" ng-class="{\'inactive\': !getStep(2).breakpoints.enabled}">\n                            <input id="breakpoint-option-{{$index}}" class="state-helper" ng-disabled="!getStep(2).breakpoints.enabled" type="checkbox" ng-model="breakpoint.value">\n                            <label for="breakpoint-option-{{$index}}" class="fake-choose-label fake-checkbox" ng-bind-html="breakpoint.name"></label>\n                        </li>\n                    </ul>\n                </section>\n            </section>\n\n            <div class="step step-4" ng-class="{\'active\': isActiveStep(3)}" ng-form="forms.step3">\n                <div class="invite-link-container no-button" ng-class="{\'working\': !getStep(3).inviteURL}">\n                    <input type="text" readonly id="invite-link" ng-click="onClickInput($event)" ng-model="getStep(3).inviteURL" class="url-input">\n                    <button ngclipboard data-clipboard-text={{getStep(3).inviteURL}} ngclipboard-success="onCopySuccess()" class="copy-link icon-font-link only-icon-font btn-bordered small-size light-gray-style">{{::\'LS_COPY\' | translate}}</button>\n                    <span class="information" ng-class="{\'visible\': params.isCopied}">{{::\'LS_LINK_HAS_BEEN_COPIED\' | translate}}</span>\n                </div>\n                <label for="invite-link">Invite by sending a link</label>\n            </div>\n        </section>\n\n        <section class="wizard-pagination">\n            <button class="btn-ghost blue prev"\n                    ng-if="params.activeStepIndex > 0"\n                    ng-click="onClickPrevStep()">\n                Back to: {{getStep(\'prev\').label}}\n            </button>\n\n            <button class="btn-solid blue next"\n                    ng-if="params.activeStepIndex < params.steps.length - 1"\n                    ng-disabled="getStepFormObject().$invalid"\n                    ng-click="onClickNextStep()">\n                <strong>Next:</strong> {{getStep(\'next\').label}}\n            </button>\n\n\t\t\t<button class="fake-link icon-general-plus add-task"\n\t\t\t   ng-if="params.activeStepIndex == 1"\n\t\t\t   ng-disabled="getStepFormObject().$invalid"\n\t\t\t   ng-click="onClickAddNewTask(params.steps[1].newTask)">\n                Add another task\n            </button>\n        </section>\n\n    </article>\n\n    <article class="final-step" ng-if="isActiveStep(4)">\n        <h2>Usability testing is ready to be launched!</h2>\n        <button ng-class="{\'waiting\': params.loading}"\n                class="btn-solid big btn-inline"\n                ng-click="onClickSessionStart()">Start session!</button>\n    </article>\n</section>\n'),$templateCache.put("/scripts/modules/documentation/directives/annotationsList/annotationsList.html",'<div class="annotations-list">\n  <div class="annotation"\n       ng-repeat="annotation in vm.data track by $index"\n       ng-attr-id="{{vm.isPinnedToElement(annotation) ? vm.idPrefix + annotation.idElement : \'\'}}"\n       ng-class="{\n          \'active\': vm.isSelected(annotation),\n          \'hovered\': vm.isHovered(annotation),\n          \'no-pin-hover\': vm.hasBlockedHover(annotation),\n          \'pinned\': vm.isPinnedToElement(annotation)\n          }"\n       ng-mouseenter="vm.onMouseEnter($event, annotation)"\n       ng-mouseleave="vm.onMouseLeave($event, annotation)">\n    <span class="annotation-pin pinned"\n          ng-if="vm.isPinnedToElement(annotation)"\n          ng-click="vm.selectAnnotation($event, annotation)">{{annotation.idPin}}</span>\n    <div class="custom-text-field" ng-bind-html="annotation.content | parseUrl"></div>\n  </div>\n</div>\n\n'),$templateCache.put("/scripts/modules/specification/directives/blurData/blurData.html",'<section class="canvas-size data-section">\n  <h3 class="section-title">\n    <span class="ellipsis-helper">Blur</span>\n  </h3>\n  <div class="data">\n    <div class="double-ul-column">\n      <ul class="canvas-data-list">\n        <li>\n          <h5 class="g-heading-5 narrow">Radius</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.blur | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.blur | toFloat | unit:true}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/borderData/borderData.html",'<section ng-if="vm.shouldShowBorder || vm.shouldShowBorderRadius && vm.isBorderRadiusSet"\n         class="data-section border-data">\n  <h3 class="section-title">Border &amp; Radius</h3>\n  <div class="data">\n    <div ng-if="vm.shouldShowBorder" class="border-info">\n      <h5 class="g-heading-5 light">Border <span>{{::vm.border.borderStyle}}</span></h5>\n      <ul class="g-unordered-list visual-info-list weight">\n        <li\n          class="value top code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderTopWidth || vm.border.borderTopWidth === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderTopWidth || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderTopWidth || 0) | unit}}</span>\n        </li>\n        <li\n          class="value right code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderRightWidth || vm.border.borderRightWidth === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderRightWidth || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderRightWidth || 0) | unit}}</span>\n        </li>\n        <li\n          class="value bottom code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderBottomWidth || vm.border.borderBottomWidth === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderBottomWidth || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderBottomWidth || 0) | unit}}</span>\n        </li>\n        <li\n          class="value left code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderLeftWidth || vm.border.borderLeftWidth === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderLeftWidth || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderLeftWidth || 0) | unit}}</span>\n        </li>\n      </ul>\n    </div>\n\n    <div ng-if="vm.shouldShowBorderRadius" class="border-info">\n      <h5 class="g-heading-5 light">Radius</h5>\n      <ul class="g-unordered-list visual-info-list radius">\n        <li\n          class="value top-left code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderTopLeftRadius || vm.border.borderTopLeftRadius === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderTopLeftRadius || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderTopLeftRadius || 0) | unit}}</span>\n        </li>\n        <li\n          class="value top-right code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderTopRightRadius || vm.border.borderTopRightRadius === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderTopRightRadius || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderTopRightRadius || 0) | unit}}</span>\n        </li>\n        <li\n          class="value bottom-right code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderBottomRightRadius || vm.border.borderBottomRightRadius === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderBottomRightRadius || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderBottomRightRadius || 0) | unit}}</span>\n        </li>\n        <li\n          class="value bottom-left code allow-copying"\n          ng-class="{\'default-value\': !vm.border.borderBottomLeftRadius || vm.border.borderBottomLeftRadius === 0 }"\n          clipboard-copy\n          data-clipboard-text="{{(vm.border.borderBottomLeftRadius || 0) | unit}}">\n          <span class="copy-helper" title="Click to copy">{{(vm.border.borderBottomLeftRadius || 0) | unit}}</span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/canvasData/canvasData.html",'<section class="canvas-size data-section">\n  <h3 class="section-title">\n    <span class="ellipsis-helper">General</span>\n    <unit-switcher class="unit-select"></unit-switcher>\n  </h3>\n  <div class="data">\n    <div class="double-ul-column">\n      <ul class="canvas-data-list">\n        <li>\n          <h5 class="g-heading-5 narrow">Width</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.width | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.width | unit}}</span>\n          </p>\n        </li>\n        <li>\n          <h5 class="g-heading-5 narrow">Height</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.height | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.height | unit}}</span>\n          </p>\n        </li>\n      </ul>\n      <ul class="data-position" ng-if="vm.type !== vm.SPEC_OBJECT_TYPES.CANVAS">\n        <li>\n          <h5 class="g-heading-5 narrow">X</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.left | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.left | unit}}</span>\n          </p>\n        </li>\n        <li>\n          <h5 class="g-heading-5 narrow">Y</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.top | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.top | unit}}</span>\n          </p>\n        </li>\n        <li ng-if="vm.fixed" class="double-size">\n          <h5 class="g-heading-5 narrow">Position</h5>\n          <p>Fixed</p>\n        </li>\n      </ul>\n      <ul ng-if="vm.type === vm.SPEC_OBJECT_TYPES.CANVAS">\n        <li>\n          <h5 class="g-heading-5 narrow">Canvas</h5>\n          <p title="{{vm.name || vm.getSizeName(vm.width, vm.height)}}">\n            {{vm.name || vm.getSizeName(vm.width, vm.height)}}\n          </p>\n        </li>\n      </ul>\n    </div>\n    <div ng-if="vm.shouldDisplayOpacity()" class="double-ul-column">\n      <ul class="canvas-data-list">\n        <li ng-if="vm.angle !== 0">\n          <h5 class="g-heading-5 narrow">Angle</h5>\n          <p class="code angle allow-copying" clipboard-copy data-clipboard-text="{{vm.angle}}deg">\n            <span class="copy-helper" title="Click to copy">\n              {{vm.angle}}\n              <small class="degree-sign">O</small>\n            </span>\n          </p>\n        </li>\n        <li>\n          <h5 class="g-heading-5 narrow">Opacity</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.opacity}}%">\n            <span class="copy-helper" title="Click to copy">{{vm.opacity}}%</span>\n          </p>\n        </li>\n        <li ng-if="vm.shouldDisplayBlendingMode()">\n          <h5 class="g-heading-5 narrow">Blending</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.mixBlendMode}}">\n            <span class="copy-helper" title="Click to copy">{{vm.mixBlendMode}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n    <form class="options guides" ng-if="vm.areGuidesAvailable()">\n      <fieldset>\n        <input ng-model="vm.areGuidesVisible" ng-change="vm.setGuides(vm.areGuidesVisible)" id="show-guides" class="state-helper" type="checkbox" ng-checked="vm.areGuidesVisible" />\n        <label for="show-guides" class="fake-choose-label fake-checkbox">Show guides</label>\n      </fieldset>\n    </form>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/codeExport/codeExport.html",'<section class="data-section meta-data">\n  <h3 class="section-title">\n    Export\n  </h3>\n  <div class="export-code-container">\n    <a title="Preview a component in the online development environment, StackBlitz." ng-href="#" ng-click="vm.onClick($event)" class=" btn-icon full-width ds-icon--font__stackblitz ghost-gray-style large" href="#">\n      Open code\n      <span class="new-badge">NEW</span>\n    </a>\n    <a title="Download React component configuration with linked dependencies and available functions." ng-href="#" ng-click="vm.downloadProject($event)" class=" btn-icon full-width ds-icon--font__files-download ghost-gray-style large" href="#">\n      Download code\n    </a>\n    <a ng-click="vm.handleCopyAllToClipboard($event)" title="Copy all available code to clipboard." ng-href="#" clipboard-copy data-clipboard-text="{{vm.copyValue}}" class=" btn-icon full-width ds-icon--font__action-duplicate ghost-gray-style large" href="#">\n      Copy code to clipboard\n    </a>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/colorsList/colorsList.html",'<section class="color-data data-section" ng-if="vm.colors.length || vm.gradients.length">\n  <h3 class="section-title">\n    Colors\n    <cloud trigger-type="click" offset="vm.offsetColorType" class="outline-info color-type-select">\n      <span data-trigger class="cloud-trigger icon-general-chevron">{{vm.isHexMode() ? \'Hex\' : \'Rgba\'}}</span>\n      <ul data-cloud id="color-type-cloud" class="cloud options-cloud">\n        <li><a ng-click="vm.setMode($event, vm.MODES.HEX)" href="#hex" ng-class="{selected: vm.isHexMode()}">Hex</a></li>\n        <li><a ng-click="vm.setMode($event, vm.MODES.RGBA)" href="#rgba" ng-class="{selected: vm.isRgbaMode()}">Rgba</a></li>\n      </ul>\n    </cloud>\n    <cloud trigger-type="click"\n           auto-fit="true"\n           default-position="bottomLeft"\n           offset="vm.offsetColorType"\n           class="outline-info color-system-select"\n           ng-if="vm.designSystems.length">\n      <span data-trigger class="cloud-trigger icon-general-chevron">\n        {{vm.selectedDesignSystem ? vm.selectedDesignSystem.name :  vm.noMatchCopy}}\n      </span>\n      <div data-cloud id="color-system-cloud" class="cloud options-cloud">\n        <ul class="options-list scroll-ready">\n          <li>\n            <a ng-click="vm.setDesignSystem($event, null)" ng-class="{selected: !vm.selectedDesignSystem}">\n              {{vm.noMatchCopy}}\n            </a>\n          </li>\n          <li ng-repeat="system in vm.designSystems" ng-class="{\'separator\': $first}">\n            <a ng-click="vm.setDesignSystem($event, system)" ng-class="{selected: vm.isSelectedDesignSystem(system)}">\n              {{system.name}}\n            </a>\n          </li>\n        </ul>\n      </div>\n    </cloud>\n  </h3>\n\n  <div class="data">\n    \x3c!-- Canvas and group colors --\x3e\n    <ul ng-if="!vm.isElement()" class="g-unordered-list colors-list">\n      <li clipboard-copy data-clipboard-text="{{color.token ? color.token.name : (vm.isHexMode() ? color.hex : color.rgba)}}" skip-copy-info="true" ng-repeat="color in vm.sortedColors" title="Click to copy">\n          <figure ng-if="!color.token && vm.isHexMode()" ng-class="::{\'bright-color\': vm.isBright(color.rgba)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::color.hex}}</figure>\n          <figure ng-if="!color.token && vm.isRgbaMode()" ng-class="::{\'bright-color\': vm.isBright(color.rgba)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::color.rgba}}</figure>\n          <aside ng-if="!color.token" class="details">\n            <h5 ng-if="vm.isHexMode()" class="g-heading-5 code" title="{{color.hex}}">\n              {{vm.name(color)}}\n              <span class="alpha" ng-if="color.alpha < 1">{{::color.alpha * 100|number:0}}%</span>\n            </h5>\n            <h5 ng-if="vm.isRgbaMode()" class="g-heading-5 code" title="{{color.rgba}}">{{vm.name(color)}}</h5>\n          </aside>\n        <token ng-if="color.token" color="color"  mode="vm.selectedMode" skip-copy-info="true"></token>\n      </li>\n\n\n      <li class="color-element gradient" ng-repeat="gradient in vm.gradients">\n        <gradient gradient="gradient" mode="vm.selectedMode" skip-copy-info="true"></gradient>\n      </li>\n\n    </ul>\n\n    \x3c!-- Element colors --\x3e\n    <ul ng-if="vm.isElement()" class="colors-list element">\n      <li class="color-element" ng-repeat="color in vm.elementColors" title="Click to copy">\n        <div ng-if="color.hex && !color.token" clipboard-copy success-container-class="color-element" data-clipboard-text="{{vm.getClipboardText(color)}}">\n          <h5 class="g-heading-5 color-label light">{{::color.type}}</h5>\n          <figure ng-if="vm.isHexMode()" ng-class="::{\'bright-color\': vm.isBright(color.hex)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::color.hex}}</figure>\n          <figure ng-if="vm.isRgbaMode()" ng-class="::{\'bright-color\': vm.isBright(color.hex)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::color.rgba}}</figure>\n\n          <aside class="details">\n            <h5 ng-if="vm.isHexMode()" class="g-heading-5 code" title="{{color.hex}}">\n              {{vm.name(color)}}\n              <span class="alpha" ng-if="color.alpha < 1">{{::color.alpha * 100|number:0}}%</span>\n            </h5>\n            <h5 ng-if="vm.isRgbaMode()" class="g-heading-5 code" title="{{color.rgba}}">{{vm.name(color)}}</h5>\n          </aside>\n        </div>\n        <div ng-if="color.token">\n          <h5 class="g-heading-5 color-label light">{{::color.type}}</h5>\n          <token ng-if="color.token" color="color"  mode="vm.selectedMode"></token>\n        </div>\n        <div ng-if="color.gradient">\n          <h5 class="g-heading-5 color-label light">{{::color.type}}</h5>\n          <gradient gradient="color.gradient" mode="vm.selectedMode"></gradient>\n        </div>\n      </li>\n    </ul>\n\n    \x3c!-- Canvas colors --\x3e\n    <div ng-if="!vm.isElement() && !vm.isGroup()" class="g-unordered-list canvas-background">\n      <h5 class="g-heading-5 light">Canvas background</h5>\n      <ul class="colors-list">\n        <li ng-if="vm.canvasBg.gradient" class="color-element gradient" title="Click to copy">\n          <gradient gradient="vm.canvasBg.gradient" mode="vm.selectedMode" skip-copy-info="true"></gradient>\n        </li>\n        <li ng-if="vm.canvasBg.token" class="color-element gradient" title="Click to copy">\n          <token color="vm.canvasBg" mode="vm.selectedMode" skip-copy-info="true"></token>\n        </li>\n        <li ng-if="!vm.canvasBg.token" clipboard-copy data-clipboard-text="{{vm.isHexMode() ? vm.canvasBg.hex : vm.canvasBg.rgba}}" skip-copy-info="true" ng-if="vm.canvasBg.hex" title="Click to copy">\n          <figure ng-if="vm.isHexMode()" ng-class="{\'bright-color\': vm.isBright(vm.canvasBg.hex)}" class="color-preview icon-general-copy" ng-style="{background: vm.canvasBg.hex}">{{vm.canvasBg.hex}}</figure>\n          <figure ng-if="vm.isRgbaMode()" ng-class="{\'bright-color\': vm.isBright(vm.canvasBg.hex)}" class="color-preview icon-general-copy" ng-style="{background: vm.canvasBg.hex}">{{vm.getRgbaValues(vm.canvasBg.rgba)}}</figure>\n          <aside class="details">\n            <h5 ng-if="vm.isHexMode()" class="g-heading-5 code" title="{{vm.canvasBg.hex}}">\n              {{vm.name(vm.canvasBg)}}\n              <span class="alpha" ng-if="color.alpha < 1">{{vm.canvasBg.alpha * 100|number:0}}%</span>\n            </h5>\n            <h5 ng-if="vm.isRgbaMode()" class="g-heading-5 code" title="{{vm.canvasBg.rgba}}">\n              {{vm.name(vm.canvasBg)}}\n            </h5>\n          </aside>\n        </li>\n      </ul>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/componentMetadata/componentMetadata.html",'<section class="merge-component-info-section">\n  <h2 title="{{vm.metadata.name}}">\n    <span class="only-icon-font ds-icon--font__elements-code-component"></span>\n    <span>{{vm.metadata.name}}</span>\n  </h2>\n  <article ng-if="vm.metadata.componentDescription">{{vm.metadata.componentDescription}}</article>\n  <footer>\n    <span class="library-path">\n       <span ng-if="vm.libraryName">\n        <span class="ds-icon--font__libraries-design-libraries only-icon-font"></span>\n        <span title="{{vm.libraryName}}" class="library-name">\n          {{vm.libraryName}}\n        </span>\n      </span>\n      <span ng-if="vm.repositoryPointerName" class="separator">/</span>\n      <span ng-if="vm.repositoryPointerName">\n        <span class="ds-icon--font__feature-version-control only-icon-font"></span>\n        <span title="{{vm.repositoryPointerName}}" class="branch-name">\n          {{vm.repositoryPointerName}}\n        </span>\n      </span>\n    </span>\n    <a\n      ng-if="vm.metadata.componentDocUrl"\n      class="documentation-link only-icon-font ds-icon--font__feature-uxpin-docs"\n      href="{{vm.metadata.componentDocUrl}}"\n      target="_blank"\n      rel="noopener noreferrer"\n    >\n      Component Doc\n    </a>\n  </footer>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/contentData/contentData.html",'<section ng-if="vm.valueTrimmed" class="data-section meta-data">\n  <h3 class="section-title">Content</h3>\n  <span class="copy-link-container">\n    <a href="#copy"\n       class="copy-link underline-link icon-general-copy"\n       success-container-class="data-section"\n       clipboard-copy data-clipboard-text="{{vm.valueTrimmed}}"\n       ng-click="vm.onClick($event)">Copy</a>\n  </span>\n  <textarea class="content-readonly g-textarea"\n            ng-class="{\'text-list\': vm.isTextList}"\n            ng-model="vm.valueTrimmed"\n            rows="1"\n            auto-height\n            readonly></textarea>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/cssCode/cssCode.html",'<section clipboard-copy child-selector=".CodeMirror-line" class="data-section meta-data">\n  <h3 class="section-title">CSS Code</h3>\n  <span class="copy-link-container">\n    <a href="#copy" clipboard-copy data-clipboard-text="{{vm.options.value}}" success-container-class="data-section" class="copy-link underline-link icon-general-copy" ng-click="vm.onClick($event)">Copy</a>\n  </span>\n  <code-editor options="vm.options"></code-editor>\n</section>'),$templateCache.put("/scripts/modules/specification/directives/dependencies/dependencies.html",'<section clipboard-copy child-selector=".CodeMirror-line" class="data-section meta-data">\n  <h3 ng-click="vm.toggleExpand($event)" class="section-title expandable" class="section-title">\n  <button ng-class="{ \'section-expander\': true, \'only-icon-font\': true, \'ds-icon--font__expander-expanded\': vm.isExpanded, \'ds-icon--font__expander-collapsed\': !vm.isExpanded }" type="button">Expand group elements</button>\n  Dependencies\n  </h3>\n  <span class="copy-link-container">\n    <a href="#copy" clipboard-copy data-clipboard-text="{{vm.options.value}}" success-container-class="data-section"\n      class="copy-link underline-link icon-general-copy" ng-click="vm.onClick($event)">Copy</a>\n  </span>\n  <code-editor ng-if="vm.isExpanded" options="vm.options" mode="text/jsx"></code-editor>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/designSystem/designSystem.html",'<section class="data-section design-system-data">\n  <h3 class="section-title">Design System</h3>\n  <div class="data">\n    <header class="header">\n      <h5 class="g-heading-5 sectiion-title">\n        <a ng-if="vm.designSystemURL" href="{{vm.designSystemURL}}" target="_blank">{{vm.documentation.libraryName}}</a>\n        <span ng-if="!vm.designSystemURL" >{{vm.documentation.libraryName}}</span>\n      </h5>\n      <ul class="breadcrumbs-list g-unordered-list">\n        <li>Component</li>\n        <li ng-if="vm.documentation.categoryName.length">{{vm.documentation.categoryName}}</li>\n        <li>{{vm.documentation.itemName}}</li>\n      </ul>\n    </header>\n    <documentation-text content="{{vm.documentation.content}}"></documentation-text>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/functions/functions.html",'<section clipboard-copy child-selector=".CodeMirror-line" class="data-section meta-data">\n  <h3 ng-click="vm.toggleExpand($event)"  class="section-title expandable">\n    <button ng-class="{ \'section-expander\': true, \'only-icon-font\': true, \'ds-icon--font__expander-expanded\': vm.isExpanded, \'ds-icon--font__expander-collapsed\': !vm.isExpanded }" type="button">Expand group elements</button>\n    Functions\n  </h3>\n  <span class="copy-link-container">\n    <a href="#copy" clipboard-copy data-clipboard-text="{{vm.options.value}}" success-container-class="data-section"\n      class="copy-link underline-link icon-general-copy" ng-click="vm.onClick($event)">Copy</a>\n  </span>\n  <code-editor ng-if="vm.isExpanded" options="vm.options" mode="text/jsx"></code-editor>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/fontsList/fontsList.html",'<section class="typography-data data-section" ng-hide="!vm.fonts.length">\n  <h3 class="section-title">Typography</h3>\n  <div class="data">\n    <ul ng-if="!vm.isElement()" class="g-unordered-list fonts-list">\n      <li ng-repeat="font in vm.sortedFonts">\n        <h5 class="g-heading-5 name" ng-style="{\'font-family\': vm.getFontFamily(font, font.variants)}">{{font.fontName}}</h5>\n        <ul class="font-weights-list g-unordered-list">\n          <li ng-repeat="variant in font.variants"\n              ng-style="vm.getFontStyles(font, variant)">{{variant.name}}</li>\n        </ul>\n        <ul class="font-sizes-list g-unordered-list">\n          <li\n            clipboard-copy\n            data-clipboard-text="{{size}}"\n            ng-repeat="size in font.sizes"\n            class="outline code allow-copying"\n            title="Click to copy">\n            {{size}}\n          </li>\n        </ul>\n      </li>\n    </ul>\n\n    <ul ng-if="vm.isElement()" class="g-unordered-list fonts-list">\n      <li ng-repeat="font in vm.elementFonts">\n        <h5 class="g-heading-5 name" ng-style="{\'font-family\': vm.getFontFamily(font, font.variant.shorthand)}">\n          <span class="font-name">{{font.fontName}}</span>\n          <span ng-if="font.fontData.type === vm.FONT_TYPES.TYPEKIT"\n                class="font-type ds-icon--font__font-adobe only-icon-font" title="Typekit Font">Typekit</span>\n          <span ng-if="font.fontData.type === vm.FONT_TYPES.GOOGLE || vm.isGoogleFont(font.fontData)" class="font-type icon-general-google only-icon-font" title="Google Font">Google</span>\n          <span ng-if="font.fontData.type === vm.FONT_TYPES.CUSTOM"\n                class="font-type ds-icon--font__font-uploaded only-icon-font" title="Uploaded Font">Uploaded</span>\n        </h5>\n        <p class="weight" ng-style="vm.getFontStyles(font, font.variant)">{{font.variant.name | capitalizeFirstLetters}}</p>\n        <div class="double-ul-column typo-data">\n          <ul class="g-unordered-list">\n            <li ng-if="font.fontSize">\n              <h5 class="g-heading-5">Text size</h5>\n              <p\n                class="code allow-copying"\n                clipboard-copy\n                data-clipboard-text="{{font.fontSize | toFloat | unit:true}}">\n                <span class="copy-helper" title="Click to copy">{{font.fontSize | toFloat | unit:true}}</span>\n              </p>\n            </li>\n            <li ng-if="font.textAlign">\n              <h5 class="g-heading-5">Alignment</h5>\n              <p>{{font.textAlign | capitalizeFirstLetters}}</p>\n            </li>\n            <li ng-if="vm.getTransform(font)" class="text-transform-control">\n              <h5 class="g-heading-5">Transform</h5>\n              <p>{{vm.getTransform(font)}}</p>\n            </li>\n          </ul>\n          <ul class="g-unordered-list">\n            <li ng-if="font.letterSpacing">\n              <h5 class="g-heading-5" title="Spacing between characters">Tracking</h5>\n              <p\n                class="code allow-copying"\n                clipboard-copy\n                data-clipboard-text="{{font.letterSpacing | toFloat | unit:true}}">\n                <span class="copy-helper" title="Click to copy">{{font.letterSpacing | toFloat:2 | unit:true}}</span>\n              </p>\n            </li>\n            <li ng-if="font.lineHeight">\n              <h5 class="g-heading-5" title="Spacing between lines of type">Leading</h5>\n              <p\n                      class="code allow-copying"\n                      clipboard-copy\n                      data-clipboard-text="{{font.lineHeight | toFloat | unit:true}}">\n                <span class="copy-helper" title="Click to copy">{{font.lineHeight | toFloat:2 | unit:true}}</span>\n              </p>\n            </li>\n            <li ng-if="font.paragraph">\n              <h5 class="g-heading-5" title="Spacing between lines of type">Paragraph</h5>\n              <p\n                      class="code allow-copying"\n                      clipboard-copy\n                      data-clipboard-text="{{font.paragraph | toFloat | unit:true}}">\n                <span class="copy-helper">{{font.paragraph | toFloat | unit:true}}</span>\n              </p>\n            </li>\n          </ul>\n        </div>\n        <div ng-if="vm.areTextStylesSet(font)" class="double-ul-column typo-data">\n          <ul class="g-unordered-list">\n            <li>\n              <h5 class="g-heading-5">Text styles</h5>\n              <ul class="text-styles-list">\n                <li ng-if="vm.isBold(font)">\n                  <figure class="text-style icon-general-style-bold only-icon-font" title="Faux Bold">Bold</figure>\n                </li>\n                <li ng-if="vm.isItalic(font)">\n                  <figure class="text-style icon-general-style-italic only-icon-font" title="Faux Italic">Italic</figure>\n                </li>\n                <li ng-if="vm.hasUnderlineDecoration(font)">\n                  <figure class="text-style icon-general-style-underline only-icon-font" title="Underline">Underline</figure>\n                </li>\n                <li ng-if="vm.hasLineThroughDecoration(font)">\n                  <figure class="text-style icon-general-style-strike only-icon-font" title="Strikethrough">Strikethrough</figure>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/gradient/gradient.html",'<div clipboard-copy success-container-class="color-element" skip-copy-info="vm.skipCopyInfo" data-clipboard-text={{vm.gradientCssStyle}} class="gradient-container">\n  <figure class="color-preview icon-general-copy" ng-style="{background: vm.gradientCssStyle}" title="Click to copy">{{::vm.gradientCssStyle}}</figure>\n  <aside class="details gradient">\n    <cloud trigger-type="click" defaultPosition="bottom" offset="vm.offsetColorType">\n      <h5 data-trigger class="g-heading-5 code icon-general-chevron">{{vm.gradientName(vm.gradient)}}</h5>\n      <div data-cloud class="cloud colors-list options-list" id="gradient-details-cloud">\n        <ul class="gradient-info">\n          <li>\n            <h5 class="g-heading-5">Type: <span>{{::vm.gradientData.type}}</span></h5>\n          </li>\n          <li ng-if="vm.isAngleValid(vm.gradientData.angle)">\n            <h5 class="g-heading-5">Angle: <span>{{::vm.gradientData.angle}}<small class="degree-sign">O</small></span></h5>\n          </li>\n        </ul>\n        <div class="separator"></div>\n        <ul class="g-unordered-list colors-list options-list">\n          <li clipboard-copy data-clipboard-text="{{vm.isHexMode() ? color.hex : color.rgba}}" skip-copy-info="true" ng-repeat="color in vm.gradientData.colors" title="Click to copy">\n            <figure ng-if="vm.isHexMode()" ng-class="::{\'bright-color\': vm.isBright(color.hex)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::color.hex}}</figure>\n            <figure ng-if="vm.isRgbaMode()" ng-class="::{\'bright-color\': vm.isBright(color.hex)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::vm.getRgbaValues(color.rgba)}}</figure>\n            <aside class="details">\n              <h5 ng-if="vm.isHexMode()" class="g-heading-5 code" title="{{color.hex}}">{{vm.colorName(color)}} {{::color.alpha * 100 |number:0}}%</h5>\n              <h5 ng-if="vm.isRgbaMode()" class="g-heading-5 code" title="{{color.rgba}}">{{vm.colorName(color)}}</h5>\n            </aside>\n          </li>\n        </ul>\n      </div>\n    </cloud>\n  </aside>\n</div>\n'),$templateCache.put("/scripts/modules/specification/directives/gridData/gridData.html",'<section class="grid-guides data-section">\n  <h3 class="section-title">{{vm.sectionTitle}}</h3>\n  <div class="data">\n    <form class="options">\n      <fieldset>\n        <input ng-model="vm.isGridVisible" ng-change="vm.setGridVisibility(vm.isGridVisible)" id="show-grid-{{vm.gridType}}" class="state-helper" type="checkbox" ng-checked="vm.isGridVisible" />\n        <label  for="show-grid-{{vm.gridType}}" class="fake-choose-label fake-checkbox">Show grid</label>\n      </fieldset>\n    </form>\n\n    <div class="double-ul-column grid-data" ng-if="vm.gridType === \'layout\'">\n      <ul class="g-unordered-list">\n        <li>\n          <h5 class="g-heading-5">Columns</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.grid.columns}}">\n            <span class="copy-helper" title="Click to copy">{{vm.grid.columns}}</span>\n          </p>\n        </li>\n        <li>\n          <h5 class="g-heading-5">Column width</h5>\n          <p class="code allow-copying"\n             clipboard-copy\n             data-clipboard-text="{{vm.getColumnWidth(vm.grid.columnWidth) | unit}}">\n            <span class="copy-helper" title="Click to copy">\n              {{vm.getColumnWidth(vm.grid.columnWidth) | unit}}\n            </span>\n          </p>\n        </li>\n      </ul>\n      <ul>\n        <li>\n          <h5 class="g-heading-5">Gutter</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.grid.gutter | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.grid.gutter | unit}}</span>\n          </p>\n        </li>\n        <li>\n          <h5 class="g-heading-5">Margin</h5>\n          <p class="code allow-copying"\n             ng-class="{\'default-value\': vm.shouldValueBeAuto(vm.grid.margin)}"\n             clipboard-copy\n             data-clipboard-text="{{vm.getGridValue(vm.grid.margin) | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.getGridValue(vm.grid.margin) | unit}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n\n    <div class="double-ul-column grid-data" ng-if="vm.gridType === \'baseline\'">\n      <ul class="g-unordered-list">\n        <li>\n          <h5 class="g-heading-5">Rows</h5>\n          <p class="code allow-copying"\n             ng-class="{\'default-value\': vm.shouldValueBeAuto(vm.grid.rows)}"\n             clipboard-copy\n             data-clipboard-text="{{vm.getGridValue(vm.grid.rows)}}">\n            <span class="copy-helper" title="Click to copy">{{vm.getGridValue(vm.grid.rows)}}</span>\n          </p>\n        </li>\n        <li>\n          <h5 class="g-heading-5">Row height</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.grid.rowHeight | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.grid.rowHeight | unit}}</span>\n          </p>\n        </li>\n      </ul>\n      <ul>\n        <li>\n          <h5 class="g-heading-5">Gutter</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.grid.gutter | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.grid.gutter | unit}}</span>\n          </p>\n        </li>\n        <li>\n          <h5 class="g-heading-5">Margin</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.grid.margin | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.grid.margin | unit}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n\n    <div class="double-ul-column grid-data" ng-if="vm.gridType === \'square\'">\n      <ul class="g-unordered-list">\n        <li>\n          <h5 class="g-heading-5">Size</h5>\n          <p class="code allow-copying" clipboard-copy data-clipboard-text="{{vm.grid.size | unit}}">\n            <span class="copy-helper" title="Click to copy">{{vm.grid.size | unit}}</span>\n          </p>\n        </li>\n      </ul>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/headerCanvas/headerCanvas.html",'<header class="header-panel">\n  <div class="ellipsis-container">\n    <h2 class="g-heading-2">Summary: <strong title="{{vm.currentPageName}}">{{vm.currentPageName}}</strong></h2>\n  </div>\n</header>\n'),$templateCache.put("/scripts/modules/specification/directives/headerDesignSystem/headerDesignSystem.html",'<div class="design-system-parent-info notification-overlay">\n  <span>\n    See <a class="notification-link" ng-click="vm.selectElement($event, vm.element)">{{ vm.documentation.itemName }}</a> from {{ vm.documentation.libraryName }}\n  </span>\n</div>\n'),$templateCache.put("/scripts/modules/specification/directives/headerElement/headerElement.html",'<header class="header-panel">\n  <div class="ellipsis-container with-icon" ng-if="!vm.hasParent">\n    <h2 class="g-heading-2"><strong ng-class="vm.class" title="{{vm.name}}">{{vm.name}}</strong></h2>\n  </div>\n  <div class="ellipsis-container with-icon with-parent" ng-if="vm.hasParent">\n    <figure ng-class="vm.elementParentTypeClass" data-show-node="tooltip">\n      <span class="tooltip">{{vm.elementParentType}}</span>\n    </figure>\n    <h1 class="g-heading-1">\n      <a ng-click="vm.selectElement($event, vm.elementParent)" href="#" class="underline-link">\n        {{vm.elementParent.name}}\n      </a>\n    </h1>\n    <h2 class="g-heading-2 icon-general-caret">\n      <strong ng-class="vm.class" title="{{vm.name}}">{{vm.name}}</strong>\n    </h2>\n  </div>\n  <state-switcher\n    is-multistate="vm.isMultistate"\n    selected-state="vm.selectedState"\n    change-state="vm.changeState"\n    states="vm.states">\n  </state-switcher>\n</header>\n'),$templateCache.put("/scripts/modules/specification/directives/headerGroup/headerGroup.html",'<header class="header-panel">\n  <div class="ellipsis-container with-icon" ng-if="!vm.hasParent">\n    <figure ng-class="vm.class" data-show-node="tooltip">\n      <span class="tooltip">{{vm.type}}</span>\n    </figure>\n    <h2>\n      <strong title="{{vm.name}}">\n        {{vm.name}}\n      </strong>\n    </h2>\n  </div>\n  <div class="ellipsis-container with-icon with-parent" ng-if="vm.hasParent">\n    <figure ng-class="vm.elementParentTypeClass" data-show-node="tooltip">\n      <span class="tooltip">{{vm.elementParentType}}</span>\n    </figure>\n    <h1>\n      <a ng-click="vm.selectElement($event, vm.elementParent)" href="#" class="underline-link">\n        {{vm.elementParent.name}}\n      </a>\n    </h1>\n    <h2 class="icon-general-caret">\n      <strong ng-class="vm.class" title="{{vm.name}}">{{vm.name}}</strong>\n    </h2>\n  </div>\n  <state-switcher\n    is-multistate="vm.isMultistate"\n    selected-state="vm.selectedState"\n    change-state="vm.changeState"\n    states="vm.states">\n  </state-switcher>\n</header>\n'),$templateCache.put("/scripts/modules/specification/directives/htmlCode/htmlCode.html",'<section clipboard-copy child-selector=".CodeMirror-line" class="data-section meta-data">\n  <h3 ng-click="vm.toggleExpand($event)" class="section-title expandable" class="section-title">\n    <button ng-class="{ \'section-expander\': true, \'only-icon-font\': true, \'ds-icon--font__expander-expanded\': vm.isExpanded, \'ds-icon--font__expander-collapsed\': !vm.isExpanded }" type="button">Expand group elements</button>\n    {{vm.header || "HTML Code"}}\n  </h3>\n  <span class="copy-link-container">\n    <a href="#copy" clipboard-copy data-clipboard-text="{{vm.options.value}}" success-container-class="data-section"\n      class="copy-link underline-link icon-general-copy" ng-click="vm.onClick($event)">Copy</a>\n  </span>\n  <code-editor ng-if="vm.isExpanded" options="vm.options" mode="\'jsx\'"></code-editor>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/imagesList/assetBackground.html",'<section ng-if="vm.position" class="asset-background">\n  <figure class="position-preview {{vm.positionClass}}">\n    <span class="square-helper"></span>\n  </figure>\n  <article class="details double-ul-column">\n    <ul class="g-unordered-list">\n      <li>\n        <h5 class="g-heading-5">Position</h5>\n        <p>{{vm.position}}</p>\n      </li>\n      <li ng-if="vm.behaviour">\n        <h5 class="g-heading-5">Behaviour</h5>\n        <p>{{vm.behaviour}}</p>\n      </li>\n    </ul>\n  </article>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/imagesList/imageMeta.html",'<p class="meta" ng-if="vm.isLoaded">{{vm.imageMeta.width}}  {{vm.imageMeta.height}}<span ng-if="!vm.withoutSize">, {{vm.imageMeta.size}}</span></p>\n'),$templateCache.put("/scripts/modules/specification/directives/imagesList/imagesList.html",'<section class="data-section asset-data" ng-if="vm.imagesList.length">\n  <h3 class="section-title">Image asset</h3>\n\n  <div ng-repeat="image in vm.imagesList" class="asset">\n    <figure>\n      <img ng-src="{{image.preview || image.path}}" />\n    </figure>\n    <section class="details">\n      <article class="image-info">\n        <p class="filename">\n          <span class="ellipsis-helper" title="{{image.file.name}}.{{image.file.extension}}">{{image.file.name}}</span>\n          <span class="extension">.{{image.file.extension}}</span>\n        </p>\n        <image-meta image="image"></image-meta>\n      </article>\n      <aside class="aside-helper">\n        <a\n          ng-href="#"\n          ng-click="vm.downloadOriginal($event, image)"\n          class=" btn-icon ds-icon--font__files-download ghost-gray-style small">\n          Download\n        </a>\n        <cloud trigger-type="click" defaultPosition="bottom" offset="vm.offsetColorType">\n          <h5 data-trigger class="ds-icon--font__dots-horizontal only-icon-font">Choose format</h5>\n          <ul data-cloud class="cloud export-list options-cloud" id="export-formats-cloud">\n            <li>\n              <a class="list-item" ng-href="#" ng-click="vm.exportWeb($event, image)">\n                Web\n                <span class="included-sizes">1x, 2x</span>\n                <span class="cloud-badge">{{vm.exportType}}</span>\n              </a>\n            </li>\n            <li>\n              <a class="list-item" ng-href="#" ng-click="vm.exportIOS($event, image)">\n                iOS\n                <span class="included-sizes">1x, 2x, 3x</span>\n                <span class="cloud-badge">{{vm.exportType}}</span>\n              </a>\n            </li>\n            <li>\n              <a class="list-item" ng-href="#" ng-click="vm.exportAndroid($event, image)">\n                Android\n                <span class="included-sizes">1x, 1.5x, 2x, 3x, 4x</span>\n                <span class="cloud-badge">{{vm.exportType}}</span>\n              </a>\n            </li>\n          </ul>\n        </cloud>\n      </aside>\n    </section>\n    <asset-background background="vm.background"></asset-background>\n  </div>\n  <image-downloader\n    image="vm.currentImage"\n  ></image-downloader>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/inspector/inspector.html",'<div>\n  <div class="boxes-container"></div>\n  <div class="lines-container"></div>\n</div>\n'),$templateCache.put("/scripts/modules/specification/directives/interactions/interactions.html",'<div>\n  <section ng-if="vm.areInteractionsAvailable" class="data-section meta-data">\n    <h3 class="section-title">Interactions</h3>\n    <ul class="interactions-list">\n      <li class="">OnClick show #modal with animation</li>\n      <li class="">OnClick set state Button</li>\n    </ul>\n  </section>\n</div>\n'),$templateCache.put("/scripts/modules/specification/directives/jsxCode/jsxCode.html",'<section clipboard-copy child-selector=".CodeMirror-line" class="data-section meta-data">\n  <h3 ng-click="vm.toggleExpand($event)" class="section-title expandable" class="section-title">\n    <button ng-class="{ \'section-expander\': true, \'only-icon-font\': true, \'ds-icon--font__expander-expanded\': vm.isExpanded, \'ds-icon--font__expander-collapsed\': !vm.isExpanded }" type="button">Expand group elements</button>\n    JSX Code\n  </h3>\n  <span class="copy-link-container">\n    <a href="#copy" clipboard-copy data-clipboard-text="{{vm.options.value}}" success-container-class="data-section"\n      class="copy-link underline-link icon-general-copy" ng-click="vm.onClick($event)">Copy</a>\n  </span>\n  <code-editor ng-if="vm.isExpanded" options="vm.options" mode="\'jsx\'"></code-editor>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/metadata/metadata.html",'<div class="content">\n  <section ng-repeat="data in vm.metadata track by $index" class="data-section meta-data">\n    <h3 class="section-title">\n      <span class="ellipsis-helper" title="{{data.name}}">{{data.name}}</span>\n      <div ng-if="data.type === vm.TYPES.CODE && data.codeLang" class="outline-info">\n        <span>{{vm.findCodeOptionLabel(data.codeLang)}}</span>\n      </div>\n    </h3>\n    <p class="meta-text" ng-if="data.type === vm.TYPES.TEXT" ng-bind-html="data.value | linky:\'_blank\'"></p>\n    <p ng-if="data.type === vm.TYPES.LIST">{{vm.getSelectedOption(data.options, data.value)}}</p>\n    <span class="copy-link-container">\n      <a href="#copy" clipboard-copy data-clipboard-text="{{data.type === vm.TYPES.LIST ? vm.getSelectedOption(data.options, data.value) : data.value }}" success-container-class="data-section" class="copy-link underline-link icon-general-copy" ng-click="vm.onClick($event)">Copy</a>\n    </span>\n    <div clipboard-copy child-selector=".CodeMirror-line">\n      <code-editor ng-if="data.type === vm.TYPES.CODE" value="data.value" mode="data.codeLang"></code-editor>\n    </div>\n  </section>\n</div>\n'),$templateCache.put("/scripts/modules/specification/directives/shadowsList/shadowsList.html",'<section class="shadow-data data-section" ng-if="vm.shadows.length">\n  <h3 class="section-title">{{::vm.sectionLabel}}</h3>\n  <div class="data">\n    <ul class="shadows-list g-unordered-list">\n      <li ng-repeat="shadow in vm.shadows">\n        <div class="copy-helper" clipboard-copy data-clipboard-text="{{shadow.isHexMode() ? shadow.shadowColor.hex : shadow.shadowColor.rgba}}" skip-copy-info="true">\n          <figure class="color-preview icon-general-copy" ng-style="{\'background-color\': shadow.shadowColor.rgba}">\n            {{shadow.shadowColor.hex}}\n          </figure>\n          <h5 ng-if="vm.colorType === vm.COLOR_TYPES.HEX" class="g-heading-5 color-info code" title="{{shadow.shadowColor.hex}}">\n              <span class="copy-helper" title="Click to copy">\n                {{vm.name(shadow.shadowColor)}}\n                {{shadow.shadowColor.alpha * 100| toInt}}%\n              </span>\n          </h5>\n          <h5 ng-if="vm.colorType === vm.COLOR_TYPES.RGBA" class="g-heading-5 color-info code" title="{{shadow.shadowColor.rgba}}">\n            {{vm.name(shadow.shadowColor)}}\n          </h5>\n        </div>\n\n        <aside class="details">\n          <ul class="properties-list">\n            <li>\n              <h5 class="g-heading-5">X</h5>\n              <p class="code allow-copying" clipboard-copy data-clipboard-text="{{shadow.shadowOffsetX | unit}}">\n                <span class="copy-helper" title="Click to copy">{{shadow.shadowOffsetX | unit}}</span>\n              </p>\n            </li>\n            <li>\n              <h5 class="g-heading-5">Y</h5>\n              <p class="code allow-copying" clipboard-copy data-clipboard-text="{{shadow.shadowOffsetY | unit}}">\n                <span class="copy-helper" title="Click to copy">{{shadow.shadowOffsetY | unit}}</span>\n              </p>\n            </li>\n            <li>\n              <h5 class="g-heading-5">Blur</h5>\n              <p class="code allow-copying" clipboard-copy data-clipboard-text="{{shadow.shadowBlur | unit}}">\n                <span class="copy-helper" title="Click to copy">{{shadow.shadowBlur | unit}}</span>\n              </p>\n            </li>\n            <li>\n              <h5 class="g-heading-5">Spread</h5>\n              <p class="code allow-copying" clipboard-copy data-clipboard-text="{{shadow.shadowSpread || 0 | unit}}">\n                <span class="copy-helper" title="Click to copy">{{shadow.shadowSpread || 0 | unit}}</span>\n              </p>\n            </li>\n          </ul>\n        </aside>\n      </li>\n    </ul>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/stateSwitcher/stateSwitcher.html",'<div ng-if="vm.isMultistate" class="multistate-select">\n  <h5 class="g-heading-5">State</h5>\n  <select\n      id="state-select"\n      name="stateSelect"\n      ng-model="vm.selectedState"\n      ng-options="option.name for option in vm.states track by option.id"\n      ng-change="vm.changeState(vm.selectedState.id)">\n  </select>\n</div>\n'),$templateCache.put("/scripts/modules/specification/directives/storybook/storybook.html",'<section class="data-section storybook-data">\n  <h3 class="section-title">Documentation</h3>\n  <div class="data">\n    <a class="ds-btn ds-btn--style-neutral ds-btn--weight-light ds-icon--font__external-link" target="_blank" rel="noopener noreferrer" href="{{vm.formattedUrl}}">Open component page on Storybook</a>\n  </div>\n</section>\n'),$templateCache.put("/scripts/modules/specification/directives/token/token.html",'<div class="gradient-container">\n  <figure ng-if="vm.isGradient()" class="color-preview icon-general-copy" ng-style="{background: vm.gradientCssStyle}" title="Click to copy">{{::vm.gradientCssStyle}}</figure>\n  <figure ng-if="!vm.isGradient()" ng-class="::{\'bright-color\': vm.isBright(vm.color.rgba)}" class="color-preview icon-general-copy" ng-style="::{background: vm.color.rgba}">{{::vm.color.rgba}}</figure>\n  <aside class="details gradient">\n    <cloud ng-if="!vm.isGradient()" trigger-type="click" defaultPosition="bottom" offset="vm.offsetColorType">\n      <h5 data-trigger class="g-heading-5 code icon-general-chevron">{{vm.color.token.name}}</h5>\n      <div data-cloud class="cloud colors-list options-list" id="gradient-details-cloud">\n        <ul class="g-unordered-list colors-list options-list">\n          <li clipboard-copy data-clipboard-text="{{vm.isHexMode() ? vm.color.hex : vm.color.rgba}}" skip-copy-info="true" title="Click to copy">\n            <figure ng-if="vm.isHexMode()" ng-class="::{\'bright-color\': vm.isBright(vm.color.rgba)}" class="color-preview icon-general-copy" ng-style="::{background: vm.color.rgba}">{{::vm.color.hex}}</figure>\n            <figure ng-if="vm.isRgbaMode()" ng-class="::{\'bright-color\': vm.isBright(vm.color.rgba)}" class="color-preview icon-general-copy" ng-style="::{background: vm.color.rgba}">{{::vm.color.rgba}}</figure>\n            <aside class="details">\n              <h5 ng-if="vm.isHexMode()" class="g-heading-5 code" title="{{vm.color.hex}}">{{vm.color.hex}}</h5>\n              <h5 ng-if="vm.isRgbaMode()" class="g-heading-5 code" title="{{vm.color.rgba}}">{{vm.color.rgba}}</h5>\n            </aside>\n          </li>\n        </ul>\n      </div>\n    </cloud>\n    <cloud ng-if="vm.isGradient()" trigger-type="click" defaultPosition="bottom" offset="vm.offsetColorType">\n      <h5 data-trigger class="g-heading-5 code icon-general-chevron">{{vm.color.token.name}}</h5>\n      <div data-cloud class="cloud colors-list options-list" id="gradient-details-cloud">\n        <ul class="gradient-info">\n          <li>\n            <h5 class="g-heading-5">Type: <span>{{::vm.gradientData.type}}</span></h5>\n          </li>\n          <li ng-if="vm.isAngleValid(vm.gradientData.angle)">\n            <h5 class="g-heading-5">Angle: <span>{{::vm.gradientData.angle}}<small class="degree-sign">O</small></span></h5>\n          </li>\n        </ul>\n        <div class="separator"></div>\n        <ul class="g-unordered-list colors-list options-list">\n          <li clipboard-copy data-clipboard-text="{{vm.isHexMode() ? color.hex : color.rgba}}" skip-copy-info="true" ng-repeat="color in vm.gradientData.colors" title="Click to copy">\n            <figure ng-if="vm.isHexMode()" ng-class="::{\'bright-color\': vm.isBright(color.hex)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::color.hex}}</figure>\n            <figure ng-if="vm.isRgbaMode()" ng-class="::{\'bright-color\': vm.isBright(color.hex)}" class="color-preview icon-general-copy" ng-style="::{background: color.rgba}">{{::vm.getRgbaValues(color.rgba)}}</figure>\n            <aside class="details">\n              <h5 ng-if="vm.isHexMode()" class="g-heading-5 code" title="{{color.hex}}">{{vm.colorName(color)}} {{::color.alpha * 100 |number:0}}%</h5>\n              <h5 ng-if="vm.isRgbaMode()" class="g-heading-5 code" title="{{color.rgba}}">{{vm.colorName(color)}}</h5>\n            </aside>\n          </li>\n        </ul>\n      </div>\n    </cloud>\n  </aside>\n</div>\n'),$templateCache.put("/scripts/modules/specification/directives/unitSwitcher/unitSwitcher.html",'<cloud trigger-type="click" offset="vm.offsetColorType" class="outline-info">\n  <span data-trigger class="cloud-trigger icon-general-chevron">{{vm.activeMode}}</span>\n  <ul data-cloud id="unit-switch-cloud" class="cloud small options-cloud">\n    <li ng-repeat="mode in vm.UNIT_MODES track by $index">\n      <a href="#" ng-click="vm.changeMode($event, mode)" ng-class="{selected: vm.activeMode === mode}">{{mode}}</a>\n    </li>\n  </ul>\n</cloud>\n'),$templateCache.put("/scripts/modules/styleguide/directives/colorsGuideList/colorsGuideList.html",'<section ng-if="vm.colors.length" class="guide-data color-guide-data" id="colors-guide">\n  <h3 class="g-heading-3 title">Colors</h3>\n  <ul class="guide-colors-list">\n    <li ng-repeat="color in vm.sortedColors" title="Click to copy">\n      <figure class="color-preview" ng-style="{background: color.hex, \'box-shadow\': vm.getBoxShadow(color.rgba)}" >{{color.hex}}</figure>\n      <aside class="details">\n        <h5 class="g-heading-5 color allow-copying" clipboard-copy data-clipboard-text="{{color.hex}}">\n          <span class="copy-helper" title="Click to copy">{{color.hex}}</span>\n        </h5>\n        <h5 class="g-heading-5 color allow-copying" clipboard-copy data-clipboard-text="{{vm.getRgb(color.hex)}}">\n          <span class="copy-helper" title="Click to copy">{{vm.getRgbValues(color.rgba)}}</span>\n        </h5>\n        <p class="name" title="{{vm.isHexMode() ? color.hex : color.rgba}}">{{vm.name(color)}}</p>\n      </aside>\n    </li>\n  </ul>\n</section>\n'),$templateCache.put("/scripts/modules/styleguide/directives/downloadFont/downloadFont.html",'<div ng-class="{ working: vm.isFontDownloading }" >\n  <a ng-if="!vm.isFontDownloadError && vm.isCustomFont(vm.font.fontData) && !vm.isFontDownloading"\n     href="#download-font"  ng-click="vm.downloadCustomFont($event, vm.font)"\n     class="download-link underline-link ds-icon--font__font-uploaded">Download font</a>\n  <a ng-if="!vm.isFontDownloadError && vm.isCustomFont(vm.font.fontData) && vm.isFontDownloading"\n     href="#download-font"  ng-click="$event.preventDefault()"\n     class="download-link underline-link ds-icon--font__font-uploaded">Preparing font...</a>\n  <p ng-if="vm.isFontDownloadError"\n     class="error-info">Something went wrong! <a ng-click="vm.downloadCustomFont($event, vm.font)" href="#">Retry</a>\n  </p>\n  <a ng-if="vm.isGoogleFont(vm.font.fontData)"\n     ng-href="{{vm.getGoogleFontLink(vm.font.fontName)}}"\n     target="_blank"\n     class="download-link underline-link icon-general-google">\n    Get from</a>\n  <a ng-if="vm.isTypekitFont(vm.font.fontData)"\n     ng-href="{{vm.getTypekitFontLink(vm.font.fontName)}}"\n     target="_blank"\n     class="download-link underline-link">\n    Get from Typekit</a>\n</div>\n'),$templateCache.put("/scripts/modules/styleguide/directives/downloadImages/downloadImages.html",'<div class="download-all-container" ng-class="{ working: vm.isImagesDownloading }">\n  <button ng-if="!vm.isImagesDownloadError && !vm.isImagesDownloading" href="#download-images" ng-click="vm.downloadImages($event)" class="ds-btn ds-btn--style-neutral ds-btn--size-s ds-btn--weight-light">Download all</button>\n  <a ng-if="!vm.isImagesDownloadError && vm.isImagesDownloading" href="#download-font" ng-click="$event.preventDefault()" class="download-link underline-link ds-icon--font__font-uploaded">Preparing images...</a>\n  <p ng-if="vm.isImagesDownloadError" class="error-info">Something went wrong!\n    <a ng-click="vm.downloadImages($event)" href="#">Retry</a>\n  </p>\n</div>\n'),$templateCache.put("/scripts/modules/styleguide/directives/fontsGuideList/fontsGuideList.html",'<section class="guide-data typography-guide-data" id="typography-guide">\n  <h3 class="g-heading-3 title">Typography</h3>\n  <ul class="g-unordered-list guide-fonts-list">\n    <li ng-repeat="font in vm.sortedFonts track by $index">\n      <section class="font-details font-family">\n        <h5 class="g-heading-5 section-label">Family</h5>\n        <h3 class="font-name" ng-style="{\'font-family\': vm.getFontFamily(font, font.variants)}">{{font.fontName}}</h3>\n        <download-font font="font"></download-font>\n      </section>\n\n      <section class="font-details font-styles">\n        <h5 class="g-heading-5 section-label">Styles</h5>\n        <ul class="g-unordered-list">\n          <li ng-repeat="variant in font.variants" ng-style="vm.getFontStyles(font, variant)">{{variant.name}}</li>\n        </ul>\n      </section>\n\n      <section class="font-details font-preview">\n        <h5 class="g-heading-5 section-label">Text preview</h5>\n        <div ng-style="{\'font-family\': vm.getFontFamily(font, font.variants)}">\n          <p>ABCDEFGHIJKLMNOPQRSTUVWXYZ</p>\n          <p>abcdefghijklmnopqrstuvwxyz</p>\n          <p>0123456789 ? ! &amp; @       % * ^ #</p>\n          <p>$    / ( ) [ ] { } . ,</p>\n        </div>\n      </section>\n    </li>\n  </ul>\n</section>\n'),$templateCache.put("/scripts/modules/styleguide/directives/imagesGuideList/imagesGuideList.html",'<section class="guide-data assets-guide-data" id="assets-guide">\n  <h3 class="g-heading-3 title">Assets</h3>\n  <download-images\n    images="vm.allImages",\n    project-name="vm.projectName"\n  ></download-images>\n\n  <ul class="g-unordered-list assets-list">\n    <li ng-class="{loading: vm.isLoading[$index]}" ng-repeat="image in vm.allImages track by $index">\n      <a ng-if="image.type === \'svg\'" ng-href="{{image.path}}" ng-click="vm.setCurrentImage($event, image)" title="Download">\n        <lazy-image index="$index" worker="vm.lazyImageWorker" image="image" imagePath="vm.imagePaths[$index]" />\n      </a>\n      <a ng-if="image.type === \'url\'" ng-href="{{image.path}}" ng-click="vm.setCurrentImage($event, image)" title="Download">\n        <lazy-image index="$index" worker="vm.lazyImageWorker" image="image" />\n      </a>\n    </li>\n  </ul>\n  <image-downloader\n    image="vm.currentImage"\n  ></image-downloader>\n</section>\n'),$templateCache.put("/scripts/modules/styleguide/directives/lazyImage/lazyImage.html",'<section>\n  <figure class="preview">\n    <img src="{{vm.path}}" alt="" />\n  </figure>\n  <footer ng-if="vm.svg" class="details">\n    <p class="filename">\n      <span class="ellipsis-helper" title="{{vm.svg.name}}">{{vm.svg.name}}</span>\n      <span class="extension">.{{vm.svg.extension}}</span>\n    </p>\n    <image-meta image="vm.svg" without-size="{{true}}"></image-meta>\n  </footer>\n  <footer ng-if="!vm.svg" class="details">\n    <p class="filename">\n      <span class="ellipsis-helper" title="{{vm.image.name}}">{{vm.image.name}}</span>\n      <span class="extension">.{{vm.image.extension}}</span>\n    </p>\n    <image-meta image="vm.image" without-size="{{true}}"></image-meta>\n  </footer>\n</section>\n'),$templateCache.put("/scripts/modules/styleguide/directives/pageLoader/pageLoader.html",'<div class="ng-canvas-container"></div>\n'),$templateCache.put("/scripts/libs/uiBootstrapCustom/views/modal/window.view.html",'<section id="modalBoxWrapper" tabindex="-1" role="dialog" class="modal-box" ng-class="{\'visible\': animate}" ng-click="close($event)"> \x3c!--ng-click="close($event)"--\x3e\n    <section class="modal-box-wrapper">\n        <a ng-if="!isClosingBlocked" href="#" class="close-modal-button icon-general-close only-icon-font" ng-click="close($event)">Close modal</a>\n        <div modal-transclude></div>\n    </section>\n</section>\n'),$templateCache.put("/scripts/modules/core/directives/select/inputTpl/pvDefaultInput.html",'<span class="underline-helper">{{vm.selectedOption[vm.config.labelKey]}}</span>\n'),$templateCache.put("/scripts/modules/core/directives/select/inputTpl/pvInputWithLabel.html",'<p ng-switch="!!vm.selectedOption[vm.config.labelKey]">\n  <span class="underline-helper light" ng-switch-when="true">\n    <span class="label">{{vm.config.label}}</span>\n    <span class="ellipsis-helper">{{vm.selectedOption[vm.config.labelKey]}}</span>\n  </span>\n  <span class="underline-helper" ng-switch-when="false">\n    {{vm.config.placeholder}}\n  </span>\n</p>\n\n\n'),$templateCache.put("/scripts/modules/core/directives/select/optionTpl/pvDefaultOption.html",'<a href="" class="comment-type" ng-class="option.className">\n  {{option[vm.config.labelKey]}}\n</a>\n'),$templateCache.put("/scripts/modules/core/directives/select/optionTpl/pvOptionWithAvatar.html",'<a href="">\n  <figure class="user-avatar">\n    <pv-avatar url="option.avatar" name="option.name"></pv-avatar>\n    <figcaption>{{option[vm.config.labelKey]}}</figcaption>\n  </figure>\n</a>\n'),$templateCache.put("/scripts/modules/core/directives/select/optionTpl/pvOptionWithShortcut.html",'<a class="comment-type" ng-class="option.className">\n  {{option[vm.config.labelKey]}}\n  <pv-shortcut keys="option.shortcut"></pv-shortcut>\n</a>\n'),$templateCache.put("/scripts/modules/core/directives/topBar/actions/actions.html",'<cloud default-position="bottomRight"\n       on-open="vm.onCloudOpen"\n       on-close="vm.onCloudClose"\n       auto-close={{true}}\n       offset="vm.offset">\n  <a href="#actions" class="g-link icon-menu with-icon" data-trigger>\n    <span ng-class="{active: vm.isOpen}" class="icon-general-chevron underline">Actions</span>\n  </a>\n\n  <ul data-cloud\n      class="cloud options-cloud with-icons arrow-top header-actions-cloud"\n      ng-class="{\'custom-size\': vm.isOwner() && vm.isWireframe() && !vm.canShowLivePresentation()}">\n    <li ng-if="vm.isOwner() && vm.isWireframe() && vm.hasAccessToEditor()" data-test="go-to-editor">\n      <a href="{{vm.params.currentDocumentURL}}" data-desktop-app-target="mainWindow" class="icon-general-pencil">\n          {{vm.isOriginalProject ? vm.params.editLabel : \'Edit this iteration\'}}\n      </a>\n    </li>\n    <li ng-if="vm.isOwner() && !vm.isWireframe() && vm.hasAccessToEditor()">\n      <a data-desktop-app-target="mainWindow" href="{{vm.params.currentDocumentURL}}" class="icon-general-pencil" data-test="go-to-editor">Edit document</a>\n    </li>\n    <li ng-if="vm.params.showBackToDashboard">\n      <a data-desktop-app-target="mainWindow" href="{{vm.params.dashboardURL}}"  class="icon-general-exit" data-test="go-to-dashboard">Go to project</a>\n    </li>\n\n    <li ng-if="vm.isOwner() && vm.isWireframe() && vm.canShowUsabilityTesting()" class="separator" data-test="usability-testing">\n      <a href="#usability-testing"\n         ng-click="vm.onClickUsabilityTestSession($event)"\n         class="icon-general-usability-testing">Usability Testing</a>\n    </li>\n    <li ng-if="!vm.hideUsabilityTestingInfo" class="separator" data-test="usability-testing-disabled">\n      <span class="icon-general-usability-testing disabled">\n        <span>Usability Testing</span>\n        <em class="plan-info" data-show-node="tooltip">\n          <small class="pro-label pro-tooltip">Team</small>\n          <span class="tooltip with-actions pro-tooltip size-220">\n            <small class="pro-label">Team</small>\n            Usability testing is available in Team Plan.\n            <a href="{{vm.params.upgradePlanURL}}"\n               ng-click="vm.upgradePlanTest($event)"\n               class="underline-link blue-link custom-color">Upgrade now!</a>\n          </span>\n        </em>\n      </span>\n    </li>\n    <li ng-if="vm.isOwner() && vm.isWireframe() && vm.canShowLivePresentation()" data-test="live-presentation">\n      <a href="#live-presentation"\n         ng-click="vm.onConfigureLiveShareSession($event)"\n         class="icon-general-live-presentation">Start Live Presentation</a>\n    </li>\n    <li ng-if="vm.isOwner() && vm.isWireframe() && !vm.canShowLivePresentation() && !vm.hideLivePresentationInfo" data-test="live-presentation-disabled">\n      <span class="icon-general-live-presentation disabled">\n        <span>Start Live Presentation</span>\n        <em class="plan-info" data-show-node="tooltip">\n          <small class="pro-label pro-tooltip">N/A</small>\n          <span class="tooltip with-actions pro-tooltip size-220">\n             Live Presentation is not available on your plan.\n            <a href="#"\n               ng-click="vm.upgradePlanTest($event)"\n               class="underline-link blue-link custom-color">Upgrade now!</a>\n          </span>\n        </em>\n      </span>\n    </li>\n    <li ng-if="vm.showDesktopAppDownload()" class="separator" data-test="get-desktop-app">\n      <a\n        ng-click="vm.desktopAppLinkClick($event)"\n        href={{vm.desktopAppDownoadLink}}\n        class="ds-icon--font__desktop-app"\n      >\n        Get Desktop App\n      </a>\n    </li>\n    <li ng-class="{\'separator\': !vm.params.noSeparator}" data-test="log-out">\n      <a href="{{vm.params.logOutUrl}}" class="icon-general-log-out">Log Out</a>\n    </li>\n  </ul>\n</cloud>\n'),$templateCache.put("/scripts/modules/core/directives/topBar/filter/filter.html",'<li>\n  <a href="#filters"\n     ng-click="vm.togglePanel($event, vm.PREVIEW_PANELS.FILTERS)"\n     class="comments-filter gray-link button-style comment-type"\n     ng-class="[vm.typeClass, vm.assignmentClass, {\'active\': vm.isPanelVisible(vm.PREVIEW_PANELS.FILTERS)}]">\n    <span class="label">View:</span>\n    <span class="underline">{{vm.label}}</span>\n    <figure class="assign-indicator icon-general-user"></figure>\n  </a>\n</li>\n'),$templateCache.put("/scripts/modules/core/directives/topBar/liveShare/liveShare.html",'<ul class="live-share-menu options-list g-unordered-list">\n  <li ng-if="vm.isHostSession || !vm.isUserTestingMode">\n    <ul class="g-unordered-list collaborators-list">\n      <li ng-repeat="collaborator in vm.collaborators" data-show-node="tooltip">\n        <figure class="user-avatar" ng-class="{\'muted\' : collaborator.muted}">\n          <img ng-src="{{vm.getCollaboratorAvatar(collaborator)}}"\n               alt="{{collaborator.name}}" />\n          <strong ng-hide="collaborator.customData.avatar"\n                  class="initials">{{collaborator.name | limitTo:1 }}</strong>\n        </figure>\n        <span ng-if="vm.isHostSession && collaborator.type !== \'host\'"\n              ng-click="vm.removeUser(collaborator.id)"\n              class="remove-user">\n          Remove user\n        </span>\n        <figure class="user-color" style="background: {{collaborator.color}};"></figure>\n        <em class="tooltip">{{collaborator.name}}</em>\n      </li>\n    </ul>\n  </li>\n\n  <li ng-if="vm.isHostSession || !vm.isUserTestingMode" class="separator increase-left"></li>\n\n  <li ng-if="!vm.isUserTestingMode && !vm.isHostSession">\n    <a ng-href="#follow-cursor"\n       ng-click="vm.onClickFollowHost($event)"\n       ng-class="{\'active\': vm.host.isFollowed}" style="background-color: {{vm.host.color}};"\n       class="cursor btn-icon icon-general-cursor"\n       data-show-node="tooltip">\n      <span class="tooltip">Follow cursor</span>\n    </a>\n  </li>\n\n  <li ng-if="vm.isHostSession">\n    <cloud on-open="vm.onCloudOpen"\n           on-close="vm.onCloudClose"\n           default-position="bottom"\n           auto-close="{{true}}">\n      <a href="#actions"\n         ng-class="{\'active\': vm.isOpen}"\n         class="btn-icon icon-general-cog"\n         data-show-node="tooltip"\n         data-trigger>\n        <em ng-if="vm.isUserTestingMode" class="tooltip float-right">Usability test settings</em>\n        <em ng-if="!vm.isUserTestingMode" class="tooltip float-right">Live Presentation settings</em>\n      </a>\n\n      <div data-cloud class="cloud big options-cloud session-settings-cloud">\n        <h3 class="g-heading-3">Session settings</h3>\n        <ul class="g-unordered-list options-list scroll-ready">\n          <li ng-repeat="option in vm.configuration">\n            <form>\n              <input id="live-share-setting-{{$index}}"\n                     type="checkbox"\n                     class="state-helper"\n                     ng-change="vm.setOption(option)"\n                     ng-model="option.value">\n              <label for="live-share-setting-{{$index}}"\n                     class="fake-choose-label fake-checkbox inside-cloud">{{option.name}}</label>\n            </form>\n          </li>\n        </ul>\n        <form class="separator more-spacing invite-link-container">\n          <h3 class="g-heading-3">Link to session</h3>\n          <input type="text"\n                 class="g-field url-input old-input"\n                 ng-click="vm.inputFocus($event)"\n                 ng-model="vm.inviteURL"\n                 readonly />\n          <button\n              ngclipboard\n              data-clipboard-text={{vm.inviteURL}}\n              ngclipboard-success="vm.onCopySuccess()"\n              class="copy-link icon-general-link only-icon-font btn-bordered small-size">Copy</button>\n          <span class="information"\n                ng-class="{\'visible\': vm.isCopied}">{{::\'LS_LINK_HAS_BEEN_COPIED\' | translate}}</span>\n        </form>\n      </div>\n    </cloud>\n  </li>\n\n  <li ng-if="!vm.isUserTestingMode">\n    <a href="#toggle-mute"\n       class="btn-icon icon-general-mute"\n       ng-class="{\'active\' : vm.muted}"\n       ng-click="vm.toggleMute($event)"\n       data-show-node="tooltip">\n      <em class="tooltip float-right">Toggle mute</em>\n    </a>\n  </li>\n\n  \x3c!--<li ng-if="vm.isHostSession || !vm.isUserTestingMode">--\x3e\n    \x3c!--<a ng-click="onClickFinishSession($event)" class="button-style active">--\x3e\n      \x3c!--End session--\x3e\n    \x3c!--</a>--\x3e\n  \x3c!--</li>--\x3e\n</ul>\n'),$templateCache.put("/scripts/modules/core/directives/topBar/mirrorApp/mirrorApp.view.html",'<div>\n  <cloud\n    default-position="bottom"\n    on-open="vm.onCloudOpen"\n    on-close="vm.onCloudClose"\n  >\n    <ul data-trigger class="mirror-app">\n      <a\n        class="btn-icon ds-icon--font__feature-mobile"\n        data-show-node="tooltip"\n      >\n        <em class="tooltip float-right">Preview on a device</em>\n      </a>\n    </ul>\n    <ul data-cloud class="cloud mirror-app-cloud">\n      <li class="mirror-app-headline">Preview on a Device</li>\n      <div class="qr-code">\n        <qr-code value="vm.currentUrl"></qr-code>\n      </div>\n      <p class="info-label custom-color">\n        Open\n        <a\n          class="ds-link ds-link--style-chameleon"\n          href="https://www.uxpin.com/docs/sharing/uxpin-mirror"\n          target="_blank"\n          openInBrowser\n        >\n          <span class="ds-link__text">UXPin Mirror</span>\n        </a>\n        on your device, and scan the QR code.\n      </p>\n    </ul>\n  </cloud>\n</div>\n'),$templateCache.put("/scripts/modules/core/directives/updateInfo/modal-content/spec-mode-enterprise.html",'<img src="img/update-info/spec-mode.png" srcset="img/update-info/spec-mode-@2x.png 2x, img/update-info/spec-mode.png 1x" alt="Spec mode" width="400">\n<section class="content">\n  <h1 class="header">Say hello to Spec mode</h1>\n  <ul class="with-ticks">\n    <li>Eliminate time-consuming redlining of your mockups and focus on what matters.</li>\n    <li>Automate your handoff between designer and developer, creating stronger fidelity between design and coded pages.</li>\n    <li>Document each element for easy reuse and bring consistency across all your products and properties.</li>\n  </ul>\n  <button type="button" class="btn btn-solid" ng-click="closeModal($event)">Start using Spec Mode</button>\n</section>'),$templateCache.put("/scripts/modules/core/directives/updateInfo/modal-content/spec-mode.html",'<img src="img/update-info/spec-mode-sketch.jpg" srcset="img/update-info/spec-mode-sketch-@2x.jpg 2x, img/update-info/spec-mode-sketch.jpg 1x" alt="Spec mode" width="470">\n<section class="content">\n  <h1 class="header">Spec Mode</h1>\n  <p class="lead">Where development matches design</p>\n  <p>With Spec Mode and new Sketch Integration, you\'ll:</p>\n  <ul class="with-ticks">\n    <li>Close the gap between design and development, making handoffs a snap.</li>\n    <li>Auto-generate design specs. Add metadata to any element once, keep it forever.</li>\n    <li>Keep your designs sharp when you turn your Sketch files into UXPin prototypes.</li>\n  </ul>\n  <button type="button" class="btn btn-solid" ng-click="closeModal($event)">Try Spec Mode!</button>\n</section>')}]),function(){"use strict";angular.module("core").factory("CssKeyFramesAnimation",function(){return window.CssKeyframesAnimation.default})}(),angular.module("core").service("CodeMirror",function(){"use strict";return window.CodeMirror}),angular.module("core").factory("LiveSessionInstanceService",[function(){"use strict";var instance=null;return{set:function(newInstance){instance=newInstance},get:function(){return instance}}}]),angular.module("core").factory("LocalDataService",["$window","$document","$q",function($window,$document,$q){"use strict";return{getData:function(file){var d=$q.defer(),scr=document.createElement("script");return scr.setAttribute("src",file),scr.setAttribute("type","text/javascript"),scr.addEventListener("load",function(){d.resolve($window.DATA),delete $window.DATA,$document[0].body.removeChild(scr)}),$document[0].body.appendChild(scr),d.promise}}}]),function(){"use strict";function PageAnimationFactory($document,$timeout,FlowAnimation,FlipXAnimation,PushXAnimation,PushYAnimation,SlideXAnimation,SlideYAnimation,FadeAnimation,SlideNFadeAnimation,CssKeyFramesAnimation){var currentAnimation,animatedContainer,keyframesCache={},animationEndEventsNames="webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd animationEnd",animationsMap={fade:FadeAnimation,"flow-left":[FlowAnimation,"left"],"flow-right":[FlowAnimation,"right"],"push-right":[PushXAnimation,"right"],"push-left":[PushXAnimation,"left"],"push-up":[PushYAnimation,"up"],"push-down":[PushYAnimation,"down"],"slide-right":[SlideXAnimation,"right"],"slide-left":[SlideXAnimation,"left"],"slide-down":[SlideYAnimation,"down"],"slide-up":[SlideYAnimation,"up"],"flip-right-x":[FlipXAnimation,"right"],"flip-left-x":[FlipXAnimation,"left"],"slide-and-fade-left":[SlideNFadeAnimation,"left"],"slide-and-fade-right":[SlideNFadeAnimation,"right"]},easingMap=(FadeAnimation=AnimationEnums.EASING_MODES,FlowAnimation=AnimationEnums.EASING_CSS_MODES,(PushXAnimation={})[FadeAnimation.LINEAR]=FlowAnimation.LINEAR,PushXAnimation[FadeAnimation.IN]=FlowAnimation.IN,PushXAnimation[FadeAnimation.OUT]=FlowAnimation.OUT,PushXAnimation[FadeAnimation.IN_OUT]=FlowAnimation.IN_OUT,PushXAnimation),currentAnimationNames={};function onAnimationEnd(event){event.target===animatedContainer[0]&&(animatedContainer.off(animationEndEventsNames,onAnimationEnd),currentAnimation.onAnimationEnd())}return{init:function(container,animation){var name=animation.name,easing=easingMap[animation.easing||AnimationEnums.DEFAULT_EASING_MODE],animation=animation.duration||AnimationEnums.DEFAULT_DURATION_TIME,animationData=animationsMap[name];if(currentAnimation=null,angular.isArray(animationData)?currentAnimation=new animationData[0](container,animation,null,easing,animationData[1]):animationsMap[name]&&(currentAnimation=new animationsMap[name](container,animation,null,easing)),!currentAnimation||!currentAnimation.canDoAnimation())return!1;var i,cssAnimationKeyFrames,checksum,keyframesObj=currentAnimation.onAnimationInit();for(i in currentAnimationNames={},keyframesObj)keyframesObj.hasOwnProperty(i)&&(checksum=(cssAnimationKeyFrames=new CssKeyFramesAnimation(keyframesObj[i])).checksum,keyframesCache[checksum]?currentAnimationNames[i]=keyframesCache[checksum].name:(function(animation){var style=angular.element("<style>");style.attr("type","text/css"),style.html(animation.generateKeyframesAnimation()),$document[0].querySelector("head").appendChild(style[0])}(cssAnimationKeyFrames),keyframesCache[checksum]=cssAnimationKeyFrames,currentAnimationNames[i]=cssAnimationKeyFrames.name));(animatedContainer=currentAnimation.prepareAnimationContainer()).on(animationEndEventsNames,onAnimationEnd)},startAnimation:function(){if(!currentAnimation||!currentAnimation.canDoAnimation())return!1;$timeout(function(){currentAnimation.prepareNextPage().then(function(){currentAnimation.startAnimation(currentAnimationNames)})})}}}angular.module("core").factory("PageAnimationFactory",PageAnimationFactory),PageAnimationFactory.$inject=["$document","$timeout","FlowAnimation","FlipXAnimation","PushXAnimation","PushYAnimation","SlideXAnimation","SlideYAnimation","FadeAnimation","SlideNFadeAnimation","CssKeyFramesAnimation"]}(),function(){"use strict";function PreviewNavigation(_,$state,$rootScope,Settings,FeatureToggler){var PREVIEW_MODES={SPEC:"specification",COMMENT:"comment",SIMULATE:"simulate",DOCUMENTATION:"documentation"},PREVIEW_PANELS={SITEMAP:"sitemap",TASKS:"tasks",COMMENTS:"comments",FILTERS:"filters",LAYERS:"layers"},MAIN_PANELS={RIGHT:"right",LEFT:"left"},disabledPanels=[],MODE_PANELS_MAP={},LEFT_PANELS=(MODE_PANELS_MAP[PREVIEW_MODES.SIMULATE]=[PREVIEW_PANELS.SITEMAP,PREVIEW_PANELS.TASKS],MODE_PANELS_MAP[PREVIEW_MODES.SPEC]=[PREVIEW_PANELS.LAYERS,PREVIEW_PANELS.SITEMAP],MODE_PANELS_MAP[PREVIEW_MODES.DOCUMENTATION]=[PREVIEW_PANELS.SITEMAP],MODE_PANELS_MAP[PREVIEW_MODES.COMMENT]=[PREVIEW_PANELS.COMMENTS,PREVIEW_PANELS.FILTERS,PREVIEW_PANELS.SITEMAP],[PREVIEW_PANELS.SITEMAP,PREVIEW_PANELS.LAYERS]),RIGHT_PANELS=[PREVIEW_PANELS.COMMENTS,PREVIEW_PANELS.FILTERS],NO_PANELS="no-panels",currentMode=null,visiblePanels=[],expandedPanels=[],commentId=null,baseState="W"===ApplicationConfiguration.project.type?"home.page":"home.document";function changeUrl(){var previewMode,panels;ApplicationConfiguration.isDesignSystem||(previewMode=$state.params.previewMode,panels=$state.params.panels,commentId=$state.params.commentId||"",previewMode===PREVIEW_PANELS.COMMENTS&&-1===panels.indexOf(PREVIEW_PANELS)?(currentMode=PREVIEW_MODES.COMMENT,visiblePanels.push(PREVIEW_PANELS.COMMENTS),commentId=panels||"",$state.go("".concat(baseState,".mode.comment"),getCurrentUrlParams())):$state.go("".concat(baseState,".mode"),getCurrentUrlParams()))}function isValidMode(mode){return!(mode===PREVIEW_MODES.SPEC&&(Settings.disableSpecification||!FeatureToggler.specModeNoLogin&&ApplicationConfiguration.userData.is_anonymous)||mode===PREVIEW_MODES.COMMENT&&Settings.disableComments||mode===PREVIEW_MODES.DOCUMENTATION&&Settings.disableDocumentation||-1===_.values(PREVIEW_MODES).indexOf(mode))}function updatePanels(mode){visiblePanels=visiblePanels.filter(function(panel){return-1!==MODE_PANELS_MAP[mode].indexOf(panel)})}function removeFromVisiblePanels(panel){visiblePanels=_.without(visiblePanels,panel)}function addToVisiblePanels(panel){if(-1!==MODE_PANELS_MAP[currentMode].indexOf(panel)){switch(panel){case PREVIEW_PANELS.COMMENTS:removeFromVisiblePanels(PREVIEW_PANELS.FILTERS);break;case PREVIEW_PANELS.FILTERS:removeFromVisiblePanels(PREVIEW_PANELS.COMMENTS);break;case PREVIEW_PANELS.SITEMAP:removeFromVisiblePanels(PREVIEW_PANELS.LAYERS);break;case PREVIEW_PANELS.LAYERS:removeFromVisiblePanels(PREVIEW_PANELS.SITEMAP)}return function(panel){return!(panel===PREVIEW_PANELS.SITEMAP&&Settings.disableSitemap||isPanelDisabled(panel)||panel===PREVIEW_PANELS.LAYERS&&Settings.disableSpecification||-1===_.values(PREVIEW_PANELS).indexOf(panel))}(panel)&&-1===visiblePanels.indexOf(panel)&&(visiblePanels.push(panel),$rootScope.$emit(PreviewEnums.ON_PANEL_CHANGED,panel),1)}removeFromVisiblePanels(panel),$rootScope.$emit(PreviewEnums.ON_PANEL_CHANGED,panel)}function addToExpandedPanels(panel){!function(panel){return-1!==_.values(MAIN_PANELS).indexOf(panel)}(panel)||expandedPanels.push(panel)}function getCurrentUrlParams(){var layers;return $state.params.mode&&$state.params.mode.includes("l")&&(layers=PREVIEW_PANELS.LAYERS),{previewMode:currentMode||PREVIEW_MODES.SIMULATE,panels:(visiblePanels||[]).join(",")||layers||NO_PANELS,commentId:commentId}}function isPanelDisabled(panel){return-1!==disabledPanels.indexOf(panel)}return{PREVIEW_MODES:PREVIEW_MODES,PREVIEW_PANELS:PREVIEW_PANELS,MAIN_PANELS:MAIN_PANELS,getCurrentMode:function(){return currentMode},getCurrentPanels:function(){return visiblePanels},isPanelVisible:function(panel){return-1!==visiblePanels.indexOf(panel)},isLeftPanelVisible:function(){for(var i=0;i<LEFT_PANELS.length;i++)if(-1!==visiblePanels.indexOf(LEFT_PANELS[i]))return!0;return!1},isRightPanelVisible:function(){for(var i=0;i<RIGHT_PANELS.length;i++)if(-1!==visiblePanels.indexOf(RIGHT_PANELS[i]))return!0;return!1},isModeActive:function(mode){return mode===currentMode},showPanel:function(panel){addToVisiblePanels(panel)&&changeUrl()},hidePanel:function(panel){removeFromVisiblePanels(panel),changeUrl()},setActiveMode:function(mode){currentMode!==mode&&isValidMode(mode)?(currentMode=mode,$rootScope.$emit(PreviewEnums.ON_PREVIEW_MODE_CHANGED,mode),updatePanels(currentMode),changeUrl()):isValidMode(mode)||(updatePanels(currentMode=PREVIEW_MODES.SIMULATE),changeUrl())},setActivePanels:function(panels){panels?_.isEqual(panels,visiblePanels)||angular.forEach(panels,function(panel){addToVisiblePanels(panel)}):(visiblePanels=[],$rootScope.$emit(PreviewEnums.ON_PANEL_CHANGED,NO_PANELS))},togglePanel:function(panel){this.isPanelVisible(panel)?this.hidePanel(panel):this.showPanel(panel)},getBaseState:function(){return baseState},getAddCommentState:function(){return"".concat(baseState,".mode.comment")},getModeState:function(){return"".concat(baseState,".mode")},isPanelExpanded:function(panel){return-1!==expandedPanels.indexOf(panel)},expandPanel:function(panel){addToExpandedPanels(panel),$rootScope.$emit(PreviewEnums.ON_PANEL_TOGGLE_EXPAND,panel)},collapsePanel:function(panel){!function(panel){expandedPanels=_.without(expandedPanels,panel)}(panel),$rootScope.$emit(PreviewEnums.ON_PANEL_TOGGLE_EXPAND,panel)},initNavigation:function(mode,panels){currentMode=isValidMode(mode)?mode:PREVIEW_MODES.SIMULATE,$rootScope.$emit(PreviewEnums.ON_PREVIEW_MODE_CHANGED,mode),angular.forEach(panels,function(panel){addToVisiblePanels(panel)}),changeUrl()},getCurrentUrlParams:getCurrentUrlParams,disablePanel:function(panel){disabledPanels.push(panel)},enablePanel:function(panel){disabledPanels=disabledPanels.filter(function(disabledPanel){return disabledPanel!==panel})},isPanelDisabled:isPanelDisabled}}angular.module("core").factory("PreviewNavigation",PreviewNavigation),PreviewNavigation.$inject=["_","$state","$rootScope","Settings","FeatureToggler"]}(),function(){"use strict";function ScreencastifyService($window){return $window.screencastify.setAppId(ApplicationConfiguration.screencastify.appId),$window.screencastify}angular.module("core").factory("ScreencastifyService",ScreencastifyService),ScreencastifyService.$inject=["$window"]}(),function(){"use strict";function UTVideoService(_,$http){return{getUploadUrl:function(fileName,projectData){fileName=function(fileName,projectData){return fileName=fileName.replace(/\s+/g,""),"".concat(projectData.collectionId,"-").concat(projectData.projectId,"/").concat("xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}),"/").concat(fileName)}(fileName,projectData);return $http({url:"/api/live-presentation/usability-test/get-video-upload-url",method:"POST",data:{id_collection:projectData.collectionId,title:fileName}})},uploadVideo:function(config){return config=_.extend(config,{method:"PUT",headers:{"Content-Type":"video/webm","x-amz-acl":"public-read"}}),$http(config)},createDocument:function(documentData){return $http({url:"/api/live-presentation/usability-test/create-document",method:"POST",data:documentData})}}}angular.module("core").factory("UTVideoService",UTVideoService),UTVideoService.$inject=["_","$http"]}(),function(){"use strict";angular.module("core").factory("AnalyticsService",["$log",function($log){return{sendEvent:function(){$log("Tracking not implemented")}}}])}(),angular.module("core").service("animate",function(){"use strict";return function(selector,duration,properties){selector=function(selector){if(angular.isString(selector)){var el=document.querySelectorAll(selector);if(el)return Array.prototype.slice.call(el)}else{if(void 0!==selector.tagName)return[selector];if(/NodeList|HTMLCollection/.test(Object.prototype.toString.call(selector)))return Array.prototype.slice.call(selector)}return null}(selector);selector&&selector.forEach(function(el){TweenLite.to(el,duration,properties)})}}),function(){function appStateManager(_,localStorageService,$rootScope,ProjectsService){"use strict";var state={panels:null,breakpoint:null,mode:null},LOCAL_STORAGE_KEY="appState_".concat(ProjectsService.currentProjectId);function getCurrentState(){return localStorageService.get(LOCAL_STORAGE_KEY)||state}return{getCurrentState:getCurrentState,saveState:function(currentState){localStorageService.set(LOCAL_STORAGE_KEY,_.extend(getCurrentState(),currentState))}}}angular.module("core").factory("appStateManager",appStateManager),appStateManager.$inject=["_","localStorageService","$rootScope","ProjectsService"]}(),function(){"use strict";function ApprovalsService(Rest){var _ApplicationConfigura,serviceData={idApproval:ApplicationConfiguration.approval&&ApplicationConfiguration.approval.id,idRequest:ApplicationConfiguration.approvalRequest&&ApplicationConfiguration.approvalRequest.id,isActive:!(!ApplicationConfiguration.approval||!ApplicationConfiguration.approval.id),isPending:ApplicationConfiguration.approvalRequest&&"pending"===ApplicationConfiguration.approvalRequest.status,approvalStatus:ApplicationConfiguration.approvalRequest&&ApplicationConfiguration.approvalRequest.status,urlHash:null==(_ApplicationConfigura=ApplicationConfiguration.approvalRequest)?void 0:_ApplicationConfigura.urlHash};return{status:null,sendApproval:function(data){var approvalData={status:data.status};data.feedback&&(approvalData.feedback=data.feedback);return approvalData.urlHash=serviceData.urlHash,Rest.one("approvals",data.idApproval).one("requests",data.idRequest).customPUT(approvalData)},getIsPending:function(){return serviceData.isPending},getIsActive:function(){return serviceData.isActive},getApprovalStatus:function(){return serviceData.approvalStatus},setApprovalStatus:function(status){serviceData.isPending=!1,serviceData.approvalStatus=status},getIdApproval:function(){return serviceData.idApproval},getIdRequest:function(){return serviceData.idRequest},getUrlHash:function(){return serviceData.urlHash},updateSeenAt:function(){return Rest.one("approvals",serviceData.idApproval).one("requests",serviceData.idRequest).customPUT({seenAt:!0,urlHash:serviceData.urlHash})}}}angular.module("core").factory("ApprovalsService",ApprovalsService),ApprovalsService.$inject=["Rest"]}(),function(){"use strict";function BreakpointsService(_,$q,$rootScope,ExportService,LocalDataService,ProjectsService,RestWithCache){return{breakpointsMap:{},breakpointWidths:[],getBreakpoints:function(){var _this18=this,projectHash=ProjectsService.currentProjectHash,d=$q.defer();return function(projectHash){return ExportService.isExport()?LocalDataService.getData("data/breakpoints.js"):RestWithCache.one("projects",projectHash).all("breakpoints").getList()}(projectHash).then(function(breakpoints){_this18.generateBreakpointsMap(breakpoints),_this18.generateBreakpointWidths(breakpoints),d.resolve(breakpoints)},function(error){d.reject(error)}),d.promise},generateBreakpointsMap:function(breakpoints){var _this19=this;_.forIn(this.breakpointsMap,function(value,key){delete _this19.breakpointsMap[key]}),breakpoints.forEach(function(breakpoint){_this19.breakpointsMap[breakpoint.version]=Object.assign({},breakpoint,{name:_this19.parseBreakpointName(breakpoint)})})},parseBreakpointName:function(breakpoint){return _.isEmpty(breakpoint.name)?0<breakpoint.width?"".concat(breakpoint.width,"px"):"unnamed":breakpoint.name.replace("&infin;","")},generateBreakpointWidths:function(breakpoints){for(var _this20=this;this.breakpointWidths.length;)this.breakpointWidths.pop();breakpoints.forEach(function(breakpoint){_this20.breakpointWidths.push(breakpoint)}),this.breakpointWidths=_.sortBy(this.breakpointWidths,"width")},getBreakpointName:function(id){return this.breakpointsMap[id].name}}}angular.module("core").factory("BreakpointsService",BreakpointsService),BreakpointsService.$inject=["_","$q","$rootScope","ExportService","LocalDataService","ProjectsService","RestWithCache"]}(),function(){"use strict";function CanvasContainerHeight($document){var containerPaddedOffsetHeight,containerPadded;return{saveHeightFromDom:function(){return containerPadded=containerPadded||$document[0].querySelector("main > section.scrolled-container > section.scrolled-content > section.canvas-container"),containerPaddedOffsetHeight=containerPadded.offsetHeight},getHeight:function(){return containerPaddedOffsetHeight}}}angular.module("core").factory("CanvasContainerHeight",CanvasContainerHeight),CanvasContainerHeight.$inject=["$document"]}(),function(){"use strict";angular.module("core").factory("ClipboardService",function(){return window.Clipboard})}(),angular.module("core").factory("Color",["ntc","tinycolor","DesignSystem",function(ntc,tinycolor,DesignSystem){"use strict";var currentLibraryHash,COLOR_TYPES={HEX:"hex",RGBA:"rgba"},selectedColorType=COLOR_TYPES.HEX,colorsNamesByLibrary={};function getGenericName(color){return ntc.name(color)[1]}function getColorByMode(color){return selectedColorType===COLOR_TYPES.HEX?color.hex.toUpperCase():getRgbaString(color.rgba)}function getRgbaString(color){return getRgbaValues(color).join(", ")}function getRgbaValues(color){color=color.match(/\((.*)\)/)[1].split(",");return color.length<4&&color.push(1),color}return{COLOR_TYPES:COLOR_TYPES,getName:function(color){var library=colorsNamesByLibrary[currentLibraryHash];return(library=library?library[color.hex.toUpperCase()]:null)&&library!==getGenericName(color.hex)?library:getColorByMode(color)},getGenericName:getGenericName,getColorsSet:function(color){return(color=tinycolor(color)).isValid()?{hex:color.toHexString(),rgba:color.toRgbString(),alpha:color.getAlpha()}:{}},getSelectedColorType:function(){return selectedColorType},setSelectedColorType:function(colorType){selectedColorType=colorType},getRgbaValues:getRgbaValues,getRgbaString:getRgbaString,getGradientName:function(gradient){var library=colorsNamesByLibrary[currentLibraryHash],gradient=gradient.toUpperCase();return library&&library[gradient]?library[gradient]:"Gradient"},isReadable:function(color){return tinycolor.readability(color,$scope.backgroundColor||"#FFF")>=($scope.readabilityLevel||1.2)},isBright:function(color){return 200<tinycolor(color).getBrightness()},isWhite:function(color){return!(255!==tinycolor(color).getBrightness())},setLibraryColors:function(hash){(currentLibraryHash=hash)&&!colorsNamesByLibrary[currentLibraryHash]&&DesignSystem.fetchLibraryItemsByType(currentLibraryHash,[LibraryEnums.ITEM_TYPE.COLOR,LibraryEnums.ITEM_TYPE.GRADIENT]).then(function(colors){colorsNamesByLibrary[currentLibraryHash]=_.chain(colors).reverse().keyBy(function(color){return color.content.toUpperCase()}).mapValues(function(color){return color.name}).value()})},getCurrentLibraryHash:function(){return currentLibraryHash},getNameForStyleGuide:function(color){var library=colorsNamesByLibrary[currentLibraryHash];return(library?library[color.hex.toUpperCase()]:null)||getGenericName(color.hex)||getColorByMode(color)}}}]),function(){"use strict";function DesignSystem($http,$window,ProjectsService){var uxpinApi=$window.ApplicationConfiguration.uxpinApi,symbolContent=$window.ApplicationConfiguration.symbol,accountPageOptions=$window.ApplicationConfiguration.accountPageOptions;return{fetchDesignSystemsForProjectAccount:function(){return $http({method:"GET",url:"".concat(uxpinApi,"/designSystems/project/").concat(ProjectsService.currentProjectHash),withCredentials:!0}).then(function(response){return response.data}).catch(function(){throw new Error("Design systems fetching error")})},fetchDesignSystemLibraries:function(projectHash){return $http({method:"GET",url:"".concat(uxpinApi,"/designSystems/project/").concat(projectHash,"/documentation/")}).then(function(response){return response.data}).catch(function(){throw new Error("Design systems fetching error")})},fetchLibraryItemsByType:function(libraryHash,types){return $http({method:"POST",url:"".concat(uxpinApi,"/libraries/hash/").concat(libraryHash,"/items/"),data:{types:types}}).then(function(response){return response.data}).catch(function(){throw new Error("Design systems fetching error")})},fetchDesignSystemsForSymbolSketchAreas:function(ids){return $http({method:"POST",url:"".concat(uxpinApi,"/designSystems/sketch-symbols"),data:ids}).then(function(response){return response.data}).catch(function(){throw new Error("Design systems for symbol sketch areas fetching error")})},getSymbolContent:function(){return symbolContent},getAccountPageOptions:function(){return accountPageOptions}}}angular.module("core").factory("DesignSystem",DesignSystem),DesignSystem.$inject=["$http","$window","ProjectsService"]}(),function(){"use strict";function DesignViewsService($cookies,Rest,UsersService,ProjectsService){return{addDesignView:function(projectHash,pageId){addCookie(projectHash,pageId);projectHash={};UsersService.me.id_user&&!UsersService.me.is_anonymous&&(projectHash.idUser=UsersService.me.id_user);return Rest.one("design-views",window.ApplicationConfiguration.project.id_account).one("projects",ProjectsService.currentProjectId).customPUT(projectHash)},addCookie:addCookie,isDesignViewCounted:function(projectHash,pageId){projectHash=$cookies.get("dv".concat(projectHash));projectHash=projectHash&&JSON.parse(projectHash);return!!projectHash&&-1!==projectHash.indexOf(pageId)}};function addCookie(projectHash,pageId){var pagesIds=$cookies.get("dv".concat(projectHash)),pageId=((pagesIds=pagesIds?JSON.parse(pagesIds):[]).push(pageId),new Date),pageId=new Date(pageId.getFullYear(),pageId.getMonth(),pageId.getDate()+1,pageId.getHours());$cookies.put("dv".concat(projectHash),JSON.stringify(pagesIds),{expires:pageId})}}angular.module("core").factory("DesignViewsService",DesignViewsService),DesignViewsService.$inject=["$cookies","Rest","UsersService","ProjectsService"]}(),angular.module("core").factory("desktopApp",["$window","uxpinSharedComponents","ProjectsService",function($window,uxpinSharedComponents,ProjectsService){return uxpinSharedComponents.isDesktopApp&&$window.addEventListener("EVENT_GET_PROJECT_DATA",function(){$window.dispatchEvent(new CustomEvent("EVENT_PROJECT_DATA_RECEIVED",{detail:{idCollection:ProjectsService.currentCollectionId,idProject:ProjectsService.currentProjectId,idOriginalProject:ProjectsService.currentOriginalProjectId,name:ProjectsService.currentProjectName,hash:ProjectsService.currentProjectHash}}))}),{dispatchPageOptionsChangedEvent:function(){uxpinSharedComponents.isDesktopApp&&$window.dispatchEvent(new CustomEvent("EVENT_PAGE_OPTIONS_CHANGED",{detail:_objectSpread({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}))}}}]),function(){"use strict";function DeviceFrameService(_,$q,ImageService,UnitService){var device,frameEl,imageDimensions,POSITION_OFFSET=-250,PIXEL_RATIO=3;function updatePosition(scale){frameEl&&device&&(scale=function(scale){var position={};return position.width=UnitService.toPx(imageDimensions.width/PIXEL_RATIO*scale,!0),position.height=UnitService.toPx(imageDimensions.height/PIXEL_RATIO*scale,!0),device.isHorizontal,position.top=UnitService.toPx(POSITION_OFFSET*scale,!0),position.left=UnitService.toPx(POSITION_OFFSET*scale,!0),position}(scale),frameEl.css({width:scale.width,height:scale.height,top:scale.top,left:scale.left}))}function toggle(isVisible){frameEl&&frameEl.css("visibility",isVisible?"visible":"hidden")}return{destroy:function(){frameEl&&(frameEl.remove(),frameEl=imageDimensions=device=null)},getClassName:function(deviceFrame){var classes;return(deviceFrame=deviceFrame||device)?(classes=[],deviceFrame.cursor&&classes.push(["cursor",deviceFrame.cursor].join("-")),deviceFrame.isHiddenScrollbar&&classes.push("hide-scrollbars"),classes.join(" ")):""},isDevice:function(){return!!device},render:function(deviceContainer,deviceData,scale,isInitiallyHidden){device=deviceData;var deferred=$q.defer(),container=angular.element(deviceContainer),src="https://s3.amazonaws.com/uxpin/assets/device-frames/"+device.fileName;return ImageService.getImageDimensions(src).then(function(dimensions){imageDimensions=dimensions,(frameEl=angular.element('<img src="'.concat(src,'" alt="').concat(device.name,'"/>'))).css("position","absolute"),isInitiallyHidden&&toggle(!1),updatePosition(scale),container.empty(),container.append(frameEl),deferred.resolve()}).catch(function(){deferred.resolve()}),deferred.promise},updatePosition:updatePosition,toggle:toggle}}angular.module("core").factory("DeviceFrameService",DeviceFrameService),DeviceFrameService.$inject=["_","$q","ImageService","UnitService"]}(),function(){"use strict";function DocumentationService(_,SitemapService){var DOCUMENTATION_EXISTS=PreviewEnums.DOCUMENTATION_EXISTS,pagesMap=SitemapService.pagesMap;return{hasProjectDocumentation:function(pages){return pages?_.some(pages,DOCUMENTATION_EXISTS):_.some(pagesMap,DOCUMENTATION_EXISTS)}}}angular.module("core").factory("DocumentationService",DocumentationService),DocumentationService.$inject=["_","SitemapService"]}(),angular.module("core").factory("DocumentsService",["$q","$rootScope","$state","Rest","ProjectsService",function($q,$rootScope,$state,Rest,ProjectsService){"use strict";return{currentDocumentId:null,currentDocumentProperties:null,getDocuments:function(){var projectHash=ProjectsService.currentProjectHash,d=$q.defer();return Rest.one("projects",projectHash).all("documents").getList().then(function(documents){this.currentDocumentId=documents[0].id_document,d.resolve(documents)}.bind(this),function(error){d.reject(error)}),d.promise},getDocument:function(id){var projectHash=ProjectsService.currentProjectHash,d=$q.defer();return Rest.one("projects",projectHash).one("documents",id).get().then(function(document){this.currentDocumentProperties=document,d.resolve(document)}.bind(this)),d.promise}}}]),angular.module("core").factory("DOMService",["$rootScope","$window",function($rootScope,$window){"use strict";return{container:null,getContainerDimensions:function(){this.container||(this.container=document.querySelector("main > section.scrolled-container > section.scrolled-content"));var style,w=0,h=0;return this.container&&(style=window.getComputedStyle(this.container),w=parseInt(style.width),h=parseInt(style.height)),{width:w,height:h}},getWindowWidth:function(){return $window.innerWidth}}}]),angular.module("core").factory("editorSocket",["$rootScope",function($rootScope){"use strict";return SocketServiceHelper(ApplicationConfiguration.socketEditorServerURL,$rootScope,!0)}]),function(){"use strict";angular.module("core").factory("ElementClassService",function(){var map={},TYPE=ElementEnums.TYPE,TYPE_CLASSES=ElementEnums.TYPE_CLASSES;return map[TYPE.AUDIO]=TYPE_CLASSES.AUDIO,map[TYPE.BITMAP_SKETCH]=TYPE_CLASSES.IMAGE,map[TYPE.BOX]=TYPE_CLASSES.BOX,map[TYPE.BUTTON]=TYPE_CLASSES.BUTTON,map[TYPE.CHECKBOX]=TYPE_CLASSES.CHECKBOX,map[TYPE.CIRCLE]=TYPE_CLASSES.CIRCLE,map[TYPE.CODE_COMPONENT]=TYPE_CLASSES.CODE_COMPONENT,map[TYPE.COMBINED_SHAPE]=TYPE_CLASSES.SVG_PATH,map[TYPE.COMPONENT]=TYPE_CLASSES.COMPONENT,map[TYPE.GROUP]=TYPE_CLASSES.GROUP,map[TYPE.HOTSPOT]=TYPE_CLASSES.HOTSPOT,map[TYPE.HOTSPOT_SKETCH]=TYPE_CLASSES.HOTSPOT,map[TYPE.ICON]=TYPE_CLASSES.IMAGE,map[TYPE.IMAGE]=TYPE_CLASSES.IMAGE,map[TYPE.IMAGE_SKETCH]=TYPE_CLASSES.IMAGE_SKETCH,map[TYPE.SYMBOL_SKETCH_AREA]=TYPE_CLASSES.COMPONENT,map[TYPE.GROUP_SKETCH_AREA]=TYPE_CLASSES.GROUP,map[TYPE.INPUT]=TYPE_CLASSES.INPUT,map[TYPE.INPUT_WITH_LABEL]=TYPE_CLASSES.INPUT,map[TYPE.MASK_GROUP]=TYPE_CLASSES.MASK_GROUP,map[TYPE.MULTISTATE]=TYPE_CLASSES.MULTISTATE,map[TYPE.RADIO]=TYPE_CLASSES.RADIO,map[TYPE.RICH_TEXT_ELEMENT]=TYPE_CLASSES.RICH_TEXT_ELEMENT,map[TYPE.SELECT_LIST]=TYPE_CLASSES.SELECT_LIST,map[TYPE.SHAPE_SKETCH]=TYPE_CLASSES.SVG_PATH,map[TYPE.SLICE_SKETCH]=TYPE_CLASSES.SLICE_SKETCH,map[TYPE.STORYBOOK_ELEMENT]=TYPE_CLASSES.STORYBOOK_ELEMENT,map[TYPE.SVG_ARROW]=TYPE_CLASSES.SVG_PATH,map[TYPE.SVG_CUSTOM_ICON]=TYPE_CLASSES.IMAGE,map[TYPE.SVG_LINE]=TYPE_CLASSES.SVG_PATH,map[TYPE.SVG_POLYGON]=TYPE_CLASSES.SVG_PATH,map[TYPE.SVG_SKETCH]=TYPE_CLASSES.SVG_PATH,map[TYPE.TABLE]=TYPE_CLASSES.TABLE,map[TYPE.TEXT]=TYPE_CLASSES.TEXT,map[TYPE.TEXT_SKETCH]=TYPE_CLASSES.TEXT,map[TYPE.TEXT_ELEMENT]=TYPE_CLASSES.TEXT,map[TYPE.TEXTAREA]=TYPE_CLASSES.TEXTAREA,map[TYPE.VIDEO]=TYPE_CLASSES.VIDEO,map.defaults=TYPE_CLASSES.GENERIC,{getListItemClassByType:function(type,typeSketch,hasClippingMask){return type?(hasClippingMask?"ds-icon--font__action-mask":"")||map[typeSketch]||map[type]||map.defaults:""}}})}(),function(){"use strict";angular.module("core").factory("Engine",["_","$http","$log","$rootScope","$window","MODES","$q","$timeout","InteractionsService","Variables","MissingLocalFonts","FeatureToggler","PagesService","ProjectsService","uxpinSharedComponents","$stateParams","$state","CanvasContainerHeight","ResponsiveModeService",function(_,$http,$log,$rootScope,$window,MODES,$q,$timeout,InteractionsService,Variables,MissingLocalFonts,FeatureToggler,PagesService,ProjectsService,uxpinSharedComponents,$stateParams,$state,CanvasContainerHeight,ResponsiveModeService){var _page,_content,_container,_scrollableContainer,_scrollableWrapper,_loadedPage,toastId,_isInteractionsShare=!1,canvasTimeout=!1,areFontsLoadedDeferred=$q.defer(),isLoadingFinishedDeffered=$q.defer(),pageLoaded=(isLoadingFinishedDeffered.resolve(!1),!1),INTERFACE_DELAY=100,gridVisibility={},scale=1,KEY_CODES=keysEnums.KEY_CODES;function getTypekitData(){return(ApplicationConfiguration.isDesignSystem?ApplicationConfiguration.accountPageOptions.typekit:ApplicationConfiguration.project).kit}function getCustomFontUrl(){return ApplicationConfiguration.isDesignSystem?ApplicationConfiguration.accountPageOptions.customFontCssUrl:ApplicationConfiguration.project.custom_font_css_url}function finishLoading(canvases){_container.querySelector(".ng-canvas-container").style.backgroundColor=getCanvasBackgroundColor(),canvases.ngCanvas.classList.add("offscreen-ng-canvas"),canvases.ngCanvas.classList.remove("ng-canvas"),canvases.ngCanvas.style.visibility="hidden",canvases.offscreenNgCanvas.style.left=null,canvases.offscreenNgCanvas.style.top=null,_.values(PreviewEnums.FIT_STRATEGIES).includes($stateParams.zoom)?offOnZoomUpdate=$rootScope.$on(PreviewEnums.ON_ZOOM_UPDATE,function(){window.setTimeout(function(){canvases.offscreenNgCanvas.style.visibility=null},60),offOnZoomUpdate()}):canvases.offscreenNgCanvas.style.visibility=null;var offOnZoomUpdate,isLoaded=$q.defer();canvasTimeout=window.setTimeout(function(){canvases.ngCanvas.style.display="none"},60),isLoaded.promise}function getCanvasBackgroundColor(){return _page.getCanvas().backgroundColor||"#FFF"}function setEnableGridOption(enableGrid){_page&&_page.setOptions({enableGrid:enableGrid})}function setGuidesVisibility(isVisible){_page.setOptions({enableGuides:isVisible})}function onResize(){updateOffset(),_page.updateRelativeRectangle()}function updateOffset(){var rect;_page&&(rect=_content.getClientRects()[0],_page.setOffset(rect.left+_container.scrollLeft,rect.top+_container.scrollTop,_container.scrollLeft,_container.scrollTop))}function onKeyDown(e){_page&&!_.isEmpty(_page.InteractionsManager.interactionsElements)&&_page.triggerKeyDown(e)}function onWindowResize(e){_page&&!_.isEmpty(_page.InteractionsManager.interactionsElements)&&_page.triggerWindowResize(e)}function onScroll(e){_page&&(_page.updateRelativeRectangle(e),_page.triggerScroll(e),updateOffset())}function updateCanvasRectangle(){_page&&setTimeout(function(){updateOffset(),_page.updateRelativeRectangle()},INTERFACE_DELAY)}function setScale(value){_page&&(scale=value,_page.setScale(value),requestAnimationFrame(updateOffset))}function getScale(){return scale}function getDocumentation(){return _page&&_page.getCanvas().annotations||[]}function handleInteraction(elementId,trigger,event){event&&Interactions.handleEvent(elementId,trigger,event)}function stopInteractionLoops(){_page.stopInteractionLoops()}return{areGuidesVisible:function(){return _page&&_page.options&&!!_page.options.enableGuides},areFontsLoaded:function(){return areFontsLoadedDeferred.promise},clearSpecMode:function(){return _page.clearSpecMode()},clearLoadingFontsFlag:function(){areFontsLoadedDeferred=$q.defer()},countAnnotations:function(){return _page?getDocumentation().length:0},deselectAllElements:function(){_page&&_page.deselectAllElements()},disableInteractionsShare:function(){_isInteractionsShare&&(_isInteractionsShare=!1,_page.InteractionsManager.off(window.uxpinEngine.Page.Events.INTERACTION_TRIGGERED,handleInteraction))},displayLegacyGuides:function(guides){_page&&_page.canvas.guideable.displayLegacyGuides(guides)},enableInteractionsShare:function(){_isInteractionsShare||(_isInteractionsShare=!0,_page.InteractionsManager.on(window.uxpinEngine.Page.Events.INTERACTION_TRIGGERED,handleInteraction))},fetchAndUpdateVariables:function(){Variables.fetchVariables().then(function(variables){_page.updateVariables(variables)})},getAllElements:function(){return _page&&_page.getAllElements()||[]},getCanvasBackgroundColor:getCanvasBackgroundColor,getCanvasSketchArtboard:function(){return _page?_page.getCanvas().getSketchArtboard():null},getCanvasSpecProperties:function(){var canvas=_page.getCanvas(),specProperties=canvas.getSpecProperties(),data={};return ApplicationConfiguration.isDesignSystem&&(data.canvasViewWidth=canvas.width,data.canvasViewHeight=canvas.height),_.extend({},specProperties,data)},getDocumentation:getDocumentation,getEnableGridOption:function(){return _page&&_page.options&&!!_page.options.enableGrid},getGridComputedColumnWidth:function(gridType){if(_page)return _page.getGridComputedColumnWidth(gridType)},getPage:function(){return _loadedPage||_page},getLoadingPage:function(){return _page},getScale:getScale,initPage:function(container,content,customOptions){window.clearTimeout(canvasTimeout),areFontsLoadedDeferred=$q.defer(),isLoadingFinishedDeffered=$q.defer(),_content=content,_container=container,_scrollableWrapper=_scrollableContainer=null,customOptions=customOptions||{},$window.useAntiFlicker||isLoadingFinishedDeffered.resolve(!1),$window.useAntiFlicker&&(content=_container.querySelector(".ng-canvas"),(container=_container.querySelector(".offscreen-ng-canvas")).classList.remove("offscreen-ng-canvas"),container.classList.add("ng-canvas"),container.style.display=null,container.style.visibility="hidden",container.style.left="-10000px",container.style.top="-10000px",canvases={ngCanvas:content,offscreenNgCanvas:container});var canvases,content=$window.useAntiFlicker?_.get(_loadedPage,"variablesStore.state.list",Variables.getVariables()):Variables.getVariables(),container=$window.document.getElementById("canvas-wrapper");return(_page=new $window.uxpinEngine.Page(_.extend({},{availablePages:PagesService.pagesFlatList,codeComponentsEnabled:FeatureToggler.merge,mode:$window.ApplicationConfiguration.mode||$window.uxpinEngine.Page.Modes.PREVIEW,userContentPrefix:$window.ApplicationConfiguration.userContentPrefix,userContentPrefixCached:$window.ApplicationConfiguration.userContentPrefixCached,staticContentPrefixCached:$window.ApplicationConfiguration.staticContentPrefixCached,enableGrid:!1,enableGuides:!1,customFontCssUrl:getCustomFontUrl(),typekit:{kit:getTypekitData()},variables:content,projectName:ProjectsService.currentProjectName,breakpointPages:PagesService.getBreakpointPages(),ngCanvas:$window.useAntiFlicker?canvases.offscreenNgCanvas:void 0,useAntiFlicker:!!$window.useAntiFlicker,canvasDataApiUrlTemplate:_.template("".concat(window.location.origin,"/api/projects/").concat($window.ApplicationConfiguration.project.hash,"/pages/<%= pageId %>/canvasData")),responsiveModeStyles:["".concat($window.ApplicationConfiguration.uxpinURL,"/public/responsive-view.css")],portalContainer:container},customOptions))).on(window.uxpinEngine.Page.Events.HANDLE_TEXT_LINK,function(link){var currentState,page=PagesService.getPageByName(link)||PagesService.getPageById(link);page?(CanvasContainerHeight.saveHeightFromDom(),currentState=$state.current.name,$state.go(currentState,{pageId:PagesService.getPageByBreakpoint(page.id_page)}),stopInteractionLoops()):window.open((currentState=link,new RegExp("^(http|https)://","i").test(link)?currentState:"https://".concat(currentState)),"_blank","noopener")}),_page.on(window.uxpinEngine.Page.Events.STORYBOOK_LOAD_ERROR,function(){var className,toastData;toastId||(className="".concat(ToastifyEnums.CLASSES.INCREASED_PADDING," fonts-toast ").concat(ToastifyEnums.CLASSES.WIDE),className=_.extend({},ToastifyEnums.STYLES.TOP_RIGHT,{type:uxpinSharedComponents.Toastify.toast.TYPE.ERROR,onClose:function(){toastId=null},className:className,bodyClassName:"font-size-base"}),toastData=uxpinSharedComponents.React.createElement("div",{},uxpinSharedComponents.React.createElement("h1",{className:"toast-heading"},"Looks like you dont have access to Storybook components"),uxpinSharedComponents.React.createElement("p",{},"Please double check if you logged in and have access to the library.")),toastId=uxpinSharedComponents.Toastify.toast(toastData,className))}),$window.useAntiFlicker||$rootScope.$emit(PreviewEnums.ON_PAGE_INITIALIZED),_page.on(window.uxpinEngine.Page.Events.NAVIGATE,function(action,data,animation){var pageAnimation;Preview.getAnimation()||(animation&&((pageAnimation={}).name=animation.show,pageAnimation.duration=animation.duration,pageAnimation.easing=animation.easing),animation=data&&data.target||"_self","link_back"===action?$rootScope.$emit(PreviewEnums.NAVIGATE_HISTORY_BACK):"link_page"===action?"_blank"===data.target?$window.open("".concat(window.location.href.split("/pages/")[0],"/pages/").concat(data.id_page),animation):pageAnimation&&pageAnimation.name?$rootScope.$emit(PreviewEnums.NAVIGATE_TO_PAGE,data.id_page,pageAnimation):$rootScope.$emit(PreviewEnums.NAVIGATE_TO_PAGE,data.id_page,null):"link_url"===action?$window.open(data.url,animation):"external_request"===action&&("get"===data.requestMethod?$http.get(data.url).then(function(result){$log.log(result.data)}):"post"===data.requestMethod&&InteractionsService.apiRequestPost(data,_page)))}),_page.on(window.uxpinEngine.Page.Events.ELEMENTS_FONTS_LOADED,function(data){MissingLocalFonts.initElementFonts(data.fonts),data.showMissingFonts&&MissingLocalFonts.showNotification(),areFontsLoadedDeferred.resolve(!0)}),_page.on(window.uxpinEngine.Page.Events.SCROLL_TO_Y,function(y,animation,delay){var el,scrollableContainer=(el=_scrollableContainer)&&el.scrollHeight>el.offsetHeight?_scrollableContainer:_container;ResponsiveModeService.isResponsiveMode()&&(scrollableContainer=window),setTimeout(function(){$window.InteractionsAnimations.processScroll(scrollableContainer,y,animation.duration,animation)},delay||0)}),_page.on(window.uxpinEngine.Page.Events.LOAD_FUNCTION_FINISHED,function(){setTimeout(function(){var mode;updateOffset(),pageLoaded=!0,$window.useAntiFlicker&&(mode="",_loadedPage&&(mode=_loadedPage.MODE,_loadedPage.setScale(1),_loadedPage.clear()),_loadedPage=_page,setScale(scale),$window.useAntiFlicker&&$rootScope.$emit(PreviewEnums.ON_PAGE_INITIALIZED),finishLoading(canvases),isLoadingFinishedDeffered.resolve(!1),mode===MODES.SPEC?$rootScope.$emit(PreviewEnums.ON_PREVIEW_MODE_CHANGED,"specification"):mode===MODES.DOCUMENTATION?$rootScope.$emit(PreviewEnums.ON_PREVIEW_MODE_CHANGED,"documentation"):mode===MODES.COMMENT&&$rootScope.$emit(PreviewEnums.ON_PREVIEW_MODE_CHANGED,"comment")),$rootScope.$emit(PreviewEnums.ON_PAGE_LOADED)},0)}),_page.on(window.uxpinEngine.Page.Events.ZOOM_IN,function(params){$rootScope.$emit(PreviewEnums.ON_ZOOM_IN,params)}),_page.on(window.uxpinEngine.Page.Events.ZOOM_OUT,function(params){$rootScope.$emit(PreviewEnums.ON_ZOOM_OUT,params)}),_page.on(window.uxpinEngine.Page.Events.ZOOM_RESET,function(){$rootScope.$emit(PreviewEnums.ON_ZOOM_RESET)}),$window.addEventListener("resize",onResize),$window.addEventListener("keydown",onKeyDown),$window.addEventListener("resize",onWindowResize),_page},isDocumentationAvailable:function(){var documentation;return!!_page&&!!(documentation=getDocumentation()).length&&(_.some(documentation,"content")||_.some(documentation,"idPin"))},isDocumentationMode:function(){return!!_page&&_page.isDocumentationMode()},isGridVisible:function(type){return!!gridVisibility[type]},isInteractionsShare:function(){return _isInteractionsShare},isPageLoaded:function(){return pageLoaded},isLoadingFinished:function(){return isLoadingFinishedDeffered.promise},isPageWithKeyboardActions:function(){return _page&&_page.hasKeyboardInteractions([KEY_CODES.ARROW_LEFT,KEY_CODES.ARROW_RIGHT])},isSpecMode:function(){return!!_page&&_page.MODE===MODES.SPEC},loadPageInContainer:function(data){var deferred=$q.defer(),fontsLoadedDeferred=$q.defer(),timeoutExceeded=!1,page=(data||deferred.reject(null),new $window.uxpinEngine.Page({canvasDataApiUrlTemplate:_.template("".concat(window.location.origin,"/api/projects/").concat($window.ApplicationConfiguration.project.hash,"/pages/<%= pageId %>/canvasData")),responsiveModeStyles:["".concat($window.ApplicationConfiguration.uxpinURL,"/public/uxpin.css?").concat(Date.now())],codeComponentsEnabled:FeatureToggler.merge,isStyleGuide:!0,mode:$window.uxpinEngine.Page.Modes.PREVIEW,userContentPrefix:$window.ApplicationConfiguration.userContentPrefix,userContentPrefixCached:$window.ApplicationConfiguration.userContentPrefixCached,staticContentPrefixCached:$window.ApplicationConfiguration.staticContentPrefixCached,enableGuides:!1,customFontCssUrl:getCustomFontUrl(),typekit:{kit:getTypekitData()},variables:Variables.getVariables()})),fontTimeout=$timeout(function(){timeoutExceeded=!0,fontsLoadedDeferred.resolve(!0)},3e3);return page.on(window.uxpinEngine.Page.Events.ELEMENTS_FONTS_LOADED,function(){timeoutExceeded||($timeout(function(){fontsLoadedDeferred.resolve(!0)},100),$timeout.cancel(fontTimeout))}),page.on(window.uxpinEngine.Page.Events.LOAD_FUNCTION_FINISHED,function(){window.requestAnimationFrame(function(){deferred.resolve(page.getCanvas())})}),$timeout(function(){page.load(data)}),$q.all([deferred.promise,fontsLoadedDeferred.promise]).then(function(pageData){return{canvas:pageData[0],page:page}})},resetGuides:function(){setGuidesVisibility(!1)},refreshGrid:function(){_page&&(_page.canvas.gridable.updateScale(_page.canvas.scale),_page.refreshGrid())},refreshGuides:function(){_page&&_page.canvas.guideable.updateGuides(!0)},startResponsiveMode:function(){_page.startIframeMode()},selectElement:function(element,replaceSelection){replaceSelection=!!_.isUndefined(replaceSelection)||replaceSelection,_page&&_page.selectElement(element.id,replaceSelection)},setAnnotationHighlight:function(id,shouldHighlight){_page.setAnnotationHighlight(id,shouldHighlight)},setAnnotationSelection:function(id,shouldSelect){_page.setAnnotationSelection(id,shouldSelect)},setBreakpointPages:function(pages){_page.setBreakpointPages(pages)},setProjectName:function(name){_page.setProjectName(name)},setEnableGridOption:setEnableGridOption,setGridVisibility:function(type,isVisible){isVisible&&setEnableGridOption(!0),gridVisibility[type]=isVisible,_page.updateGrid(type,{visible:isVisible})},setGuides:function(){setGuidesVisibility(!0)},setGuidesVisibility:setGuidesVisibility,setInteractionsEnabled:function(status){_page&&status?_page.enableInteractions():_page&&!status&&_page.disableInteractions()},setMode:function(mode){_page.setMode(mode),updateCanvasRectangle(),updateOffset()},setResponsiveMode:function(isResponsiveMode){_page&&(_page.setOptions({isResponsiveMode:isResponsiveMode}),isResponsiveMode)&&!function updateChildrenTransform(children){var canvasChildren=_page&&_page.canvas.children||[];_.map(children||canvasChildren,function(child){child.view.updateTransform(child),child.children&&updateChildrenTransform(child.children)})}()},setScale:setScale,setScrollableContainer:function(scrollableContainer){_scrollableContainer&&_scrollableContainer.removeEventListener("scroll",onScroll),(_scrollableContainer=scrollableContainer).addEventListener("scroll",onScroll)},setScrollableWrapper:function(scrollableWrapper){_scrollableWrapper&&_scrollableWrapper.removeEventListener("scroll",onScroll),(_scrollableWrapper=scrollableWrapper).addEventListener("scroll",onScroll)},stopInteractionLoops:stopInteractionLoops,triggerWindowLoad:function(){_page&&_page.triggerWindowLoad()},updateCanvasRectangle:updateCanvasRectangle,updateOffset:updateOffset,updateTypekitKit:function(data){_page.updateTypekitKit(data)}}}])}(),angular.module("core").factory("EscapeHtmlService",[function(){"use strict";function get_html_translation_table(table,quote_style){var decimal,entities={},hash_map={},constMappingTable={},constMappingQuoteStyle={};if(constMappingTable[0]="HTML_SPECIALCHARS",constMappingTable[1]="HTML_ENTITIES",constMappingQuoteStyle[0]="ENT_NOQUOTES",constMappingQuoteStyle[2]="ENT_COMPAT",constMappingQuoteStyle[3]="ENT_QUOTES",constMappingTable=isNaN(table)?table?table.toUpperCase():"HTML_SPECIALCHARS":constMappingTable[table],table=isNaN(quote_style)?quote_style?quote_style.toUpperCase():"ENT_COMPAT":constMappingQuoteStyle[quote_style],"HTML_SPECIALCHARS"!==constMappingTable&&"HTML_ENTITIES"!==constMappingTable)throw new Error("Table: ".concat(constMappingTable," not supported"));for(decimal in"HTML_ENTITIES"===constMappingTable&&(entities[160]="&nbsp;",entities[161]="&iexcl;",entities[162]="&cent;",entities[163]="&pound;",entities[164]="&curren;",entities[165]="&yen;",entities[166]="&brvbar;",entities[167]="&sect;",entities[168]="&uml;",entities[169]="&copy;",entities[170]="&ordf;",entities[171]="&laquo;",entities[172]="&not;",entities[173]="&shy;",entities[174]="&reg;",entities[175]="&macr;",entities[176]="&deg;",entities[177]="&plusmn;",entities[178]="&sup2;",entities[179]="&sup3;",entities[180]="&acute;",entities[181]="&micro;",entities[182]="&para;",entities[183]="&middot;",entities[184]="&cedil;",entities[185]="&sup1;",entities[186]="&ordm;",entities[187]="&raquo;",entities[188]="&frac14;",entities[189]="&frac12;",entities[190]="&frac34;",entities[191]="&iquest;",entities[192]="&Agrave;",entities[193]="&Aacute;",entities[194]="&Acirc;",entities[195]="&Atilde;",entities[196]="&Auml;",entities[197]="&Aring;",entities[198]="&AElig;",entities[199]="&Ccedil;",entities[200]="&Egrave;",entities[201]="&Eacute;",entities[202]="&Ecirc;",entities[203]="&Euml;",entities[204]="&Igrave;",entities[205]="&Iacute;",entities[206]="&Icirc;",entities[207]="&Iuml;",entities[208]="&ETH;",entities[209]="&Ntilde;",entities[210]="&Ograve;",entities[211]="&Oacute;",entities[212]="&Ocirc;",entities[213]="&Otilde;",entities[214]="&Ouml;",entities[215]="&times;",entities[216]="&Oslash;",entities[217]="&Ugrave;",entities[218]="&Uacute;",entities[219]="&Ucirc;",entities[220]="&Uuml;",entities[221]="&Yacute;",entities[222]="&THORN;",entities[223]="&szlig;",entities[224]="&agrave;",entities[225]="&aacute;",entities[226]="&acirc;",entities[227]="&atilde;",entities[228]="&auml;",entities[229]="&aring;",entities[230]="&aelig;",entities[231]="&ccedil;",entities[232]="&egrave;",entities[233]="&eacute;",entities[234]="&ecirc;",entities[235]="&euml;",entities[236]="&igrave;",entities[237]="&iacute;",entities[238]="&icirc;",entities[239]="&iuml;",entities[240]="&eth;",entities[241]="&ntilde;",entities[242]="&ograve;",entities[243]="&oacute;",entities[244]="&ocirc;",entities[245]="&otilde;",entities[246]="&ouml;",entities[247]="&divide;",entities[248]="&oslash;",entities[249]="&ugrave;",entities[250]="&uacute;",entities[251]="&ucirc;",entities[252]="&uuml;",entities[253]="&yacute;",entities[254]="&thorn;",entities[255]="&yuml;"),"ENT_NOQUOTES"!==table&&(entities[34]="&quot;"),"ENT_QUOTES"===table&&(entities[39]="&#39;"),entities[60]="&lt;",entities[62]="&gt;",entities)entities.hasOwnProperty(decimal)&&(hash_map[String.fromCharCode(decimal)]=entities[decimal]);return hash_map}return{escape:function(value){var string=value,value="ENT_QUOTES",double_encode=void 0,hash_map=get_html_translation_table("HTML_ENTITIES",value),symbol="";if(string=null===string?"":"".concat(string),!hash_map)return!1;if(value&&"ENT_QUOTES"===value&&(hash_map["'"]="&#039;"),double_encode||null===double_encode)for(symbol in hash_map)hash_map.hasOwnProperty(symbol)&&(string=string.split(symbol).join(hash_map[symbol]));else string=string.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(ignore,text,entity){for(symbol in hash_map)hash_map.hasOwnProperty(symbol)&&(text=text.split(symbol).join(hash_map[symbol]));return text+entity});return string},escapeRegExp:function(value){return value.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},decode:function(value){var entity,quote_style="ENT_QUOTES",hash_map={},symbol="",tmp_str="",tmp_str=value.toString();if(!1===(hash_map=get_html_translation_table("HTML_ENTITIES",quote_style)))return!1;for(symbol in delete hash_map["&"],hash_map["&"]="&amp;",hash_map)entity=hash_map[symbol],tmp_str=tmp_str.split(entity).join(symbol);return tmp_str=tmp_str.split("&#039;").join("'")}}}]),function(){"use strict";angular.module("core").factory("ExportService",function(){return{isExport:function(){return"export"===ApplicationConfiguration.mode},isMenuEnabled:function(){return ApplicationConfiguration.menuEnabled}}})}(),angular.module("core").factory("exportImage",exportImage),exportImage.$inject=["_","Engine","$q","$document","$window","$http"],function(){"use strict";angular.module("core").factory("FeatureToggler",function(){var features=_.clone(ApplicationConfiguration.features||ApplicationConfiguration.project.features)||{};return{teamComments:features.team_comments,responsiveMode:features.responsive_mode,globalProperties:features.global_properties,commentsAssignment:features.comments_assignment,specMode:features.spec_mode,specModeNoLogin:features.spec_mode_no_login,specModeStyleguide:features.spec_mode_styleguide,designViews:features.design_views,documentationMode:features.docs,usabilityTesting:features.user_testing,merge:features.merge}})}(),angular.module("core").factory("FileService",FileService);var DEFAULT_EXTENSION="png";function FileService(){"use strict";return{getFilename:function(url,returnFullname,customName){var fileData=[];if((url=(url||"").split("?")[0])&&function(url){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/.test(url)}(url))return url=url.split("/").pop(),fileData.push(url.replace(/\.[^/.]+$/,"")),-1!==url.indexOf(".")?fileData.push(/[^.]+$/.exec(url)[0]||DEFAULT_EXTENSION):fileData.push(DEFAULT_EXTENSION),fileData=2===fileData.length?returnFullname?fileData.join("."):{name:customName||fileData[0],extension:fileData[1]}:fileData}}}function getFormattedDependencies(dependencies,_){return _.map(dependencies,function(version,name){return'    "'.concat(name,'":"').concat(version,'"')}).join(",\n")}function zenMode(Settings,ZenModeService){"use strict";return{restrict:"E",link:function(scope,elem,attrs){var ZEN_MODE_CLASS="zen-mode",isZenMode=function(){return document.body.classList.contains(ZEN_MODE_CLASS)};Settings.enableFullScreen&&(document.body.classList.add(ZEN_MODE_CLASS),ZenModeService.updateMode(!0)),elem.on("click",function(e){var isFullScreen=isZenMode();e.preventDefault(),isFullScreen?document.body.classList.remove(ZEN_MODE_CLASS):document.body.classList.add(ZEN_MODE_CLASS);ZenModeService.updateMode(!isFullScreen)})}}}!function(){"use strict";function isMinChange(prevValue,nextValue){return Math.abs(nextValue-prevValue)<=2}function FitCanvas(_,$document,$window,$rootScope,Engine,$stateParams,$state){var content,offContentResize,offWindowResize,offStateChange,offZoomInitialization,canvasWidth,canvasHeight,selectedFitStrategy,isDisabled=!1,preventResetZoom=!1,zoomData={},MIN_ZOOM_VALUE=.01,MARGIN=20,isInitialized=!1;function addResizeListeners(){var element,callback,resizeObserver,onWindowResizeThrottled;offContentResize||(element=content,callback=onResize,(resizeObserver=new ResizeObserver(function(){callback()})).observe(element),offContentResize=function(){return resizeObserver.unobserve(element)}),offWindowResize||(onWindowResizeThrottled=_.throttle(onWindowResize,100),$window.addEventListener("resize",onWindowResizeThrottled),offWindowResize=function(){return $window.removeEventListener("resize",onWindowResizeThrottled)})}function removeResizeListeners(){offContentResize&&(offContentResize(),offContentResize=null),offWindowResize&&(offWindowResize(),offWindowResize=null)}function setFitStrategy(strategy){(_.values(PreviewEnums.FIT_STRATEGIES).includes(strategy)?(selectedFitStrategy=strategy,addResizeListeners):(selectedFitStrategy=null,removeResizeListeners))()}function setZoom(scale){scale=_.round(scale,4);$rootScope.$emit(PreviewEnums.ON_ZOOM_UPDATE,100*scale)}function canCalculateZoom(){return isDisabled||!selectedFitStrategy||!canvasWidth||!canvasHeight||!content}function calculateAndSetZoom(){if(!canCalculateZoom()){var zoom;switch(selectedFitStrategy){case PreviewEnums.FIT_STRATEGIES.FIT_TO_SCREEN:zoom=Math.max(MIN_ZOOM_VALUE,Math.min((zoomData.wrapperWidth-MARGIN)/zoomData.width,(zoomData.wrapperHeight-MARGIN)/zoomData.height));break;case PreviewEnums.FIT_STRATEGIES.FIT_TO_WIDTH:zoom=Math.max(MIN_ZOOM_VALUE,(zoomData.wrapperWidth-MARGIN)/zoomData.width);break;default:zoom=1}_.isNumber(zoom)&&!isNaN(zoom)&&0<zoom&&zoom!==1/0&&setZoom(zoom)}}function updateZoomData(onChange){var wrapperWidth,wrapperHeight;canCalculateZoom()||(wrapperWidth=content.offsetWidth,wrapperHeight=content.offsetHeight,wrapperWidth={wrapperWidth:isMinChange(zoomData.wrapperWidth,wrapperWidth)?zoomData.wrapperWidth:wrapperWidth,wrapperHeight:isMinChange(zoomData.wrapperHeight,wrapperHeight)?zoomData.wrapperHeight:wrapperHeight,width:isMinChange(zoomData.width,canvasWidth)?zoomData.width:canvasWidth,height:isMinChange(zoomData.height,canvasHeight)?zoomData.height:canvasHeight},wrapperHeight=zoomData,zoomData=wrapperWidth,_.isEqual(wrapperHeight,wrapperWidth))||onChange&&onChange()}function onResize(){updateZoomData(function(){calculateAndSetZoom()})}function onWindowResize(){$rootScope.$apply(function(){updateZoomData(function(){calculateAndSetZoom()})})}function resetZoom(){setZoom(1)}return{block:function(){isDisabled=!0},calculateAndSetZoom:calculateAndSetZoom,destroy:function(){if(!isInitialized)return!1;offStateChange(),offZoomInitialization(),removeResizeListeners(),isInitialized=!1},getStrategy:function(){return selectedFitStrategy},init:function(){if(isInitialized)return!1;content=$document[0].querySelector("#canvas-wrapper"),offStateChange=$rootScope.$on("$stateChangeSuccess",function(){$stateParams.zoom!==selectedFitStrategy&&(setFitStrategy($stateParams.zoom),selectedFitStrategy?(updateZoomData(),calculateAndSetZoom()):(preventResetZoom||resetZoom(),preventResetZoom=!1))}),offZoomInitialization=$rootScope.$on(PreviewEnums.ZOOM_INITIALIZED,function(){selectedFitStrategy&&(updateZoomData(),calculateAndSetZoom(),offZoomInitialization())}),setFitStrategy($stateParams.zoom),updateZoomData(),calculateAndSetZoom(),isInitialized=!0},resetStateZoomParam:function(){var shouldPreventResetZoom=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];$stateParams.zoom&&($state.go($state.current.name,{zoom:""}),setFitStrategy(null),shouldPreventResetZoom)&&(preventResetZoom=!0)},resetZoom:resetZoom,setCanvasSize:function(width,height){canvasWidth=width,canvasHeight=height,updateZoomData(),calculateAndSetZoom()},unblock:function(){isDisabled=!1}}}angular.module("core").factory("FitCanvas",FitCanvas),FitCanvas.$inject=["_","$document","$window","$rootScope","Engine","$stateParams","$state"]}(),function(){function Font(_,$http,$q,$window){"use strict";var FONT_TYPES={CUSTOM:"C",TYPEKIT:"T",GOOGLE:"G",STANDARD:"S"},FONT_VARIANTS_NAMES_HAIRLINE_ITALIC="Hairline Italic",FONT_VARIANTS_NAMES_ULTRA_LIGHT_ITALIC="Ultra-Light Italic",FONT_VARIANTS_NAMES_THIN="Thin",FONT_VARIANTS_NAMES_THIN_ITALIC="Thin Italic",FONT_VARIANTS_NAMES_EXTRA_LIGHT="Extra-Light",FONT_VARIANTS_NAMES_EXTRA_LIGHT_ITALIC="Extra-Light Italic",FONT_VARIANTS_NAMES_LIGHT="Light",FONT_VARIANTS_NAMES_LIGHT_ITALIC="Light Italic",FONT_VARIANTS_NAMES_REGULAR="Regular",FONT_VARIANTS_NAMES_ITALIC="Italic",FONT_VARIANTS_NAMES_MEDIUM="Medium",FONT_VARIANTS_NAMES_MEDIUM_ITALIC="Medium Italic",FONT_VARIANTS_NAMES_BOOK="Book",FONT_VARIANTS_NAMES_BOOK_ITALIC="Book Italic",FONT_VARIANTS_NAMES_SEMI_BOLD="Semi-Bold",FONT_VARIANTS_NAMES_SEMI_BOLD_ITALIC="Semi-Bold Italic",FONT_VARIANTS_NAMES_BOLD="Bold",FONT_VARIANTS_NAMES_BOLD_ITALIC="Bold Italic",FONT_VARIANTS_NAMES_EXTRA_BOLD="Extra-Bold",FONT_VARIANTS_NAMES_EXTRA_BOLD_ITALIC="Extra-Bold Italic",FONT_VARIANTS_NAMES_HEAVY="Heavy",FONT_VARIANTS_NAMES_HEAVY_ITALIC="Heavy Italic",FONT_VARIANTS_NAMES_BLACK="Black",FONT_VARIANTS_NAMES_BLACK_ITALIC="Black Italic",FONT_VARIANTS_NAMES_ULTRA_LIGHT="Ultra-Light",FONT_VARIANTS={THIN:"n1",EXTRA_LIGHT:"n2",LIGHT:"n3",REGULAR:"n4",MEDIUM:"n5",SEMI_BOLD:"n6",BOLD:"n7",EXTRA_BOLD:"n8",BLACK:"n9",THIN_ITALIC:"i1",EXTRA_LIGHT_ITALIC:"i2",LIGHT_ITALIC:"i3",ITALIC:"i4",MEDIUM_ITALIC:"i5",SEMI_BOLD_ITALIC:"i6",BOLD_ITALIC:"i7",EXTRA_BOLD_ITALIC:"i8",BLACK_ITALIC:"i9"},customVariantsToNamesMap={0:"Hairline",1:"Hairline Italic",2:"Ultra-Light",3:"Ultra-Light Italic",4:"Thin",5:"Thin Italic",6:"Extra-Light",7:"Extra-Light Italic",8:"Light",9:"Light Italic",10:"Regular",11:"Italic",12:"Medium",13:"Medium Italic",14:"Book",15:"Book Italic",16:"Semi-Bold",17:"Semi-Bold Italic",18:"Bold",19:"Bold Italic",20:"Extra-Bold",21:"Extra-Bold Italic",22:"Heavy",23:"Heavy Italic",24:"Black",25:"Black Italic"},namesToIndexesMap={},variantsToNamesMap=(namesToIndexesMap["Hairline"]=0,namesToIndexesMap[FONT_VARIANTS_NAMES_HAIRLINE_ITALIC]=1,namesToIndexesMap[FONT_VARIANTS_NAMES_ULTRA_LIGHT]=2,namesToIndexesMap[FONT_VARIANTS_NAMES_ULTRA_LIGHT_ITALIC]=3,namesToIndexesMap[FONT_VARIANTS_NAMES_THIN]=4,namesToIndexesMap[FONT_VARIANTS_NAMES_THIN_ITALIC]=5,namesToIndexesMap[FONT_VARIANTS_NAMES_EXTRA_LIGHT]=6,namesToIndexesMap[FONT_VARIANTS_NAMES_EXTRA_LIGHT_ITALIC]=7,namesToIndexesMap[FONT_VARIANTS_NAMES_LIGHT]=8,namesToIndexesMap[FONT_VARIANTS_NAMES_LIGHT_ITALIC]=9,namesToIndexesMap[FONT_VARIANTS_NAMES_REGULAR]=10,namesToIndexesMap[FONT_VARIANTS_NAMES_ITALIC]=11,namesToIndexesMap[FONT_VARIANTS_NAMES_MEDIUM]=12,namesToIndexesMap[FONT_VARIANTS_NAMES_MEDIUM_ITALIC]=13,namesToIndexesMap[FONT_VARIANTS_NAMES_BOOK]=14,namesToIndexesMap[FONT_VARIANTS_NAMES_BOOK_ITALIC]=15,namesToIndexesMap[FONT_VARIANTS_NAMES_SEMI_BOLD]=16,namesToIndexesMap[FONT_VARIANTS_NAMES_SEMI_BOLD_ITALIC]=17,namesToIndexesMap[FONT_VARIANTS_NAMES_BOLD]=18,namesToIndexesMap[FONT_VARIANTS_NAMES_BOLD_ITALIC]=19,namesToIndexesMap[FONT_VARIANTS_NAMES_EXTRA_BOLD]=20,namesToIndexesMap[FONT_VARIANTS_NAMES_EXTRA_BOLD_ITALIC]=21,namesToIndexesMap[FONT_VARIANTS_NAMES_HEAVY]=22,namesToIndexesMap[FONT_VARIANTS_NAMES_HEAVY_ITALIC]=23,namesToIndexesMap[FONT_VARIANTS_NAMES_BLACK]=24,namesToIndexesMap[FONT_VARIANTS_NAMES_BLACK_ITALIC]=25,{}),fontVariantPriorities=(variantsToNamesMap[FONT_VARIANTS.THIN]="Thin",variantsToNamesMap[FONT_VARIANTS.EXTRA_LIGHT]="Extra-Light",variantsToNamesMap[FONT_VARIANTS.LIGHT]="Light",variantsToNamesMap[FONT_VARIANTS.REGULAR]="Regular",variantsToNamesMap[FONT_VARIANTS.MEDIUM]="Medium",variantsToNamesMap[FONT_VARIANTS.SEMI_BOLD]="Semi-Bold",variantsToNamesMap[FONT_VARIANTS.BOLD]="Bold",variantsToNamesMap[FONT_VARIANTS.EXTRA_BOLD]="Extra-Bold",variantsToNamesMap[FONT_VARIANTS.BLACK]="Black",variantsToNamesMap[FONT_VARIANTS.THIN_ITALIC]="Thin Italic",variantsToNamesMap[FONT_VARIANTS.EXTRA_LIGHT_ITALIC]="Extra-Light Italic",variantsToNamesMap[FONT_VARIANTS.LIGHT_ITALIC]="Light Italic",variantsToNamesMap[FONT_VARIANTS.ITALIC]="Italic",variantsToNamesMap[FONT_VARIANTS.MEDIUM_ITALIC]="Medium Italic",variantsToNamesMap[FONT_VARIANTS.SEMI_BOLD_ITALIC]="Bold Italic",variantsToNamesMap[FONT_VARIANTS.BOLD_ITALIC]="Bold Italic",variantsToNamesMap[FONT_VARIANTS.EXTRA_BOLD_ITALIC]="Extra-Bold Italic",variantsToNamesMap[FONT_VARIANTS.BLACK_ITALIC]="Black Italic",["n4","n5","n3","n6","n2","n7","n1","n8","n9","i4","i5","i3","i6","i2","i7","i1","i8","i9"]),customFontVariantPriorities=["9","10","8","11","7","12","6","13","5","14","4","15","3","16","2","17","1","18","0","19","20","21","22","23","24","25"],zipCache={};function getFontFamilyName(fontData,variants,variantPriorities){variants=_.isString(variants)?variants:function(variants,variantPriorities){var variant;if(_.isArray(variantPriorities))for(var i=0;i<variantPriorities.length;i++)if(variant=variantPriorities[i],_.find(variants,function(v){return v.shorthand===variant}))return variant}(variants,variantPriorities);return"".concat(fontData.type,"-").concat(fontData.family,"-").concat(variants)}function getFontFamily(font,variants){var fontData=font.fontData;if(fontData){if("L"===fontData.type||"S"===fontData.type){if($window.uxpinEngine.Page.utils.GoogleFontLoader.isGoogleFontCache[(fontData.family||"").toLowerCase()])return fontData.family;if("S"===fontData.type)return font.fontFamily;if(_.isString(variants))return variants;if("L"===fontData.type)return fontData.family}return"C"===fontData.type?getFontFamilyName(fontData,variants,customFontVariantPriorities):getFontFamilyName(fontData,variants,fontVariantPriorities)}}return{variantsToNamesMap:variantsToNamesMap,FONT_VARIANTS:FONT_VARIANTS,FONT_TYPES:FONT_TYPES,isGoogleFont:function(fontData){return fontData.type===FONT_TYPES.GOOGLE},isCustomFont:function(fontData){return fontData.type===FONT_TYPES.CUSTOM},isTypekitFont:function(fontData){return fontData.type===FONT_TYPES.TYPEKIT},getGoogleFontLink:function(fontName){return"https://fonts.google.com/specimen/".concat(fontName)},getTypekitFontLink:function(fontName){return"https://typekit.com/fonts/".concat((fontName||"").toLowerCase().replace(/ /g,"-"))},getVariantName:function(variant,displayVariant){return displayVariant||variantsToNamesMap[variant]||customVariantsToNamesMap[variant]||variant},getCompareVariantsFn:function(){return function(a,b){return namesToIndexesMap[a.name]<namesToIndexesMap[b.name]?-1:1}},getCompareFontSizeFn:function(){return function(a,b){return parseInt(a)-parseInt(b)}},getFontFamily:getFontFamily,getFontStyles:function(font,variant){variant=variant||{};var fontData=font.fontData,styles={};if(fontData)return styles["font-family"]=getFontFamily(font,variant.shorthand),$window.uxpinEngine.Page.utils.GoogleFontLoader.isGoogleFontCache[(fontData.family||"").toLowerCase()]&&(styles["font-weight"]=font.weights?font.weights[variant.shorthand]:fontData.weight,font.italics&&font.italics[variant.shorthand]||!font.italics&&fontData.italic)&&(styles["font-style"]="italic"),styles},isBold:function(font){return font&&"bold"===font.fontWeight||400<parseInt(font.fontWeight)},isItalic:function(font){return font&&"italic"===font.fontStyle},hasUnderlineDecoration:function(font){return font&&_.isString(font.textDecoration)&&-1!==font.textDecoration.indexOf("underline")},hasLineThroughDecoration:function(font){return font&&_.isString(font.textDecoration)&&-1!==font.textDecoration.indexOf("line-through")},downloadCustomFont:function(fontName,variants){var idAccount=window.ApplicationConfiguration.project.id_account,uxpinApi=window.ApplicationConfiguration.uxpinApi,key=fontName+variants.join("_"),deferred=$q.defer();return zipCache[key]?(deferred.resolve(zipCache[key]),deferred.promise):(zipCache[key]={isDownloading:!0},$http({method:"POST",url:"".concat(uxpinApi,"/fonts/custom/zip/"),data:{idAccount:idAccount,variants:variants,family:fontName}}).then(function(response){response=response&&response.data?response.data:null;return zipCache[key]={url:response,isDownloading:!1},zipCache[key]}).catch(function(){throw zipCache[key]=null,new Error("Font download error ".concat(key))}))},getTransform:function(font){var textTransform=font&&"none"!==font.textTransform?font.textTransform:null,font=font&&"normal"!==font.fontVariant?font.fontVariant:null;return textTransform||font}}}angular.module("core").factory("Font",Font),Font.$inject=["_","$http","$q","$window"]}(),function(){"use strict";function GlobalProperties($http,$window){var globalProperties=[],uxpinApi=$window.ApplicationConfiguration.uxpinApi,projectHash=$window.ApplicationConfiguration.project.hash;return{getGlobalProperties:function(){return globalProperties},fetchGlobalProperties:function(){return $http({method:"GET",url:"".concat(uxpinApi,"/documents/hash/").concat(projectHash,"/global-properties")}).then(function(response){return globalProperties=response.data}).catch(function(){return[]})}}}angular.module("core").factory("GlobalProperties",GlobalProperties),GlobalProperties.$inject=["$http","$window"]}(),function(){"use strict";angular.module("core").factory("GuidesService",["_","Engine","ProjectsService","PagesService",function(_,Engine,ProjectsService,PagesService){function areLegacyGuidesAvailable(){var pageId=PagesService.currentPageId;return!_.isEmpty(ProjectsService.currentProjectSettings)&&ProjectsService.currentProjectSettings.guides&&ProjectsService.currentProjectSettings.guides[pageId]}function areNewGuidesAvailable(){var page=Engine.getPage();return page&&page.canvas.guides&&0<page.canvas.guides.length}function getLegacyGuides(){var pageId=PagesService.currentPageId;return areLegacyGuidesAvailable()?ProjectsService.currentProjectSettings.guides[pageId]:[]}return{areLegacyGuidesAvailable:areLegacyGuidesAvailable,areNewGuidesAvailable:areNewGuidesAvailable,areGuidesAvailable:function(){return!ApplicationConfiguration.isDesignSystem&&(areNewGuidesAvailable()||areLegacyGuidesAvailable())},areGuidesVisible:function(){return Engine.areGuidesVisible()},getLegacyGuides:getLegacyGuides,refreshGuides:function(){Engine.refreshGuides()},setGuides:function(isVisible){Engine.setGuidesVisibility(isVisible),areNewGuidesAvailable()||areLegacyGuidesAvailable()&&(isVisible=isVisible?getLegacyGuides():[],Engine.displayLegacyGuides(isVisible))}}}])}(),angular.module("core").factory("ImageService",["$http","$q","_",function($http,$q,_){"use strict";var sizeCache={},dimensionsCache={};var zipCache={};return{getImageSize:function(imageUrl){var deferred=$q.defer();return sizeCache[imageUrl]?(deferred.resolve(sizeCache[imageUrl]),deferred.promise):$http({method:"POST",url:"/api/utils/file/size",data:{file:imageUrl}}).then(function(response){response=response&&response.data?response.data.size:null;return sizeCache[imageUrl]=response})},getImageDimensions:function(imageUrl){var img,deferred=$q.defer();return dimensionsCache[imageUrl]?deferred.resolve(dimensionsCache[imageUrl]):((img=new Image).addEventListener("load",function(){dimensionsCache[imageUrl]={width:img.naturalWidth,height:img.naturalHeight},deferred.resolve(dimensionsCache[imageUrl])}),img.addEventListener("error",function(){deferred.reject()}),img.src=imageUrl),deferred.promise},downloadImages:function(projectName,files){var idAccount=window.ApplicationConfiguration.project.id_account,key=(window.ApplicationConfiguration.uxpinApi,projectName+idAccount),deferred=$q.defer();return zipCache[key]?(deferred.resolve(zipCache[key]),deferred.promise):(zipCache[key]={isDownloading:!0},$http({method:"POST",url:"/api/projects/assets",data:{idAccount:idAccount,projectName:projectName,files:files}}).then(function(response){response=response&&response.data?response.data:null;return zipCache[key]={url:response,isDownloading:!1},zipCache[key]}).catch(function(){throw zipCache[key]=null,new Error("Download images error ".concat(key))}))}}}]),function(){"use strict";function Integrations(_,$http,$window,$document,ProjectsService,Settings,$stateParams,$rootScope,$q,$timeout){var uxpinApi=$window.ApplicationConfiguration.uxpinApi,stateChangedPromise=$q.defer(),onStateChangeSuccessOff=$rootScope.$on("$stateChangeSuccess",function(){onStateChangeSuccessOff(),stateChangedPromise.resolve(!0)});return{init:function(){var fullStoryResponse;$http({method:"GET",url:"".concat(uxpinApi,"/documents/hash/").concat(ProjectsService.currentProjectHash,"/integrations")}).then(function(response){return response.data}).catch(function(){return{}}).then(function(response){fullStoryResponse=response;var deferred=$q.defer(),response=deferred.promise;return $timeout(function(){return deferred.resolve(!0)},500),$q.race([stateChangedPromise.promise,response])}).then(function(){var apiKey,script;fullStoryResponse.fullStory&&Settings.getModeSettings($stateParams.mode).fullStory&&(apiKey=fullStoryResponse.fullStory,(script=$document[0].createElement("script")).text="window['_fs_host'] = 'fullstory.com'; window['_fs_script'] = 'edge.fullstory.com/s/fs.js'; window['_fs_org'] = '".concat(_.escape(apiKey),"'; window['_fs_namespace'] = 'FS'; (function(m,n,e,t,l,o,g,y){ if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window[\"_fs_namespace\"].');} return;} g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[]; o=n.createElement(t);o.async=1;o.crossOrigin='anonymous';o.src='https://'+_fs_script; y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y); g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)}; g.anonymize=function(){g.identify(!!0)}; g.shutdown=function(){g(\"rec\",!1)};g.restart=function(){g(\"rec\",!0)}; g.log = function(a,b){g(\"log\",[a,b])}; g.consent=function(a){g(\"consent\",!arguments.length||a)}; g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)}; g.clearUserCookie=function(){}; g.setVars=function(n, p){g('setVars',[n,p]);}; g._w={};y='XMLHttpRequest';g._w[y]=m[y];y='fetch';g._w[y]=m[y]; if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)}; g._v=\"1.3.0\"; })(window,document,window['_fs_namespace'],'script','user');"),$document[0].head.appendChild(script))})}}}angular.module("core").factory("Integrations",Integrations),Integrations.$inject=["_","$http","$window","$document","ProjectsService","Settings","$stateParams","$rootScope","$q","$timeout"]}(),function(){"use strict";function Interactions(_,$http,$log,$window){return{apiRequestPost:function(data,_page){data=this.preparePayload(data.url,data.value,_page);$log.log(data),$http.post($window.ApplicationConfiguration.awsLambdaExternalRequestUrl,data).then(function(result){$log.log(result.data)})},preparePayload:function(targetUrl,payloadString,_page){payloadString=this.removeEnterKeyFromString(payloadString);var variablesInPayload=this.extractVariablesFromPayload(payloadString),elementsInPayload=this.extractElementsContentFromPayload(payloadString),variables=_page.variablesStore.state.list;return payloadString=this.replaceVariablesWithValues(variablesInPayload,payloadString,variables),payloadString=this.replaceElementsIdsWithContent(elementsInPayload,payloadString,_page),{url:targetUrl,payload:angular.fromJson(payloadString)}},removeEnterKeyFromString:function(payloadString){return payloadString.trim().replace(//g,"")},extractVariablesFromPayload:function(payloadString){payloadString=payloadString.match(/\$[a-zA-Z0-9_]+/g);return _.uniq(payloadString)},extractElementsContentFromPayload:function(payloadString){payloadString=payloadString.match(/'([a-z]|[0-9]|[A-Z])+'/g);return _.uniq(payloadString)},replaceVariablesWithValues:function(variablesInPayload,payloadString,variables){var _this21=this,payloadWithVariablesValues=payloadString;return variablesInPayload.forEach(function(variable){variable=_this21.extractVariableName(variable);var variableValue=_this21.getVariableValue(variables,variable);payloadWithVariablesValues=payloadWithVariablesValues.replace("$".concat(variable),'"'.concat(variableValue,'"'))}),payloadWithVariablesValues},replaceElementsIdsWithContent:function(elementsInPayload,payloadString,_page){var _this22=this,payloadWithElementsContent=payloadString;return elementsInPayload.forEach(function(element){var elementId=_this22.extractElementId(element),elementId=_this22.getElementContent(elementId,_page);payloadWithElementsContent=payloadWithElementsContent.replace(element,'"'.concat(elementId.trim(),'"'))}),payloadWithElementsContent},extractVariableName:function(variable){return variable.trim().replace("$","")},extractElementId:function(elementId){return elementId.replace(/'/g,"")},getVariableValue:function(variables,variable){variables=_.filter(variables,function(el){return el.name===variable});return 0<variables.length?variables[0].value||variables[0].defaultValue:""},getElementContent:function(elementId,_page){_page=_page.getElementById(elementId);return angular.isObject(_page)?_page.getVariableCompatibleElementContent():""}}}angular.module("core").factory("InteractionsService",Interactions),Interactions.$inject=["_","$http","$log","$window"]}(),function(){"use strict";function LiveSessionService($window,$document,$q,$rootScope,$state,$location,$translate,$log,Restangular,ProjectsService,PagesService,UsersService,LiveSessionInstanceService,Engine){function LiveSession(type){var _this23=this;this.type=type,this.liveShare=null,this.muted=!1,this.roomID=null,this.roomConfigurationOptions=null,this.onContentLoaded,this.onChangePageDuringSession,this.observerCallbacks=[],this.restangular=Restangular.withConfig(function(RestangularConfigurer){RestangularConfigurer.setBaseUrl("/api/live-presentation/")}),this.onChangePage=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(){_this23.roomId(null)})}var EVENTS=LiveShare.enums.EVENTS,ROOM_SETTINGS=LiveShare.enums.ROOM_SETTINGS,SESSION_TYPES=LiveShare.enums.SESSION_TYPES,debugConsole_log=function(){},debugConsole_count=function(){};return LiveSession.prototype.initializeLiveShare=function(){var liveShare=new LiveShare({socketURL:"".concat(ApplicationConfiguration.socketServerURL,"/live-presentation"),scrolledElement:"main .scrolled-content",relativeElement:".preview-container",canvasElement:".ng-canvas"});return liveShare.on(EVENTS.START,this.onLiveSessionStart.bind(this)),liveShare.on(EVENTS.FINISH,this.onLiveSessionFinish.bind(this)),liveShare.on(EVENTS.COLLABORATOR_JOIN,this.fireObserverCallback.bind(this,EVENTS.COLLABORATOR_JOIN)),liveShare.on(EVENTS.COLLABORATOR_LEFT,this.fireObserverCallback.bind(this,EVENTS.COLLABORATOR_LEFT)),liveShare.on(EVENTS.FOLLOW_CURSOR_ON,this.fireObserverCallback.bind(this,EVENTS.FOLLOW_CURSOR_ON)),liveShare.on(EVENTS.FOLLOW_CURSOR_OFF,this.fireObserverCallback.bind(this,EVENTS.FOLLOW_CURSOR_OFF)),liveShare.on(EVENTS.TESTER_JOINED,this.fireObserverCallback.bind(this,EVENTS.TESTER_JOINED)),liveShare.on(EVENTS.ALLOW_START,this.fireObserverCallback.bind(this,EVENTS.ALLOW_START)),liveShare.on(EVENTS.VIDEO_PARTICIPANT_JOINED,this.fireObserverCallback.bind(this,EVENTS.VIDEO_PARTICIPANT_JOINED)),liveShare.on(EVENTS.VIDEO_PARTICIPANT_LEFT,this.fireObserverCallback.bind(this,EVENTS.VIDEO_PARTICIPANT_LEFT)),liveShare.on(EVENTS.MUTE,this.fireObserverCallback.bind(this,EVENTS.MUTE)),liveShare.on(EVENTS.DOM,this.onDOMEvent.bind(this)),liveShare.on(EVENTS.MEDIA_ACCESS,this.onMediaAccess.bind(this)),liveShare},LiveSession.prototype.shouldEnableInteractionsShare=function(){var isHostSession=this.isHostSession();return this.type===SESSION_TYPES.SHARING&&isHostSession||this.type===SESSION_TYPES.TESTING&&!isHostSession},LiveSession.prototype.getType=function(){return this.type},LiveSession.prototype.onDOMEvent=function(data){Interactions.dispatchEvent(data.serializedEvent,data.id)},LiveSession.prototype.onMediaAccess=function(value){$rootScope.$emit(PreviewEnums.MEDIA_ACCESS,value)},LiveSession.prototype.onLiveSessionStart=function(){var _this24=this;angular.isFunction(Interactions.handleFormEvents)&&Interactions.handleFormEvents(),this.shouldEnableInteractionsShare()&&Engine.enableInteractionsShare(),this.onChangePageDuringSession=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(e,id){id=$document[0].URL.split("#")[0]+$state.href("home.page",{pageId:id});try{_this24.liveShare.eventDispatcher.handleEvent({},{eventCategory:"HashChangeEvent",selector:"window",type:"hashchange",newURL:id,oldURL:$document[0].URL})}catch(err){return void $log.error(err)}_this24.liveShare.onPageChangeStart()}),this.fireObserverCallback(LiveShare.enums.EVENTS.START),this.onContentLoaded=$rootScope.$on(PreviewEnums.ON_CONTENT_LOADED,function(){_this24.liveShare.onPageChangeFinish()})},LiveSession.prototype.onLiveSessionFinish=function(data){angular.isFunction(Interactions.unhandleFormEvents)&&Interactions.unhandleFormEvents(),Engine.isInteractionsShare()&&Engine.enableInteractionsShare(),this.onChangePageDuringSession(),this.onContentLoaded(),this.fireObserverCallback("finish",data)},LiveSession.prototype.getCurrentPortForUrl=function(){var port=$location.port();return port&&80!==port?":".concat(port):""},LiveSession.prototype.roomId=function(id){if(!id)return this.roomID;this.roomID=id},LiveSession.prototype.registerObserverCallback=function(event,callback){this.observerCallbacks[event]||(this.observerCallbacks[event]=[]),debugConsole_count("Registering callback for ".concat(event)),this.observerCallbacks[event].push(callback)},LiveSession.prototype.fireObserverCallback=function(event,data){debugConsole_count("Fire: ".concat(event)),debugConsole_log("Data",data),this.observerCallbacks[event]?(debugConsole_log("Callbacks count: ".concat(this.observerCallbacks[event].length)),this.observerCallbacks[event].forEach(function(callback){debugConsole_count("Callback for ".concat(event," fired")),callback(data)})):debugConsole_log("Callbacks count: 0")},LiveSession.prototype.makeRoomReservation=function(){var _this25=this,d=$q.defer(),queryParams={sessionId:UsersService.me.id_session,url:this.getDestinationUrl(),name:ProjectsService.currentProjectName,type:this.type};return this.restangular.one("").post("make-room-reservation",queryParams).then(function(data){_this25.roomId(data),d.resolve(_this25.roomId())},function(err){$log.error(err),d.reject(err)}),d.promise},LiveSession.prototype.startInitializing=function(data){LiveSessionInstanceService.set(this);var queryParams={};data.options&&(queryParams.options=data.options),data.type&&(queryParams.type=data.type),$state.go("home.page.live-share-start",queryParams)},LiveSession.prototype.create=function(settings,userData){return this.liveShare=this.initializeLiveShare(),this.liveShare.create(settings,userData)},LiveSession.prototype.join=function(sessionId,userData){return this.liveShare=this.initializeLiveShare(),this.liveShare.join({roomID:sessionId},userData)},LiveSession.prototype.quit=function(){this.liveShare.quit()},LiveSession.prototype.isSession=function(){return!!this.liveShare&&this.liveShare.isSession()},LiveSession.prototype.isHostSession=function(){return this.liveShare.isHostSession()},LiveSession.prototype.getInviteURL=function(){return"".concat($location.protocol(),"://").concat($location.host()).concat(this.getCurrentPortForUrl(),"/live-presentation/").concat(this.roomId())},LiveSession.prototype.getDestinationUrl=function(){return $state.href("home.page",{pageId:PagesService.currentPageId},{absolute:!0,inherit:!1})},LiveSession.prototype.getCollaboratorsData=function(){return this.liveShare.getCollaboratorsData()},LiveSession.prototype.getHostData=function(){return this.liveShare.getHostData()},LiveSession.prototype.removeCollaborator=function(id){return this.liveShare.removeCollaborator(id)},LiveSession.prototype.getConfigurationOptions=function(){},LiveSession.prototype.setOption=function(key,val){key=this.translateOption(key,val),val=Object.keys(key)[0];this.liveShare.setOption(val,key[val])},LiveSession.prototype.translateOption=function(key,val){var option={};return key===ROOM_SETTINGS.ALLWAYS_FOLLOW_HOST?option.toggleFollow=!val:key===ROOM_SETTINGS.SHOW_CURSOR?option.showCursor=val?"all":"host":key===ROOM_SETTINGS.CAN_CLOSE_TASKS?option[ROOM_SETTINGS.CAN_CLOSE_TASKS]=val?"all":"host":key===ROOM_SETTINGS.SEE_SITEMAP?option[ROOM_SETTINGS.SEE_SITEMAP]=val?"all":"host":option[key]=val,option},LiveSession.prototype.followCursor=function(id){this.liveShare.followCursor(id)},LiveSession.prototype.executeEventsQueue=function(){return this.liveShare.collaboration.executeEventsQueue()},LiveSession.prototype.mute=function(value){this.liveShare.mute(value)},LiveSession.prototype.getMyData=function(){return this.liveShare.getMyData()},LiveSession}angular.module("core").factory("LiveSessionService",LiveSessionService),LiveSessionService.$inject=["$window","$document","$q","$rootScope","$state","$location","$translate","$log","Restangular","ProjectsService","PagesService","UsersService","LiveSessionInstanceService","Engine"]}(),angular.module("core").factory("LiveShareService",["_","$translate","LiveSessionService",function(_,$translate,LiveSessionService){"use strict";function LiveShareService(){LiveSessionService.apply(this,arguments)}var proto=LiveShareService.prototype;return(proto=_.extend(proto,LiveSessionService.prototype)).constructor=LiveShareService,proto.getConfigurationOptions=function(){var _this26=this;return $translate(["LS_OPTION_SHOW_CURSOR","LS_OPTION_FOLLOW_CURSOR"]).then(function(translations){return _this26.roomConfigurationOptions||(_this26.roomConfigurationOptions=[{name:translations.LS_OPTION_SHOW_CURSOR,value:!1,param:"showCursor"},{name:translations.LS_OPTION_FOLLOW_CURSOR,value:!1,param:"alwaysFollowHost"}]),_this26.roomConfigurationOptions})},proto.startSession=function(){this.liveShare.startLPSession()},new LiveShareService(LiveShare.enums.SESSION_TYPES.SHARING)}]),angular.module("core").factory("_",[function(){"use strict";return window._}]),function(){"use strict";function MarketingService(UsersService,$http,typeformId,$window){return{TRACKING_EVENT_COPYALL:"preview spec - copyAll clicked",TRACKING_EVENT_OPEN_STACKBLITZ:"preview spec - openStackblitz clicked",sendTrackingEvent:function(eventname){var uxpinApi=ApplicationConfiguration.uxpinApi;UsersService.isAnonymous()||$http({method:"POST",url:"".concat(uxpinApi,"/data/events/").concat(UsersService.me.id_user),data:{eventname:eventname}}),$window.mixpanel.track("preview_loaded",{click:eventname})},setTypeformSeen:function(){var uxpinApi=ApplicationConfiguration.uxpinApi;UsersService.setUserExportTypeformSeen(),$http({method:"PUT",url:"".concat(uxpinApi,"/settings"),withCredentials:!0,data:{exportTypeform_seen:!0}})},openTypeformIfNotSeen:function(){var settings;return!UsersService.isAnonymous()&&!(null!=(settings=UsersService.me.settings)&&settings.exportTypeform_seen||(tf.createPopup(typeformId).toggle(),this.setTypeformSeen(),0))}}}angular.module("core").factory("MarketingService",MarketingService),MarketingService.$inject=["UsersService","$http","typeformId","$window"]}(),function(){"use strict";function Mirroring($state,$stateParams,_,editorSocket,PagesService){function changePageOnUserAction(data){!function(data){return data.id_user===$stateParams.userId&&data.id_page!==PagesService.currentPageId}(data)||$state.go($state.current.name,{pageId:data.id_page})}return{init:function(){_.isUndefined($stateParams.userId)||(editorSocket.on(PreviewEnums.SOCKET.ON_ACTIVATE_ELEMENTS,changePageOnUserAction),editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_SAVED,changePageOnUserAction))}}}angular.module("core").factory("Mirroring",Mirroring),Mirroring.$inject=["$state","$stateParams","_","editorSocket","PagesService"]}(),function(){"use strict";angular.module("core").factory("MissingLocalFonts",MissingLocalFonts),MissingLocalFonts.$inject=["_","uxpinSharedComponents","$q","$window"];var TYPE_LOCAL="L",toastId=null,isLocalFont=function(font){return font.type===TYPE_LOCAL},showedMissingFonts=[];function MissingLocalFonts(_,uxpinSharedComponents,$q,$window){var _elementFonts,localFontHandler=new uxpinSharedComponents.LocalFontHandler({getAllElementLocalFonts:function(){var deferred=$q.defer();return deferred.resolve(_.filter(_elementFonts,isLocalFont)),deferred.promise}});function getMissingLocalFonts(data,shouldFilterFonts){return shouldFilterFonts=!!angular.isUndefined(shouldFilterFonts)||shouldFilterFonts,_.reduce(data,function(fonts,font){return font.type!==TYPE_LOCAL||!function(font){return uxpinSharedComponents.isWindows?!uxpinSharedComponents.LocalFontHandler.isLocalFontAvailable(font.family):_.some(font.postscriptNames,function(fontData){return!uxpinSharedComponents.LocalFontHandler.isLocalFontAvailable(fontData.postscriptName)})}(font)||function(font){var family=(font.family||"").toLowerCase();return font&&font.type===TYPE_LOCAL&&(-1!==family.indexOf("fontawesome")||-1!==family.indexOf("font awesome"))}(font)||function(font){var family=(font.family||"").toLowerCase();return font&&font.type===TYPE_LOCAL&&$window.uxpinEngine.Page.utils.GoogleFontLoader.isGoogleFontCache[family]}(font)||shouldFilterFonts&&function(font,showedFonts){return _.find(showedFonts,function(showedFont){return showedFont.family===font.family})}(font,showedMissingFonts)?fonts:fonts.concat(font)},[])}function showNotification(missingFonts,shouldFilterFonts){if(missingFonts=missingFonts||getMissingLocalFonts(_elementFonts,shouldFilterFonts),showedMissingFonts=showedMissingFonts.concat(missingFonts),!missingFonts.length)return!1;shouldFilterFonts=_.map(function(missingFonts){return _.map(missingFonts,function(font){var missingVariants=uxpinSharedComponents.isWindows?_.keys(font.variants):_.uniq(_.reduce(font.postscriptNames,function(result,data){return uxpinSharedComponents.LocalFontHandler.isLocalFontAvailable(data.postscriptName)||result.push(data.variant),result},[]));return"".concat(font.family," ").concat(missingVariants.join(", "))})}(missingFonts),function(name){return uxpinSharedComponents.React.createElement("li",{className:"font-item ds-icon--font__arrow-right",key:name,title:name},name)}),missingFonts=uxpinSharedComponents.React.createElement("div",{},uxpinSharedComponents.React.createElement("h1",{className:"toast-heading"},"Missing fonts"),uxpinSharedComponents.React.createElement("p",{},"The following fonts are not installed on \nthis computer:"),uxpinSharedComponents.React.createElement("ul",{className:"list-missing-fonts"},shouldFilterFonts)),shouldFilterFonts="".concat(ToastifyEnums.CLASSES.INCREASED_PADDING," fonts-toast ").concat(ToastifyEnums.CLASSES.WIDE),shouldFilterFonts=_.extend({},ToastifyEnums.STYLES.TOP_RIGHT,{type:uxpinSharedComponents.Toastify.toast.TYPE.ERROR,onClose:function(){toastId=null},className:shouldFilterFonts,bodyClassName:"font-size-base"});toastId?uxpinSharedComponents.Toastify.toast.update(toastId,_.extend({},{render:missingFonts},shouldFilterFonts)):toastId=uxpinSharedComponents.Toastify.toast(missingFonts,shouldFilterFonts)}return localFontHandler.initialize(),localFontHandler.addListener(function(fonts){showNotification(fonts,!1)}),{initElementFonts:function(elementFonts){_elementFonts=elementFonts},showNotification:showNotification}}}(),angular.module("core").service("moment",function(){"use strict";return window.moment}),function(){"use strict";function NotificationsService(_,$rootScope,$q,Rest,ProjectsService,ExportService){return{notificationsMap:{},getNotifications:function(){var projectHash=ProjectsService.currentProjectHash;return ExportService.isExport()?$q.when([]):Rest.one("projects",projectHash).all("notifications").getList().then(function(notifications){this.generateNotificationsMap(notifications)}.bind(this))},addToNotifications:function(commentId,emails){return this.updateNotification(commentId,emails,"add")},removeFromNotification:function(commentId,emails){return this.updateNotification(commentId,emails,"remove")},updateNotification:function(commentId,emails,type){var projectHash=ProjectsService.currentProjectHash,deferred=$q.defer();return _.isEmpty(emails)?deferred.reject():Rest.one("projects",projectHash).all("notifications").customPOST({commentId:commentId,emails:emails},type).then(function(notification){this.addToNotificationsMap(notification),$rootScope.$emit(PreviewEnums.ON_CHANGE_NOTIFICATIONS,commentId,notification)}.bind(this))},generateNotificationsMap:function(notifications){_.forIn(this.notificationsMap,function(value,key){delete this.notificationsMap[key]}.bind(this)),notifications.forEach(function(notification){this.addToNotificationsMap(notification)}.bind(this))},addToNotificationsMap:function(notification){this.notificationsMap[notification._id]=notification}}}angular.module("core").factory("NotificationsService",NotificationsService),NotificationsService.$inject=["_","$rootScope","$q","Rest","ProjectsService","ExportService"]}(),function(){"use strict";angular.module("core").factory("ntc",function(){var ntc={init:function(){for(var rgb,color,i=0;i<ntc.names.length;i++)color="#"+ntc.names[i][0],rgb=ntc.rgb(color),color=ntc.hsl(color),ntc.names[i].push(rgb[0],rgb[1],rgb[2],color[0],color[1],color[2])},name:function(color){if((color=color.toUpperCase()).length<3||7<color.length)return["#000000","Invalid Color: "+color,!1];4==(color=color.length%3==0?"#"+color:color).length&&(color="#"+color.substr(1,1)+color.substr(1,1)+color.substr(2,1)+color.substr(2,1)+color.substr(3,1)+color.substr(3,1));for(var ndf,rgb=ntc.rgb(color),r=rgb[0],g=rgb[1],b=rgb[2],rgb=ntc.hsl(color),h=rgb[0],s=rgb[1],l=rgb[2],cl=-1,df=-1,i=0;i<ntc.names.length;i++){if(color=="#"+ntc.names[i][0])return["#"+ntc.names[i][0],ntc.names[i][1],!0];ndf=Math.pow(r-ntc.names[i][2],2)+Math.pow(g-ntc.names[i][3],2)+Math.pow(b-ntc.names[i][4],2)+2*(Math.pow(h-ntc.names[i][5],2)+Math.pow(s-ntc.names[i][6],2)+Math.pow(l-ntc.names[i][7],2)),(df<0||ndf<df)&&(df=ndf,cl=i)}return cl<0?["#000000","Invalid Color: "+color,!1]:["#"+ntc.names[cl][0],ntc.names[cl][1],!1]},hsl:function(color){var color=[parseInt("0x"+color.substring(1,3))/255,parseInt("0x"+color.substring(3,5))/255,parseInt("0x"+color.substring(5,7))/255],r=color[0],g=color[1],color=color[2],min=Math.min(r,Math.min(g,color)),max=Math.max(r,Math.max(g,color)),delta=max-min,min=(min+max)/2,s=0<min&&min<1?delta/(min<.5?2*min:2-2*min):0,h=0;return 0<delta&&(max==r&&max!=g&&(h+=(g-color)/delta),max==g&&max!=color&&(h+=2+(color-r)/delta),max==color&&max!=r&&(h+=4+(r-g)/delta),h/=6),[parseInt(255*h),parseInt(255*s),parseInt(255*min)]},rgb:function(color){return[parseInt("0x"+color.substring(1,3)),parseInt("0x"+color.substring(3,5)),parseInt("0x"+color.substring(5,7))]},names:[["000000","Black"],["000080","Navy Blue"],["0000C8","Dark Blue"],["0000FF","Blue"],["000741","Stratos"],["001B1C","Swamp"],["002387","Resolution Blue"],["002900","Deep Fir"],["002E20","Burnham"],["002FA7","International Klein Blue"],["003153","Prussian Blue"],["003366","Midnight Blue"],["003399","Smalt"],["003532","Deep Teal"],["003E40","Cyprus"],["004620","Kaitoke Green"],["0047AB","Cobalt"],["004816","Crusoe"],["004950","Sherpa Blue"],["0056A7","Endeavour"],["00581A","Camarone"],["0066CC","Science Blue"],["0066FF","Blue Ribbon"],["00755E","Tropical Rain Forest"],["0076A3","Allports"],["007BA7","Deep Cerulean"],["007EC7","Lochmara"],["007FFF","Azure Radiance"],["008080","Teal"],["0095B6","Bondi Blue"],["009DC4","Pacific Blue"],["00A693","Persian Green"],["00A86B","Jade"],["00CC99","Caribbean Green"],["00CCCC","Robin's Egg Blue"],["00FF00","Green"],["00FF7F","Spring Green"],["00FFFF","Cyan / Aqua"],["010D1A","Blue Charcoal"],["011635","Midnight"],["011D13","Holly"],["012731","Daintree"],["01361C","Cardin Green"],["01371A","County Green"],["013E62","Astronaut Blue"],["013F6A","Regal Blue"],["014B43","Aqua Deep"],["015E85","Orient"],["016162","Blue Stone"],["016D39","Fun Green"],["01796F","Pine Green"],["017987","Blue Lagoon"],["01826B","Deep Sea"],["01A368","Green Haze"],["022D15","English Holly"],["02402C","Sherwood Green"],["02478E","Congress Blue"],["024E46","Evening Sea"],["026395","Bahama Blue"],["02866F","Observatory"],["02A4D3","Cerulean"],["03163C","Tangaroa"],["032B52","Green Vogue"],["036A6E","Mosque"],["041004","Midnight Moss"],["041322","Black Pearl"],["042E4C","Blue Whale"],["044022","Zuccini"],["044259","Teal Blue"],["051040","Deep Cove"],["051657","Gulf Blue"],["055989","Venice Blue"],["056F57","Watercourse"],["062A78","Catalina Blue"],["063537","Tiber"],["069B81","Gossamer"],["06A189","Niagara"],["073A50","Tarawera"],["080110","Jaguar"],["081910","Black Bean"],["082567","Deep Sapphire"],["088370","Elf Green"],["08E8DE","Bright Turquoise"],["092256","Downriver"],["09230F","Palm Green"],["09255D","Madison"],["093624","Bottle Green"],["095859","Deep Sea Green"],["097F4B","Salem"],["0A001C","Black Russian"],["0A480D","Dark Fern"],["0A6906","Japanese Laurel"],["0A6F75","Atoll"],["0B0B0B","Cod Gray"],["0B0F08","Marshland"],["0B1107","Gordons Green"],["0B1304","Black Forest"],["0B6207","San Felix"],["0BDA51","Malachite"],["0C0B1D","Ebony"],["0C0D0F","Woodsmoke"],["0C1911","Racing Green"],["0C7A79","Surfie Green"],["0C8990","Blue Chill"],["0D0332","Black Rock"],["0D1117","Bunker"],["0D1C19","Aztec"],["0D2E1C","Bush"],["0E0E18","Cinder"],["0E2A30","Firefly"],["0F2D9E","Torea Bay"],["10121D","Vulcan"],["101405","Green Waterloo"],["105852","Eden"],["110C6C","Arapawa"],["120A8F","Ultramarine"],["123447","Elephant"],["126B40","Jewel"],["130000","Diesel"],["130A06","Asphalt"],["13264D","Blue Zodiac"],["134F19","Parsley"],["140600","Nero"],["1450AA","Tory Blue"],["151F4C","Bunting"],["1560BD","Denim"],["15736B","Genoa"],["161928","Mirage"],["161D10","Hunter Green"],["162A40","Big Stone"],["163222","Celtic"],["16322C","Timber Green"],["163531","Gable Green"],["171F04","Pine Tree"],["175579","Chathams Blue"],["182D09","Deep Forest Green"],["18587A","Blumine"],["19330E","Palm Leaf"],["193751","Nile Blue"],["1959A8","Fun Blue"],["1A1A68","Lucky Point"],["1AB385","Mountain Meadow"],["1B0245","Tolopea"],["1B1035","Haiti"],["1B127B","Deep Koamaru"],["1B1404","Acadia"],["1B2F11","Seaweed"],["1B3162","Biscay"],["1B659D","Matisse"],["1C1208","Crowshead"],["1C1E13","Rangoon Green"],["1C39BB","Persian Blue"],["1C402E","Everglade"],["1C7C7D","Elm"],["1D6142","Green Pea"],["1E0F04","Creole"],["1E1609","Karaka"],["1E1708","El Paso"],["1E385B","Cello"],["1E433C","Te Papa Green"],["1E90FF","Dodger Blue"],["1E9AB0","Eastern Blue"],["1F120F","Night Rider"],["1FC2C2","Java"],["20208D","Jacksons Purple"],["202E54","Cloud Burst"],["204852","Blue Dianne"],["211A0E","Eternity"],["220878","Deep Blue"],["228B22","Forest Green"],["233418","Mallard"],["240A40","Violet"],["240C02","Kilamanjaro"],["242A1D","Log Cabin"],["242E16","Black Olive"],["24500F","Green House"],["251607","Graphite"],["251706","Cannon Black"],["251F4F","Port Gore"],["25272C","Shark"],["25311C","Green Kelp"],["2596D1","Curious Blue"],["260368","Paua"],["26056A","Paris M"],["261105","Wood Bark"],["261414","Gondola"],["262335","Steel Gray"],["26283B","Ebony Clay"],["273A81","Bay of Many"],["27504B","Plantation"],["278A5B","Eucalyptus"],["281E15","Oil"],["283A77","Astronaut"],["286ACD","Mariner"],["290C5E","Violent Violet"],["292130","Bastille"],["292319","Zeus"],["292937","Charade"],["297B9A","Jelly Bean"],["29AB87","Jungle Green"],["2A0359","Cherry Pie"],["2A140E","Coffee Bean"],["2A2630","Baltic Sea"],["2A380B","Turtle Green"],["2A52BE","Cerulean Blue"],["2B0202","Sepia Black"],["2B194F","Valhalla"],["2B3228","Heavy Metal"],["2C0E8C","Blue Gem"],["2C1632","Revolver"],["2C2133","Bleached Cedar"],["2C8C84","Lochinvar"],["2D2510","Mikado"],["2D383A","Outer Space"],["2D569B","St Tropaz"],["2E0329","Jacaranda"],["2E1905","Jacko Bean"],["2E3222","Rangitoto"],["2E3F62","Rhino"],["2E8B57","Sea Green"],["2EBFD4","Scooter"],["2F270E","Onion"],["2F3CB3","Governor Bay"],["2F519E","Sapphire"],["2F5A57","Spectra"],["2F6168","Casal"],["300529","Melanzane"],["301F1E","Cocoa Brown"],["302A0F","Woodrush"],["304B6A","San Juan"],["30D5C8","Turquoise"],["311C17","Eclipse"],["314459","Pickled Bluewood"],["315BA1","Azure"],["31728D","Calypso"],["317D82","Paradiso"],["32127A","Persian Indigo"],["32293A","Blackcurrant"],["323232","Mine Shaft"],["325D52","Stromboli"],["327C14","Bilbao"],["327DA0","Astral"],["33036B","Christalle"],["33292F","Thunder"],["33CC99","Shamrock"],["341515","Tamarind"],["350036","Mardi Gras"],["350E42","Valentino"],["350E57","Jagger"],["353542","Tuna"],["354E8C","Chambray"],["363050","Martinique"],["363534","Tuatara"],["363C0D","Waiouru"],["36747D","Ming"],["368716","La Palma"],["370202","Chocolate"],["371D09","Clinker"],["37290E","Brown Tumbleweed"],["373021","Birch"],["377475","Oracle"],["380474","Blue Diamond"],["381A51","Grape"],["383533","Dune"],["384555","Oxford Blue"],["384910","Clover"],["394851","Limed Spruce"],["396413","Dell"],["3A0020","Toledo"],["3A2010","Sambuca"],["3A2A6A","Jacarta"],["3A686C","William"],["3A6A47","Killarney"],["3AB09E","Keppel"],["3B000B","Temptress"],["3B0910","Aubergine"],["3B1F1F","Jon"],["3B2820","Treehouse"],["3B7A57","Amazon"],["3B91B4","Boston Blue"],["3C0878","Windsor"],["3C1206","Rebel"],["3C1F76","Meteorite"],["3C2005","Dark Ebony"],["3C3910","Camouflage"],["3C4151","Bright Gray"],["3C4443","Cape Cod"],["3C493A","Lunar Green"],["3D0C02","Bean  "],["3D2B1F","Bistre"],["3D7D52","Goblin"],["3E0480","Kingfisher Daisy"],["3E1C14","Cedar"],["3E2B23","English Walnut"],["3E2C1C","Black Marlin"],["3E3A44","Ship Gray"],["3EABBF","Pelorous"],["3F2109","Bronze"],["3F2500","Cola"],["3F3002","Madras"],["3F307F","Minsk"],["3F4C3A","Cabbage Pont"],["3F583B","Tom Thumb"],["3F5D53","Mineral Green"],["3FC1AA","Puerto Rico"],["3FFF00","Harlequin"],["401801","Brown Pod"],["40291D","Cork"],["403B38","Masala"],["403D19","Thatch Green"],["405169","Fiord"],["40826D","Viridian"],["40A860","Chateau Green"],["410056","Ripe Plum"],["411F10","Paco"],["412010","Deep Oak"],["413C37","Merlin"],["414257","Gun Powder"],["414C7D","East Bay"],["4169E1","Royal Blue"],["41AA78","Ocean Green"],["420303","Burnt Maroon"],["423921","Lisbon Brown"],["427977","Faded Jade"],["431560","Scarlet Gum"],["433120","Iroko"],["433E37","Armadillo"],["434C59","River Bed"],["436A0D","Green Leaf"],["44012D","Barossa"],["441D00","Morocco Brown"],["444954","Mako"],["454936","Kelp"],["456CAC","San Marino"],["45B1E8","Picton Blue"],["460B41","Loulou"],["462425","Crater Brown"],["465945","Gray Asparagus"],["4682B4","Steel Blue"],["480404","Rustic Red"],["480607","Bulgarian Rose"],["480656","Clairvoyant"],["481C1C","Cocoa Bean"],["483131","Woody Brown"],["483C32","Taupe"],["49170C","Van Cleef"],["492615","Brown Derby"],["49371B","Metallic Bronze"],["495400","Verdun Green"],["496679","Blue Bayoux"],["497183","Bismark"],["4A2A04","Bracken"],["4A3004","Deep Bronze"],["4A3C30","Mondo"],["4A4244","Tundora"],["4A444B","Gravel"],["4A4E5A","Trout"],["4B0082","Pigment Indigo"],["4B5D52","Nandor"],["4C3024","Saddle"],["4C4F56","Abbey"],["4D0135","Blackberry"],["4D0A18","Cab Sav"],["4D1E01","Indian Tan"],["4D282D","Cowboy"],["4D282E","Livid Brown"],["4D3833","Rock"],["4D3D14","Punga"],["4D400F","Bronzetone"],["4D5328","Woodland"],["4E0606","Mahogany"],["4E2A5A","Bossanova"],["4E3B41","Matterhorn"],["4E420C","Bronze Olive"],["4E4562","Mulled Wine"],["4E6649","Axolotl"],["4E7F9E","Wedgewood"],["4EABD1","Shakespeare"],["4F1C70","Honey Flower"],["4F2398","Daisy Bush"],["4F69C6","Indigo"],["4F7942","Fern Green"],["4F9D5D","Fruit Salad"],["4FA83D","Apple"],["504351","Mortar"],["507096","Kashmir Blue"],["507672","Cutty Sark"],["50C878","Emerald"],["514649","Emperor"],["516E3D","Chalet Green"],["517C66","Como"],["51808F","Smalt Blue"],["52001F","Castro"],["520C17","Maroon Oak"],["523C94","Gigas"],["533455","Voodoo"],["534491","Victoria"],["53824B","Hippie Green"],["541012","Heath"],["544333","Judge Gray"],["54534D","Fuscous Gray"],["549019","Vida Loca"],["55280C","Cioccolato"],["555B10","Saratoga"],["556D56","Finlandia"],["5590D9","Havelock Blue"],["56B4BE","Fountain Blue"],["578363","Spring Leaves"],["583401","Saddle Brown"],["585562","Scarpa Flow"],["587156","Cactus"],["589AAF","Hippie Blue"],["591D35","Wine Berry"],["592804","Brown Bramble"],["593737","Congo Brown"],["594433","Millbrook"],["5A6E9C","Waikawa Gray"],["5A87A0","Horizon"],["5B3013","Jambalaya"],["5C0120","Bordeaux"],["5C0536","Mulberry Wood"],["5C2E01","Carnaby Tan"],["5C5D75","Comet"],["5D1E0F","Redwood"],["5D4C51","Don Juan"],["5D5C58","Chicago"],["5D5E37","Verdigris"],["5D7747","Dingley"],["5DA19F","Breaker Bay"],["5E483E","Kabul"],["5E5D3B","Hemlock"],["5F3D26","Irish Coffee"],["5F5F6E","Mid Gray"],["5F6672","Shuttle Gray"],["5FA777","Aqua Forest"],["5FB3AC","Tradewind"],["604913","Horses Neck"],["605B73","Smoky"],["606E68","Corduroy"],["6093D1","Danube"],["612718","Espresso"],["614051","Eggplant"],["615D30","Costa Del Sol"],["61845F","Glade Green"],["622F30","Buccaneer"],["623F2D","Quincy"],["624E9A","Butterfly Bush"],["625119","West Coast"],["626649","Finch"],["639A8F","Patina"],["63B76C","Fern"],["6456B7","Blue Violet"],["646077","Dolphin"],["646463","Storm Dust"],["646A54","Siam"],["646E75","Nevada"],["6495ED","Cornflower Blue"],["64CCDB","Viking"],["65000B","Rosewood"],["651A14","Cherrywood"],["652DC1","Purple Heart"],["657220","Fern Frond"],["65745D","Willow Grove"],["65869F","Hoki"],["660045","Pompadour"],["660099","Purple"],["66023C","Tyrian Purple"],["661010","Dark Tan"],["66B58F","Silver Tree"],["66FF00","Bright Green"],["66FF66","Screamin' Green"],["67032D","Black Rose"],["675FA6","Scampi"],["676662","Ironside Gray"],["678975","Viridian Green"],["67A712","Christi"],["683600","Nutmeg Wood Finish"],["685558","Zambezi"],["685E6E","Salt Box"],["692545","Tawny Port"],["692D54","Finn"],["695F62","Scorpion"],["697E9A","Lynch"],["6A442E","Spice"],["6A5D1B","Himalaya"],["6A6051","Soya Bean"],["6B2A14","Hairy Heath"],["6B3FA0","Royal Purple"],["6B4E31","Shingle Fawn"],["6B5755","Dorado"],["6B8BA2","Bermuda Gray"],["6B8E23","Olive Drab"],["6C3082","Eminence"],["6CDAE7","Turquoise Blue"],["6D0101","Lonestar"],["6D5E54","Pine Cone"],["6D6C6C","Dove Gray"],["6D9292","Juniper"],["6D92A1","Gothic"],["6E0902","Red Oxide"],["6E1D14","Moccaccino"],["6E4826","Pickled Bean"],["6E4B26","Dallas"],["6E6D57","Kokoda"],["6E7783","Pale Sky"],["6F440C","Cafe Royale"],["6F6A61","Flint"],["6F8E63","Highland"],["6F9D02","Limeade"],["6FD0C5","Downy"],["701C1C","Persian Plum"],["704214","Sepia"],["704A07","Antique Bronze"],["704F50","Ferra"],["706555","Coffee"],["708090","Slate Gray"],["711A00","Cedar Wood Finish"],["71291D","Metallic Copper"],["714693","Affair"],["714AB2","Studio"],["715D47","Tobacco Brown"],["716338","Yellow Metal"],["716B56","Peat"],["716E10","Olivetone"],["717486","Storm Gray"],["718080","Sirocco"],["71D9E2","Aquamarine Blue"],["72010F","Venetian Red"],["724A2F","Old Copper"],["726D4E","Go Ben"],["727B89","Raven"],["731E8F","Seance"],["734A12","Raw Umber"],["736C9F","Kimberly"],["736D58","Crocodile"],["737829","Crete"],["738678","Xanadu"],["74640D","Spicy Mustard"],["747D63","Limed Ash"],["747D83","Rolling Stone"],["748881","Blue Smoke"],["749378","Laurel"],["74C365","Mantis"],["755A57","Russett"],["7563A8","Deluge"],["76395D","Cosmic"],["7666C6","Blue Marguerite"],["76BD17","Lima"],["76D7EA","Sky Blue"],["770F05","Dark Burgundy"],["771F1F","Crown of Thorns"],["773F1A","Walnut"],["776F61","Pablo"],["778120","Pacifika"],["779E86","Oxley"],["77DD77","Pastel Green"],["780109","Japanese Maple"],["782D19","Mocha"],["782F16","Peanut"],["78866B","Camouflage Green"],["788A25","Wasabi"],["788BBA","Ship Cove"],["78A39C","Sea Nymph"],["795D4C","Roman Coffee"],["796878","Old Lavender"],["796989","Rum"],["796A78","Fedora"],["796D62","Sandstone"],["79DEEC","Spray"],["7A013A","Siren"],["7A58C1","Fuchsia Blue"],["7A7A7A","Boulder"],["7A89B8","Wild Blue Yonder"],["7AC488","De York"],["7B3801","Red Beech"],["7B3F00","Cinnamon"],["7B6608","Yukon Gold"],["7B7874","Tapa"],["7B7C94","Waterloo "],["7B8265","Flax Smoke"],["7B9F80","Amulet"],["7BA05B","Asparagus"],["7C1C05","Kenyan Copper"],["7C7631","Pesto"],["7C778A","Topaz"],["7C7B7A","Concord"],["7C7B82","Jumbo"],["7C881A","Trendy Green"],["7CA1A6","Gumbo"],["7CB0A1","Acapulco"],["7CB7BB","Neptune"],["7D2C14","Pueblo"],["7DA98D","Bay Leaf"],["7DC8F7","Malibu"],["7DD8C6","Bermuda"],["7E3A15","Copper Canyon"],["7F1734","Claret"],["7F3A02","Peru Tan"],["7F626D","Falcon"],["7F7589","Mobster"],["7F76D3","Moody Blue"],["7FFF00","Chartreuse"],["7FFFD4","Aquamarine"],["800000","Maroon"],["800B47","Rose Bud Cherry"],["801818","Falu Red"],["80341F","Red Robin"],["803790","Vivid Violet"],["80461B","Russet"],["807E79","Friar Gray"],["808000","Olive"],["808080","Gray"],["80B3AE","Gulf Stream"],["80B3C4","Glacier"],["80CCEA","Seagull"],["81422C","Nutmeg"],["816E71","Spicy Pink"],["817377","Empress"],["819885","Spanish Green"],["826F65","Sand Dune"],["828685","Gunsmoke"],["828F72","Battleship Gray"],["831923","Merlot"],["837050","Shadow"],["83AA5D","Chelsea Cucumber"],["83D0C6","Monte Carlo"],["843179","Plum"],["84A0A0","Granny Smith"],["8581D9","Chetwode Blue"],["858470","Bandicoot"],["859FAF","Bali Hai"],["85C4CC","Half Baked"],["860111","Red Devil"],["863C3C","Lotus"],["86483C","Ironstone"],["864D1E","Bull Shot"],["86560A","Rusty Nail"],["868974","Bitter"],["86949F","Regent Gray"],["871550","Disco"],["87756E","Americano"],["877C7B","Hurricane"],["878D91","Oslo Gray"],["87AB39","Sushi"],["885342","Spicy Mix"],["886221","Kumera"],["888387","Suva Gray"],["888D65","Avocado"],["893456","Camelot"],["893843","Solid Pink"],["894367","Cannon Pink"],["897D6D","Makara"],["8A3324","Burnt Umber"],["8A73D6","True V"],["8A8360","Clay Creek"],["8A8389","Monsoon"],["8A8F8A","Stack"],["8AB9F1","Jordy Blue"],["8B00FF","Electric Violet"],["8B0723","Monarch"],["8B6B0B","Corn Harvest"],["8B8470","Olive Haze"],["8B847E","Schooner"],["8B8680","Natural Gray"],["8B9C90","Mantle"],["8B9FEE","Portage"],["8BA690","Envy"],["8BA9A5","Cascade"],["8BE6D8","Riptide"],["8C055E","Cardinal Pink"],["8C472F","Mule Fawn"],["8C5738","Potters Clay"],["8C6495","Trendy Pink"],["8D0226","Paprika"],["8D3D38","Sanguine Brown"],["8D3F3F","Tosca"],["8D7662","Cement"],["8D8974","Granite Green"],["8D90A1","Manatee"],["8DA8CC","Polo Blue"],["8E0000","Red Berry"],["8E4D1E","Rope"],["8E6F70","Opium"],["8E775E","Domino"],["8E8190","Mamba"],["8EABC1","Nepal"],["8F021C","Pohutukawa"],["8F3E33","El Salva"],["8F4B0E","Korma"],["8F8176","Squirrel"],["8FD6B4","Vista Blue"],["900020","Burgundy"],["901E1E","Old Brick"],["907874","Hemp"],["907B71","Almond Frost"],["908D39","Sycamore"],["92000A","Sangria"],["924321","Cumin"],["926F5B","Beaver"],["928573","Stonewall"],["928590","Venus"],["9370DB","Medium Purple"],["93CCEA","Cornflower"],["93DFB8","Algae Green"],["944747","Copper Rust"],["948771","Arrowtown"],["950015","Scarlett"],["956387","Strikemaster"],["959396","Mountain Mist"],["960018","Carmine"],["964B00","Brown"],["967059","Leather"],["9678B6","Purple Mountain's Majesty"],["967BB6","Lavender Purple"],["96A8A1","Pewter"],["96BBAB","Summer Green"],["97605D","Au Chico"],["9771B5","Wisteria"],["97CD2D","Atlantis"],["983D61","Vin Rouge"],["9874D3","Lilac Bush"],["98777B","Bazaar"],["98811B","Hacienda"],["988D77","Pale Oyster"],["98FF98","Mint Green"],["990066","Fresh Eggplant"],["991199","Violet Eggplant"],["991613","Tamarillo"],["991B07","Totem Pole"],["996666","Copper Rose"],["9966CC","Amethyst"],["997A8D","Mountbatten Pink"],["9999CC","Blue Bell"],["9A3820","Prairie Sand"],["9A6E61","Toast"],["9A9577","Gurkha"],["9AB973","Olivine"],["9AC2B8","Shadow Green"],["9B4703","Oregon"],["9B9E8F","Lemon Grass"],["9C3336","Stiletto"],["9D5616","Hawaiian Tan"],["9DACB7","Gull Gray"],["9DC209","Pistachio"],["9DE093","Granny Smith Apple"],["9DE5FF","Anakiwa"],["9E5302","Chelsea Gem"],["9E5B40","Sepia Skin"],["9EA587","Sage"],["9EA91F","Citron"],["9EB1CD","Rock Blue"],["9EDEE0","Morning Glory"],["9F381D","Cognac"],["9F821C","Reef Gold"],["9F9F9C","Star Dust"],["9FA0B1","Santas Gray"],["9FD7D3","Sinbad"],["9FDD8C","Feijoa"],["A02712","Tabasco"],["A1750D","Buttered Rum"],["A1ADB5","Hit Gray"],["A1C50A","Citrus"],["A1DAD7","Aqua Island"],["A1E9DE","Water Leaf"],["A2006D","Flirt"],["A23B6C","Rouge"],["A26645","Cape Palliser"],["A2AAB3","Gray Chateau"],["A2AEAB","Edward"],["A3807B","Pharlap"],["A397B4","Amethyst Smoke"],["A3E3ED","Blizzard Blue"],["A4A49D","Delta"],["A4A6D3","Wistful"],["A4AF6E","Green Smoke"],["A50B5E","Jazzberry Jam"],["A59B91","Zorba"],["A5CB0C","Bahia"],["A62F20","Roof Terracotta"],["A65529","Paarl"],["A68B5B","Barley Corn"],["A69279","Donkey Brown"],["A6A29A","Dawn"],["A72525","Mexican Red"],["A7882C","Luxor Gold"],["A85307","Rich Gold"],["A86515","Reno Sand"],["A86B6B","Coral Tree"],["A8989B","Dusty Gray"],["A899E6","Dull Lavender"],["A8A589","Tallow"],["A8AE9C","Bud"],["A8AF8E","Locust"],["A8BD9F","Norway"],["A8E3BD","Chinook"],["A9A491","Gray Olive"],["A9ACB6","Aluminium"],["A9B2C3","Cadet Blue"],["A9B497","Schist"],["A9BDBF","Tower Gray"],["A9BEF2","Perano"],["A9C6C2","Opal"],["AA375A","Night Shadz"],["AA4203","Fire"],["AA8B5B","Muesli"],["AA8D6F","Sandal"],["AAA5A9","Shady Lady"],["AAA9CD","Logan"],["AAABB7","Spun Pearl"],["AAD6E6","Regent St Blue"],["AAF0D1","Magic Mint"],["AB0563","Lipstick"],["AB3472","Royal Heath"],["AB917A","Sandrift"],["ABA0D9","Cold Purple"],["ABA196","Bronco"],["AC8A56","Limed Oak"],["AC91CE","East Side"],["AC9E22","Lemon Ginger"],["ACA494","Napa"],["ACA586","Hillary"],["ACA59F","Cloudy"],["ACACAC","Silver Chalice"],["ACB78E","Swamp Green"],["ACCBB1","Spring Rain"],["ACDD4D","Conifer"],["ACE1AF","Celadon"],["AD781B","Mandalay"],["ADBED1","Casper"],["ADDFAD","Moss Green"],["ADE6C4","Padua"],["ADFF2F","Green Yellow"],["AE4560","Hippie Pink"],["AE6020","Desert"],["AE809E","Bouquet"],["AF4035","Medium Carmine"],["AF4D43","Apple Blossom"],["AF593E","Brown Rust"],["AF8751","Driftwood"],["AF8F2C","Alpine"],["AF9F1C","Lucky"],["AFA09E","Martini"],["AFB1B8","Bombay"],["AFBDD9","Pigeon Post"],["B04C6A","Cadillac"],["B05D54","Matrix"],["B05E81","Tapestry"],["B06608","Mai Tai"],["B09A95","Del Rio"],["B0E0E6","Powder Blue"],["B0E313","Inch Worm"],["B10000","Bright Red"],["B14A0B","Vesuvius"],["B1610B","Pumpkin Skin"],["B16D52","Santa Fe"],["B19461","Teak"],["B1E2C1","Fringy Flower"],["B1F4E7","Ice Cold"],["B20931","Shiraz"],["B2A1EA","Biloba Flower"],["B32D29","Tall Poppy"],["B35213","Fiery Orange"],["B38007","Hot Toddy"],["B3AF95","Taupe Gray"],["B3C110","La Rioja"],["B43332","Well Read"],["B44668","Blush"],["B4CFD3","Jungle Mist"],["B57281","Turkish Rose"],["B57EDC","Lavender"],["B5A27F","Mongoose"],["B5B35C","Olive Green"],["B5D2CE","Jet Stream"],["B5ECDF","Cruise"],["B6316C","Hibiscus"],["B69D98","Thatch"],["B6B095","Heathered Gray"],["B6BAA4","Eagle"],["B6D1EA","Spindle"],["B6D3BF","Gum Leaf"],["B7410E","Rust"],["B78E5C","Muddy Waters"],["B7A214","Sahara"],["B7A458","Husk"],["B7B1B1","Nobel"],["B7C3D0","Heather"],["B7F0BE","Madang"],["B81104","Milano Red"],["B87333","Copper"],["B8B56A","Gimblet"],["B8C1B1","Green Spring"],["B8C25D","Celery"],["B8E0F9","Sail"],["B94E48","Chestnut"],["B95140","Crail"],["B98D28","Marigold"],["B9C46A","Wild Willow"],["B9C8AC","Rainee"],["BA0101","Guardsman Red"],["BA450C","Rock Spray"],["BA6F1E","Bourbon"],["BA7F03","Pirate Gold"],["BAB1A2","Nomad"],["BAC7C9","Submarine"],["BAEEF9","Charlotte"],["BB3385","Medium Red Violet"],["BB8983","Brandy Rose"],["BBD009","Rio Grande"],["BBD7C1","Surf"],["BCC9C2","Powder Ash"],["BD5E2E","Tuscany"],["BD978E","Quicksand"],["BDB1A8","Silk"],["BDB2A1","Malta"],["BDB3C7","Chatelle"],["BDBBD7","Lavender Gray"],["BDBDC6","French Gray"],["BDC8B3","Clay Ash"],["BDC9CE","Loblolly"],["BDEDFD","French Pass"],["BEA6C3","London Hue"],["BEB5B7","Pink Swan"],["BEDE0D","Fuego"],["BF5500","Rose of Sharon"],["BFB8B0","Tide"],["BFBED8","Blue Haze"],["BFC1C2","Silver Sand"],["BFC921","Key Lime Pie"],["BFDBE2","Ziggurat"],["BFFF00","Lime"],["C02B18","Thunderbird"],["C04737","Mojo"],["C08081","Old Rose"],["C0C0C0","Silver"],["C0D3B9","Pale Leaf"],["C0D8B6","Pixie Green"],["C1440E","Tia Maria"],["C154C1","Fuchsia Pink"],["C1A004","Buddha Gold"],["C1B7A4","Bison Hide"],["C1BAB0","Tea"],["C1BECD","Gray Suit"],["C1D7B0","Sprout"],["C1F07C","Sulu"],["C26B03","Indochine"],["C2955D","Twine"],["C2BDB6","Cotton Seed"],["C2CAC4","Pumice"],["C2E8E5","Jagged Ice"],["C32148","Maroon Flush"],["C3B091","Indian Khaki"],["C3BFC1","Pale Slate"],["C3C3BD","Gray Nickel"],["C3CDE6","Periwinkle Gray"],["C3D1D1","Tiara"],["C3DDF9","Tropical Blue"],["C41E3A","Cardinal"],["C45655","Fuzzy Wuzzy Brown"],["C45719","Orange Roughy"],["C4C4BC","Mist Gray"],["C4D0B0","Coriander"],["C4F4EB","Mint Tulip"],["C54B8C","Mulberry"],["C59922","Nugget"],["C5994B","Tussock"],["C5DBCA","Sea Mist"],["C5E17A","Yellow Green"],["C62D42","Brick Red"],["C6726B","Contessa"],["C69191","Oriental Pink"],["C6A84B","Roti"],["C6C3B5","Ash"],["C6C8BD","Kangaroo"],["C6E610","Las Palmas"],["C7031E","Monza"],["C71585","Red Violet"],["C7BCA2","Coral Reef"],["C7C1FF","Melrose"],["C7C4BF","Cloud"],["C7C9D5","Ghost"],["C7CD90","Pine Glade"],["C7DDE5","Botticelli"],["C88A65","Antique Brass"],["C8A2C8","Lilac"],["C8A528","Hokey Pokey"],["C8AABF","Lily"],["C8B568","Laser"],["C8E3D7","Edgewater"],["C96323","Piper"],["C99415","Pizza"],["C9A0DC","Light Wisteria"],["C9B29B","Rodeo Dust"],["C9B35B","Sundance"],["C9B93B","Earls Green"],["C9C0BB","Silver Rust"],["C9D9D2","Conch"],["C9FFA2","Reef"],["C9FFE5","Aero Blue"],["CA3435","Flush Mahogany"],["CABB48","Turmeric"],["CADCD4","Paris White"],["CAE00D","Bitter Lemon"],["CAE6DA","Skeptic"],["CB8FA9","Viola"],["CBCAB6","Foggy Gray"],["CBD3B0","Green Mist"],["CBDBD6","Nebula"],["CC3333","Persian Red"],["CC5500","Burnt Orange"],["CC7722","Ochre"],["CC8899","Puce"],["CCCAA8","Thistle Green"],["CCCCFF","Periwinkle"],["CCFF00","Electric Lime"],["CD5700","Tenn"],["CD5C5C","Chestnut Rose"],["CD8429","Brandy Punch"],["CDF4FF","Onahau"],["CEB98F","Sorrell Brown"],["CEBABA","Cold Turkey"],["CEC291","Yuma"],["CEC7A7","Chino"],["CFA39D","Eunry"],["CFB53B","Old Gold"],["CFDCCF","Tasman"],["CFE5D2","Surf Crest"],["CFF9F3","Humming Bird"],["CFFAF4","Scandal"],["D05F04","Red Stage"],["D06DA1","Hopbush"],["D07D12","Meteor"],["D0BEF8","Perfume"],["D0C0E5","Prelude"],["D0F0C0","Tea Green"],["D18F1B","Geebung"],["D1BEA8","Vanilla"],["D1C6B4","Soft Amber"],["D1D2CA","Celeste"],["D1D2DD","Mischka"],["D1E231","Pear"],["D2691E","Hot Cinnamon"],["D27D46","Raw Sienna"],["D29EAA","Careys Pink"],["D2B48C","Tan"],["D2DA97","Deco"],["D2F6DE","Blue Romance"],["D2F8B0","Gossip"],["D3CBBA","Sisal"],["D3CDC5","Swirl"],["D47494","Charm"],["D4B6AF","Clam Shell"],["D4BF8D","Straw"],["D4C4A8","Akaroa"],["D4CD16","Bird Flower"],["D4D7D9","Iron"],["D4DFE2","Geyser"],["D4E2FC","Hawkes Blue"],["D54600","Grenadier"],["D591A4","Can Can"],["D59A6F","Whiskey"],["D5D195","Winter Hazel"],["D5F6E3","Granny Apple"],["D69188","My Pink"],["D6C562","Tacha"],["D6CEF6","Moon Raker"],["D6D6D1","Quill Gray"],["D6FFDB","Snowy Mint"],["D7837F","New York Pink"],["D7C498","Pavlova"],["D7D0FF","Fog"],["D84437","Valencia"],["D87C63","Japonica"],["D8BFD8","Thistle"],["D8C2D5","Maverick"],["D8FCFA","Foam"],["D94972","Cabaret"],["D99376","Burning Sand"],["D9B99B","Cameo"],["D9D6CF","Timberwolf"],["D9DCC1","Tana"],["D9E4F5","Link Water"],["D9F7FF","Mabel"],["DA3287","Cerise"],["DA5B38","Flame Pea"],["DA6304","Bamboo"],["DA6A41","Red Damask"],["DA70D6","Orchid"],["DA8A67","Copperfield"],["DAA520","Golden Grass"],["DAECD6","Zanah"],["DAF4F0","Iceberg"],["DAFAFF","Oyster Bay"],["DB5079","Cranberry"],["DB9690","Petite Orchid"],["DB995E","Di Serria"],["DBDBDB","Alto"],["DBFFF8","Frosted Mint"],["DC143C","Crimson"],["DC4333","Punch"],["DCB20C","Galliano"],["DCB4BC","Blossom"],["DCD747","Wattle"],["DCD9D2","Westar"],["DCDDCC","Moon Mist"],["DCEDB4","Caper"],["DCF0EA","Swans Down"],["DDD6D5","Swiss Coffee"],["DDF9F1","White Ice"],["DE3163","Cerise Red"],["DE6360","Roman"],["DEA681","Tumbleweed"],["DEBA13","Gold Tips"],["DEC196","Brandy"],["DECBC6","Wafer"],["DED4A4","Sapling"],["DED717","Barberry"],["DEE5C0","Beryl Green"],["DEF5FF","Pattens Blue"],["DF73FF","Heliotrope"],["DFBE6F","Apache"],["DFCD6F","Chenin"],["DFCFDB","Lola"],["DFECDA","Willow Brook"],["DFFF00","Chartreuse Yellow"],["E0B0FF","Mauve"],["E0B646","Anzac"],["E0B974","Harvest Gold"],["E0C095","Calico"],["E0FFFF","Baby Blue"],["E16865","Sunglo"],["E1BC64","Equator"],["E1C0C8","Pink Flare"],["E1E6D6","Periglacial Blue"],["E1EAD4","Kidnapper"],["E1F6E8","Tara"],["E25465","Mandy"],["E2725B","Terracotta"],["E28913","Golden Bell"],["E292C0","Shocking"],["E29418","Dixie"],["E29CD2","Light Orchid"],["E2D8ED","Snuff"],["E2EBED","Mystic"],["E2F3EC","Apple Green"],["E30B5C","Razzmatazz"],["E32636","Alizarin Crimson"],["E34234","Cinnabar"],["E3BEBE","Cavern Pink"],["E3F5E1","Peppermint"],["E3F988","Mindaro"],["E47698","Deep Blush"],["E49B0F","Gamboge"],["E4C2D5","Melanie"],["E4CFDE","Twilight"],["E4D1C0","Bone"],["E4D422","Sunflower"],["E4D5B7","Grain Brown"],["E4D69B","Zombie"],["E4F6E7","Frostee"],["E4FFD1","Snow Flurry"],["E52B50","Amaranth"],["E5841B","Zest"],["E5CCC9","Dust Storm"],["E5D7BD","Stark White"],["E5D8AF","Hampton"],["E5E0E1","Bon Jour"],["E5E5E5","Mercury"],["E5F9F6","Polar"],["E64E03","Trinidad"],["E6BE8A","Gold Sand"],["E6BEA5","Cashmere"],["E6D7B9","Double Spanish White"],["E6E4D4","Satin Linen"],["E6F2EA","Harp"],["E6F8F3","Off Green"],["E6FFE9","Hint of Green"],["E6FFFF","Tranquil"],["E77200","Mango Tango"],["E7730A","Christine"],["E79F8C","Tonys Pink"],["E79FC4","Kobi"],["E7BCB4","Rose Fog"],["E7BF05","Corn"],["E7CD8C","Putty"],["E7ECE6","Gray Nurse"],["E7F8FF","Lily White"],["E7FEFF","Bubbles"],["E89928","Fire Bush"],["E8B9B3","Shilo"],["E8E0D5","Pearl Bush"],["E8EBE0","Green White"],["E8F1D4","Chrome White"],["E8F2EB","Gin"],["E8F5F2","Aqua Squeeze"],["E96E00","Clementine"],["E97451","Burnt Sienna"],["E97C07","Tahiti Gold"],["E9CECD","Oyster Pink"],["E9D75A","Confetti"],["E9E3E3","Ebb"],["E9F8ED","Ottoman"],["E9FFFD","Clear Day"],["EA88A8","Carissma"],["EAAE69","Porsche"],["EAB33B","Tulip Tree"],["EAC674","Rob Roy"],["EADAB8","Raffia"],["EAE8D4","White Rock"],["EAF6EE","Panache"],["EAF6FF","Solitude"],["EAF9F5","Aqua Spring"],["EAFFFE","Dew"],["EB9373","Apricot"],["EBC2AF","Zinnwaldite"],["ECA927","Fuel Yellow"],["ECC54E","Ronchi"],["ECC7EE","French Lilac"],["ECCDB9","Just Right"],["ECE090","Wild Rice"],["ECEBBD","Fall Green"],["ECEBCE","Aths Special"],["ECF245","Starship"],["ED0A3F","Red Ribbon"],["ED7A1C","Tango"],["ED9121","Carrot Orange"],["ED989E","Sea Pink"],["EDB381","Tacao"],["EDC9AF","Desert Sand"],["EDCDAB","Pancho"],["EDDCB1","Chamois"],["EDEA99","Primrose"],["EDF5DD","Frost"],["EDF5F5","Aqua Haze"],["EDF6FF","Zumthor"],["EDF9F1","Narvik"],["EDFC84","Honeysuckle"],["EE82EE","Lavender Magenta"],["EEC1BE","Beauty Bush"],["EED794","Chalky"],["EED9C4","Almond"],["EEDC82","Flax"],["EEDEDA","Bizarre"],["EEE3AD","Double Colonial White"],["EEEEE8","Cararra"],["EEEF78","Manz"],["EEF0C8","Tahuna Sands"],["EEF0F3","Athens Gray"],["EEF3C3","Tusk"],["EEF4DE","Loafer"],["EEF6F7","Catskill White"],["EEFDFF","Twilight Blue"],["EEFF9A","Jonquil"],["EEFFE2","Rice Flower"],["EF863F","Jaffa"],["EFEFEF","Gallery"],["EFF2F3","Porcelain"],["F091A9","Mauvelous"],["F0D52D","Golden Dream"],["F0DB7D","Golden Sand"],["F0DC82","Buff"],["F0E2EC","Prim"],["F0E68C","Khaki"],["F0EEFD","Selago"],["F0EEFF","Titan White"],["F0F8FF","Alice Blue"],["F0FCEA","Feta"],["F18200","Gold Drop"],["F19BAB","Wewak"],["F1E788","Sahara Sand"],["F1E9D2","Parchment"],["F1E9FF","Blue Chalk"],["F1EEC1","Mint Julep"],["F1F1F1","Seashell"],["F1F7F2","Saltpan"],["F1FFAD","Tidal"],["F1FFC8","Chiffon"],["F2552A","Flamingo"],["F28500","Tangerine"],["F2C3B2","Mandys Pink"],["F2F2F2","Concrete"],["F2FAFA","Black Squeeze"],["F34723","Pomegranate"],["F3AD16","Buttercup"],["F3D69D","New Orleans"],["F3D9DF","Vanilla Ice"],["F3E7BB","Sidecar"],["F3E9E5","Dawn Pink"],["F3EDCF","Wheatfield"],["F3FB62","Canary"],["F3FBD4","Orinoco"],["F3FFD8","Carla"],["F400A1","Hollywood Cerise"],["F4A460","Sandy brown"],["F4C430","Saffron"],["F4D81C","Ripe Lemon"],["F4EBD3","Janna"],["F4F2EE","Pampas"],["F4F4F4","Wild Sand"],["F4F8FF","Zircon"],["F57584","Froly"],["F5C85C","Cream Can"],["F5C999","Manhattan"],["F5D5A0","Maize"],["F5DEB3","Wheat"],["F5E7A2","Sandwisp"],["F5E7E2","Pot Pourri"],["F5E9D3","Albescent White"],["F5EDEF","Soft Peach"],["F5F3E5","Ecru White"],["F5F5DC","Beige"],["F5FB3D","Golden Fizz"],["F5FFBE","Australian Mint"],["F64A8A","French Rose"],["F653A6","Brilliant Rose"],["F6A4C9","Illusion"],["F6F0E6","Merino"],["F6F7F7","Black Haze"],["F6FFDC","Spring Sun"],["F7468A","Violet Red"],["F77703","Chilean Fire"],["F77FBE","Persian Pink"],["F7B668","Rajah"],["F7C8DA","Azalea"],["F7DBE6","We Peep"],["F7F2E1","Quarter Spanish White"],["F7F5FA","Whisper"],["F7FAF7","Snow Drift"],["F8B853","Casablanca"],["F8C3DF","Chantilly"],["F8D9E9","Cherub"],["F8DB9D","Marzipan"],["F8DD5C","Energy Yellow"],["F8E4BF","Givry"],["F8F0E8","White Linen"],["F8F4FF","Magnolia"],["F8F6F1","Spring Wood"],["F8F7DC","Coconut Cream"],["F8F7FC","White Lilac"],["F8F8F7","Desert Storm"],["F8F99C","Texas"],["F8FACD","Corn Field"],["F8FDD3","Mimosa"],["F95A61","Carnation"],["F9BF58","Saffron Mango"],["F9E0ED","Carousel Pink"],["F9E4BC","Dairy Cream"],["F9E663","Portica"],["F9EAF3","Amour"],["F9F8E4","Rum Swizzle"],["F9FF8B","Dolly"],["F9FFF6","Sugar Cane"],["FA7814","Ecstasy"],["FA9D5A","Tan Hide"],["FAD3A2","Corvette"],["FADFAD","Peach Yellow"],["FAE600","Turbo"],["FAEAB9","Astra"],["FAECCC","Champagne"],["FAF0E6","Linen"],["FAF3F0","Fantasy"],["FAF7D6","Citrine White"],["FAFAFA","Alabaster"],["FAFDE4","Hint of Yellow"],["FAFFA4","Milan"],["FB607F","Brink Pink"],["FB8989","Geraldine"],["FBA0E3","Lavender Rose"],["FBA129","Sea Buckthorn"],["FBAC13","Sun"],["FBAED2","Lavender Pink"],["FBB2A3","Rose Bud"],["FBBEDA","Cupid"],["FBCCE7","Classic Rose"],["FBCEB1","Apricot Peach"],["FBE7B2","Banana Mania"],["FBE870","Marigold Yellow"],["FBE96C","Festival"],["FBEA8C","Sweet Corn"],["FBEC5D","Candy Corn"],["FBF9F9","Hint of Red"],["FBFFBA","Shalimar"],["FC0FC0","Shocking Pink"],["FC80A5","Tickle Me Pink"],["FC9C1D","Tree Poppy"],["FCC01E","Lightning Yellow"],["FCD667","Goldenrod"],["FCD917","Candlelight"],["FCDA98","Cherokee"],["FCF4D0","Double Pearl Lusta"],["FCF4DC","Pearl Lusta"],["FCF8F7","Vista White"],["FCFBF3","Bianca"],["FCFEDA","Moon Glow"],["FCFFE7","China Ivory"],["FCFFF9","Ceramic"],["FD0E35","Torch Red"],["FD5B78","Wild Watermelon"],["FD7B33","Crusta"],["FD7C07","Sorbus"],["FD9FA2","Sweet Pink"],["FDD5B1","Light Apricot"],["FDD7E4","Pig Pink"],["FDE1DC","Cinderella"],["FDE295","Golden Glow"],["FDE910","Lemon"],["FDF5E6","Old Lace"],["FDF6D3","Half Colonial White"],["FDF7AD","Drover"],["FDFEB8","Pale Prim"],["FDFFD5","Cumulus"],["FE28A2","Persian Rose"],["FE4C40","Sunset Orange"],["FE6F5E","Bittersweet"],["FE9D04","California"],["FEA904","Yellow Sea"],["FEBAAD","Melon"],["FED33C","Bright Sun"],["FED85D","Dandelion"],["FEDB8D","Salomie"],["FEE5AC","Cape Honey"],["FEEBF3","Remy"],["FEEFCE","Oasis"],["FEF0EC","Bridesmaid"],["FEF2C7","Beeswax"],["FEF3D8","Bleach White"],["FEF4CC","Pipi"],["FEF4DB","Half Spanish White"],["FEF4F8","Wisp Pink"],["FEF5F1","Provincial Pink"],["FEF7DE","Half Dutch White"],["FEF8E2","Solitaire"],["FEF8FF","White Pointer"],["FEF9E3","Off Yellow"],["FEFCED","Orange White"],["FF0000","Red"],["FF007F","Rose"],["FF00CC","Purple Pizzazz"],["FF00FF","Magenta / Fuchsia"],["FF2400","Scarlet"],["FF3399","Wild Strawberry"],["FF33CC","Razzle Dazzle Rose"],["FF355E","Radical Red"],["FF3F34","Red Orange"],["FF4040","Coral Red"],["FF4D00","Vermilion"],["FF4F00","International Orange"],["FF6037","Outrageous Orange"],["FF6600","Blaze Orange"],["FF66FF","Pink Flamingo"],["FF681F","Orange"],["FF69B4","Hot Pink"],["FF6B53","Persimmon"],["FF6FFF","Blush Pink"],["FF7034","Burning Orange"],["FF7518","Pumpkin"],["FF7D07","Flamenco"],["FF7F00","Flush Orange"],["FF7F50","Coral"],["FF8C69","Salmon"],["FF9000","Pizazz"],["FF910F","West Side"],["FF91A4","Pink Salmon"],["FF9933","Neon Carrot"],["FF9966","Atomic Tangerine"],["FF9980","Vivid Tangerine"],["FF9E2C","Sunshade"],["FFA000","Orange Peel"],["FFA194","Mona Lisa"],["FFA500","Web Orange"],["FFA6C9","Carnation Pink"],["FFAB81","Hit Pink"],["FFAE42","Yellow Orange"],["FFB0AC","Cornflower Lilac"],["FFB1B3","Sundown"],["FFB31F","My Sin"],["FFB555","Texas Rose"],["FFB7D5","Cotton Candy"],["FFB97B","Macaroni and Cheese"],["FFBA00","Selective Yellow"],["FFBD5F","Koromiko"],["FFBF00","Amber"],["FFC0A8","Wax Flower"],["FFC0CB","Pink"],["FFC3C0","Your Pink"],["FFC901","Supernova"],["FFCBA4","Flesh"],["FFCC33","Sunglow"],["FFCC5C","Golden Tainoi"],["FFCC99","Peach Orange"],["FFCD8C","Chardonnay"],["FFD1DC","Pastel Pink"],["FFD2B7","Romantic"],["FFD38C","Grandis"],["FFD700","Gold"],["FFD800","School bus Yellow"],["FFD8D9","Cosmos"],["FFDB58","Mustard"],["FFDCD6","Peach Schnapps"],["FFDDAF","Caramel"],["FFDDCD","Tuft Bush"],["FFDDCF","Watusi"],["FFDDF4","Pink Lace"],["FFDEAD","Navajo White"],["FFDEB3","Frangipani"],["FFE1DF","Pippin"],["FFE1F2","Pale Rose"],["FFE2C5","Negroni"],["FFE5A0","Cream Brulee"],["FFE5B4","Peach"],["FFE6C7","Tequila"],["FFE772","Kournikova"],["FFEAC8","Sandy Beach"],["FFEAD4","Karry"],["FFEC13","Broom"],["FFEDBC","Colonial White"],["FFEED8","Derby"],["FFEFA1","Vis Vis"],["FFEFC1","Egg White"],["FFEFD5","Papaya Whip"],["FFEFEC","Fair Pink"],["FFF0DB","Peach Cream"],["FFF0F5","Lavender blush"],["FFF14F","Gorse"],["FFF1B5","Buttermilk"],["FFF1D8","Pink Lady"],["FFF1EE","Forget Me Not"],["FFF1F9","Tutu"],["FFF39D","Picasso"],["FFF3F1","Chardon"],["FFF46E","Paris Daisy"],["FFF4CE","Barley White"],["FFF4DD","Egg Sour"],["FFF4E0","Sazerac"],["FFF4E8","Serenade"],["FFF4F3","Chablis"],["FFF5EE","Seashell Peach"],["FFF5F3","Sauvignon"],["FFF6D4","Milk Punch"],["FFF6DF","Varden"],["FFF6F5","Rose White"],["FFF8D1","Baja White"],["FFF9E2","Gin Fizz"],["FFF9E6","Early Dawn"],["FFFACD","Lemon Chiffon"],["FFFAF4","Bridal Heath"],["FFFBDC","Scotch Mist"],["FFFBF9","Soapstone"],["FFFC99","Witch Haze"],["FFFCEA","Buttery White"],["FFFCEE","Island Spice"],["FFFDD0","Cream"],["FFFDE6","Chilean Heath"],["FFFDE8","Travertine"],["FFFDF3","Orchid White"],["FFFDF4","Quarter Pearl Lusta"],["FFFEE1","Half and Half"],["FFFEEC","Apricot White"],["FFFEF0","Rice Cake"],["FFFEF6","Black White"],["FFFEFD","Romance"],["FFFF00","Yellow"],["FFFF66","Laser Lemon"],["FFFF99","Pale Canary"],["FFFFB4","Portafino"],["FFFFF0","Ivory"],["FFFFFF","White"]]};return ntc.init(),ntc})}(),function(){"use strict";var deletOnExit={};angular.module("core").factory("PageExitService",["$window","$timeout","$rootScope","CommentsService",function($window,$timeout,$rootScope,CommentsService){return $rootScope.$on(PreviewEnums.DELETING_COMMENT,function(e,id,value){value?deletOnExit[id]=$timeout(function(){delete deletOnExit[id]},PreviewEnums.UNDO_TIMEOUT):_.isUndefined(deletOnExit[id])||($timeout.cancel(deletOnExit[id]),delete deletOnExit[id])}),$window.addEventListener("beforeunload",function(event){return _.isEmpty(deletOnExit)||Object.keys(deletOnExit).forEach(function(commentId){$timeout.cancel(deletOnExit[commentId]),CommentsService.fastDeletOnExit(commentId),delete deletOnExit[commentId]}),null}),{}}])}(),function(){"use strict";angular.module("core").factory("PagesService",["appStateManager","_","$q","$rootScope","$state","$window","Rest","RestWithCache","ProjectsService","BreakpointsService","ExportService","LocalDataService","DesignViewsService","FeatureToggler","GlobalProperties",function(appStateManager,_,$q,$rootScope,$state,$window,Rest,RestWithCache,ProjectsService,BreakpointsService,ExportService,LocalDataService,DesignViewsService,FeatureToggler,GlobalProperties){var currentBreakpointPages=[];function _getPage(projectHash,pageId){return ExportService.isExport()?LocalDataService.getData("data/page_size_".concat(pageId,".js")):RestWithCache.one("projects",projectHash).one("pages",pageId).get()}function setUXPinPages(pagesMap,currentPageId){currentBreakpointPages=_.reduce(pagesMap,function(pagesMap,page,key){return pagesMap[key]=_.extend({},function(page){return{idPage:parseInt(page.id_page,10),name:page.name,order:page.sort_order,parent:parseInt(page.parent,10)||null,versionOf:parseInt(page.version_of,10)||null}}(page),{isActive:parseInt(page.id_page)===parseInt(currentPageId)}),pagesMap},{})}return{rootPageId:null,currentPageId:null,currentMainPageId:null,defaultBreakpointId:null,currentBreakpointId:null,currentPageProperties:null,pagesFlatList:[],styleGuidePagesFlatList:[],pagesMap:{},pagesChildrenMap:{},pagesTree:{},pagesBreakpoints:{},breakpointIds:{},getBreakpointPages:function(){return _.values(currentBreakpointPages)},setCurrentPageId:function(id){this.currentPageId=id,this.currentMainPageId=id,angular.isDefined(this.pagesMap[id])&&angular.isDefined(this.pagesMap[id].version_type)&&(this.currentBreakpointId=this.pagesMap[id].version_type),angular.isDefined(this.pagesMap[id])&&0<this.pagesMap[id].version_of&&(this.currentMainPageId=this.pagesMap[id].version_of);var projectHash=ProjectsService.currentProjectHash,pageId=this.currentPageId;FeatureToggler.designViews&&!DesignViewsService.isDesignViewCounted(projectHash,pageId)?DesignViewsService.addDesignView(projectHash,pageId):FeatureToggler.designViews||DesignViewsService.isDesignViewCounted(projectHash,pageId)||DesignViewsService.addCookie(projectHash,pageId),$rootScope.$emit(PreviewEnums.ON_CHANGE_PAGE,id),setUXPinPages(this.pagesMap,this.currentPageId)},setCurrentBreakpointId:function(id){appStateManager.saveState({breakpoint:id}),this.currentBreakpointId=id},setPageResponsive:function(width){var breakpointId,_this27=this;1<_.size(this.breakpointIds)&&(breakpointId=0,_.each(BreakpointsService.breakpointWidths,function(breakpoint){-1<_this27.breakpointIds.indexOf(breakpoint.version)&&breakpoint.width<=width&&(breakpointId=breakpoint.version)}),angular.isDefined(breakpointId))&&this.currentBreakpointId!==breakpointId&&this.changePageBreakpoint(breakpointId)},changePageBreakpoint:function(id){this.setCurrentBreakpointId(id),$state.go($state.current.name,{pageId:this.getPageByBreakpoint(this.currentPageId)})},getCanvasData:function(pageId){var _this28=this,projectHash=ProjectsService.currentProjectHash,d=$q.defer(),pageData={};return Promise.all([_getPage(projectHash,pageId),function(projectHash,pageId){return ExportService.isExport()?LocalDataService.getData("data/page_".concat(pageId,".js")):RestWithCache.one("projects",projectHash).one("pages",pageId).one("canvasData").get()}(projectHash,pageId)]).then(function(resolvedValues){return _this28.currentPageProperties=resolvedValues[0],resolvedValues[1]}).then(function(data){return pageData=data,FeatureToggler.globalProperties?GlobalProperties.fetchGlobalProperties():[]}).then(function(globalProperties){pageData.global_properties=globalProperties,d.resolve(pageData)}),d.promise},getAllPagesData:function(pagesIds){var _this29=this,promises=[];return _.forEach(pagesIds,function(pageId){promises.push(_this29.getCanvasData(pageId))}),$q.all(promises)},getPages:function(currentPageId){var _this30=this,projectHash=ProjectsService.currentProjectHash,d=$q.defer();return function(projectHash){return ExportService.isExport()?LocalDataService.getData("data/pages.js"):RestWithCache.one("projects",projectHash).all("pages").getList()}(projectHash).then(function(pages){_this30.generatePagesFlatList(pages),_this30.generateStyleGuidePagesFlatList(pages),_this30.generatePagesMap(pages,currentPageId),_this30.generatePagesTree(pages),_this30.generatePagesBreakpoints(pages),_this30.breakpointIds=_this30.getBreakpoints(pages),_this30.rootPageId=_this30.pagesTree.nodes[0].id,_this30.defaultBreakpointId=_this30.getDefaultBreakpointId(pages),d.resolve(pages)},function(error){d.reject(error)}),d.promise},getPage:function(id){var _this31=this,projectHash=ProjectsService.currentProjectHash,d=$q.defer();return _getPage(projectHash,id).then(function(page){_this31.currentPageProperties=page,d.resolve(page)}),d.promise},getPageContent:function(id){var projectHash=ProjectsService.currentProjectHash,d=$q.defer();return function(projectHash,pageId){return Rest.one("projects",projectHash).one("pages",pageId).one("content").get()}(projectHash,id).then(function(content){d.resolve(content)}),d.promise},getPageByBreakpoint:function(id){if(!this.pagesMap[id])return{};this.pagesMap[id].version_of&&(id=this.pagesMap[id].version_of);var breakpointId=null!==this.currentBreakpointId?this.currentBreakpointId:this.defaultBreakpointId,breakpointId=this.pagesBreakpoints[id][breakpointId];return breakpointId||this.pagesBreakpoints[id][parseInt(_.findKey(this.pagesBreakpoints[id]))]},getRootPage:function(){return this.getPageByBreakpoint(this.rootPageId)},getNextPageId:function(){var currentIndex=this.pagesFlatList.indexOf(this.currentMainPageId);if(currentIndex===this.pagesFlatList.length-1)return!1;for(var nextPageId,isNextPageVisible=!1,index=currentIndex;!isNextPageVisible;)if(nextPageId=this.pagesFlatList[index+1],this.pagesMap[nextPageId].is_hidden){if((index+=1)===this.pagesFlatList.length-1)return!1}else isNextPageVisible=!0;return nextPageId},getPrevPageId:function(){var currentIndex=this.pagesFlatList.indexOf(this.currentMainPageId);if(0===currentIndex)return!1;for(var prevPageId,isPrevPageVisible=!1,index=currentIndex;!isPrevPageVisible;)if(prevPageId=this.pagesFlatList[index-1],this.pagesMap[prevPageId].is_hidden){if(0===--index)return!1}else isPrevPageVisible=!0;return prevPageId},getContentWidth:function(){var breakpointId=this.pagesMap[this.currentPageId].version_type;return(0!==breakpointId?BreakpointsService.breakpointsMap[breakpointId]:this.currentPageProperties.size).width},getContentCropping:function(){return this.currentPageProperties?{x:this.currentPageProperties.size.scrollx,y:this.currentPageProperties.size.scrolly}:{}},generatePagesFlatList:function(pages){this.pagesFlatList=_.reduce(pages,function(list,page){return page.version_type||list.push(page.id_page),list},[])},generateStyleGuidePagesFlatList:function(pages){this.styleGuidePagesFlatList=pages.map(function(page){return page.id_page})},generatePagesMap:function(pages,currentPageId){var _this32=this,currentPage=pages.find(function(page){return String(page.id_page)===currentPageId||String(page.version_of)===currentPageId})||{},currentBreakpoint=currentPage.version_type||0;this.pagesMap={},pages.forEach(function(page){var documentationExists=page.documentationExists;currentPage.version_of&&!page.version_of&&(documentationExists=!!pages.find(function(pageItem){return pageItem.version_of===page.id_page&&pageItem.documentationExists&&pageItem.version_type===currentBreakpoint})),_this32.pagesMap[page.id_page]=_objectSpread(_objectSpread({},page),{},{documentationExists:documentationExists})}),setUXPinPages(this.pagesMap,this.currentPageId)},generatePagesTree:function(pages){var _this33=this;_.forIn(this.pagesTree,function(value,key){delete _this33.pagesTree[key]}),_.forIn(this.pagesChildrenMap,function(value,key){delete _this33.pagesChildrenMap[key]}),this.pagesTree=this.getChildren(null,pages)},getChildren:function(id,pages){var _this34=this,node={id:id,nodes:[]};return this.pagesChildrenMap[node.id]=[],pages.forEach(function(page){page.parent===id&&null===page.version_of&&(_this34.pagesChildrenMap[node.id].push(page.id_page),node.nodes.push(_this34.getChildren(page.id_page,pages)))}),node},generatePagesBreakpoints:function(pages){var breakpoints,_this35=this;_.forIn(this.pagesBreakpoints,function(value,key){delete _this35.pagesBreakpoints[key]}),pages.forEach(function(page){page.version_of||(_this35.pagesBreakpoints[page.id_page]={},breakpoints=_this35.pagesBreakpoints[page.id_page],pages.forEach(function(breakpointPage){breakpointPage.version_of===page.id_page&&(breakpoints[breakpointPage.version_type]=breakpointPage.id_page)}),_.isNumber(page.version_type)&&(breakpoints[page.version_type]=page.id_page))})},getBreakpoints:function(pages){var breakpoints=[];return pages.forEach(function(page){_.isNumber(page.version_type)&&-1===breakpoints.indexOf(page.version_type)&&breakpoints.push(page.version_type)}),breakpoints},getPageBreakpoints:function(id){var b,p=this.pagesMap[id];return p?(p=p.version_of||id,id=this.pagesBreakpoints[p],b=[],_.forEach(id,function(pageId,breakpointId){"null"!==breakpointId&&(breakpointId=parseInt(breakpointId,10),b.push({id:breakpointId,name:BreakpointsService.getBreakpointName(breakpointId)}))}),b):[]},getCurrentPageBreakpoints:function(){return this.getPageBreakpoints(this.currentPageId)},getDefaultBreakpointId:function(pages){return pages.length?0===pages[0].main_version&&null===pages[0].version_type?this.breakpointIds[1]:pages[0].main_version:null},getVisiblePagesIds:function(){var _this36=this;return _.reduce(this.pagesMap,function(result,page){return _.includes(_this36.breakpointIds,page.version_type)&&result.push(page.id_page),result},[])},getPageName:function(id){return(this.pagesMap[id]||{}).name},getPageByName:function(name){return _.find(this.pagesMap,function(page){return page.name===name})},getPageById:function(id){return this.pagesMap[id]}}}])}(),function(){"use strict";function PreloadService(_,$log,$window,$timeout,$q,Engine,PagesService,ProjectsService,PreviewCache,RestWithCache,ExportService,editorSocket){var SRC_REGEXP=/^(https?:\/)?\//i,loadedPages={},preload=!1,$window=$window.ApplicationConfiguration&&$window.ApplicationConfiguration.clientSideCacheSize,pageLimit=Math.floor($window/3),loadedPagesCount=0;return editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_CREATE,function(data){requestAnimationFrame(function(){var pageId=parseInt(data.id_page,10);preloadPage(pageId).then(preloadPageBreakpoints.bind(null,pageId))})}),editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_SAVED,function(data){requestAnimationFrame(function(){delete loadedPages[data.id_page],preloadPage(parseInt(data.id_page,10))})}),{getInitialData:function(pageId,width){return $q(function(resolve){if(ExportService.isExport())return resolve({});var projectHash=ProjectsService.currentProjectHash;RestWithCache.one("projects",projectHash).one("all").get({pageId:pageId,width:width}).then(function(data){return PreviewCache.setInitialData(projectHash,data),data}).then(resolve)})},preloadAllPages:function(){var pageId=PagesService.currentPageId;preload||ExportService.isExport()||!PagesService.pagesMap[pageId]||(preload=!0,requestAnimationFrame(function(){preloadRelatedPages(pageId).then(preloadPageBreakpoints.bind(null,pageId)).then(preloadRestPages)}))},preloadImagesInBackground:preloadImagesInBackground};function preloadPage(pageId){var pageRequest;return loadedPages[pageId]||pageLimit<=loadedPagesCount?Promise.resolve():(pageRequest=[(pageRequest=RestWithCache.one("projects",ProjectsService.currentProjectHash).one("pages",pageId)).get(),pageRequest.one("canvasData").get(),pageRequest.all("comments").getList()],loadedPages[pageId]=!0,loadedPagesCount=_.size(loadedPages),Promise.all(pageRequest).then(function(data){data=data[1];return PreviewCache.storeCanvasDataProperties(pageId,data),preloadImagesInBackground(data)}))}function preloadMultiplePages(pageIds){var pagesSlice;return _.isEmpty(pageIds)?Promise.resolve():(pagesSlice=pageIds.splice(0,5),Promise.all(_.map(pagesSlice,preloadPage)).then(preloadMultiplePages.bind(null,pageIds)))}function preloadRelatedPages(pageId){var projectHash=ProjectsService.currentProjectHash;return RestWithCache.one("projects",projectHash).one("pages",pageId).one("canvasData").get().then(function(data){var data=_.map(_.keys(data._links),function(idPage){return parseInt(idPage,10)}),existingPagesIds=_.map(PagesService.pagesMap,"id_page");return preloadMultiplePages(_.intersection(data,existingPagesIds))})}function preloadPageBreakpoints(pageId){return PagesService.getPages().then(function(allPages){var versionOf,breakpointsToLoad,currentBreakpoint=_.find(allPages,{id_page:pageId});if(currentBreakpoint)return versionOf=currentBreakpoint.version_of||pageId,preloadMultiplePages(breakpointsToLoad=_.reduce(allPages,function(breakpoints,breakpoint){return breakpoint.id_page!==pageId&&(breakpoint.version_of===versionOf||breakpoint.id_page===versionOf)?breakpoints.concat(breakpoint.id_page):breakpoints},[])).then(function(){return Promise.all(_.map(breakpointsToLoad,preloadRelatedPages))})})}function preloadRestPages(){return PagesService.getPages().then(function(allPages){return preloadMultiplePages(_.difference(_.map(allPages,"id_page"),_.keys(loadedPages)))})}function extractImages(canvasData){function putImageUrl(element){(element=function(element){return(element=element&&element.props&&(element.props.src||element.props.backgroundImage))&&SRC_REGEXP.test(element)?element:""}(element))&&imageUrls.push(Engine.getPage().getCDNUrl(element))}var imageUrls=[];return _.each(canvasData.page,putImageUrl),_.each(canvasData.components,function(component){_.each(component,putImageUrl)}),imageUrls}function preloadImagesInBackground(pageContent){return new Promise(function(resolve){var worker,blobURL=URL.createObjectURL(new Blob(["(",function(){var _this37=this;this.onmessage=function(e){var done,onload;"PRELOADING_START"===e.data.type&&(e=e.data.data||[],done=e.length,onload=function(){0===--done&&_this37.close()},e.forEach(function(url){try{var xhr;url?((xhr=new XMLHttpRequest).responseType="blob",xhr.open("GET",url,!0),xhr.onload=onload,xhr.onerror=onload,xhr.send()):onload()}catch(error){onload()}}),_this37.postMessage({type:"PRELOADING_FINISH"}))}}.toString(),")()"],{type:"application/javascript"})),urls=extractImages(pageContent);urls.length?((worker=new Worker(blobURL)).postMessage({type:"PRELOADING_START",data:urls}),worker.onmessage=function(e){"PRELOADING_FINISH"===e.data.type&&resolve()},URL.revokeObjectURL(blobURL)):resolve()})}}angular.module("core").factory("PreloadService",PreloadService),PreloadService.$inject=["_","$log","$window","$timeout","$q","Engine","PagesService","ProjectsService","PreviewCache","RestWithCache","ExportService","editorSocket"]}(),function(){"use strict";function PreviewCache(_,$cacheFactory,ProjectsService,$window){var cachedPages={},cache=$cacheFactory("http",{capacity:$window.ApplicationConfiguration&&$window.ApplicationConfiguration.clientSideCacheSize||3}),storedCanvasDataProperties={},originalGet=cache.get,originalPut=cache.put,CANVAS_DATA_STORED_PROPERTIES=["components_ids"];return cache.get=function(url){url=getCoreAllUrl(url);return url?originalGet.call(cache,url):originalGet.apply(cache,arguments)},cache.put=function(url,value){if(url){var coreAllUrl=getCoreAllUrl(url),pageId=function(url){url=url.match(/^\/api\/projects\/([^\/]+)\/pages\/(\d+)$/);if(_.isArray(url)&&url[2])return url[2];return null}(url);if(coreAllUrl)return originalPut.call(cache,coreAllUrl,(coreAllUrl=value,_.isArray(coreAllUrl)?[coreAllUrl[0],JSON.stringify(_.omit(JSON.parse(coreAllUrl[1]),"redirect")),coreAllUrl[2],coreAllUrl[3]]:coreAllUrl));pageId&&(cachedPages[pageId]=url)}originalPut.apply(cache,arguments)},{removeComments:function(projectHash,idPage){projectHash=getCommentsUrl(projectHash,idPage);cache.remove(projectHash)},removeCanvasData:function(idProject,idPage){idProject=getCanvasDataUrl(projectIdToHash(idProject),idPage);cache.remove(idProject)},removePage:function(projectHash,pageId){projectHash=getPageUrl(projectHash,pageId);cache.remove(projectHash),delete cachedPages[pageId]},removePages:function(){_.each(cachedPages,function(pageUrl){cache.remove(pageUrl)}),cachedPages={}},removePagesList:function(){cache.remove(getPagesUrl(ProjectsService.currentProjectHash))},removeBreakpoints:function(){cache.remove(getBreakpointsUrl(ProjectsService.currentProjectHash))},cache:cache,getStoredCanvasDataProperties:function(){return storedCanvasDataProperties},getCanvasDataUrl:getCanvasDataUrl,isPageDataInCache:function(projectHash,pageId){var pageUrl=getPageUrl(projectHash,pageId),canvasDataUrl=getCanvasDataUrl(projectHash,pageId),projectHash=getCommentsUrl(projectHash,pageId),requestsInCache=0;return _.each([pageUrl,canvasDataUrl,projectHash],function(url){requestsInCache=cache.get(url)?requestsInCache+1:requestsInCache}),requestsInCache},projectIdToHash:projectIdToHash,setInitialData:function(projectHash,data){data.breakpoints&&(breakpointsUrl=getBreakpointsUrl(projectHash),cache.get(breakpointsUrl)||putToCache(breakpointsUrl,data.breakpoints));{var breakpointsUrl;data.pages&&(breakpointsUrl=getPagesUrl(projectHash),cache.get(breakpointsUrl)||putToCache(breakpointsUrl,data.pages))}_.forEach(data.pagesData,function(pageData,pageId){var canvasDataUrl=getCanvasDataUrl(projectHash,pageId);cache.get(canvasDataUrl)||(putToCache(canvasDataUrl,pageData.canvasData),putToCache(getPageUrl(projectHash,pageId),pageData.metaData),storeCanvasDataProperties(pageId,pageData.canvasData))})},storeCanvasDataProperties:storeCanvasDataProperties};function getCoreAllUrl(url){url=url&&url.match(/^(\/api\/projects\/([^\/]+)\/all)([\?\&]\w+=\d*)*$/);return _.isArray(url)&&url[1]?url[1]:null}function putToCache(url,data){cache.put(url,[200,JSON.stringify(data),{"content-type":"application/json; charset=utf-8"},"OK"])}function storeCanvasDataProperties(pageId,canvasData){storedCanvasDataProperties[pageId]=_.pick(canvasData,CANVAS_DATA_STORED_PROPERTIES)}function projectIdToHash(projectId){return ProjectsService.currentProjectId===projectId?ProjectsService.currentProjectHash:null}function getBreakpointsUrl(projectHash){return"/api/projects/".concat(projectHash,"/breakpoints")}function getPagesUrl(projectHash){return"/api/projects/".concat(projectHash,"/pages")}function getPageUrl(projectHash,pageId){return"/api/projects/".concat(projectHash,"/pages/").concat(pageId)}function getCanvasDataUrl(projectHash,pageId){return"".concat(getPageUrl(projectHash,pageId),"/canvasData")}function getCommentsUrl(projectHash,pageId){return"".concat(getPageUrl(projectHash,pageId),"/comments")}}angular.module("core").factory("PreviewCache",PreviewCache),PreviewCache.$inject=["_","$cacheFactory","ProjectsService","$window"]}(),function(){"use strict";function ProjectSettings(_,ProjectsService,PagesService){var BREAKPOINT_PREFIX="resp",INITIAL_PREVIEW_SHADOW={shadowOffsetX:0,shadowOffsetY:10,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.05)",shadowEnabled:!0,shadowSpread:0},settings=ProjectsService.currentProjectSettings;function mapSavedSettings(settings){return _.reduce(settings,function(mappedSettings,value,key){return _.startsWith(key,BREAKPOINT_PREFIX)&&(mappedSettings[key.substr(BREAKPOINT_PREFIX.length)]=value),mappedSettings},{})}return{getDeviceFrame:function(){var brakepointId=PagesService.currentBreakpointId;return mapSavedSettings(settings.deviceFrame)[brakepointId]||{}},getPreviewBackgroundColor:function(){var brakepointId=PagesService.currentBreakpointId;return mapSavedSettings(settings.previewBackground)[brakepointId]||"#f3f3f3"},getPreviewShadow:function(){var brakepointId=PagesService.currentBreakpointId;return mapSavedSettings(settings.previewShadow)[brakepointId]||[INITIAL_PREVIEW_SHADOW]},isDeviceFrameAvailable:function(deviceFrame){return!_.isEmpty(deviceFrame)&&_.get(deviceFrame,"isEnabled")&&_.get(deviceFrame,"name")},updateSettings:function(property,value){var settingsUpdated={};settingsUpdated[property]=function(settings){return _.reduce(settings,function(dataToSave,data,key){var brakepointData;return isNaN(Number(key))?dataToSave:((brakepointData={})[BREAKPOINT_PREFIX+key]=data,_.extend(dataToSave,brakepointData))},{})}(value),settings=_.extend(settings,settingsUpdated)}}}angular.module("core").factory("ProjectSettings",ProjectSettings),ProjectSettings.$inject=["_","ProjectsService","PagesService"]}(),function(){"use strict";angular.module("core").factory("ProjectsService",function(){return{currentCollectionId:ApplicationConfiguration.project.id_collection,currentCollectionType:ApplicationConfiguration.project.collection_type,currentDocumentType:ApplicationConfiguration.project.type,currentIterationName:ApplicationConfiguration.project.iteration_name,currentIterationNumber:ApplicationConfiguration.project.iteration_number,currentOriginalProjectId:ApplicationConfiguration.project.id_original_project,currentProjectAccount:ApplicationConfiguration.project.id_account,currentProjectFeatures:ApplicationConfiguration.project.features||{},currentProjectHash:ApplicationConfiguration.project.hash,currentProjectId:ApplicationConfiguration.project.id_project,currentProjectName:ApplicationConfiguration.project.name,currentProjectSettings:ApplicationConfiguration.project.settings||{},currentProjectType:ApplicationConfiguration.project.type,DOCUMENT_TYPE_UXTEST:"DUXTEST",DOCUMENT_TYPE_PERSONA:"DPERSONA",DOCUMENT_TYPE_BMC:"DBMC",DOCUMENT_TYPE_PC:"DPC",DOCUMENT_TYPE_WIREFRAME:"W",isDocument:function(){return this.currentProjectType!==this.DOCUMENT_TYPE_WIREFRAME&&!ApplicationConfiguration.isDesignSystem},isUXTestDocument:function(){return this.DOCUMENT_TYPE_UXTEST===this.currentProjectType},getType:function(){return this.currentDocumentType},isOriginalProject:function(){return!this.currentOriginalProjectId&&!this.currentIterationNumber}}})}(),function(){"use strict";function ResponsiveModeService($rootScope){var responsiveMode=!1;return{isResponsiveMode:function(){return responsiveMode},setResponsiveMode:function(_isResponsiveMode){responsiveMode=_isResponsiveMode,$rootScope.$emit(PreviewEnums.ON_CHANGE_RESPONSIVE_MODE,_isResponsiveMode)}}}angular.module("core").factory("ResponsiveModeService",ResponsiveModeService),ResponsiveModeService.$inject=["$rootScope"]}(),function(){"use strict";function Rest(Restangular){return Restangular.withConfig(function(RestangularConfigurer){RestangularConfigurer.setBaseUrl("/api")})}angular.module("core").factory("Rest",Rest),Rest.$inject=["Restangular"]}(),function(){"use strict";var COMMENT_EVENTS=[PreviewEnums.SOCKET.ON_COMMENT_CREATE,PreviewEnums.SOCKET.ON_COMMENT_UPDATE,PreviewEnums.SOCKET.ON_COMMENT_DELETE,PreviewEnums.SOCKET.ON_COMMENT_TYPE_UPDATE,PreviewEnums.SOCKET.ON_COMMENT_CONTENT_UPDATE,PreviewEnums.SOCKET.ON_COMMENT_ASSIGNED_USER_UPDATE],CANVAS_DATA_EVENTS=[PreviewEnums.SOCKET.ON_CHANGE_PROPERTIES,PreviewEnums.SOCKET.ON_PAGE_SAVED],SITEMAP_EVENTS=[PreviewEnums.SOCKET.ON_PAGE_CREATE,PreviewEnums.SOCKET.ON_PAGE_UPDATE,PreviewEnums.SOCKET.ON_PAGE_REORDER,PreviewEnums.SOCKET.ON_PAGE_DOCUMENTATION_SET,PreviewEnums.SOCKET.ON_PAGE_DELETE,PreviewEnums.SOCKET.ON_PAGES_DELETE],COMPONENT_EVENTS=[PreviewEnums.SOCKET.ON_COMPONENTS_UPDATE],PAGE_EVENTS=[PreviewEnums.SOCKET.ON_BREAKPOINT_UPDATE];function RestWithCache($rootScope,_,Restangular,editorSocket,PreviewCache,ProjectsService){function handleComponentChanged(componentId){for(var projectId=ProjectsService.currentProjectId,projectHash=ProjectsService.currentProjectHash,pagesIds=function(componentId,canvasDataProperties){var idPage,componentsIds,pagesIds=[];for(idPage in canvasDataProperties)({}).hasOwnProperty.call(canvasDataProperties,idPage)&&(componentsIds=canvasDataProperties[idPage].components_ids||[],_.includes(componentsIds,componentId.toString()))&&pagesIds.push(idPage);return pagesIds}(componentId,PreviewCache.getStoredCanvasDataProperties()),i=0;i<pagesIds.length;i++)PreviewCache.removePage(projectHash,pagesIds[i]),PreviewCache.removeCanvasData(projectId,pagesIds[i]),$rootScope.$emit(PreviewEnums.REFRESH_PAGE_WITH_COMPONENT,pagesIds[i])}return editorSocket.on(PreviewEnums.SOCKET.WILD_CART,function(){var idProject,idPage,idComponent,eventName=arguments[0]&&arguments[0].data&&arguments[0].data[0],properties=arguments[0]&&arguments[0].data&&arguments[0].data[1];if(PreviewCache.cache&&eventName&&properties&&((idPage=properties.id_page&&parseInt(properties.id_page,10))&&(_.includes(CANVAS_DATA_EVENTS,eventName)?(idProject=properties.id_project&&parseInt(properties.id_project,10),(idComponent=properties.is_component&&parseInt(properties.id_page,10))?handleComponentChanged(idComponent):PreviewCache.removeCanvasData(idProject,idPage)):_.includes(COMMENT_EVENTS,eventName)&&(idComponent=properties.project_hash,PreviewCache.removeComments(idComponent,idPage))),_.includes(PAGE_EVENTS,eventName)&&PreviewCache.removePages(),_.includes(SITEMAP_EVENTS,eventName)&&PreviewCache.removePagesList(),_.includes(COMPONENT_EVENTS,eventName))&&!_.isEmpty(properties.components_ids))for(var componentsIds=properties.components_ids,i=0;i<componentsIds.length;i++)handleComponentChanged(componentsIds[i])}),Restangular.withConfig(function(RestangularProvider){RestangularProvider.setBaseUrl("/api"),RestangularProvider.setDefaultHttpFields({cache:PreviewCache.cache})})}angular.module("core").factory("RestWithCache",RestWithCache),RestWithCache.$inject=["$rootScope","_","Restangular","editorSocket","PreviewCache","ProjectsService"]}(),function(){"use strict";function ScrollService($document){return{scrollToElement:function(containerId,elementId){var containerId=getElement(containerId),elementId=function(id){return getElement(id).getBoundingClientRect()}(elementId),bottomSpace=containerId.clientHeight-elementId.top;elementId.height<bottomSpace||(containerId.scrollTop+=elementId.height-bottomSpace)}};function getElement(id){return $document[0].getElementById(id)}}angular.module("core").factory("ScrollService",ScrollService),ScrollService.$inject=["$document"]}(),function(){"use strict";function Settings($rootScope,$location,localStorageService,ProjectsService,PagesService,SpecificationService,DOMService){function getValue(value,defaultValue){return angular.isString(value)?"true"===value:defaultValue}var modesFlag=PreviewEnums.MODES_FLAGS,isSpecModeFeature=SpecificationService.isSpecificationVisible();return{showResolvedComments:getValue(localStorageService.get("showResolvedComments"),!0),showCurrentPageOnly:getValue(localStorageService.get("showCurrentPageOnly"),!0),isResponsive:!0,enableMirroring:!1,enableFullScreen:!1,enableFullStory:!1,disableComments:!1,disableSitemap:!1,disableSpecification:!isSpecModeFeature,disableDocumentation:!1,disableInteractionsHighlight:!1,disableDeviceFrame:!1,disableLayers:!1,minimized:localStorageService.get("minimized")?localStorageService.get("minimized").split(","):[],fullMode:"",getMode:function(){return this.fullMode},setShowCurrentPageOnly:function(value){localStorageService.set("showCurrentPageOnly",value),this.showCurrentPageOnly=value},setShowResolvedComments:function(value){localStorageService.set("showResolvedComments",value),this.showResolvedComments=value,$rootScope.$emit(PreviewEnums.ON_SHOW_COMMENTS_RESOLVED_SETTINGS_CHANGED,value)},setResponsive:function(value){(this.isResponsive=value)&&PagesService.setPageResponsive(DOMService.getWindowWidth())},updateMinimized:function(){localStorageService.set("minimized",this.minimized.join(","))},getModeSettings:function(mode){return{comments:-1===(mode=mode||"").indexOf(modesFlag.COMMENTS),sitemap:-1===mode.indexOf(modesFlag.SITEMAP),specification:-1===mode.indexOf(modesFlag.SPECIFICATION),documentation:-1===mode.indexOf(modesFlag.DOCUMENTATION),interactionsHighlight:-1===mode.indexOf(modesFlag.INTERACTIONS),mirroring:-1!==mode.indexOf(modesFlag.MIRRORING),deviceFrame:-1===mode.indexOf(modesFlag.DEVICE),fullScreen:-1!==mode.indexOf(modesFlag.FULLSCREEN),fullStory:-1!==mode.indexOf(modesFlag.FULLSTORY)}},toggleSingleMode:function(singleMode){var mode;!singleMode||1<singleMode.length||(mode=-1!==(mode=this.getMode()).indexOf(singleMode)?mode.replace(singleMode,""):"".concat(mode).concat(singleMode),this.setMode(mode),$location.search("mode",mode))},setMode:function(newMode){"true"===newMode&&(newMode="",$location.search("mode",null));var settings=this.getModeSettings(newMode);newMode&&angular.isString(newMode)?(this.fullMode=newMode,this.disableComments=!settings.comments,this.disableSitemap=!settings.sitemap,this.disableSpecification=!settings.specification||!isSpecModeFeature,this.disableDocumentation=!settings.documentation||!1,this.disableInteractionsHighlight=!settings.interactionsHighlight,this.enableMirroring=settings.mirroring,this.disableDeviceFrame=!settings.deviceFrame,this.enableFullScreen=settings.fullScreen,this.enableFullStory=settings.fullStory):(this.fullMode="",this.disableComments=!1,this.disableSitemap=!1,this.disableSpecification=!isSpecModeFeature,this.disableDocumentation=!1,this.disableInteractionsHighlight=!1,this.enableMirroring=!1,this.disableDeviceFrame=!1,this.enableFullScreen=!1,this.enableFullStory=!1),ProjectsService.isDocument()&&(this.disableSitemap=!0,this.disableSpecification=!0),ProjectsService.isUXTestDocument()&&(this.disableComments=!0),$rootScope.$emit(PreviewEnums.ON_MODE_CHANGED)}}}angular.module("core").factory("Settings",Settings),Settings.$inject=["$rootScope","$location","localStorageService","ProjectsService","PagesService","SpecificationService","DOMService"]}(),function(){"use strict";function ShadowService(_,UnitService){var VALUE_LIMIT=100;function limitValue(value){return VALUE_LIMIT<value?VALUE_LIMIT:value}return{getBoxShadowValue:function(shadows,scale){return _.reduce(shadows,function(result,shadow){return shadow.shadowEnabled?result.concat([UnitService.toPx(shadow.shadowOffsetX*scale),UnitService.toPx(shadow.shadowOffsetY*scale),UnitService.toPx(limitValue(shadow.shadowBlur*scale)),UnitService.toPx(limitValue((shadow.shadowSpread||0)*scale)),shadow.shadowColor].join(" ")):result},[]).join(",")||"none"}}}angular.module("core").factory("ShadowService",ShadowService),ShadowService.$inject=["_","UnitService"]}(),function(){"use strict";function SitemapService(_,EscapeHtmlService,PagesService){var pagesMap=PagesService.pagesMap;PagesService.pagesTree.nodes;function getPage(id){return PagesService.pagesMap[id]}function getPageName(id){id=getPage(id).name;return EscapeHtmlService.escape(id)}function getPageVisibility(id){return!!Number(getPage(id).is_hidden)}function hasPageDocumentation(id){id=getPage(id);return!!id&&id.documentationExists}return{getPage:getPage,getPageName:getPageName,getUnescapedPageName:function(id){return getPage(id).name},getPageVisibility:getPageVisibility,hasPageDocumentation:hasPageDocumentation,mapTree:function mapTree(tree){return _.map(tree,function(node){return{id:node.id,name:getPageName(node.id),isHidden:getPageVisibility(node.id),documentationExists:hasPageDocumentation(node.id),nodes:mapTree(node.nodes)}}).filter(function(page){return!page.isHidden})},pagesMap:pagesMap}}angular.module("core").factory("SitemapService",SitemapService),SitemapService.$inject=["_","EscapeHtmlService","PagesService"]}(),angular.module("core").factory("socket",["$rootScope",function($rootScope){"use strict";return SocketServiceHelper(ApplicationConfiguration.socketServerURL,$rootScope)}]),angular.module("core").service("tinycolor",function($window){"use strict";return $window.tinycolor}),angular.module("core").factory("UsabilityTestService",["_","$q","$translate","LiveSessionService",function(_,$q,$translate,LiveSessionService){"use strict";function UsabilityTestService(){LiveSessionService.apply(this,arguments),this.isWizardOpen=!1,this.testDataId=null,this.testData=null,this.videoData=null,this.fetchPromise=null,this.getIdDefer=$q.defer()}var EVENTS=LiveShare.enums.EVENTS,proto=UsabilityTestService.prototype;return(proto=_.extend(proto,LiveSessionService.prototype)).constructor=UsabilityTestService,proto.startInitializing=function(data){var config={};data.options&&(config.options=data.options),this.storeData(data.testData),LiveSessionService.prototype.startInitializing.call(this,config)},proto.initializeLiveShare=function(){var liveShare=LiveSessionService.prototype.initializeLiveShare.apply(this);return liveShare.on(EVENTS.UPDATE_TASKS,this.fireObserverCallback.bind(this,EVENTS.UPDATE_TASKS)),liveShare.on(EVENTS.OPTIONS_CHANGED,this.fireObserverCallback.bind(this,EVENTS.OPTIONS_CHANGED)),liveShare.on(EVENTS.TESTER_JOINED,this.onTesterJoined.bind(this)),liveShare},proto.hasVideoData=function(){return!_.isEmpty(this.videoData)},proto.storeVideoData=function(videoData){this.videoData=videoData},proto.getVideoData=function(){return this.videoData},proto.storeData=function(data){this.testData=data},proto.getTestData=function(){return this.testData},proto.save=function(){var _this38=this,d=$q.defer();return this.restangular.one("").post("usability-test",this.testData).then(function(testData){_this38.testData=testData,d.resolve(testData)},function(err){d.reject(new Error(err))}),d.promise},proto.getConfigurationOptions=function(){var _this39=this;return $translate(["UT_OPTION_CAN_CLOSE_TASK","UT_OPTION_SEE_SITEMAP"]).then(function(translations){return _this39.roomConfigurationOptions||(_this39.roomConfigurationOptions=[{name:translations.UT_OPTION_CAN_CLOSE_TASK,value:!1,param:"canCloseTasks"},{name:translations.UT_OPTION_SEE_SITEMAP,value:!1,param:"seeSitemap"}]),_this39.roomConfigurationOptions})},proto.setDataId=function(dataId){this.testDataId=dataId,this.getIdDefer.resolve(dataId)},proto.getDataId=function(){return this.getIdDefer.promise},proto.fetch=function(){var d,_this40=this;return this.fetchPromise||(d=$q.defer(),this.testData?d.resolve(this.testData):this.getDataId().then(function(){_this40.restangular.one("usability-test",_this40.testDataId).get().then(function(data){_this40.testData=data,d.resolve(data)},function(err){d.reject(err)})}),this.fetchPromise=d.promise,d.promise)},proto.resolveTask=function(id){this.liveShare.resolveTask(id)},proto.startSession=function(userType){this.liveShare.startUTSession(userType)},proto.onTesterJoined=function(data){this.testData.started_at=data.started_at,this.fireObserverCallback(EVENTS.TESTER_JOINED,data)},proto.finishTestingSession=function(){if(this.testData)return this.restangular.one("usability-test",this.testData._id).customPUT({started_at:this.testData.started_at,finished_at:new Date,status:2})},new UsabilityTestService(LiveShare.enums.SESSION_TYPES.TESTING)}]),function(){"use strict";function UsersService(_,$q,Rest,ExportService,localStorageService,ProjectsService,$http){var userData,permissions=ApplicationConfiguration.permissions||{};function filterCollaborators(collaborators,callback){collaborators=_.filter(collaborators,callback);return _.sortBy(collaborators,function(collaborator){return(collaborator.name||collaborator.email).toLowerCase()})}return{collaboratorsMap:{},collaboratorEmails:[],hasAccessToEditor:function(){return"yes"===permissions.has_access_to_editor},me:((userData=ApplicationConfiguration.userData).is_anonymous&&localStorageService.get("anonymousName")&&(userData.name=localStorageService.get("anonymousName")),userData),getCollaborators:function(){var _this41=this;return function(projectHash,collectionId){var deferred;return ExportService.isExport()?((deferred=$q.defer()).resolve([]),deferred.promise):Rest.one("projects",projectHash).one("collections",collectionId).all("collaborators").getList()}(ProjectsService.currentProjectHash,ProjectsService.currentCollectionId).then(function(collaborators){return _this41.generateCollaboratorsMap(collaborators),_this41.generateCollaboratorEmails(collaborators),collaborators})},generateCollaboratorsMap:function(collaborators){var _this42=this;_.forIn(this.collaboratorsMap,function(value,key){delete _this42.collaboratorsMap[key]}),collaborators.forEach(function(collaborator){_this42.collaboratorsMap[collaborator.id_user]=collaborator})},generateCollaboratorEmails:function(collaborators){var _this43=this;collaborators.forEach(function(collaborator){_this43.collaboratorEmails.push(collaborator.email)})},isAnonymous:function(){return this.me.is_anonymous},isAnonymousNameSet:function(){return"anonymous"!==this.me.name},isInProjectsAccount:function(){return this.me.is_in_projects_account},setAnonymousName:function(name){this.me.name=name,localStorageService.set("anonymousName",name)},getAnonymousName:function(){return this.me.name},getProjectMembers:function(){return filterCollaborators(_.values(this.collaboratorsMap),function(collaborator){return collaborator.is_owner})},getProjectMembersWithoutMe:function(){var _this44=this;return filterCollaborators(_.values(this.collaboratorsMap),function(collaborator){return collaborator.id_user!==parseInt(_this44.me.id_user)&&collaborator.is_owner})},getOtherMembers:function(){return filterCollaborators(_.values(this.collaboratorsMap),function(collaborator){return!collaborator.is_owner})},setUserExportTypeformSeen:function(){this.me.settings.exportTypeform_seen=!0},initSettings:function(){var _this45=this;return _asyncToGenerator(_regeneratorRuntime().mark(function _callee(){var userSettings,uxpinApi,data;return _regeneratorRuntime().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(userSettings={},_this45.isAnonymous()){_context.next=8;break}return uxpinApi=ApplicationConfiguration.uxpinApi,_context.next=5,$http({method:"GET",url:"".concat(uxpinApi,"/settings"),withCredentials:!0});case 5:uxpinApi=_context.sent,data=uxpinApi.data,_.forEach(data,function(val,key){try{userSettings[key]=angular.fromJson(val)}catch(e){userSettings[key]={}}});case 8:_this45.me.settings=userSettings;case 9:case"end":return _context.stop()}},_callee)}))()}}}angular.module("core").factory("UsersService",UsersService),UsersService.$inject=["_","$q","Rest","ExportService","localStorageService","ProjectsService","$http"]}(),angular.module("core").factory("UXPinService",["$window","ProjectsService","PagesService","DocumentsService",function($window,ProjectsService,PagesService,DocumentsService){"use strict";var uxpinURL=ApplicationConfiguration.uxpinURL,homepageURL=ApplicationConfiguration.homepageURL,wireframeURL="".concat(uxpinURL,"/edit/"),experimentURL="".concat(uxpinURL,"/experiment/");return{applicationURL:uxpinURL,collectionURL:"".concat(uxpinURL,"/dms/Collections/Show/"),wireframeURL:wireframeURL,documentURL:"".concat(uxpinURL,"/dms/Documents/Default/"),dashboardURL:"".concat(uxpinURL,"/dms/Dashboard/Default/"),homepageURL:homepageURL,logOutURL:"".concat(uxpinURL,"/mod/Login/Logout"),upgradePlanURL:"".concat(uxpinURL,"/dms/DashboardModals/Upgrade/?source=preview&withoutCloseIcon=true"),designSystemURL:"".concat(uxpinURL,"/design-system/"),getCurrentExperimentURL:function(port){return[experimentURL,ProjectsService.currentProjectId,"?port=",port,"&id_page=",PagesService.currentPageId,"&name=",new URLSearchParams($window.location.hash).get("name")].join("")},getCurrentDocumentURL:function(port){if(ApplicationConfiguration.experimental)return this.getCurrentExperimentURL(port);switch(ProjectsService.currentProjectType){case ProjectsService.DOCUMENT_TYPE_WIREFRAME:return"".concat(this.wireframeURL+ProjectsService.currentProjectId,"#?id_page=").concat(PagesService.currentPageId);case ProjectsService.DOCUMENT_TYPE_PERSONA:case ProjectsService.DOCUMENT_TYPE_BMC:case ProjectsService.DOCUMENT_TYPE_PC:return this.documentURL+DocumentsService.currentDocumentId;default:return null}},getCurrentCollectionURL:function(){return this.collectionURL+ProjectsService.currentCollectionId},getDashboardURL:function(){return this.dashboardURL},getHomepageURL:function(){return this.homepageURL},getLogOutURL:function(){return this.logOutURL},getDesignSystemURL:function(libraryHash){return this.designSystemURL+libraryHash}}}]),angular.module("core").factory("uxpinSharedComponents",function(){"use strict";return uxpinSharedComponents}),function(){"use strict";function Variables($http,$window){var variables=$window.ApplicationConfiguration.project.variables,uxpinApi=$window.ApplicationConfiguration.uxpinApi,projectHash=$window.ApplicationConfiguration.project.hash;return{getVariables:function(){return variables},fetchVariables:function(){return $http({method:"GET",url:"".concat(uxpinApi,"/documents/hash/").concat(projectHash,"/variables")}).then(function(response){return variables=response.data})}}}angular.module("core").factory("Variables",Variables),Variables.$inject=["$http","$window"]}(),function(){"use strict";function ZenModeService($rootScope,$location){return{updateMode:function(state){var mode,fullScreenFlag,updatedParams;$rootScope.$emit(PreviewEnums.ON_CHANGE_ZEN_MODE,state),state=state,mode=$location.search().mode,fullScreenFlag=PreviewEnums.MODES_FLAGS.FULLSCREEN,updatedParams="",mode&&(updatedParams=mode.replace(fullScreenFlag,"")),state&&(updatedParams+=fullScreenFlag),$location.search("mode",updatedParams.length?updatedParams:null)}}}angular.module("core").factory("ZenModeService",ZenModeService),ZenModeService.$inject=["$rootScope","$location"]}(),function(){"use strict";function DocumentationController(_,$rootScope,Engine,PagesService,PreviewNavigation){var vm=this;vm.trackZoomChange=!1,vm.isVisible=function(){return PreviewNavigation.isModeActive(PreviewNavigation.PREVIEW_MODES.DOCUMENTATION)},$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,function(){vm.documentation=Engine.getDocumentation(),vm.pageId=PagesService.currentPageId,vm.hasPageDocumentation=Engine.isDocumentationAvailable(),$rootScope.$apply()})}angular.module("documentation").controller("DocumentationController",DocumentationController),DocumentationController.$inject=["_","$rootScope","Engine","PagesService","PreviewNavigation"]}(),function(){"use strict";function config($stateProvider,$urlRouterProvider,$compileProvider){$compileProvider.debugInfoEnabled(ApplicationConfiguration.debugInfoEnabled),$stateProvider.state("experiment",{url:"/e",abstract:!0,views:{"":{templateUrl:"/scripts/modules/core/views/home.view.html",controller:function(){}},canvas:{templateUrl:"/scripts/modules/core/views/canvas.view.html",controller:"CanvasController"},topBar:{templateUrl:"/scripts/modules/experiment/views/topBar.view.html",controller:"TopBarExperimentalController",controllerAs:"vm"}},resolve:{collaborators:function(){return{}},documents:function(){return null},notifications:function(){return[]},isMobile:function(){return!1}}}).state("experiment.page",{url:"/pages/{pageId}?port&ngrok_session",template:'<div id="page-controller" ui-view></div>',controller:"PageController",resolve:{initialData:function($stateParams,ProjectsService,PreloadService,PagesService,BreakpointsService,PreviewCache,$http){return $http({method:"GET",url:[($http=$stateParams.port,($stateParams=$stateParams.ngrok_session)?"https://".concat($stateParams,".ngrok.io"):"http://localhost:".concat($http)),"/preview/all"].join("")}).then(function(response){return PreviewCache.setInitialData(ProjectsService.currentProjectHash,response.data),Promise.all([PagesService.getPages(),BreakpointsService.getBreakpoints()]).then(function(data){return{redirectToPageId:response.data.redirect?response.data.pageId:null,pages:data[0],breakpoints:data[1]}})})}}}).state("experiment.page.mode",{url:"/{previewMode}/{panels}",controller:"NavController",params:{panels:{value:"",squash:!0}}})}angular.module("experiment").config(config),config.$inject=["$stateProvider","$urlRouterProvider","$compileProvider"]}(),function(){"use strict";function TopBarExperimentalController(_,$rootScope,$scope,$window,Engine,MODES,ProjectsService,Settings,UsersService){var vm=this,onChangePageOff=(vm.isAnonymous=UsersService.isAnonymous(),vm.isLoaded=!0,vm.referer=getReferer(),vm.currentProjectHash=ProjectsService.currentProjectHash,vm.updateReferer=function(){vm.referer=getReferer()},vm.isInteractionsHighlightDisabled=function(){return Settings.disableInteractionsHighlight},vm.toggleInteractionsHighlightMode=function(event){event.preventDefault(),Settings.toggleSingleMode(PreviewEnums.MODES_FLAGS.INTERACTIONS)},vm.isZenMode=!1,$rootScope.$on(PreviewEnums.ON_CHANGE_ZEN_MODE,function(event,zenMode){vm.isZenMode=zenMode,Engine.setMode(MODES.PREVIEW),function(){var elements;Engine.getPage()&&(elements=Engine.getPage().ElementsManager.elements,_.forEach(elements,function(element){element.isMultistate()&&element.showDefaultState()}))}()}));function getReferer(){return"".concat(ApplicationConfiguration.loginPageURL,"/?cb=").concat(encodeURIComponent($window.location.href))}$scope.$on("$destroy",function(){onChangePageOff()}),vm.isLoaded=!0}angular.module("experiment").controller("TopBarExperimentalController",TopBarExperimentalController),TopBarExperimentalController.$inject=["_","$rootScope","$scope","$window","Engine","MODES","ProjectsService","Settings","UsersService"]}(),function(){"use strict";function SpecificationController(_,ProjectsService,PagesService,$scope,$rootScope,Engine,SpecificationService,inspectorService,localStorageService,editorSocket,UnitService,ElementService,Color,FeatureToggler,DesignSystem,$window,uxpinSharedComponents,$state,GuidesService,LibraryService,desktopApp,PreviewNavigation,$document){var lastElement,currentPage,selectedElement,documentation,offOnPick,offOnHover,vm=this,SPEC_TAB_KEY="activeSpecTab",cache={},currentPageId=PagesService.currentPageId,currentPageId=(vm.SPEC_OBJECT_TYPES=ElementEnums.TYPE,vm.isLoaded=!1,vm.grid=[],vm.width=null,vm.height=null,vm.blur=null,vm.colors=[],vm.fonts=[],vm.gradients=[],vm.metadata=[],vm.interactions=[],vm.states=[],vm.background={},vm.specWidthStyles={},vm.selectedState=null,vm.isMultistate=!1,vm.currentObjectType=ElementEnums.TYPE.CANVAS,vm.SPEC_TABS=specModeEnums.SPEC_TABS,vm.DEFAULT_TAB=vm.SPEC_TABS.PROPERTIES,vm.activeTab=function(){var tab,storage=localStorageService.get(SPEC_TAB_KEY);!storage||storage===vm.SPEC_TABS.METADATA&&!vm.metadata.length||storage===vm.SPEC_TABS.INTERACTIONS&&!vm.interactions.length?setTab(tab=vm.DEFAULT_TAB):tab=storage;return tab}(),vm.designSystems=[],vm.elementPath="",getPageName(currentPageId)),offResetSelection=(currentPageId?vm.currentPageName=currentPageId:(currentPageId=DesignSystem.getSymbolContent(),vm.currentPageName=currentPageId?_.unescape(currentPageId.name):""),vm.isSpecModeStyleguideFeature=FeatureToggler.specModeStyleguide,vm.activeElementDocumentation=null,vm.activeElementDSInfo=null,uxpinSharedComponents.isDesktopApp&&(desktopApp.dispatchPageOptionsChangedEvent({areGuidesAvailable:GuidesService.areGuidesAvailable(),showGrid:Engine.getEnableGridOption(),showGuides:Engine.areGuidesVisible()}),$window.addEventListener("EVENT_TOGGLE_PAGE_OPTION",function(_ref6){var _ref6=_ref6.detail,type=_ref6.type,_ref6=_ref6.value;"grid"===type&&(Engine.setEnableGridOption(_ref6),desktopApp.dispatchPageOptionsChangedEvent({areGuidesAvailable:GuidesService.areGuidesAvailable(),showGrid:_ref6,showGuides:Engine.areGuidesVisible()}),$scope.$apply()),"guides"===type&&(GuidesService.setGuides(_ref6),desktopApp.dispatchPageOptionsChangedEvent({areGuidesAvailable:GuidesService.areGuidesAvailable(),showGrid:Engine.getEnableGridOption(),showGuides:_ref6}),$scope.$apply())})),vm.selectElement=function(event,element){event.preventDefault(),setCurrentObjectType(SpecificationService.getObjectType(element),element),Engine.selectElement(element)},vm.isActiveObject=function(type){return vm.currentObjectType===type},vm.getGridOfType=function(type){return vm.grid.find(function(g){return g.type===type})},vm.hasGridOfType=function(type){return!!vm.getGridOfType(type)},vm.changeTab=changeTab,vm.changeState=function(stateId){var componentInstance=selectedElement.componentInstance;componentInstance&&Engine.getPage().ElementsManager.editComponent(componentInstance);Engine.getPage().setElementState(selectedElement.id,stateId),componentInstance&&Engine.getPage().ElementsManager.editComponent(null);$window.requestAnimationFrame(function(){selectedElement&&selectedElement.hasActiveState()&&setData(selectedElement),$rootScope.$emit(PreviewEnums.SPEC_MODE_ELEMENT_STATE_CHANGED,selectedElement),setGeneralProperties(selectedElement),$scope.$apply()})},editorSocket.on(PreviewEnums.SOCKET.ON_PAGE_SAVED,function(){isSpecMode()&&initPage()}),$rootScope.$on(PreviewEnums.SPEC_MODE_RESET_ELEMENT_SELECTION,onResetSelection)),offModeChange=$rootScope.$on(PreviewEnums.ON_PREVIEW_MODE_CHANGED,function(e,mode){mode===PreviewNavigation.PREVIEW_MODES.SPEC?(mode=$window.localStorage.getItem("rightPanelWidth"))&&setRightPanelWidth($window.innerWidth-parseInt(mode,10)):clearRightPanelWidth()}),offPageLoad=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,function(){PreviewNavigation.getCurrentMode()===PreviewNavigation.PREVIEW_MODES.SPEC?(currentWidth=$window.localStorage.getItem("rightPanelWidth"))&&setRightPanelWidth($window.innerWidth-parseInt(currentWidth,10)):clearRightPanelWidth();var element,currentWidth;isSpecMode()&&(clearCache(),initalizeSpecMode(),setCurrentObjectType(ElementEnums.TYPE.CANVAS),$state.params.elementId&&(element=Engine.getPage().getElementByPath($state.params.elementId))&&window.setTimeout(function(){var fullApp=SpecificationService.getSpecModeCode(element).fullApp;SpecificationService.openStackblitz(fullApp,!1)},300),(currentWidth=_.reduce(Engine.getAllElements(),function(sketchIds,element){return element.sketchMasterId?sketchIds.concat(element.sketchMasterId):sketchIds},[])).length)&&DesignSystem.fetchDesignSystemsForSymbolSketchAreas(currentWidth).then(function(data){documentation=Object.assign({},documentation,data)})}),offPageChange=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(e,id){vm.currentPageName=getPageName(id),onResetSelection(),Engine.setEnableGridOption(!1)}),offCanvasSizeChange=$rootScope.$on(PreviewEnums.ON_CANVAS_SIZE_CHANGE,function(){cache&&cache.canvas&&(cache.canvas.canvasViewWidth=Engine.getPage().getCanvas().view.containerDomElement.offsetWidth,cache.canvas.canvasViewHeight=Engine.getPage().getCanvas().view.containerDomElement.offsetHeight);vm.currentObjectType===ElementEnums.TYPE.CANVAS&&(setCanvasData(),$scope.$apply())}),offChangeElementVisibility=$rootScope.$on(PreviewEnums.ON_CHANGE_ELEMENT_VISIBILITY,function(){selectedElement&&selectedElement.isCodeComponent()&&(vm.isTailwindComponent=selectedElement.isTailwindComponent(),vm.specModeCode=SpecificationService.getSpecModeCode(selectedElement))});function onResize(e){e=setRightPanelWidth(e.clientX);$window.localStorage.setItem("rightPanelWidth",e),$scope.$apply()}function resizeEnd(){$document[0].removeEventListener("mousemove",onResize),$document[0].removeEventListener("mouseup",resizeEnd),$document[0].onselectstart=null}function setRightPanelWidth(value){var MAX_SIZE=$window.innerWidth/2,MAX_SIZE="".concat(Math.min(MAX_SIZE,Math.max(330,$window.innerWidth-value)),"px");return vm.specWidthStyles={width:MAX_SIZE},$document[0].querySelector("main.canvas-main-container ").style.right=MAX_SIZE,parseInt(MAX_SIZE,10)}function clearRightPanelWidth(){vm.specWidthStyles={width:null},$document[0].querySelector("main.canvas-main-container ").style.right=null}function getPageName(id){if(PagesService.pagesMap[id])return PagesService.pagesMap[id].name}function onResetSelection(){selectedElement=null,vm.elementPath=null,Engine.deselectAllElements(),setCurrentObjectType(ElementEnums.TYPE.CANVAS)}function initalizeSpecMode(){initPage(),currentPage&&(currentPage.off($window.uxpinEngine.Page.Events.ELEMENT_PICKED,onPick),currentPage.off($window.uxpinEngine.Page.Events.ELEMENT_HOVERED,onHover),offOnPick&&offOnPick(),offOnHover)&&offOnHover(),(currentPage=Engine.getPage()).on($window.uxpinEngine.Page.Events.ELEMENT_PICKED,onPick),offOnPick=$rootScope.$on(PreviewEnums.LAYER_SELECTED,function(event,data){onPick({element:data},event.name)}),currentPage.on($window.uxpinEngine.Page.Events.ELEMENT_HOVERED,onHover),offOnHover=$rootScope.$on(PreviewEnums.LAYER_HOVERED,function(event,data){onHover({element:data},event.name)})}function updateCssCode(){selectedElement&&getCache(selectedElement)&&(vm.cssCode=SpecificationService.getCssCode(getCache(selectedElement),Color.getSelectedColorType()))}function initPage(){Engine.areFontsLoaded().then(function(){clearCache(),selectedElement=null,vm.elementPath=null,setCurrentObjectType(ElementEnums.TYPE.CANVAS),inspectorService.setTarget(null)})}function clearCache(){cache={}}function isSpecMode(){return Engine.isSpecMode()}function setData(element){switch(element||(vm.activeElementDSInfo=null),element&&!_.isEmpty(documentation)&&!function(element){var component=element.componentInstance;for(;component&&component.isComponent()&&!documentation[component.getComponentMasterId()];)component=component.componentInstance;component&&component.isComponent()?(element=component.getComponentMasterId(),vm.activeElementDSInfo={element:component,documentation:documentation[element]}):vm.activeElementDSInfo=null}(element),vm.currentObjectType){case ElementEnums.TYPE.CANVAS:setCanvasData();break;case ElementEnums.TYPE.ELEMENT:!function(element){var specProperties=getCache(element)||element.getSpecProperties();setGeneralProperties(specProperties),setParentProperty(element),vm.colors=SpecificationService.getElementColors(specProperties),vm.fonts=specProperties.fonts.fontsList,vm.name=specProperties.name,vm.blur=specProperties.blur,vm.typeClass=ElementService.getElementTypeClass(element),vm.fixed=specProperties.fixed,vm.cssCode=SpecificationService.getCssCode(specProperties),vm.isTailwindComponent=element.isCodeComponent()&&element.isTailwindComponent(),vm.specModeCode=SpecificationService.getSpecModeCode(element),SpecificationService.getElementImages(specProperties,element).then(function(images){vm.images=images}),vm.border=SpecificationService.getBorderData(specProperties),vm.gradients=[],vm.angle=Math.round(specProperties.angle),vm.metadata=specProperties.metadata,vm.textContentTrimmed=ElementService.getTextContentTrimmed(specProperties,element),vm.shadows=SpecificationService.getElementShadows(specProperties),vm.innerShadows=SpecificationService.getElementInnerShadows(specProperties),vm.shouldShowBorder=ElementService.hasElementBorderProperty(element),vm.shouldShowBorderRadius=ElementService.hasElementBorderRadiusProperty(element),vm.isBorderRadiusSet=ElementService.isElementBorderRadiusSet(specProperties),vm.isTextList=ElementService.isTextList(element),vm.background={position:specProperties.backgroundPosition,repeat:specProperties.backgroundRepeat,size:specProperties.backgroundSize},vm.isMultistate=!1,inspectorService.setSource(element),setCache(element,specProperties),checkTabsContent(specProperties)}(element),setMultistateData(element);break;case ElementEnums.TYPE.STORYBOOK_ELEMENT:!function(element){var specProperties=getCache(element)||element.getSpecProperties();vm.iframeUrl=specProperties.iframeUrl,setGroupData(element)}(element);break;case ElementEnums.TYPE.GROUP:case ElementEnums.TYPE.CODE_COMPONENT:setGroupData(element),setMultistateData(element),!element.sketchMasterId&&!element.isComponent()||_.isEmpty(documentation)||!function(element){element.sketchMasterId?vm.activeElementDocumentation=documentation[element.sketchMasterId]||null:element.hasMaster&&element.isComponent()?(element=element.getComponentMasterId(),vm.activeElementDocumentation=documentation[element]||null):vm.activeElementDocumentation=null}(element)}(selectedElement=element)&&(vm.elementPath=selectedElement.elementPath)}function onPick(element){element&&element.element?setCurrentObjectType(SpecificationService.getObjectType(element.element),element.element):setCurrentObjectType(ElementEnums.TYPE.CANVAS),$window.requestAnimationFrame(function(){return $scope.$apply()})}function setCurrentObjectType(objectType,element){vm.currentObjectType=objectType,setData(element)}function getCacheKey(element){var keyMembers=[element.elementPath],symbols=function(element){for(var parent=element.parent,symbols=[];parent;)parent.isComponent()&&symbols.push(parent),parent=parent.parent;return symbols}(element);keyMembers.push.apply(keyMembers,_toConsumableArray(symbols.map(function(symbol){return symbol.id})));symbols=[].concat(_toConsumableArray(element.getActiveStateAncestors(!0)),[element],_toConsumableArray(element.getActiveStateDescendants())).map(function(element){return element.stateActive}).filter(Boolean);return keyMembers.push.apply(keyMembers,_toConsumableArray(symbols)),1===keyMembers.length?keyMembers[0]:MD5(keyMembers.join("-"))}function setCache(element,value){element=getCacheKey(element);cache[element]=value}function getCache(element){element=getCacheKey(element);return cache[element]}function onHover(element,type){var eventSource;lastElement!==element.element&&(eventSource=type!==PreviewEnums.LAYER_HOVERED?inspectorService.EVENT_SOURCES.MOUSE:inspectorService.EVENT_SOURCES.LAYERS,element&&element.element?inspectorService.setTarget(element.element,eventSource):cache.canvas?inspectorService.setTarget({isCanvasBoundingRect:!0,x:0,y:0,width:cache.canvas.canvasViewWidth,height:cache.canvas.canvasViewHeight},eventSource):inspectorService.setTarget(null,eventSource),lastElement=element.element,type!==PreviewEnums.LAYER_HOVERED)&&$scope.$apply()}function changeTab(tab){setTab(vm.activeTab=tab)}function setTab(tab){localStorageService.set(SPEC_TAB_KEY,tab)}function checkTabsContent(specProperties){(vm.activeTab===vm.SPEC_TABS.METADATA&&_.isEmpty(specProperties.metadata)||vm.activeTab===vm.SPEC_TABS.INTERACTIONS&&_.isEmpty(specProperties.interactions))&&changeTab(vm.DEFAULT_TAB)}function setGeneralProperties(properties){vm.width=properties.width,vm.height=properties.height,vm.left=properties.x,vm.top=properties.y,vm.opacity=properties.opacity,vm.mixBlendMode=_.upperFirst(_.lowerCase(_.startCase(properties.mixBlendMode)))}function setCanvasData(){var lastUpdatedDate=SpecificationService.getLastUpdateDate(),specProperties=cache.canvas||Engine.getCanvasSpecProperties();vm.sketchArtboard=specProperties.sketchArtboard,vm.sketchArtboard&&vm.sketchArtboard.width&&vm.sketchArtboard.height&&(specProperties.canvasViewWidth=vm.sketchArtboard.width,specProperties.canvasViewHeight=vm.sketchArtboard.height),cache.canvas=specProperties,vm.width=specProperties.canvasViewWidth,vm.height=specProperties.canvasViewHeight,vm.isLoaded=!0,vm.grid=specProperties.grid,vm.name="",vm.colors=_.values(specProperties.colors),vm.fonts=_.values(specProperties.fonts),vm.gradients=specProperties.gradients,vm.canvasBg=SpecificationService.getCanvasBg(specProperties),vm.cssCode="",vm.specModeCode={},vm.images=SpecificationService.getCanvasImages(specProperties),vm.border={},vm.lastUpdatedDate=lastUpdatedDate?lastUpdatedDate.fromNow:"",vm.lastUpdatedDateTitle=lastUpdatedDate?lastUpdatedDate.full:"",vm.metadata=specProperties.metadata,vm.textContentTrimmed="",vm.shadows=[],vm.innerShadows=[],vm.additionalStyles={},vm.background={position:specProperties.backgroundPosition,repeat:specProperties.backgroundRepeat,size:specProperties.backgroundSize},isSpecMode()&&inspectorService.setSource({isCanvasBoundingRect:!0,x:0,y:0,width:specProperties.canvasViewWidth,height:specProperties.canvasViewHeight}),checkTabsContent(specProperties)}function setGroupData(element){var specProperties=getCache(element)||element.getSpecProperties();setGeneralProperties(specProperties),setParentProperty(element),vm.colors=_.values(specProperties.colors),vm.fonts=_.values(specProperties.fonts),vm.gradients=specProperties.gradients,vm.name=specProperties.name,vm.blur=specProperties.blur,SpecificationService.getElementImages(specProperties,element).then(function(images){vm.images=images}),vm.type=element.type,vm.isTailwindComponent=element.isCodeComponent()&&element.isTailwindComponent(),vm.typeClass=ElementService.getElementTypeClass(element),vm.fixed=specProperties.fixed,vm.cssCode=SpecificationService.getCssCode(specProperties),vm.specModeCode=SpecificationService.getSpecModeCode(element),vm.border=SpecificationService.getBorderData(specProperties),vm.shouldShowBorder=ElementService.hasElementBorderProperty(element),vm.shouldShowBorderRadius=ElementService.hasElementBorderRadiusProperty(element),vm.isBorderRadiusSet=ElementService.isElementBorderRadiusSet(specProperties),vm.angle=Math.round(specProperties.angle),vm.metadata=specProperties.metadata,vm.textContentTrimmed="",vm.shadows=SpecificationService.getElementShadows(specProperties),vm.innerShadows=SpecificationService.getElementInnerShadows(specProperties),vm.isMultistate=!1,vm.componentMetadata=specProperties.componentMetadata,specProperties.libraryId&&LibraryService.getLibraryData(specProperties.libraryId).then(function(data){vm.libraryName=data&&data.library&&data.library.name,vm.repositoryPointerName=data&&data.current&&data.current.repositoryPointerName}),inspectorService.setSource(element),setCache(element,specProperties),checkTabsContent(specProperties)}function setMultistateData(element){var stateAncestors,PROPERTIES_STATE_ACTIVE="stateActive",PROPERTIES_STATES_OVERRIDES="statesOverrides";element.hasActiveState()?(stateAncestors=(stateAncestors=element.getActiveStateAncestors(!0)).length?stateAncestors[0]:{},vm.isMultistate=stateAncestors.id===element.id,vm.isMultistate&&(vm.states=_.map(element[PROPERTIES_STATES_OVERRIDES],function(state){return{id:state.id,name:state.name}}),vm.selectedState=_.find(vm.states,function(state){return state.id===element[PROPERTIES_STATE_ACTIVE]}))):element.isMultistate()&&(vm.isMultistate=!0,vm.states=element.states,vm.selectedState={id:element.activeState.id,name:element.activeState.name})}function setParentProperty(element){vm.elementParent=element.parent,vm.elementParentType=element.parent.type,vm.elementParentTypeClass=ElementService.getElementTypeClass(vm.elementParent),vm.hasParent=ElementService.hasElementParent(element)}$scope.$watch(UnitService.loadMode,updateCssCode),$scope.$watch(Color.getSelectedColorType,updateCssCode),$scope.$watch(isSpecMode,function(isSpecMode){isSpecMode&&initalizeSpecMode();var projectHash;currentPage&&(isSpecMode&&_.isUndefined(documentation)&&!ApplicationConfiguration.isDesignSystem&&(projectHash=ProjectsService.currentProjectHash,DesignSystem.fetchDesignSystemLibraries(projectHash).then(function(data){documentation=Object.assign({},documentation,data)}),DesignSystem.fetchDesignSystemsForProjectAccount().then(function(data){vm.designSystems=data})),isSpecMode&&cache.canvas?inspectorService.setSource({isCanvasBoundingRect:!0,x:0,y:0,width:cache.canvas.canvasViewWidth,height:cache.canvas.canvasViewHeight}):isSpecMode||(inspectorService.setSource(null),inspectorService.setTarget(null),setCurrentObjectType(ElementEnums.TYPE.CANVAS)))}),$scope.$watch(function(){return vm.grid},function(grid){grid.forEach(function(_ref7){_ref7=_ref7.type;Engine.setGridVisibility(_ref7,Engine.isGridVisible(_ref7))})}),vm.resizeStart=function(){$document[0].addEventListener("mousemove",onResize),$document[0].addEventListener("mouseup",resizeEnd),$document[0].onselectstart=function(){return!1}},$scope.$on("$destroy",function(){offResetSelection(),offModeChange(),offPageLoad(),offPageChange(),offCanvasSizeChange(),offChangeElementVisibility(),offOnPick&&offOnPick(),offOnHover&&offOnHover()})}angular.module("specification").controller("SpecificationController",SpecificationController).constant("typeformId","CKrdwqWE"),SpecificationController.$inject=["_","ProjectsService","PagesService","$scope","$rootScope","Engine","SpecificationService","inspectorService","localStorageService","editorSocket","UnitService","ElementService","Color","FeatureToggler","DesignSystem","$window","uxpinSharedComponents","$state","GuidesService","LibraryService","desktopApp","PreviewNavigation","$document"]}(),function(){"use strict";function CssService(_,tinycolor,UnitService,Color){var colorType,CSS_INITIALS_VALUES={width:["auto"],height:["auto"],backgroundColor:["transparent"],backgroundPosition:["0% 0%"],backgroundSize:["auto"],backgroundRepeat:["repeat"],textAlign:["start","left"],letterSpacing:["normal"],lineHeight:["normal"],fontWeight:["normal",400],fontStyle:["normal"],textDecoration:["none"],dropShadow:["none"],textShadow:["none"],opacity:[1],mixBlendMode:["normal"]},CSS_PROPERTIES={FILTER:"filter"},GRADIENT_TYPES={LINEAR:"Linear",RADIAL:"Radial"},cssCode=[],additionalStylesLabel="Custom CSS";function setOpacity(specProperties){return addStyle.call(cssCode,"opacity",specProperties.opacity/100,CSS_INITIALS_VALUES.opacity)}function setBoxShadow(specProperties){specProperties=_.compact([buildShadowString(specProperties.shadows,"boxShadow"),buildShadowString(specProperties.innerShadows,"boxShadow",!0)]).join(", ");if(!_.isEmpty(specProperties))return addStyle.call(cssCode,"boxShadow",specProperties,CSS_INITIALS_VALUES.boxShadow)}function buildShadowString(shadows,shadowProperty,isInset){shadows=_.filter(shadows,function(shadow){return shadow.shadowType===shadowProperty&&shadow.shadowEnabled});if(!_.isEmpty(shadows))return _.compact(_.map(shadows,function(shadow){var value="".concat(addUnit(shadow.shadowOffsetX)," ").concat(addUnit(shadow.shadowOffsetY)," ").concat(addUnit((value=shadow.shadowBlur,shadowProperty===CSS_PROPERTIES.FILTER?value/3+.5:value))," ");return shadow.shadowSpread&&(value+="".concat(addUnit(shadow.shadowSpread)," ")),value+=shadow.shadowColor,shadowProperty===CSS_PROPERTIES.FILTER?"drop-shadow(".concat(value,")"):isInset?"inset ".concat(value):value})).join(shadowProperty===CSS_PROPERTIES.FILTER?" ":", ")}function setTextShadow(specProperties){specProperties=buildShadowString(specProperties.shadows,"textShadow");if(!_.isEmpty(specProperties))return addStyle.call(cssCode,"textShadow",specProperties,CSS_INITIALS_VALUES.boxShadow)}function setFilter(specProperties){specProperties=[buildShadowString(specProperties.shadows,"filter"),(specProperties=specProperties.blur)?"blur(".concat(addUnit(specProperties,!0),")"):""].join(" ").trim();return addStyle.call(cssCode,"filter",specProperties,CSS_INITIALS_VALUES.boxShadow)}function setMixBlendMode(specProperties){if(specProperties.mixBlendMode)return addStyle.call(cssCode,"mix-blend-mode",specProperties.mixBlendMode,CSS_INITIALS_VALUES.mixBlendMode)}function setStrokeWidth(specProperties){if(specProperties.strokeWidth)return addStyle.call(cssCode,"stroke-width",specProperties.strokeWidth)}function setTransform(specProperties){var transform="";return specProperties.flipHorizontal&&(transform+="scaleX(-1) "),specProperties.flipVertical&&(transform+="scaleY(-1) "),specProperties.angle&&(transform+="rotate(".concat(_.round(specProperties.angle),"deg) ")),specProperties.transform&&(transform+=specProperties.transform),addStyle.call(cssCode,"transform",transform.trim())}function setAdditionalStyles(specProperties){var hasAdditionalStyles=_.values(specProperties.additionalStyles).filter(function(style){return style}).length;specProperties&&!_.isEmpty(specProperties.additionalStyles)&&hasAdditionalStyles&&(addComment.call(cssCode,additionalStylesLabel),_.forEach(specProperties.additionalStyles,function(value,property){addStyle.call(cssCode,_.kebabCase(property),value)}))}function setFonts(specProperties){var uniqueFonts=_.uniqWith(specProperties.fonts.fontsList,function(a,b){return a=_.omit(a,["textContent"]),b=_.omit(b,["textContent"]),_.isEqual(a,b)});_.forEach(uniqueFonts,function(font){var color;1<uniqueFonts.length&&addComment.call(cssCode,_.truncate((font.textContent||"").trim().replace("\n","").replace(/[\u200B-\u200D\uFEFF]/g,""),{length:20})),addStyle.call(cssCode,"fontFamily",font.fontName,[]),parseInt(font.fontSize,10)&&addStyle.call(cssCode,"fontSize",UnitService.convertPx(parseInt(font.fontSize,10)),[]),addStyle.call(cssCode,"color",(color=font.color,Color.getColorsSet(color)[colorType]),[]),addStyle.call(cssCode,"fontStyle",font.fontStyle,CSS_INITIALS_VALUES.fontStyle),addStyle.call(cssCode,"textDecoration",font.textDecoration,CSS_INITIALS_VALUES.textDecoration),parseFloat(font.lineHeight)&&addStyle.call(cssCode,"lineHeight",UnitService.convertPx(parseFloat(font.lineHeight),!0,2),CSS_INITIALS_VALUES.fontWeight),parseFloat(font.letterSpacing)&&addStyle.call(cssCode,"letterSpacing",UnitService.convertPx(parseFloat(font.letterSpacing),!0,2),CSS_INITIALS_VALUES.letterSpacing),font.textTransform&&"none"!==font.textTransform&&addStyle.call(cssCode,"textTransform",font.textTransform,[]),font.fontVariant&&"normal"!==font.fontVariant&&addStyle.call(cssCode,"fontVariant",font.fontVariant,[]),addStyle.call(cssCode,"textAlign",font.textAlign,CSS_INITIALS_VALUES.textAlign)})}function setBackgroundImage(specProperties){var gradientData;isGradient(specProperties.backgroundImage)?(gradientData=extractGradientData(specProperties.backgroundImage),addStyle.call(cssCode,"backgroundImage",getGradientCssStyle(0,gradientData))):specProperties.backgroundImage&&addStyle.call(cssCode,"backgroundImage",specProperties.backgroundImage.split("/").pop())}function setBackgroundPosition(specProperties){specProperties.backgroundImage&&addStyle.call(cssCode,"backgroundPosition",specProperties.backgroundPosition,CSS_INITIALS_VALUES.backgroundPosition)}function setColor(propertyName,initialValues,specProperties){specProperties[propertyName]&&addStyle.call(cssCode,propertyName,specProperties[propertyName][colorType],initialValues)}function setProperty(propertyName,initialValues,isNumber,specProperties){addStyle.call(cssCode,propertyName,specProperties[propertyName],initialValues,isNumber)}function getBorderWidths(specProperties){return _.map(_.values(_.pick(specProperties,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"])),function(value){return parseInt(value,10)||0})}function getBorderRadiuses(specProperties){return _.map(_.values(_.pick(specProperties,["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"])),function(value){return parseInt(value,10)||0})}function hasBorder(specProperties){return getBorderWidths(specProperties).some(function(border){return 0<border})}function hasBorderRadius(specProperties){return getBorderRadiuses(specProperties).some(function(border){return 0<border})}function setBorderRadius(specProperties){var borderRadiuses=getBorderRadiuses(specProperties);if(hasBorderRadius(specProperties)){if(borderRadiuses.every(function(border){return border===borderRadiuses[0]}))return addStyle.call(cssCode,"border-radius",borderRadiuses[0],[],!0);addStyle.call(cssCode,"border-top-left-radius",borderRadiuses[0],[],!0),addStyle.call(cssCode,"border-top-right-radius",borderRadiuses[1],[],!0),addStyle.call(cssCode,"border-bottom-right-radius",borderRadiuses[2],[],!0),addStyle.call(cssCode,"border-bottom-left-radius",borderRadiuses[3],[],!0)}}function setBorder(specProperties){var borders=getBorderWidths(specProperties),borderColor=specProperties.borderColor?specProperties.borderColor[colorType]:"transparent";hasBorder(specProperties)&&(_.every(borders,function(value){return borders[0]===value})?addStyle.call(cssCode,"border","".concat(addUnit(borders[0])," ").concat(specProperties.borderStyle," ").concat(borderColor)):(addStyle.call(cssCode,"border-top-width",borders[0],[],!0),addStyle.call(cssCode,"border-right-width",borders[1],[],!0),addStyle.call(cssCode,"border-bottom-width",borders[2],[],!0),addStyle.call(cssCode,"border-left-width",borders[3],[],!0),addStyle.call(cssCode,"border-style",specProperties.borderStyle),addStyle.call(cssCode,"border-color",borderColor)))}function setPadding(specProperties){var paddings={left:parseInt(specProperties.paddingLeft,10),right:parseInt(specProperties.paddingRight,10),top:parseInt(specProperties.paddingTop,10),bottom:parseInt(specProperties.paddingBottom,10)};_.every(paddings,function(value){return!value})||(_.every(paddings,function(value){return paddings.left===value})?addStyle.call(cssCode,"padding",paddings.left,[],!0):_.isEqual(paddings.left,paddings.right)&&!_.isEqual(paddings.top,paddings.bottom)?addStyle.call(cssCode,"padding",[addUnit(paddings.top),addUnit(paddings.right),addUnit(paddings.bottom)].join(" ")):_.isEqual(paddings.left,paddings.right)&&_.isEqual(paddings.top,paddings.bottom)?addStyle.call(cssCode,"padding",[addUnit(paddings.top),addUnit(paddings.right)].join(" ")):addStyle.call(cssCode,"padding",[addUnit(paddings.top),addUnit(paddings.right),addUnit(paddings.bottom),addUnit(paddings.left)].join(" ")))}function setPositionFixed(specProperties){specProperties.fixed&&(addStyle.call(cssCode,"position","fixed"),addStyle.call(cssCode,"left",parseInt(specProperties.x,10),[],!0),addStyle.call(cssCode,"top",parseInt(specProperties.y,10),[],!0))}function setBackdropFilter(specProperties){specProperties.backdropFilter&&addStyle.call(cssCode,"backdrop-filter",specProperties.backdropFilter)}function addUnit(value,isFont){return UnitService.convertPx(value,isFont)}function addStyle(propertyName,propertyValue,initialValues,isNumber){initialValues=initialValues||[],propertyValue&&-1===initialValues.indexOf(propertyValue)&&(isNumber&&(propertyValue=addUnit(parseInt(propertyValue,10))),this.push("".concat(propertyName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),": ").concat(propertyValue,";")))}function addComment(string){this.push("/* ".concat(string," */"))}function isGradient(value){return value&&_.isObject(value)&&value.idToken&&"gradient"===value.type?/^linear-gradient/.test(value.currentValue)||/^radial-gradient/.test(value.currentValue):/^linear-gradient/.test(value)||/^radial-gradient/.test(value)}function getGradientCssStyle(mode,gradientData){var colorValue,colorsStr=gradientData.colors.map(function(color,id){return colorValue=color.alpha<1?color.rgba:color.hex,"".concat(colorValue," ").concat(gradientData.colorsStops[id])}).join(", "),colorsStr=(gradientData.type===GRADIENT_TYPES.RADIAL?"radial-gradient(".concat(gradientData.shape,", "):"linear-gradient(".concat(gradientData.angle,"deg, ")).concat(colorsStr," )");return colorsStr}function createGradientObject(type,gradientData){var shape,angle,rgbs=gradientData.match(/rgba?\([^)]+\)/g)||[],hexs=gradientData.match(/#([0-9A-F]*)/g)||[],rgbs=function(colors){return colors.map(function(rgb){rgb=tinycolor(rgb);return{rgba:rgb.toRgbString(),hex:rgb.toHexString(),alpha:rgb.getAlpha()}})}(rgbs.concat(hexs));return hexs=gradientData.match(/[0-9]+%/g)||[],2<=(hexs=_.clone(hexs)).length&&(hexs[hexs.length-1]="100%"),hexs=hexs,type===GRADIENT_TYPES.RADIAL?shape=gradientData.split(",")[0]||"":angle=gradientData.match(/(.*)deg/)?gradientData.match(/(.*)deg/)[1]:0,{angle:parseFloat(angle)?180-parseFloat(angle):parseFloat(angle),colors:rgbs,type:type,colorsStops:hexs,shape:shape}}function extractGradientData(gradient){var data=[],type="",decoratedGradient=gradient;return gradient&&_.isObject(gradient)&&gradient.idToken&&"gradient"===gradient.type&&(decoratedGradient=gradient.currentValue),/^linear-gradient/.test(decoratedGradient)&&(data=decoratedGradient.match(/^linear-gradient\((.*)\)/),type=GRADIENT_TYPES.LINEAR),/^radial-gradient/.test(decoratedGradient)&&(data=decoratedGradient.match(/^radial-gradient\((.*)\)/),type=GRADIENT_TYPES.RADIAL),data[1]?createGradientObject(type,data[1]):null}return{extractGradientData:extractGradientData,getGradientCssStyle:getGradientCssStyle,getCssCodeFromSpecProperties:function(specProperties,selectedColorType){var cssPropertiesSettersFns=[setPositionFixed,setProperty.bind(this,"width",CSS_INITIALS_VALUES.width,!0),setProperty.bind(this,"height",CSS_INITIALS_VALUES.height,!0),setOpacity,setPadding,setBorder,setBorderRadius,setColor.bind(this,"fill",[]),setColor.bind(this,"backgroundColor",CSS_INITIALS_VALUES.backgroundColor),setBackgroundImage,setBackgroundPosition,setProperty.bind(this,"backgroundRepeat",CSS_INITIALS_VALUES.backgroundRepeat,!1),setProperty.bind(this,"backgroundSize",CSS_INITIALS_VALUES.backgroundSize,!1),setFonts,setBoxShadow,setTextShadow,setFilter,setMixBlendMode,setStrokeWidth,setTransform,setBackdropFilter,setAdditionalStyles];return colorType=selectedColorType||Color.COLOR_TYPES.HEX,cssCode=[],_.forEach(cssPropertiesSettersFns,function(property){_.isFunction(property)&&property(specProperties)}),cssCode.join("\n")},hasBorder:hasBorder,hasBorderRadius:hasBorderRadius,isGradient:isGradient}}angular.module("specification").factory("CssService",CssService),CssService.$inject=["_","tinycolor","UnitService","Color"]}(),function(){"use strict";function DateService(_,moment){return{getDate:function(date){if((date=_.isArray(date)?Math.max.apply(Math,_toConsumableArray(date)):date)&&0!==date)return{fromNow:(date=moment(1e3*date)).fromNow(),full:date.format("D MMMM YYYY [at] h:mm:ss a")}}}}angular.module("specification").factory("DateService",DateService),DateService.$inject=["_","moment"]}(),function(){"use strict";function ElementService(_,CssService,FileService,SvgService,ElementClassService,Color){var ELEMENT_TYPE=ElementEnums.TYPE,COLOR_TYPES={FILL:"Fill",BORDER:"Border",COLOR:"Text",STROKE:"Stroke"},IMAGE_TYPES_SVG="svg",IMAGE_TYPES_URL="url";function parseShadows(shadows){return _.map(_.filter(shadows,function(shadow){return shadow.shadowEnabled}),function(shadow){return _.assign({},shadow,{shadowColor:Color.getColorsSet(shadow.shadowColor)})})}function hasElementOneOfProperties(element,properties){for(var i=0;i<properties.length;i++)if(properties[i]in element)return!0;return!1}function isGroup(element){var objectType=ElementEnums.TYPE;return element&&element.type&&-1!==[objectType.SYMBOL_SKETCH_AREA,objectType.GROUP_SKETCH_AREA,objectType.GROUP,objectType.MULTISTATE,objectType.COMPONENT].indexOf(element.type)}function isTextList(element){var value=element.inputValue;return element.type===ELEMENT_TYPE.TEXT_ELEMENT&&(-1<value.indexOf("<ul><li>")||-1<value.indexOf("<ol><li>"))}return{getClippedAncestor:function(el){for(var currentElement=el.parent;currentElement&&"Canvas"!==currentElement.type;){if(currentElement.isClip)return currentElement;currentElement=currentElement.parent}return!1},getElementColors:function(specProperties){var colors=[],backgroundColor=function(specProperties){var backgroundColor;return!_.isEmpty(specProperties.backgroundColor)&&parseFloat(specProperties.backgroundColor.alpha)?(backgroundColor=specProperties.backgroundColor).type=COLOR_TYPES.FILL:_.isEmpty(specProperties.fill)?specProperties.gradient?(backgroundColor={type:COLOR_TYPES.FILL,gradient:specProperties.gradient}).type=COLOR_TYPES.FILL:specProperties.backgroundImage&&_.isObject(specProperties.backgroundImage)&&specProperties.backgroundImage.idToken&&"gradient"===specProperties.backgroundImage.type&&(backgroundColor={type:COLOR_TYPES.FILL,token:specProperties.backgroundImage}):_.isArray(specProperties.fill)?backgroundColor=specProperties.fill.map(function(color){return _.extend({},color,{type:COLOR_TYPES.FILL})}):(backgroundColor=specProperties.fill).type=COLOR_TYPES.FILL,backgroundColor}(specProperties),activeBackgroundColor=function(specProperties){var activeBackgroundColor;return!_.isEmpty(specProperties.activeBackgroundColor)&&parseFloat(specProperties.activeBackgroundColor.alpha)&&((activeBackgroundColor=specProperties.activeBackgroundColor).type=COLOR_TYPES.FILL),activeBackgroundColor}(specProperties),borderColor=function(specProperties){var borderColor;return CssService.hasBorder(specProperties)&&specProperties.borderColor&&((borderColor=specProperties.borderColor).type=COLOR_TYPES.BORDER),borderColor}(specProperties),cellsBackgroundColors=function(specProperties){var cellsBackgroundColors=[];return cellsBackgroundColors=specProperties.cellsBackgroundColors?specProperties.cellsBackgroundColors.map(function(color){return color.type=COLOR_TYPES.FILL,color}):cellsBackgroundColors}(specProperties),cellsBorderColors=function(specProperties){var cellsBorderColors=[];return cellsBorderColors=specProperties.cellsBorderColors?specProperties.cellsBorderColors.map(function(color){return color.type=COLOR_TYPES.BORDER,color}):cellsBorderColors}(specProperties),fontsColors=(fontsColors=specProperties.fontsColors,_.uniq(_.compact(fontsColors),function(color){return color.hex+color.alpha})||[]),specProperties=function(specProperties){return _.isArray(specProperties.strokeColor)?specProperties.strokeColor.map(function(color){return color.type=COLOR_TYPES.STROKE,color}):_.isObject(specProperties.strokeColor)?_.extend({},specProperties.strokeColor,{type:COLOR_TYPES.STROKE}):null}(specProperties);return colors=_.compact(colors.concat(fontsColors.map(function(color){return color.type=COLOR_TYPES.COLOR,color}),backgroundColor,activeBackgroundColor,borderColor,cellsBackgroundColors,cellsBorderColors,specProperties))},getElementShadows:function(specProperties){return parseShadows(specProperties.shadows)},getElementInnerShadows:function(specProperties){return parseShadows(specProperties.innerShadows)},getElementImages:function(specProperties,engineElement){var images=[],promise=Promise.resolve();return(promise=engineElement.view.domElement.tagName.toLowerCase()===IMAGE_TYPES_SVG&&!engineElement.isMaskGroup()||engineElement.exportSVG&&!engineElement.isCanvas()&&engineElement.exportSVG()?SvgService.getSvgImage(engineElement).then(function(svg){images.push({path:svg.image,file:{name:engineElement.name,extension:IMAGE_TYPES_SVG},width:engineElement.width,height:engineElement.height,size:svg.size,elementType:engineElement.type,rawSource:svg.rawSource,previewImage:svg.previewImage,type:IMAGE_TYPES_SVG})}):promise).then(function(){return specProperties.src&&images.push({path:specProperties.src,file:FileService.getFilename(specProperties.src,!1,engineElement.name),type:IMAGE_TYPES_URL,width:engineElement.width,height:engineElement.height}),specProperties.assets&&(images=images.concat(_.map(specProperties.assets,function(asset){return{path:asset.src,file:FileService.getFilename(asset.src,!1,engineElement.name),type:IMAGE_TYPES_URL,width:engineElement.width,height:engineElement.height}}))),specProperties.backgroundImage&&!CssService.isGradient(specProperties.backgroundImage)&&images.push({path:specProperties.backgroundImage,file:FileService.getFilename(specProperties.backgroundImage,!1,engineElement.name),type:IMAGE_TYPES_URL,width:engineElement.width,height:engineElement.height}),_.compact(images)})},getBorderData:function(specProperties){return _.mapValues(_.pick(specProperties,["borderStyle","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"]),function(value){return parseInt(value)||value})},getTextContentTrimmed:function(specProperties,element){var textContentTrimmed,specProperties=specProperties.textContent;if(!_.isEmpty(specProperties)){if(isTextList(element))return textContentTrimmed=element.inputValue.replace(/<(?!\/li\s*?)[^>]+>/g,"").replace(/\<\/li\>/g,"\r\n").trim();textContentTrimmed=specProperties.trim().replace(/\u200B/g,"")}return textContentTrimmed},getElementTypeClass:function(element){return ElementClassService.getListItemClassByType(element.type,element.typeSketch)},hasElementBorderProperty:function(element){return hasElementOneOfProperties(element,["borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth"])},hasElementBorderRadiusProperty:function(element){return hasElementOneOfProperties(element,["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"])},hasElementParent:function(element){return element=element.parent.type,!_.isEmpty(element)&&element!==ElementEnums.TYPE.CANVAS},isElementBorderRadiusSet:function(specProperties){return CssService.hasBorderRadius(specProperties)},isGroup:isGroup,isMaskGroup:function(element){return element.isMaskGroup()},isHotspot:function(element){var objectType=ElementEnums.TYPE;return element&&element.type&&-1!==[objectType.HOTSPOT].indexOf(element.type)},isSketchArtboard:function(element){var objectType=ElementEnums.TYPE;return element&&element.type&&-1!==[objectType.ARTBOARD_SKETCH_AREA].indexOf(element.type)},isTag:function(element){var objectType=ElementEnums.TYPE;return element&&element.type&&-1!==[objectType.TAG].indexOf(element.type)},isTextList:isTextList,getGroupAncestor:function(element){for(var ancestor=element.parent;ancestor&&!isGroup(ancestor);)ancestor=ancestor.parent;return ancestor},canBeFixed:function(element){return element=ElementHelper.getAncestors(element),!_.some(element,function(ancestor){return ancestor.isClip||ancestor.isMultistate()})},isAncestorFixed:function(el){for(var currentElement=el.parent;currentElement&&"Canvas"!==currentElement.type;){if(currentElement.fixed)return!0;currentElement=currentElement.parent}return!1}}}angular.module("specification").factory("ElementService",ElementService),ElementService.$inject=["_","CssService","FileService","SvgService","ElementClassService","Color"]}(),angular.module("specification").factory("inspectorService",["_","$rootScope","Engine","PagesService",function(_,$rootScope,Engine,PagesService){"use strict";var source,target,POINT_TYPES={LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"},LINE_TYPES={HORIZONTAL:"horizontal",VERTICAL:"vertical"},LINE_WIDTH=1,scale=Engine.getScale();function Point(x,y,type){this.x=x,this.y=y,this.type=type}function getElementCenterPoints(el,pageSize){var yHorizontal=el.y+el.height/2,xVertical=el.x+el.width/2;return pageSize.height&&yHorizontal>pageSize.height&&(yHorizontal=pageSize.height-20),{centerTopPoint:new Point(xVertical=pageSize.width&&xVertical>pageSize.width?pageSize.width-20:xVertical,el.y,POINT_TYPES.TOP),centerBottomPoint:new Point(xVertical,el.y+el.height,POINT_TYPES.BOTTOM),centerLeftPoint:new Point(el.x,yHorizontal,POINT_TYPES.LEFT),centerRightPoint:new Point(el.x+el.width,yHorizontal,POINT_TYPES.RIGHT)}}function getVerticalHelper(point,left,target,source){var helper=null;return helper=function(y,target){return y<target.y||y>target.y+target.height}(point.y,target)?(point.y<target.y?function(left,source,target){return{size:"".concat(target.y-source.y,"px"),left:"".concat(target.x===left?left:left-LINE_WIDTH,"px"),top:"".concat(source.y,"px"),type:LINE_TYPES.VERTICAL}}:function(left,source,target){return{type:LINE_TYPES.VERTICAL,size:"".concat(source.y+source.height-(target.y+target.height),"px"),top:"".concat(target.y+target.height,"px"),left:"".concat(target.x===left?left:left-LINE_WIDTH,"px")}})(left,source,target):helper}function getHorizontalHelper(point,top,source,target){var helper=null;return helper=function(x,target){return x<target.x||x>target.x+target.width}(point.x,target)?(point.x<target.x?function(top,source,target){return{type:LINE_TYPES.HORIZONTAL,size:"".concat(target.x-source.x,"px"),left:"".concat(source.x,"px"),top:"".concat(target.y===top?top:top-LINE_WIDTH,"px")}}:function(top,source,target){return{type:LINE_TYPES.HORIZONTAL,size:"".concat(source.x+source.width-(target.x+target.width),"px"),left:"".concat(target.x+target.width,"px"),top:"".concat(target.y===top?top:top-LINE_WIDTH,"px")}})(top,source,target):helper}function getTargetBoundingRect(shift){return target?target.isCanvasBoundingRect?{x:Math.round(target.x+(shift&&shift.x?shift.x:0))*scale,y:Math.round(target.y+(shift&&shift.y?shift.y:0))*scale,width:target.width*scale,height:target.height*scale,isCanvasBoundingRect:target.isCanvasBoundingRect}:getElementBoundingRect(target,shift):null}function getElementBoundingRect(element,shift){return element?(element=element.getBoundingBox(!0),{x:Math.round(element.left+(shift&&shift.x?shift.x:0))*scale,y:Math.round(element.top+(shift&&shift.y?shift.y:0))*scale,width:(element.right-element.left)*scale,height:(element.bottom-element.top)*scale}):null}function getSourceBoundingRect(shift){return source?source.isCanvasBoundingRect?{x:Math.round(source.x+(shift&&shift.x?shift.x:0))*scale,y:Math.round(source.y+(shift&&shift.y?shift.y:0))*scale,width:source.width*scale,height:source.height*scale,isCanvasBoundingRect:source.isCanvasBoundingRect}:getElementBoundingRect(source,shift):null}return $rootScope.$on(PreviewEnums.ON_ZOOM_CHANGE,function(){scale=Engine.getScale()}),{POINT_TYPES:POINT_TYPES,LINE_TYPES:LINE_TYPES,EVENT_SOURCES:{MOUSE:"mouse",LAYERS:"layers"},setTarget:function(newTarget,eventSource){target=newTarget,$rootScope.$emit(PreviewEnums.INSPECTOR_TARGET_CHANGED,eventSource||this.EVENT_SOURCES.MOUSE)},setSource:function(newSource){source=newSource,$rootScope.$emit(PreviewEnums.INSPECTOR_SOURCE_CHANGED)},getTarget:function(){return target},getSource:function(){return source},getSourceBoundingRect:getSourceBoundingRect,getTargetBoundingRect:getTargetBoundingRect,getElementBoundingRect:getElementBoundingRect,getLineAndHelpersData:function(sourceShift,targetShift){var sourceBoundingRect,targetBoundingRect,targetData;if(source&&target)return sourceBoundingRect=getSourceBoundingRect(sourceShift),targetBoundingRect=getTargetBoundingRect(targetShift),sourceShift=targetBoundingRect,(targetShift=sourceBoundingRect).x<=sourceShift.x&&targetShift.y<=sourceShift.y&&targetShift.x+targetShift.width>=sourceShift.x+sourceShift.width&&targetShift.y+targetShift.height>=sourceShift.y+sourceShift.height&&(targetBoundingRect=[sourceBoundingRect,sourceBoundingRect=targetBoundingRect][0]),targetShift=_.get(PagesService,"currentPageProperties.size",{}),sourceShift=getElementCenterPoints(sourceBoundingRect,targetShift),targetData=getElementCenterPoints(targetBoundingRect,targetShift),_.compact(_.map(sourceShift,function(point){switch(point.type){case POINT_TYPES.TOP:return function(point,targetData,source,target){var top;return 0<=point.y-targetData.centerBottomPoint.y?top=targetData.centerBottomPoint.y:0<=point.y-targetData.centerTopPoint.y&&(top=targetData.centerTopPoint.y),_.isNumber(top)?(targetData=getHorizontalHelper(point,top,source,target),{size:"".concat(_.round(point.y-top),"px"),left:"".concat(point.x,"px"),top:"".concat(top,"px"),helper:targetData,type:LINE_TYPES.VERTICAL,pointType:point.type}):null}(point,targetData,sourceBoundingRect,targetBoundingRect);case POINT_TYPES.BOTTOM:return function(point,targetData,source,target){var top;return 0<=targetData.centerTopPoint.y-point.y?top=targetData.centerTopPoint.y:0<=targetData.centerBottomPoint.y-point.y&&(top=targetData.centerBottomPoint.y),_.isNumber(top)?(targetData=getHorizontalHelper(point,top,source,target),{size:"".concat(_.round(top-point.y),"px"),left:"".concat(point.x,"px"),top:"".concat(point.y,"px"),helper:targetData,type:LINE_TYPES.VERTICAL,pointType:point.type}):null}(point,targetData,sourceBoundingRect,targetBoundingRect);case POINT_TYPES.LEFT:return function(point,targetData,source,target){var left=null;return 0<=point.x-targetData.centerRightPoint.x?left=targetData.centerRightPoint.x:0<=point.x-targetData.centerLeftPoint.x&&(left=targetData.centerLeftPoint.x),_.isNumber(left)?(targetData=getVerticalHelper(point,left,target,source),{size:"".concat(_.round(point.x-left),"px"),left:"".concat(left,"px"),top:"".concat(point.y,"px"),helper:targetData,type:LINE_TYPES.HORIZONTAL,pointType:point.type}):null}(point,targetData,sourceBoundingRect,targetBoundingRect);case POINT_TYPES.RIGHT:return function(point,targetData,source,target){var left=null;return 0<=targetData.centerLeftPoint.x-point.x?left=targetData.centerLeftPoint.x:0<=targetData.centerRightPoint.x-point.x&&(left=targetData.centerRightPoint.x),_.isNumber(left)?(targetData=getVerticalHelper(point,left,target,source),{size:"".concat(_.round(left-point.x),"px"),left:"".concat(point.x,"px"),top:"".concat(point.y,"px"),helper:targetData,type:LINE_TYPES.HORIZONTAL,pointType:point.type}):null}(point,targetData,sourceBoundingRect,targetBoundingRect)}}))}}}]),function(){"use strict";function LibraryService(_,$http,$window,ProjectsService,$q){var cache={},uxpinApi=$window.ApplicationConfiguration.uxpinApi;return{getLibraryData:function(idLibrary){return cache[idLibrary]?$q.resolve(cache[idLibrary]):$http({method:"GET",url:"".concat(uxpinApi,"/code/").concat(idLibrary,"/projects/hash/").concat(ProjectsService.currentProjectHash,"/repositoryPointerData"),withCredentials:!0}).then(function(response){return cache[idLibrary]=response.data,cache[idLibrary]}).catch(function(){throw new Error("Design systems fetching error")})}}}angular.module("specification").factory("LibraryService",LibraryService),LibraryService.$inject=["_","$http","$window","ProjectsService","$q"]}(),function(){"use strict";angular.module("specification").factory("PrettierService",function(){return{format:function(value){var shouldRemoveSemicolon=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],fileName=2<arguments.length?arguments[2]:void 0;try{return fileName&&!["js","jsx"].includes(fileName.split(".").pop())?value:prettier.format(value,{parser:"babel",plugins:prettierPlugins,singleAttributePerLine:!0,singleQuote:!0,semi:!0,tabWidth:2,trailingComma:"none"}).then(function(val){val=val.replace(/[\r\n]+$/,"");return shouldRemoveSemicolon&&";"===val[val.length-1]?val.slice(0,-1):val}).catch(function(){return value})}catch(e){return value}},formatCSS:function(value){try{return prettier.format(value,{parser:"css",plugins:prettierPlugins,arrowParens:"always",bracketSameLine:!0,bracketSpacing:!0,semi:!0,experimentalTernaries:!1,singleQuote:!1,jsxSingleQuote:!1,quoteProps:"as-needed",trailingComma:"all",singleAttributePerLine:!1,htmlWhitespaceSensitivity:"css",vueIndentScriptAndStyle:!1,proseWrap:"preserve",insertPragma:!1,printWidth:80,requirePragma:!1,tabWidth:2,useTabs:!1,embeddedLanguageFormatting:"auto"})}catch(e){return value}},formatHTML:function(value){try{return prettier.format(value,{parser:"html",plugins:prettierPlugins,arrowParens:"always",bracketSameLine:!0,bracketSpacing:!0,semi:!0,experimentalTernaries:!1,singleQuote:!1,jsxSingleQuote:!1,quoteProps:"as-needed",trailingComma:"all",singleAttributePerLine:!1,htmlWhitespaceSensitivity:"css",vueIndentScriptAndStyle:!1,proseWrap:"preserve",insertPragma:!1,printWidth:80,requirePragma:!1,tabWidth:2,useTabs:!1,embeddedLanguageFormatting:"auto"})}catch(e){return value}}}})}(),function(){"use strict";function SpecificationService(_,moment,FileService,CssService,ElementService,DateService,UsersService,FeatureToggler,PrettierService){var lastUpdate;function _openStackblitz(){return(_openStackblitz=_asyncToGenerator(_regeneratorRuntime().mark(function _callee3(value,newWindow){var files;return _regeneratorRuntime().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Promise.all(Object.entries(value.files).map(function(){var _ref9=_asyncToGenerator(_regeneratorRuntime().mark(function _callee2(_ref8){var k,_ref10,extension;return _regeneratorRuntime().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _ref10=_slicedToArray(_ref8,2),k=_ref10[0],_ref10=_ref10[1],extension=k.split(".").pop(),_context2.t0=k,_context2.next=5,PrettierService["html"===extension?"formatHTML":"format"](_ref10,!1,k);case 5:return _context2.t1=_context2.sent,_context2.abrupt("return",[_context2.t0,_context2.t1]);case 7:case"end":return _context2.stop()}},_callee2)}));return function(_x3){return _ref9.apply(this,arguments)}}())).then(Object.fromEntries);case 2:files=_context3.sent,StackBlitzSDK.openProject({title:"UXPin Merge",template:value.stackblitzOptions.template,files:files,dependencies:value.dependencies},{newWindow:newWindow,openFile:value.stackblitzOptions.template.openFile});case 4:case"end":return _context3.stop()}},_callee3)}))).apply(this,arguments)}return{openStackblitz:function(_x,_x2){return _openStackblitz.apply(this,arguments)},getElementColors:function(specProperties){return ElementService.getElementColors(specProperties)},getElementShadows:function(specProperties){return ElementService.getElementShadows(specProperties)},getElementInnerShadows:function(specProperties){return ElementService.getElementInnerShadows(specProperties)},getObjectType:function(object){return _.isFunction(object.isCanvas)&&object.isCanvas()?ElementEnums.TYPE.CANVAS:_.isFunction(object.isGroup)&&object.isGroup()&&!object.isCombinedShape()||_.isFunction(object.isComponent)&&object.isComponent()?ElementEnums.TYPE.GROUP:_.isFunction(object.isCodeComponent)&&object.isCodeComponent()?ElementEnums.TYPE.CODE_COMPONENT:_.isFunction(object.isStorybookElement)&&object.isStorybookElement()?ElementEnums.TYPE.STORYBOOK_ELEMENT:ElementEnums.TYPE.ELEMENT},getCssCode:function(specProperties,colorType){return CssService.getCssCodeFromSpecProperties(specProperties,colorType)},getJsxCode:function(element){return element.getCode()},getSpecModeCode:function(element){return element.getSpecModeCode()},getElementImages:function(specProperties,engineElement){return ElementService.getElementImages(specProperties,engineElement)},getCanvasImages:function(specProperties){var images=[];return specProperties.backgroundImage&&!CssService.isGradient(specProperties.backgroundImage)&&images.push({path:specProperties.backgroundImage,file:FileService.getFilename(specProperties.backgroundImage),type:"url"}),_.compact(images)},getBorderData:function(specProperties){return ElementService.getBorderData(specProperties)},getCanvasBg:function(specProperties){var bg;return CssService.isGradient(specProperties.backgroundImage)?bg={gradient:specProperties.backgroundImage}:specProperties.backgroundColor&&(bg=specProperties.backgroundColor),bg},setLastUpdateDate:function(date){lastUpdate=DateService.getDate(date)},getLastUpdateDate:function(){return lastUpdate},isSpecificationVisible:function(){return FeatureToggler.specModeStyleguide&&("W"===ApplicationConfiguration.project.type||ApplicationConfiguration.isDesignSystem)}}}angular.module("specification").factory("SpecificationService",SpecificationService),SpecificationService.$inject=["_","moment","FileService","CssService","ElementService","DateService","UsersService","FeatureToggler","PrettierService"]}(),function(){"use strict";function SvgService(_,$document,exportImage){function getSvgData(engineElement){return angular.isFunction(engineElement.exportSVG)?function(engineElement){var serializer=new XMLSerializer,svg=angular.element(engineElement.exportedSVG||engineElement.exportSVG()),source=serializer.serializeToString(svg[0]);return source='<?xml version="1.0" standalone="no"?>\r\n'.concat(source),exportImage.exportSvgToSvgFile(svg[0].outerHTML,1,!1).then(function(file){return{image:file,rawSource:source,size:source.length,type:engineElement.type}})}(engineElement):Promise.resolve(null)}return{getSvgImage:function(engineElement){return getSvgData(engineElement).then(function(svgData){return{image:svgData.image,rawSource:svgData.rawSource,size:svgData.size,type:svgData.type}})}}}angular.module("specification").factory("SvgService",SvgService),SvgService.$inject=["_","$document","exportImage"]}(),function(){"use strict";function UnitService(localStorageService,UnitConversionService){var map,UNIT_MODES={PIXELS:"Pixels",POINTS:"Points",RETINA_X2:"Retina @2x",RETINA_X3:"Retina @3x",LDPI:"LDPI @0.75x",MDPI:"MDPI @1x",HDPI:"HDPI @1.5x",XHDPI:"XHDPI @2x",XXHDPI:"XXHDPI @3x",XXXHDPI:"XXXHDPI @4x"},RETINA_SCALE_FACTOR_X2=2,RETINA_SCALE_FACTOR_X3=3,UNIT_MODE_KEY="activeUnitMode",TO_FIXED_DIGIT=2,UNIT=UnitConversionService.UNIT,DENSITY_TYPES=UnitConversionService.DENSITY_TYPES,ACTIVE_MODE_MAP=((map={})[UNIT_MODES.PIXELS]=convertToPx,map[UNIT_MODES.POINTS]=convertToPt,map[UNIT_MODES.RETINA_X2]=convertToRetina(RETINA_SCALE_FACTOR_X2),map[UNIT_MODES.RETINA_X3]=convertToRetina(RETINA_SCALE_FACTOR_X3),map[UNIT_MODES.LDPI]=convertToAndroid(DENSITY_TYPES.LDPI.VALUE),map[UNIT_MODES.MDPI]=convertToAndroid(DENSITY_TYPES.MDPI.VALUE),map[UNIT_MODES.HDPI]=convertToAndroid(DENSITY_TYPES.HDPI.VALUE),map[UNIT_MODES.XHDPI]=convertToAndroid(DENSITY_TYPES.XHDPI.VALUE),map[UNIT_MODES.XXHDPI]=convertToAndroid(DENSITY_TYPES.XXHDPI.VALUE),map[UNIT_MODES.XXXHDPI]=convertToAndroid(DENSITY_TYPES.XXXHDPI.VALUE),map),activeMode=loadMode()||UNIT_MODES.PIXELS;function saveMode(mode){return localStorageService.set(UNIT_MODE_KEY,mode)}function loadMode(){return localStorageService.get(UNIT_MODE_KEY)}function convertToPx(value,skipRounding,precision){return precision?parseFloat(value.toFixed(precision))+UNIT.PX:skipRounding?value+UNIT.PX:Math.round(value)+UNIT.PX}function convertToPt(value){return Math.round(value)+UNIT.PT}function convertToRetina(scale){return function(value){return removeZeros(roundValue(UnitConversionService.retinaScaleUp(value,scale),TO_FIXED_DIGIT))+UNIT.PT}}function convertToAndroid(baseDpi){return function(value,isFont){isFont=isFont?UNIT.SP:UNIT.DP;return removeZeros(roundValue(UnitConversionService.dpToPx(value,baseDpi),TO_FIXED_DIGIT))+isFont}}function removeZeros(value){return value=(value=value.replace(/(\.[0-9]*?)0+$/,"$1")).replace(/\.$/,"")}function roundValue(value,digits){return value.toFixed(digits)}return{UNIT_MODES:UNIT_MODES,changeMode:function(mode){saveMode(activeMode=mode)},loadMode:loadMode,convertPx:function(value,skipRounding,precision){if(ACTIVE_MODE_MAP.hasOwnProperty(activeMode))return ACTIVE_MODE_MAP[activeMode](value,skipRounding,precision)},toPx:convertToPx,saveMode:saveMode,getActiveMode:function(){return activeMode}}}angular.module("specification").factory("UnitService",UnitService),UnitService.$inject=["localStorageService","UnitConversionService"]}(),function(){"use strict";angular.module("specification").factory("UnitConversionService",function(){var DENSITY_TYPES={LDPI:{VALUE:120,FACTOR:.75},MDPI:{VALUE:160,FACTOR:1},HDPI:{VALUE:240,FACTOR:1.5},XHDPI:{VALUE:320,FACTOR:2},XXHDPI:{VALUE:480,FACTOR:3},XXXHDPI:{VALUE:640,FACTOR:4}},FACTOR_PX_PT=.75,FACTOR_PT_PX=1.333333,STANDARD_DPI=DENSITY_TYPES.MDPI.VALUE;return{DENSITY_TYPES:DENSITY_TYPES,UNIT:{PX:"px",PT:"pt",DP:"dp",SP:"sp"},pxToPt:function(px){return px*FACTOR_PX_PT},ptToPx:function(pt){return pt*FACTOR_PT_PX},pxToDp:function(px,dpi){return px/(dpi/STANDARD_DPI)},dpToPx:function(dp,dpi){return dp*(dpi/STANDARD_DPI)},retinaScaleDown:function(value,scale){return value/scale},retinaScaleUp:function(value,scale){return value*scale}}})}(),function(){"use strict";function config($stateProvider){ApplicationConfiguration.isStyleguide&&$stateProvider.state("styleguide",{abstract:!1,url:"/{section}",params:{section:{value:"",squash:!0}},views:{"":{templateUrl:"/scripts/modules/styleguide/views/styleguide.view.html",controller:"StyleguideController",controllerAs:"vm"}},resolve:{pages:function(PagesService){return PagesService.getPages()},isStyleGuideEnabled:function($q,FeatureToggler){$q=$q.defer();return FeatureToggler.specModeStyleguide?$q.resolve(!0):$q.reject(null),$q.promise}}})}angular.module("styleguide").config(config),config.$inject=["$stateProvider"]}(),function(){"use strict";function StyleguideController(_,ProjectsService,PagesService,$rootScope,$stateParams,DateService,UXPinService,DesignSystem){var vm=this;vm.pagesIds=PagesService.styleGuidePagesFlatList,vm.currentProjectName=ProjectsService.currentProjectName,vm.lastUpdatedDate="",vm.lastUpdatedDateTitle="",vm.isLoaded=!1,vm.images=[],vm.svgs=vm.images,vm.fonts=vm.images,vm.colors=vm.images,vm.isProjectEmpty=function(){return[vm.colors,vm.images,vm.svgs,vm.fonts].every(function(assetsArray){return!assetsArray.length})},vm.initialSection=$stateParams.section,vm.currentProjectHash=ProjectsService.currentProjectHash,vm.homepageURL=UXPinService.getHomepageURL(),vm.designSystems=[],$rootScope.$on(PreviewEnums.ON_STYLEGUIDE_DATA_LOAD_STARTED,function(){vm.isLoaded=!1}),$rootScope.$on(PreviewEnums.ON_STYLEGUIDE_DATA_LOAD_FINISHED,function(event,styleGuideData){vm.colors=styleGuideData.colors,vm.images=styleGuideData.images,vm.svgs=styleGuideData.svgs,vm.fonts=_.values(styleGuideData.fonts),vm.isLoaded=!0,vm.setLastUpdateDate(styleGuideData.lastUpdates),DesignSystem.fetchDesignSystemsForProjectAccount().then(function(data){vm.designSystems=data})}),vm.setLastUpdateDate=function(dateList){dateList=DateService.getDate(dateList);dateList&&(vm.lastUpdatedDate=dateList.fromNow,vm.lastUpdatedDateTitle=dateList.full)}}angular.module("styleguide").controller("StyleguideController",StyleguideController),StyleguideController.$inject=["_","ProjectsService","PagesService","$rootScope","$stateParams","DateService","UXPinService","DesignSystem"]}(),function(){"use strict";function StyleguideLayout(FeatureToggler,$rootScope,$window,uxpinSharedComponents){var vm=this,USER_AGENT=navigator.userAgent;vm.isStyleguideFeature=FeatureToggler.specModeStyleguide,vm.isLoading=!0,vm.browser=uxpinSharedComponents.getBrowserName(USER_AGENT),vm.OS=uxpinSharedComponents.getOS(USER_AGENT),$rootScope.$on("$stateChangeError",function(){$window.location="/404"}),$rootScope.$on(PreviewEnums.ON_STYLEGUIDE_DATA_LOAD_FINISHED,function(){vm.isLoading=!1})}angular.module("styleguide").controller("StyleguideLayout",StyleguideLayout),StyleguideLayout.$inject=["FeatureToggler","$rootScope","$window","uxpinSharedComponents"]}(),function(){"use strict";angular.module("styleguide").factory("BackgroundService",function(){var BACKGROUND_POSITION={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",CENTER:"center"},BACKGROUND_SIZE={AUTO:"auto",CONTAIN:"contain",COVER:"cover",STRETCH:"100% 100%"},BACKGROUND_REPEAT={NO_REPEAT:"no-repeat",REPEAT_X:"repeat-x",REPEAT_Y:"repeat-y",REPEAT:"repeat"},BEHAVIOUR=function(){var map={};return map[BACKGROUND_SIZE.COVER]="Fit to fill",map[BACKGROUND_SIZE.CONTAIN]="Contain",map[BACKGROUND_SIZE.STRETCH]="Stretch",map[BACKGROUND_REPEAT.REPEAT]="Repeat on axis X, Y",map[BACKGROUND_REPEAT.REPEAT_X]="Repeat on axis X",map[BACKGROUND_REPEAT.REPEAT_Y]="Repeat on axis Y",map[BACKGROUND_REPEAT.NO_REPEAT]="Don't resize",map}();return{getPositionClass:function(posX,posY){return posX===BACKGROUND_POSITION.CENTER?posY:posY===BACKGROUND_POSITION.CENTER?posX:"".concat(posY,"-").concat(posX)},getBehaviour:function(repeat,size){return repeat=size===BACKGROUND_SIZE.AUTO?repeat:size,BEHAVIOUR[repeat]||""}}})}(),function(){"use strict";function imageLazyLoading(_,$rootScope){return{restrict:"A",scope:{},link:function(_,$rootScope,scope,element){var imagesCollection=[],isLoading={},isListenerAdded=!1,onScroll=(scope.$watchCollection(function(){return element[0].querySelectorAll("lazy-image")},function(images){imagesCollection=images,isLoading={},loadImagesCollection(),isListenerAdded||(element.on("scroll",onScroll),isListenerAdded=!0)}),_.throttle(function(){Object.keys(isLoading).length===imagesCollection.length?(element.off("scroll",onScroll),isListenerAdded=!1):loadImagesCollection()},200));function loadImagesCollection(){angular.forEach(imagesCollection,function(image,id){!isLoading[id]&&function(image){var image=image.getBoundingClientRect(),containerRect=element[0].getBoundingClientRect();return image.top>=containerRect.top&&image.left>=containerRect.left&&image.bottom<=containerRect.bottom&&image.right<=containerRect.right}(image)&&(isLoading[id]=!0,$rootScope.$emit("IMAGE_VISIBLE",id))})}}.bind(this,_,$rootScope)}}angular.module("specification").directive("imageLazyLoading",imageLazyLoading),imageLazyLoading.$inject=["_","$rootScope"]}(),function(){"use strict";function navBar($timeout,$state,$rootScope){return{restrict:"A",scope:!1,link:function(scope,element,attrs){var removeDuScrollSpyEvent;$timeout(function(){attrs.duScrollContainer&&attrs.initialSection&&angular.element(document.getElementById(attrs.duScrollContainer)).scrollTo(angular.element(document.getElementById(attrs.initialSection)))}),removeDuScrollSpyEvent=$rootScope.$on("duScrollspy:becameActive",function($event,$element,$target){$element=$element.prop("hash").replace("#","");$state.params.section!==$element&&$state.go("styleguide",{section:$element},{notify:!1})}),scope.$on("$destroy",function(){removeDuScrollSpyEvent()})}}}angular.module("styleguide").directive("navBar",navBar),navBar.$inject=["$timeout","$state","$rootScope"]}(),function(){"use strict";function commentsAssigneeFiltersCtrl(_,CommentsFilterSettings,AssignHelper,$scope,UsersService){var vm=this;function getUsersIds(){return _.map(vm.options,function(option){return option.id_user})}function resetAssignmentFilter(){vm.selectedOptions=CommentsFilterSettings.DISABLED,CommentsFilterSettings.disableAssignmentFilter()}function isSelected(value){return _.isArray(vm.selectedOptions)?-1!==vm.selectedOptions.indexOf(parseInt(value)):vm.selectedOptions===value}function isUserSelected(){return vm.selectedUsers.length}function isAllUsersSelected(){return vm.selectedUsers.length===getUsersIds().length}vm.options=[],vm.selectedOptions=[],vm.selectedUsers=[],vm.isDisabled=!1,vm.me=parseInt(UsersService.me.id_user),vm.getUsersIds=getUsersIds,vm.onSelect=function(value){null===value?(vm.selectedOptions=null!==vm.selectedOptions?value:CommentsFilterSettings.DISABLED,vm.selectedUsers=[],CommentsFilterSettings.setAssignmentFilter(vm.selectedOptions)):value===CommentsFilterSettings.DISABLED?(vm.selectedOptions=value,vm.selectedUsers=[],CommentsFilterSettings.setAssignmentFilter(vm.selectedOptions)):(_.isArray(vm.selectedOptions)?isSelected(value)?vm.selectedOptions=vm.selectedOptions.filter(function(option){return option!==parseInt(value)}):vm.selectedOptions.push(parseInt(value)):(vm.selectedOptions=[],vm.selectedOptions.push(parseInt(value))),vm.selectedOptions.length?CommentsFilterSettings.setAssignmentFilter(vm.selectedOptions):resetAssignmentFilter())},vm.isSelected=isSelected,vm.onUserSelect=function(value,toggleAll){value&&_.isArray(value)&&(isAllUsersSelected()||isUserSelected()&&toggleAll?vm.selectedUsers=[]:vm.selectedUsers=value);vm.selectedOptions=vm.selectedUsers.concat(vm.selectedOptions&&(-1!==vm.selectedOptions.indexOf(vm.me)?vm.me:[])),vm.selectedOptions.length?CommentsFilterSettings.setAssignmentFilter(vm.selectedOptions):resetAssignmentFilter()},vm.isUserSelected=isUserSelected,vm.isAllUsersSelected=isAllUsersSelected,vm.getLabelName=function(){return isUserSelected()?1!==vm.selectedUsers.length?"".concat(vm.selectedUsers.length," users"):(_.first(vm.options.filter(function(user){return user.id_user===vm.selectedUsers[0]}))||{}).name:"None"},vm.onCloudOpen=function(){vm.isOpen=!0},vm.onCloudClose=function(){vm.isOpen=!1},vm.cloudOffset={bottom:{x:-40,y:7}},vm.options=(AssignHelper.getOptions()||[]).filter(function(option){return option.id_user!==parseInt(UsersService.me.id_user)}),vm.selectedOptions=CommentsFilterSettings.getAssignmentFilter(),_.isArray(vm.selectedOptions)&&(vm.selectedUsers=vm.selectedOptions.filter(function(option){return!_.isNull(option)&&option!==vm.me})),$scope.$watch(function(){return!!CommentsFilterSettings.getTypeFilters().length},function(value){vm.isDisabled=!value})}angular.module("comments").directive("commentsAssigneeFilters",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"/scripts/modules/comments/directives/commentsAssigneeFilters/commentsAssigneeFilters.html",controller:commentsAssigneeFiltersCtrl,controllerAs:"vm"}}),commentsAssigneeFiltersCtrl.$inject=["_","CommentsFilterSettings","AssignHelper","$scope","UsersService"]}(),function(){"use strict";angular.module("comments").factory("CommentsListApi",function(){var listApi={};return{create:function(id,api){if(listApi[id])throw new Error("Api for commentsList id:".concat(id," already created."));listApi[id]=api},remove:function(id){listApi[id]&&delete listApi[id]},scrollTo:function(id,commentId){listApi[id]&&listApi[id].scrollTo(commentId)},reloadList:function(id){listApi[id]&&listApi[id].reloadList()}}})}(),function(){"use strict";function pvCommentsListCtrl(_,$scope,CommentsListApi){var visibleScrollHeight,minEndIndex,endIndex,vm=this;function onDestroy(){vm.listId&&CommentsListApi.remove(vm.listId)}function scrollTo(id){var commentIndex=function(id){return _.findIndex(vm.comments,function(item){return item._id==id})}(id);-1<commentIndex&&(commentIndex=(commentIndex=commentIndex)<minEndIndex?minEndIndex:commentIndex,vm.visibleItems=vm.comments.slice(0,commentIndex+1),endIndex=commentIndex,vm.scrollTarget="group-".concat(id,"-panel"))}function reloadList(){visibleScrollHeight&&(vm.visibleItems=vm.comments.slice(0,minEndIndex+1),endIndex=minEndIndex)}vm.visibleItems=[],vm.scrollTarget=null,vm.onHeightKnown=function(height){visibleScrollHeight=height,minEndIndex=Math.ceil(visibleScrollHeight/vm.minItemHeight)-1,endIndex=minEndIndex,_.isEmpty(vm.comments)||(vm.visibleItems=vm.comments.slice(0,endIndex+1))},vm.loadMoreRecords=function(){var length=vm.visibleItems.length,length=vm.comments.slice(length,length+2);length.length&&(vm.visibleItems.push.apply(vm.visibleItems,length),endIndex+=2)},vm.unloadRecords=function(scrollTop){var length=vm.visibleItems.length,scrollTop=Math.ceil((visibleScrollHeight+scrollTop)/vm.minItemHeight)-1;scrollTop<endIndex&&(vm.visibleItems.splice(scrollTop,length+1),endIndex=scrollTop)},vm.listId&&CommentsListApi.create(vm.listId,{scrollTo:scrollTo,reloadList:reloadList}),$scope.$watchCollection("vm.comments",function(){visibleScrollHeight&&(vm.visibleItems=vm.comments.slice(0,endIndex+1))}),$scope.$on("$destroy",onDestroy)}angular.module("comments").directive("pvCommentsList",function(){return{restrict:"E",scope:{listId:"@",minItemHeight:"@",comments:"=",scrollTo:"="},templateUrl:"/scripts/modules/comments/directives/commentsList/pvCommentsList.html",compile:function(element){element.addClass("scrolled-container")},controller:pvCommentsListCtrl,controllerAs:"vm",bindToController:!0}}),pvCommentsListCtrl.$inject=["_","$scope","CommentsListApi"]}(),function(){"use strict";function commentsTypeFilterCtrl(Settings,CommentsFilterSettings,hotkeys){function togglePinsVisibility(){CommentsFilterSettings.setPinsVisibility(!CommentsFilterSettings.getPinsVisibility())}this.togglePinsVisibility=togglePinsVisibility,this.toggleResolvedCommentsVisibility=function(){Settings.setShowResolvedComments(!Settings.showResolvedComments)},this.arePinsVisible=CommentsFilterSettings.getPinsVisibility,this.areResolvedCommentsVisible=function(){return Settings.showResolvedComments},hotkeys.add({combo:"shift+alt+h",description:"Toggle comments visibility",callback:function(){togglePinsVisibility()}})}angular.module("comments").directive("commentsOtherFilters",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"/scripts/modules/comments/directives/commentsOtherFilters/commentsOtherFilters.html",controller:commentsTypeFilterCtrl,controllerAs:"vm"}}),commentsTypeFilterCtrl.$inject=["Settings","CommentsFilterSettings","hotkeys"]}(),function(){"use strict";function pvCommentsSearchCtrl(_,$scope){var KEY_CODES=keysEnums.KEY_CODES,vm=this;vm.focused=!1,vm.handleFocus=function(){vm.focused=!0},vm.handleKeyDown=function(event){event.stopPropagation(),event.keyCode===KEY_CODES.ESC&&(_.isEmpty(vm.searchFor)?vm.focused=!1:vm.searchFor="")},vm.resetSearch=function(){vm.focused=!1,vm.searchFor=""},$scope.$watch("vm.searchFor",function(newValue,oldValue){newValue!==oldValue&&vm.onSearch({$searchText:vm.searchFor})})}angular.module("comments").directive("pvCommentsSearch",function(){return{restrict:"E",scope:{searchFor:"=",onSearch:"&"},templateUrl:"/scripts/modules/comments/directives/commentsSearch/pvCommentsSearch.html",controller:pvCommentsSearchCtrl,controllerAs:"vm",bindToController:!0}}),pvCommentsSearchCtrl.$inject=["_","$scope"]}(),function(){"use strict";angular.module("comments").factory("CommentsTreeApi",function(){var treeApi={};return{create:function(id,api){if(treeApi[id])throw new Error("Api for commentsTree id:".concat(id," already created."));treeApi[id]=api},remove:function(id){treeApi[id]&&delete treeApi[id]},isPageHidden:function(id,pageId){if(treeApi[id])return treeApi[id].isPageHidden(pageId)},togglePage:function(id,pageId){treeApi[id]&&treeApi[id].togglePage(pageId)},scrollTo:function(id,commentId){treeApi[id]&&treeApi[id].scrollTo(commentId)}}})}(),function(){"use strict";function pvCommentsTreeCtrl(_,$scope,CommentsTreeApi){var visibleScrollHeight,minNumberOfItems,numberOfItems,vm=this,endIndex={pageIndex:0,breakpointIndex:0,commentIndex:0};function onDestroy(){vm.treeId&&CommentsTreeApi.remove(vm.treeId)}function isPageHidden(id){return!!vm.hiddenPages[id]}function togglePage(id){vm.hiddenPages[id]?delete vm.hiddenPages[id]:vm.hiddenPages[id]=!0,reloadTree()}function loadMoreRecords(count){for(var page,visiblePage,breakpointsLength,breakpointIndex,breakpointStartIndex,comments,visibleComments,itemsToLoad=count||2,pagesLength=vm.tree.length,pageIndex=endIndex.pageIndex;pageIndex<pagesLength&&0<itemsToLoad;pageIndex++){for(page=vm.tree[pageIndex],breakpointStartIndex=(visiblePage=vm.visibleTree[pageIndex])?endIndex.breakpointIndex:0,visiblePage=visiblePage||{id:page.id,name:page.name,breakpoints:[]},breakpointsLength=page.breakpoints.length,breakpointIndex=breakpointStartIndex;breakpointIndex<breakpointsLength&&0<itemsToLoad;breakpointIndex++){var visibleBreakpoint,breakpoint=page.breakpoints[breakpointIndex],commentsStartIndex=(visibleBreakpoint=visiblePage.breakpoints[breakpointIndex])?endIndex.commentIndex+1:0;visibleBreakpoint=visibleBreakpoint||{id:breakpoint.id,name:breakpoint.name,comments:[]},comments=breakpoint.comments,breakpoint=breakpoint.comments.length,visibleComments=visibleBreakpoint.comments,visibleBreakpoint.comments.length<breakpoint&&(breakpoint=comments.slice(commentsStartIndex,commentsStartIndex+itemsToLoad),visibleComments.push.apply(visibleComments,_toConsumableArray(breakpoint)),itemsToLoad-=breakpoint.length,numberOfItems+=breakpoint.length,endIndex.commentIndex=visibleComments.length-1,endIndex.breakpointIndex=breakpointIndex,!visiblePage.breakpoints[breakpointIndex])&&visibleComments.length&&visiblePage.breakpoints.push(visibleBreakpoint)}!vm.visibleTree[pageIndex]&&visiblePage.breakpoints.length&&vm.visibleTree.push(visiblePage),endIndex.pageIndex=pageIndex}}function scrollTo(id){var commentIndex=function(id){var index,count=0;return _.each(vm.tree,function(page){if(_.each(page.breakpoints,function(breakpoint){if(-1!==(index=_.findIndex(breakpoint.comments,function(comment){return comment._id==id})))return count+=index+1,!1;count+=breakpoint.comments.length}),-1<index)return!1}),count-1}(id);-1<commentIndex&&(commentIndex=commentIndex,(commentIndex+=1)<numberOfItems&&reloadTree(commentIndex<minNumberOfItems?minNumberOfItems:commentIndex),loadMoreRecords(commentIndex-numberOfItems),vm.scrollTarget="group-".concat(id,"-panel"))}function reloadTree(count){var visiblePage,visibleBreakpoint,itemsToLoad=(itemsToLoad=count||numberOfItems||minNumberOfItems)<minNumberOfItems?minNumberOfItems:itemsToLoad,tree=[];numberOfItems=0,_.each(vm.tree,function(page,pageIndex){if(visiblePage={id:page.id,name:page.name,breakpoints:[]},vm.hiddenPages[page.id]||_.each(page.breakpoints,function(breakpoint,breakpointIndex){if((visibleBreakpoint={id:breakpoint.id,name:breakpoint.name,comments:[]}).comments=breakpoint.comments.slice(0,itemsToLoad),itemsToLoad-=visibleBreakpoint.comments.length,numberOfItems+=visibleBreakpoint.comments.length,visibleBreakpoint.comments.length&&visiblePage.breakpoints.push(visibleBreakpoint),!itemsToLoad)return endIndex.breakpointIndex=breakpointIndex,endIndex.commentIndex=visibleBreakpoint.comments.length-1,!1}),(visiblePage.breakpoints.length||vm.hiddenPages[page.id])&&tree.push(visiblePage),!itemsToLoad)return endIndex.pageIndex=pageIndex,!1}),vm.visibleTree=tree}vm.visibleTree=[],vm.hiddenPages={},vm.scrollTarget=null,vm.onHeightKnown=function(height){visibleScrollHeight=height,minNumberOfItems=Math.ceil(visibleScrollHeight/vm.minItemHeight),reloadTree()},vm.loadMoreRecords=loadMoreRecords,vm.unloadRecords=function(scrollTop){var pageIndex,visiblePage,breakpointIndex,visibleBreakpoint,visibleCommentsLength,scrollTop=Math.ceil((visibleScrollHeight+scrollTop)/vm.minItemHeight),itemsToUnload=numberOfItems-scrollTop;if(0<itemsToUnload){for(pageIndex=endIndex.pageIndex;-1<pageIndex&&0<itemsToUnload;pageIndex--){for(visiblePage=vm.visibleTree[pageIndex],breakpointIndex=endIndex.breakpointIndex;-1<breakpointIndex&&0<itemsToUnload;breakpointIndex--)visibleBreakpoint=visiblePage.breakpoints[breakpointIndex],visibleBreakpoint=visibleBreakpoint.comments,visibleCommentsLength=visibleBreakpoint.length,itemsToUnload<visibleCommentsLength?(visibleBreakpoint.splice(visibleCommentsLength-itemsToUnload,visibleCommentsLength+1),endIndex.commentIndex=visibleBreakpoint.length-1,itemsToUnload=0):(visiblePage.breakpoints.pop(),itemsToUnload-=visibleCommentsLength);_.isEmpty(visiblePage.breakpoints)&&(vm.visibleTree.pop(),endIndex.pageIndex=pageIndex-1,visiblePage=vm.visibleTree[endIndex.pageIndex]),endIndex.breakpointIndex=visiblePage.breakpoints.length-1,endIndex.commentIndex=visiblePage.breakpoints[endIndex.breakpointIndex].comments.length-1}numberOfItems=scrollTop}},vm.togglePage=togglePage,vm.treeId&&CommentsTreeApi.create(vm.treeId,{isPageHidden:isPageHidden,togglePage:togglePage,scrollTo:scrollTo}),$scope.$watchCollection("vm.tree",function(){visibleScrollHeight&&reloadTree()}),$scope.$on("$destroy",onDestroy)}angular.module("comments").directive("pvCommentsTree",function(){return{restrict:"E",scope:{treeId:"@",minItemHeight:"@",tree:"=",showBreakpoints:"="},templateUrl:"/scripts/modules/comments/directives/commentsTree/pvCommentsTree.html",compile:function(element){element.addClass("scrolled-container")},controller:pvCommentsTreeCtrl,controllerAs:"vm",bindToController:!0}}),pvCommentsTreeCtrl.$inject=["_","$scope","CommentsTreeApi"]}(),function(){"use strict";function commentsTypeFiltersCtrl(CommentsSettings,CommentsFilterSettings,hotkeys){var vm=this;function changeActiveFilter(value){-1!==vm.selectedFilters.indexOf(value)?vm.selectedFilters=vm.selectedFilters.filter(function(filter){return filter!==value}):vm.selectedFilters.push(value),vm.selectedFilters,CommentsFilterSettings.setTypeFilters(vm.selectedFilters)}vm.filterOptions=[],vm.selectedFilters=null,vm.commentTypesActive=!1,vm.disabled=!1,vm.assignmentOptions=[],vm.selectedAssignmentOption={},vm.changeActiveFilter=changeActiveFilter,vm.isSelected=function(option){return-1!==vm.selectedFilters.indexOf(option.value)},vm.commentTypesActive=CommentsSettings.commentTypesActive(),vm.filterOptions=CommentsFilterSettings.getTypeFilterOptions(),vm.selectedFilters=CommentsFilterSettings.getTypeFilters(),_.each(vm.filterOptions,function(option){hotkeys.add({combo:option.shortcut.join("+"),description:option.value,callback:function(){changeActiveFilter(option.value)}})})}angular.module("comments").directive("commentsTypeFilters",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"/scripts/modules/comments/directives/commentsTypeFilters/commentsTypeFilters.html",controller:commentsTypeFiltersCtrl,controllerAs:"vm"}}),commentsTypeFiltersCtrl.$inject=["CommentsSettings","CommentsFilterSettings","hotkeys"]}(),function(){"use strict";function PreviewCommentCanvasCtrl($rootScope,$scope,$controller,PreviewNavigation){var onAddingComment;$controller("PreviewCommentAbstractCtrl",{$scope:$scope}),$scope.type="canvas",$scope.onResolved=function(value){value&&$rootScope.$emit(PreviewEnums.SELECT_COMMENT,null)},$scope.isNew()&&($scope.$on("$destroy",function(){onAddingComment()}),onAddingComment=$rootScope.$on(PreviewEnums.ADDING_COMMENT,function(e,value){$scope.focusMe(value,100)}))}angular.module("comments").controller("PreviewCommentCanvasCtrl",PreviewCommentCanvasCtrl),PreviewCommentCanvasCtrl.$inject=["$rootScope","$scope","$controller","PreviewNavigation"]}(),function(){"use strict";angular.module("comments").directive("previewCommentCanvas",function(){return{restrict:"E",replace:!0,scope:{groupId:"=",comment:"=",commentType:"=",notifications:"=",parentId:"@",reply:"@",replyForm:"@",x:"@",y:"@"},controller:"PreviewCommentCanvasCtrl",templateUrl:"/scripts/modules/comments/directives/preview-comment/pvComment.html"}})}(),function(){"use strict";function PreviewCommentPanelCtrl($rootScope,$scope,$controller,CommentsService){var onSearchComments;$controller("PreviewCommentAbstractCtrl",{$scope:$scope}),$scope.type="panel",$scope.searchFor=CommentsService.searchFor,$scope.onResolved=function(value){},$scope.isNew()||($scope.$on("$destroy",function(){onSearchComments()}),onSearchComments=$rootScope.$on("searchComments",function(e){$scope.searchFor=CommentsService.searchFor}))}angular.module("comments").controller("PreviewCommentPanelCtrl",PreviewCommentPanelCtrl),PreviewCommentPanelCtrl.$inject=["$rootScope","$scope","$controller","CommentsService"]}(),function(){"use strict";angular.module("comments").directive("previewCommentPanel",function(){return{restrict:"E",replace:!0,scope:{groupId:"=",comment:"=",commentType:"=",notifications:"=",parentId:"@",reply:"@",replyForm:"@",x:"@",y:"@"},controller:"PreviewCommentPanelCtrl",templateUrl:"/scripts/modules/comments/directives/preview-comment/pvComment.html"}})}(),function(){"use strict";function PreviewCommentAbstractCtrl($rootScope,$scope,$state,$timeout,$filter,ProjectsService,PagesService,DocumentsService,CommentsService,CommentsSettings,UsersService,NotifyHelper,CommentsHelper,AssignHelper,CommentsState,$translate,ApprovalsService,PreviewNavigation,$window,EscapeHtmlService){var INPUT_PLACEHOLDERS={FIRST:"Whats your comment?",REPLY:"Whats your response?"},COMMENT_MODE={NEW:"new",PREVIEW:"preview",EDIT:"edit"},KEY_CODES=keysEnums.KEY_CODES,commentTypes=CommentsSettings.commentTypes;switch(this.isCloudOpen=!1,this.eventRef=null,$scope.id="comment-".concat(MD5((new Date).getTime())),$scope.commentMode=null,$scope.state={},$scope.working=!1,$scope.isReplying=!1,$scope.isError=!1,$scope.inputPlaceholder="",$scope.isAssignmentActive=!1,$scope.isAnonymous=UsersService.isAnonymous(),$scope.isAnonymousWithName=function(){return UsersService.isAnonymous()&&UsersService.isAnonymousNameSet()},$scope.avatarUrl=null,$scope.avatarInitials=null,$scope.notificationPanel=!1,$scope.textElements={},$scope.parentComment=null,$scope.previewText="",$scope.authorText="",$scope.form={text:"",mentions:[],focused:!1},$scope.assign={options:[],selected:null,onChange:function(){$scope.parentId&&CommentsService.updateAssignedUser($scope.parentId,$scope.assign.selected)},config:{cloudId:"assignment-cloud-".concat($scope.id),label:"Assigned:",labelKey:"name",valueKey:"id_user",placeholder:"Assign to someone",inputTpl:"pvInputWithLabel.html",optionTpl:"pvOptionWithAvatar.html",deselect:!0,deselectLabel:"Unassign",withSearch:!0,search:{label:"Search for the user...",placeholder:"Type to search...",searchKey:"name"}}},$scope.isCanvas=function(){return"canvas"===$scope.type},$scope.isNew=isNew,$scope.isEditMode=isEditMode,$scope.isEditDisabled=isEditDisabled,$scope.isPreviewMode=function(){return $scope.commentMode===COMMENT_MODE.PREVIEW},$scope.isLoved=isLoved,$scope.getLoveIconTitle=function(){return isLoved()?dontLoveItTitle:loveItTitle},$scope.isFormHidden=function(){return $scope.state.groupInEditModeId===$scope.groupId},$scope.isGroupSelected=function(){return $scope.state.selectedGroupId===$scope.groupId},$scope.isCloudOpen=function(){return this.isCloudOpen}.bind(this),$scope.focusMe=focusMe,$scope.loveMe=function(event){event.stopPropagation(),CommentsService.updateComment($scope.comment._id,{is_loved:!$scope.isLoved()})},$scope.replyMe=function(event){event.stopPropagation();event=$scope.comment._parent_comment||$scope.comment._id;$rootScope.$emit(PreviewEnums.REPLYING_COMMENT,event,$scope.type,!$scope.isReplying)},$scope.resolveMe=function(value){CommentsService.updateCommentResolve($scope.parentComment._id,value),value&&$window.mixpanel.track("comment_resolved")},$scope.editMe=function(event){event.stopPropagation(),isEditDisabled()||($scope.commentMode=COMMENT_MODE.EDIT,$scope.state.groupInEditModeId=$scope.groupId,$scope.form.text=$scope.comment.comment,focusMe(!0))},$scope.toggleMe=toggleMe.bind(this),$scope.cancelEdit=function(event){event.stopPropagation(),exitEditMode()},$scope.deleteMe=function(event){event&&event.stopPropagation();CommentsService.canEdit($scope.comment)&&CommentsService.deleteComment($scope.comment._id)},$scope.submitMe=submitMe,$scope.update=update,$scope.resetFormData=function(){$scope.form.text="",$scope.form.mentions=[]},$scope.getGroupLength=function(){return CommentsService.commentsTree[$scope.comment._id].length},$scope.onTextareaMouseDown=function(event){event.stopPropagation(),$scope.isError=!1},$scope.onTextareaKeyDown=function(event){event.which===KEY_CODES.ESC&&$rootScope.$emit(PreviewEnums.SELECT_COMMENT,null);event.stopPropagation(),event.which===KEY_CODES.ENTER&&function(event){!function(event){return event.shiftKey||event.altKey||event.metaKey||event.ctrlKey}(event)&&(event.preventDefault(),submitMe(event));!function(event){return event.altKey||event.metaKey||event.ctrlKey}(event)||event.preventDefault()}(event)},$scope.commentMode=$scope.isNew()?COMMENT_MODE.NEW:COMMENT_MODE.PREVIEW,$scope.state=CommentsState,$scope.parentId&&($scope.parentComment=CommentsService.commentsMap[$scope.parentId]),$scope.commentMode){case COMMENT_MODE.NEW:!function(){$scope.isAssignmentActive=AssignHelper.isAssignmentActive(),$scope.avatarUrl=UsersService.me.avatar,$scope.userName=UsersService.me.name,$scope.inputPlaceholder=$scope.replyForm?INPUT_PLACEHOLDERS.REPLY:INPUT_PLACEHOLDERS.FIRST,$scope.newCommentClick=newCommentClick,$scope.onAssignOpen=onAssignOpen,$scope.isAssignmentActive&&($scope.assign.options=AssignHelper.getOptions(),$scope.assign.selected=$scope.parentComment?$scope.parentComment.assignedUserId:null);$scope.isNew()&&($scope.isGroupSelected()||!$scope.parentId)&&PreviewNavigation.isPanelVisible(PreviewNavigation.PREVIEW_PANELS.COMMENTS)&&focusMe(!0,300);!function(){var onSetAnonymousName=$rootScope.$on(PreviewEnums.SET_ANONYMOUS_NAME,function(event,name){name&&$scope.focusMe(!0,1)}),onCommentAssignedUserUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_ASSIGNED_USER_UPDATE,function(event,commentId,assignedUserId){$scope.parentId===commentId&&($scope.assign.selected=assignedUserId)});$scope.$on("$destroy",function(){onSetAnonymousName(),onCommentAssignedUserUpdate()})}()}();break;case COMMENT_MODE.PREVIEW:!function(){$scope.avatarUrl=$scope.comment.user.avatar,$scope.userName=$scope.comment.user.name,$scope.commentCreatedAt=moment($scope.comment.created_at).fromNow(),$scope.canEdit=CommentsService.canEdit($scope.comment),$scope.canEditContent=CommentsService.canEditContent($scope.comment),$scope.isGroupSelected()&&$scope.focusMe(!0);(function(){var onReplyingComment=$rootScope.$on(PreviewEnums.REPLYING_COMMENT,function(e,id,type,isReplying){$scope.comment._id!==id&&$scope.comment._parent_comment!==id||$scope.type!==type||($scope.isReplying=isReplying)}),onCommentContentUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_CONTENT_UPDATE,function(e,id,content){$scope.comment._id===id&&($scope.comment.comment=content,update($scope.comment))});$scope.$on("$destroy",function(){$scope.commentMode===COMMENT_MODE.EDIT&&exitEditMode(),onReplyingComment(),onCommentContentUpdate()})})(),CommentsService.getComment($scope.comment._id).then(function(comment){$scope.update(comment)})}()}var loveItTitle=$translate.instant("LOVE_IT"),dontLoveItTitle=$translate.instant("DONT_LOVE_IT");function isNew(){return void 0===$scope.comment}function isEditMode(){return $scope.commentMode===COMMENT_MODE.EDIT}function isEditDisabled(){return null!==$scope.state.groupInEditModeId}function isLoved(){return!$scope.isNew()&&CommentsService.isLoved($scope.comment)}function focusMe(value,delay){value&&($scope.isError=!1),0<delay?$timeout(function(){$scope.form.focused=value},delay):$scope.form.focused=value}function toggleMe(event){event.stopPropagation(),this.isCloudOpen=!this.isCloudOpen,this.eventRef||(this.eventRef=toggleMe.bind(this)),this.isCloudOpen?$window.addEventListener("click",this.eventRef):$window.removeEventListener("click",this.eventRef),$scope.$on("$destroy",function(){this.eventRef&&$window.removeEventListener("click",this.eventRef)}.bind(this))}function exitEditMode(){$scope.commentMode=COMMENT_MODE.PREVIEW,$scope.state.groupInEditModeId=null,$scope.resetFormData()}function submitMe(event){var mentions;event.stopPropagation(),$scope.working||(isNew()?validate()&&($rootScope.$emit(PreviewEnums.SUBMIT_COMMENT),UsersService.isAnonymous()||CommentsSettings.setLastUsedCommentType($scope.commentType),mentions=getMentionsEmails(),$scope.working=!0,CommentsService.addComment(function(){var properties={project_hash:ProjectsService.currentProjectHash,comment:$scope.form.text,position:{x:$scope.x,y:$scope.y},type:$scope.commentType,collaborators_all:UsersService.collaboratorEmails.length,notify:NotifyHelper.formatNotify($scope.notifications,getMentionsEmails())};$scope.isAssignmentActive&&!$scope.parentId&&(properties.assignedUserId=parseInt($scope.assign.selected,10));ProjectsService.isDocument()?$scope.parentId?(properties.id_document=CommentsService.commentsMap[$scope.parentId].id_document,properties._parent_comment=$scope.parentId):properties.id_document=DocumentsService.currentDocumentId:$scope.parentId?(properties.id_page=CommentsService.commentsMap[$scope.parentId].id_page,properties._parent_comment=$scope.parentId):properties.id_page=PagesService.currentPageId;UsersService.isAnonymous()&&(properties.user={name:UsersService.me.name});ApprovalsService.getIsActive()&&(properties.type=commentTypes.TEAM,properties.user={is_stakeholder:!0,name:UsersService.me.name,id:ApplicationConfiguration.stakeholder.id});return properties}()).then(function(comment){$scope.resetFormData(),$scope.parentId&&!_.isEmpty(mentions)&&emitNotificationsUpdate(),comment._parent_comment||(NotifyHelper.rememberSelection($scope.notifications),$rootScope.$emit(PreviewEnums.SELECT_COMMENT,comment._id,"canvas"))}).finally(function(){$scope.working=!1,$window.mixpanel.track("comment_added")})):function(){var mentions;validate()&&($rootScope.$emit(PreviewEnums.SUBMIT_COMMENT),mentions=getMentionsEmails(),$scope.working=!0,CommentsService.updateCommentContent($scope.comment._id,$scope.form.text,mentions).then(function(){_.isEmpty(mentions)||emitNotificationsUpdate(),exitEditMode()}).finally(function(){$scope.working=!1}))}())}function getMentionsEmails(){return _.map($scope.form.mentions,function(mention){return mention.email})}function emitNotificationsUpdate(){var commentId=$scope.parentId||$scope.comment._parent_comment||$scope.comment._id;$rootScope.$emit(PreviewEnums.ON_NOTIFICATIONS_UPDATE,commentId)}function update(comment){var text=CommentsHelper.encodeMentions(comment.comment);text=$filter("linky")(text,"_blank",{rel:"noopener noreferrer"}),text=CommentsHelper.decodeMentions(text),text=$filter("simpleMarkdown")(text),$scope.authorText=comment.user.name,$scope.previewText=EscapeHtmlService.decode(text)}function newCommentClick(event){event.stopPropagation()}function onAssignOpen(){$timeout(function(){$rootScope.$emit(PreviewEnums.ON_ASSIGNMENT_LIST_OPEN,$scope.assign.config.cloudId,$scope.type)})}function validate(){return $scope.isError=!$scope.form.text,!$scope.isError}}angular.module("comments").controller("PreviewCommentAbstractCtrl",PreviewCommentAbstractCtrl),PreviewCommentAbstractCtrl.$inject=["$rootScope","$scope","$state","$timeout","$filter","ProjectsService","PagesService","DocumentsService","CommentsService","CommentsSettings","UsersService","NotifyHelper","CommentsHelper","AssignHelper","CommentsState","$translate","ApprovalsService","PreviewNavigation","$window","EscapeHtmlService"]}(),function(){"use strict";function previewCommentAnonymousCtrl($rootScope,$scope){this.referer="".concat(ApplicationConfiguration.loginPageURL,"/?cb=").concat(encodeURIComponent(window.location.href))}angular.module("comments").directive("previewCommentAnonymous",function(){return{restrict:"E",scope:{},controller:previewCommentAnonymousCtrl,controllerAs:"vm",templateUrl:"/scripts/modules/comments/directives/preview-comment-anonymous/preview-comment-anonymous.directive.html"}}),previewCommentAnonymousCtrl.$inject=["$rootScope","$scope"]}(),function(){"use strict";function PreviewCommentContainerCtrl(_,$rootScope,$scope,$timeout,CommentsService,CommentsSettings,UsersService,NotificationsService,NotifyHelper,PreviewNavigation){var commentTypes,BACKSPACE=8;function activate(){var id,onReplyingComment,onAddComment,onDeleteComment,onSelectComment,onChangeNotifications,onNotificationsUpdate,onCommentTypeUpdate;commentTypes=CommentsSettings.commentTypes,$scope.groupId=(id=$scope.comment?$scope.comment._id:"new-comment","canvas-".concat(id)),$scope.initialCommentType=function(){if($scope.comment)return $scope.comment.type||commentTypes.PUBLIC;return CommentsSettings.commentTypesActive()?CommentsSettings.getLastUsedCommentType()||commentTypes.TEAM:commentTypes.PUBLIC}(),$scope.commentTypesActive=CommentsSettings.commentTypesActive(),$scope.selected=!isNew()&&CommentsService.selectedCommentId===$scope.comment._id,$scope.commentType.options=CommentsSettings.getCommentTypeOptions(),$scope.commentType.selected=isNew()?$scope.initialCommentType:$scope.comment.type,$scope.children=getCommentChildren(),updateNotify(),$scope.selected&&updateNotifications(),isNew()||(updateClasses(),onReplyingComment=$rootScope.$on(PreviewEnums.REPLYING_COMMENT,function(event,id,type,isReplying){$scope.comment._id===id&&type===$scope.type&&($scope.selected=isReplying,updateClasses())}),onAddComment=$rootScope.$on(PreviewEnums.ADD_COMMENT,function(event,id,parentId){$scope.comment._id===parentId&&(updateClasses(),updateCommentChildren())}),onDeleteComment=$rootScope.$on(PreviewEnums.DELETE_COMMENT,function(event,id){isChildren(id)&&updateCommentChildren()}),onSelectComment=$rootScope.$on(PreviewEnums.SELECT_COMMENT,function(event,id){PreviewNavigation.isPanelVisible(PreviewNavigation.PREVIEW_PANELS.COMMENTS)&&($scope.selected&&$scope.comment._id!==id&&($scope.selected=!1,updateClasses()),$scope.selected||$scope.comment._id!==id||($scope.selected=!0,updateClasses()))}),onChangeNotifications=$rootScope.$on(PreviewEnums.ON_CHANGE_NOTIFICATIONS,function(event,commentId){(isPanel()||isCommentIdMatch(commentId))&&updateNotify()}),onNotificationsUpdate=$rootScope.$on(PreviewEnums.ON_NOTIFICATIONS_UPDATE,function(event,commentId){isCommentIdMatch(commentId)&&updateNotifications()}),onCommentTypeUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_TYPE_UPDATE,updateCommentType),$scope.$on("$destroy",function(){onSelectComment(),onAddComment(),onDeleteComment(),onReplyingComment(),onCommentTypeUpdate(),onChangeNotifications(),onNotificationsUpdate(),onNotifyClose()}),isPanel()&&($scope.toggle=toggle,function(){var onDeleteComment=$rootScope.$on(PreviewEnums.DELETE_COMMENT,function(event,id){isChildren(id)&&updateCommentChildren()}),onKeyDown=$rootScope.$on("keyDown",function(event,keyEvent){$scope.selected&&keyEvent.which===BACKSPACE&&$scope.comment.user.id===UsersService.me.id_user&&$rootScope.$emit(PreviewEnums.DELETE_COMMENT,$scope.comment._id,!0)}),onResolveComment=$rootScope.$on(PreviewEnums.RESOLVE_COMMENT,function(event,id,value){$scope.comment._id===id&&!function(value){value?($scope.justResolved=!0,updateClasses(),$timeout(function(){$scope.justResolved=!1,updateClasses()},PreviewEnums.SHOW_RESOLVED_TIMEOUT)):updateClasses()}(value)}),onCommentTypeUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_TYPE_UPDATE,updateCommentType);$scope.$on("$destroy",function(){onResolveComment(),onDeleteComment(),onKeyDown(),onCommentTypeUpdate()})}()))}function updateCommentChildren(){$scope.children=getCommentChildren()}function getCommentChildren(){var childrenIds;return $scope.comment?(childrenIds=CommentsService.commentsTree[$scope.comment._id],_.map(childrenIds,function(childId){return CommentsService.commentsMap[childId]})):[]}function isNew(){return void 0===$scope.comment}function isPanel(){return"panel"===$scope.type}function toggle(){var selectedComment=$scope.selected?null:$scope.comment._id;$rootScope.$emit(PreviewEnums.SELECT_COMMENT,selectedComment,$scope.type)}function isChildren(id){return _.find($scope.children,function(child){return child._id===id})}function isCommentIdMatch(id){return!_.isEmpty($scope.comment)&&$scope.comment._id===id}function updateCommentType(event,id,type){$scope.comment._id===id&&($scope.commentType.selected=type)}function updateClasses(){$scope.isNew()||(setClass("selected",$scope.selected),setClass("resolved",$scope.comment.resolved.is),setClass("active",$scope.comment.resolved.is&&$scope.justResolved),setClass("archived",$scope.comment.resolved.is&&!$scope.justResolved),setClass("delete",$scope.deleted),setClass("hide",$scope.deleted))}function setClass(className,value){var index=$scope.classes.indexOf(className);value&&-1===index?$scope.classes.push(className):value||-1===index||$scope.classes.splice(index,1)}function onNotifyClose(){var addedEmails,removedEmails;CommentsService.selectedCommentShowNotificationPanel=!1,_.isEmpty($scope.comment)||(addedEmails=_.difference($scope.notify.selected,$scope.notify.initialSelected),removedEmails=_.difference($scope.notify.initialSelected,$scope.notify.selected),_.isEmpty(addedEmails)||(NotificationsService.addToNotifications($scope.comment._id,addedEmails),NotifyHelper.rememberSelection($scope.notify.selected)),_.isEmpty(removedEmails))||(NotificationsService.removeFromNotification($scope.comment._id,removedEmails),NotifyHelper.rememberSelection($scope.notify.selected))}function updateNotifications(){NotificationsService.getNotifications().then(updateNotify)}function updateNotify(){var commentId=_.isEmpty($scope.comment)?null:$scope.comment._id;$scope.notify.people=NotifyHelper.getPeople(),$scope.notify.initialSelected=NotifyHelper.getSelectedEmails(commentId),$scope.notify.selected=_.clone($scope.notify.initialSelected)}$scope.selected=!1,$scope.justResolved=!1,$scope.deleted=!1,$scope.classes=[],$scope.children=[],$scope.commentTypesActive=!1,$scope.commentType={options:[],selected:null},$scope.notify={people:[],initialSelected:[],selected:[]},$scope.isNew=isNew,$scope.isPanel=isPanel,$scope.isCanvas=function(){return"canvas"===$scope.type},$scope.isOpen=function(){return $scope.selected},$scope.isAnonymous=UsersService.isAnonymous(),$scope.isAnonymousWithoutName=function(){return UsersService.isAnonymous()&&!UsersService.isAnonymousNameSet()},$scope.hide=function(){$rootScope.$emit(PreviewEnums.SELECT_COMMENT,null)},$scope.toggle=_.noop,$scope.handleCommentTypeChange=function(){CommentsSettings.setLastUsedCommentType($scope.commentType.selected),$scope.isNew()?$rootScope.$emit(PreviewEnums.ON_COMMENT_TYPE_UPDATE,null,$scope.commentType.selected):CommentsService.updateCommentType($scope.comment._id,$scope.commentType.selected)},$scope.onNotifyOpen=function(){CommentsService.selectedCommentShowNotificationPanel=!0},$scope.onNotifyClose=onNotifyClose,activate(),$scope.$watch("comment",activate)}angular.module("comments").controller("PreviewCommentContainerCtrl",PreviewCommentContainerCtrl),PreviewCommentContainerCtrl.$inject=["_","$rootScope","$scope","$timeout","CommentsService","CommentsSettings","UsersService","NotificationsService","NotifyHelper","PreviewNavigation"]}(),function(){"use strict";angular.module("comments").directive("previewCommentContainer",["$rootScope","$document","DOMService",function($rootScope,$document,DOMService){var scrollX=0,scrollY=0;function getPageInfo(page){return{hasScrollbar:function(page){return("scroll"===page.style.overflow||"scroll"===page.style.overflowX||"scroll"===page.style.overflowY)&&(page.clientHeight<page.scrollHeight||page.clientWidth<page.scrollWidth)}(page),rect:page.getBoundingClientRect()}}return{restrict:"E",replace:!0,scope:{comment:"=",type:"@",x:"=",y:"="},controller:"PreviewCommentContainerCtrl",templateUrl:"/scripts/modules/comments/directives/preview-comment-container/preview-comment-container.directive.html",link:function(scope,element,attributes){var onDraggingComment,onPageScroll,onScrollEnd,overflowedPage,pageInfo,isRight=!0,dragging=!1,elementWidth=element[0].offsetWidth;element[0].offsetHeight;function reposition(){var x=scope.x,y=scope.y,commentWidth=elementWidth+PreviewEnums.COMMENT_FORM_DELTA_X-PreviewEnums.PIN_RADIUS,containerDimensions=DOMService.getContainerDimensions(),containerDimensions=Math.round(containerDimensions.width/2),pageMargin=Math.round(containerDimensions-pageInfo.rect.width/2),containerDimensions=pageMargin+x-scrollX+PreviewEnums.PIN_RADIUS<containerDimensions,pageMargin=(isRight!==(containerDimensions=commentWidth<=pageMargin?!containerDimensions:containerDimensions)&&((isRight=containerDimensions)?element.removeClass("left"):element.addClass("left")),isRight?x-scrollX+PreviewEnums.COMMENT_FORM_DELTA_X:x-scrollX-commentWidth+PreviewEnums.PIN_RADIUS);element.css({left:"".concat(pageMargin,"px"),top:"".concat(y+PreviewEnums.COMMENT_FORM_DELTA_Y+PreviewEnums.PIN_RADIUS-scrollY,"px"),display:dragging?"none":"block"})}function pointerEvents(value){value?element.removeClass("no-pointer-events"):element.addClass("no-pointer-events")}"canvas"===attributes.type&&(onDraggingComment=$rootScope.$on(PreviewEnums.DRAGGING_COMMENT,function(e,value){dragging=value,reposition()}),pageInfo=(overflowedPage=$document[0].querySelector("[overflowed-page]"))?(scrollX=overflowedPage.scrollLeft,scrollY=overflowedPage.scrollTop,onPageScroll=$rootScope.$on(PreviewEnums.ON_PAGE_SCROLL,function(e,x,y){scrollX===x&&scrollY===y?pointerEvents(!0):(scrollX=x,scrollY=y,onScrollEnd(),reposition())}),scope.$on("$destroy",function(){onPageScroll(),onDraggingComment()}),onScrollEnd=_.debounce(pointerEvents.bind(this,!0),100),element.on("wheel",function(e){var rect;(pageInfo=pageInfo||getPageInfo(overflowedPage)).hasScrollbar&&(e={x:e.clientX,y:e.clientY},rect=pageInfo.rect,e.x>=rect.left)&&e.x<=rect.right&&e.y>=rect.top&&e.y<=rect.bottom&&pointerEvents(!1)}),getPageInfo(overflowedPage)):(scope.$on("$destroy",function(){onDraggingComment()}),getPageInfo($document[0].querySelector(".canvas-content"))),scope.$watch("x",reposition),scope.$watch("y",reposition),reposition())}}}])}(),function(){"use strict";function PreviewCommentGroupCtrl($rootScope,$scope,CommentsFilter,CommentsService,UsersService){var MAX_CHILDREN=3;{var onCommentChildrenChange,onSearchComments;$scope.childrenToDisplay=[],$scope.filteredChildren=[],$scope.searchFor="",$scope.toggler={isVisible:!1,isOpen:!1,commentsCount:0},$scope.isNew=function(){return void 0===$scope.comment},$scope.isGroup=function(){return $scope.comment&&CommentsService.isGroup($scope.comment._id)},$scope.isPanel=function(){return"panel"===$scope.type},$scope.isCanvas=function(){return"canvas"===$scope.type},$scope.isAnonymous=UsersService.isAnonymous(),$scope.isAnonymousWithoutName=function(){return UsersService.isAnonymous()&&!UsersService.isAnonymousNameSet()},$scope.hasSearchFor=hasSearchFor,$scope.getCheckboxId=function(){return"".concat($scope.comment._id,"-").concat($scope.type)},$scope.onTogglerClick=function(event){event.stopPropagation(),$scope.toggler.isOpen=!$scope.toggler.isOpen,$scope.childrenToDisplay=getChildrenToDisplay()},$scope.commentCountInfo=function(){return"Show ".concat($scope.toggler.commentsCount," more")},$scope.searchFor=CommentsService.searchFor,$scope.filteredChildren=getFilteredChildren(),$scope.isNew()||(onCommentChildrenChange=$scope.$watch("commentChildren",function(newChildren,oldChildren){!$scope.toggler.isVisible&&newChildren.length>oldChildren.length&&($scope.toggler.isOpen=!0),updateChildren()}),onSearchComments=$rootScope.$on("searchComments",function(){$scope.searchFor=CommentsService.searchFor,updateChildren()}),$scope.$on("$destroy",function(){onCommentChildrenChange(),onSearchComments()}))}function hasSearchFor(child){return CommentsFilter.hasMatch({comment:child.comment,userId:child.user.id,userName:child.user.is_anonymous?child.user.name:null,assignedUserId:child.assignedUserId,searchString:$scope.searchFor})}function updateChildren(){$scope.filteredChildren=getFilteredChildren(),$scope.toggler.isVisible=$scope.filteredChildren.length>MAX_CHILDREN,$scope.toggler.commentsCount=$scope.toggler.isVisible?$scope.filteredChildren.length-1:0,$scope.childrenToDisplay=getChildrenToDisplay()}function getFilteredChildren(){return $scope.searchFor?_.filter($scope.commentChildren,hasSearchFor):$scope.commentChildren}function getChildrenToDisplay(){var comments;return!$scope.toggler.isVisible||$scope.toggler.isOpen?$scope.filteredChildren:((comments=[]).push(_.last($scope.filteredChildren)),comments)}}angular.module("comments").controller("PreviewCommentGroupCtrl",PreviewCommentGroupCtrl),PreviewCommentGroupCtrl.$inject=["$rootScope","$scope","CommentsFilter","CommentsService","UsersService"]}(),function(){"use strict";angular.module("comments").directive("previewCommentGroup",function(){return{restrict:"E",replace:!0,scope:{groupId:"=",comment:"=",commentType:"=",commentChildren:"=",notifications:"=",reply:"=",type:"@",x:"@",y:"@"},controller:"PreviewCommentGroupCtrl",templateUrl:"/scripts/modules/comments/directives/preview-comment-group/preview-comment-group.directive.html"}})}(),function(){"use strict";function anonymousNameCtrl($rootScope,$scope,UsersService){var vm=this,KEY_CODES=keysEnums.KEY_CODES,onSubmitComment=(vm.showError=!1,vm.isAnonymousNameSet=UsersService.isAnonymousNameSet(),vm.displayForm=!vm.isAnonymousNameSet,vm.displayBtn=!vm.isAnonymousNameSet,vm.anonymousName=getAnonymousName(),vm.changeName=function(event){event.preventDefault(),vm.displayForm=!0},vm.setName=setName,vm.onChange=function(){isValid(vm.anonymousName)&&(vm.showError=!1)},vm.onKeyDown=function(event){var keyCode=event.keyCode;event.stopPropagation(),keyCode===KEY_CODES.ENTER&&(event.preventDefault(),setName());keyCode===KEY_CODES.ESC&&vm.isAnonymousNameSet&&(event.preventDefault(),vm.displayForm=!1,vm.anonymousName=getAnonymousName())},$rootScope.$on(PreviewEnums.SUBMIT_COMMENT,setName));function getAnonymousName(){return vm.isAnonymousNameSet?UsersService.getAnonymousName():""}function isValid(name){return name&&name.match(/\w+/)}function setName(){var name=vm.anonymousName;isValid(name)?($rootScope.$emit(PreviewEnums.SET_ANONYMOUS_NAME,name.trim()),vm.displayForm=!vm.isAnonymousNameSet):vm.showError=!0}$scope.$on("$destroy",function(){onSubmitComment()})}angular.module("core").directive("anonymousName",function(){return{restrict:"E",scope:{x:"@",y:"@"},controller:anonymousNameCtrl,controllerAs:"vm",templateUrl:"/scripts/modules/core/directives/anonymousName/anonymousName.directive.html"}}),anonymousNameCtrl.$inject=["$rootScope","$scope","UsersService"]}(),angular.module("core").controller("AppViewPromoController",["$rootScope","$scope","localStorageService","deviceDetectorHelper",function($rootScope,$scope,localStorageService,deviceDetectorHelper){"use strict";$scope.isAndroid="Android"===deviceDetectorHelper.getOS().name,localStorageService.set(PreviewEnums.APP_VIEW_PROMO_VIEWED,1),$scope.close=function(){$rootScope.$emit(PreviewEnums.ON_APP_VIEW_PROMO_CLOSE)}}]),angular.module("core").directive("appViewPromo",[function(){"use strict";return{restrict:"E",replace:!0,scope:!0,controller:"AppViewPromoController",templateUrl:"/scripts/modules/core/directives/appViewPromo/appViewPromo.directive.html"}}]),function(){"use strict";function pvAvatarCtrl($scope){var vm=this;vm.url="",vm.initials="",vm.getUserAvatar=function(){return vm.url||"/img/transparent.png"},vm.imageError=!1,$scope.$watch("url",function(newUrl){var src;vm.url=newUrl,src=vm.url,new Promise(function(resolve,reject){var image=new Image;image.addEventListener("load",function(){resolve()}),image.addEventListener("error",function(){reject()}),image.src=src,image.complete&&resolve()}).then(null,function(){vm.imageError=!0,vm.url="/img/transparent.png"})}),$scope.$watch("name",function(newName){vm.initials=newName?function(name){name=name.split(" ");return(name[0][0]+(1<name.length?name[1][0]:"")).toUpperCase()}(newName):""})}angular.module("core").directive("pvAvatar",function(){return{restrict:"E",scope:{url:"=",name:"=",avatarClass:"@"},templateUrl:"/scripts/modules/core/directives/avatar/pvAvatar.html",controller:pvAvatarCtrl,controllerAs:"vm"}}),pvAvatarCtrl.$inject=["$scope"]}(),function(){"use strict";function pvBreakpointsCtrl(_,$scope,PagesService,LiveShareService,UsabilityTestService,Settings){var vm=this;function isActive(id){return id===PagesService.currentBreakpointId}function onLiveSessionStart(){vm.isLiveSession=!0,vm.isResponsive&&setResponsive(!1)}function onLiveSessionFinish(){vm.isLiveSession=!1}function onUTSessionStart(){vm.isUTSession=!0,vm.isResponsive&&setResponsive(!1),UsabilityTestService.isHostSession()&&lockBreakpoints()}function onUTSessionFinish(){vm.isUTSession=!1,vm.breakpoints=vm.allBreakpoints,vm.areBreakpointsVisible=1<vm.breakpoints.length}function onTesterJoined(){UsabilityTestService.isHostSession()||lockBreakpoints()}function setResponsive(value){vm.isResponsive=value,Settings.setResponsive(value)}function lockBreakpoints(){var availableBreakpoints=UsabilityTestService.getTestData().project.available_breakpoints;vm.allBreakpoints=_.clone(vm.breakpoints),vm.breakpoints=vm.breakpoints.filter(function(breakpoint){return!!_.find(availableBreakpoints,function(availableBreakPoint){return availableBreakPoint.id===breakpoint.id})}),vm.areBreakpointsVisible=1<vm.breakpoints.length}vm.breakpoints=[],vm.areBreakpointsVisible=!1,vm.isUTSession=!1,vm.isLiveSession=!1,vm.isOpen=!1,vm.isResponsive=Settings.isResponsive,vm.isActive=isActive,vm.onClick=function(id){PagesService.changePageBreakpoint(id)},vm.onCloudOpen=function(){vm.isOpen=!0},vm.onCloudClose=function(){vm.isOpen=!1},vm.onResponsive=function(){Settings.setResponsive(vm.isResponsive)},vm.getActiveBreakPoint=function(){return _.first(vm.breakpoints.filter(function(breakpoint){return isActive(breakpoint.id)}))},$scope.$watch("breakpoints",function(newBreakpoints){vm.breakpoints=newBreakpoints,vm.areBreakpointsVisible=vm.breakpoints&&1<vm.breakpoints.length,vm.isUTSession&&lockBreakpoints()}),ApplicationConfiguration.isDesignSystem||(LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.START,onLiveSessionStart),LiveShareService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,onLiveSessionFinish),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.TESTER_JOINED,onTesterJoined),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.START,onUTSessionStart),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.FINISH,onUTSessionFinish))}angular.module("core").directive("pvBreakpoints",function(){return{restrict:"E",scope:{breakpoints:"="},templateUrl:"/scripts/modules/core/directives/breakpoints/pvBreakpoints.html",controller:pvBreakpointsCtrl,controllerAs:"vm"}}),pvBreakpointsCtrl.$inject=["_","$scope","PagesService","LiveShareService","UsabilityTestService","Settings"]}(),function(){"use strict";angular.module("core").directive("cloud",cloud);var cloudPositions_TOP="top",cloudPositions_TOP_LEFT="topLeft",cloudPositions_TOP_RIGHT="topRight",cloudPositions_BOTTOM="bottom",cloudPositions_BOTTOM_LEFT="bottomLeft",cloudPositions_BOTTOM_RIGHT="bottomRight",cloudPositions_LEFT_BOTTOM="leftBottom",cloudPositions_LEFT_TOP="leftTop",cloudPositions_RIGHT_TOP="rightTop",cloudPositions_RIGHT_BOTTOM="rightBottom",triggerTypes_CLICK="click",triggerTypes_HOVER="hover",keyCodes_ESC=27,defaultOptions={availablePositions:[cloudPositions_BOTTOM,cloudPositions_BOTTOM_LEFT,cloudPositions_BOTTOM_RIGHT,cloudPositions_TOP,cloudPositions_TOP_LEFT,cloudPositions_TOP_RIGHT,cloudPositions_RIGHT_BOTTOM,cloudPositions_RIGHT_TOP,cloudPositions_LEFT_BOTTOM,cloudPositions_LEFT_TOP],offset:{top:{x:0,y:-5},topLeft:{x:0,y:-5},topRight:{x:0,y:-5},bottom:{x:0,y:5},bottomLeft:{x:0,y:5},bottomRight:{x:0,y:5},leftTop:{x:-5,y:0},leftBottom:{x:-5,y:0},rightTop:{x:5,y:0},rightBottom:{x:5,y:0}},defaultPosition:cloudPositions_BOTTOM,triggerType:triggerTypes_CLICK,autoClose:!1,autoFit:!1,focusFirstInput:!1,focusInput:null,closingDelay:300,onOpen:function(){},onClose:function(){}};function CloudComponent(_,scope,trigger,cloud,options){this._=_,this.scope=scope,this.trigger=trigger,this.cloud=cloud,this.options=options,this.isOpen=!1,this.CLASSES={VISIBLE:"visible"},this.onScroll=this.onScroll.bind(this),this.onResize=this.onResize.bind(this),this.onKeydown=this.onKeydown.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onCloudClick=this.onCloudClick.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleDocumentMouseDown=this.handleDocumentMouseDown.bind(this)}function cloud(_){return{restrict:"E",scope:{onOpen:"=",onClose:"=",availablePositions:"=",offset:"=",defaultPosition:"@",triggerType:"@",autoClose:"@",autoFit:"@",focusFirstInput:"@",focusInput:"@",closingDelay:"@"},templateUrl:"/scripts/modules/core/directives/cloud/cloud.html",transclude:!0,link:function(scope,element){var trigger=element[0].querySelector("[data-trigger]"),cloud=element[0].querySelector("[data-cloud]"),scopeOptions=function(){var options={};return _.forEach(defaultOptions,function(option,key){"offset"===key&&scope[key]?options[key]=_.extend({},defaultOptions[key],scope[key]):scope[key]&&(options[key]=scope[key])}),options}(),scopeOptions=_.extend({},defaultOptions,scopeOptions);if(!trigger)throw Error("Trigger is not defined");if(!cloud)throw Error("Cloud is not defined");var cloudComponent=new CloudComponent(_,scope,trigger,cloud,scopeOptions);cloudComponent.init(),element.on("$destroy",function(){cloudComponent.removeCloudFromDOM(),cloudComponent.removeGlobalEventListeners()})}}}CloudComponent.prototype.init=function(){this.trigger.addEventListener("click",this.onTriggerClick),this.trigger.addEventListener("mouseenter",this.onMouseEnter),this.trigger.addEventListener("mouseleave",this.onMouseLeave),this.cloud.addEventListener("click",this.onCloudClick),this.cloud.addEventListener("mouseenter",this.onMouseEnter),this.cloud.addEventListener("mouseleave",this.onMouseLeave),this.removeCloudFromDOM()},CloudComponent.prototype.addCloudClasses=function(classNames){!this._.isArray(classNames)||this._.isArray(classNames)&&!classNames.length||this.cloud.classList.add.apply(this.cloud.classList,classNames)},CloudComponent.prototype.removeCloudClasses=function(classNames){!this._.isArray(classNames)||this._.isArray(classNames)&&!classNames.length||this.cloud.classList.remove.apply(this.cloud.classList,classNames)},CloudComponent.prototype.setCloudStyle=function(styles){var cssText;styles&&(cssText="",this._.forEach(styles,function(style,key){style&&(cssText+="".concat(key,":").concat(style,";"))}),this.cloud.style.cssText=cssText)},CloudComponent.prototype.appendCloudToBody=function(){document.body.appendChild(this.cloud)},CloudComponent.prototype.removeCloudFromDOM=function(){this.cloud&&this.cloud.parentNode&&this.cloud.parentNode.removeChild(this.cloud)},CloudComponent.prototype.getScrollX=function(){return window.scrollX||window.pageXOffset},CloudComponent.prototype.getScrollY=function(){return window.scrollY||window.pageYOffset},CloudComponent.prototype.setBoundingRects=function(){this.triggerBoundingRect=this.trigger.getBoundingClientRect(),this.cloudBoundingRect=this.cloud.getBoundingClientRect()},CloudComponent.prototype.setCloudClassNamesByPosition=function(position){switch(position){case cloudPositions_BOTTOM:this.classNames=["arrow-top"];break;case cloudPositions_BOTTOM_LEFT:this.classNames=["arrow-top-right"];break;case cloudPositions_BOTTOM_RIGHT:this.classNames=["arrow-top-left"];break;case cloudPositions_TOP:this.classNames=["arrow-bottom"];break;case cloudPositions_TOP_LEFT:this.classNames=["arrow-bottom-right"];break;case cloudPositions_TOP_RIGHT:this.classNames=["arrow-bottom-left"];break;case cloudPositions_LEFT_TOP:this.classNames=["arrow-right-bottom"];break;case cloudPositions_LEFT_BOTTOM:this.classNames=["arrow-right-top"];break;case cloudPositions_RIGHT_TOP:this.classNames=["arrow-left-bottom"];break;case cloudPositions_RIGHT_BOTTOM:this.classNames=["arrow-left-top"]}},CloudComponent.prototype.getOffsetFromOptions=function(position){return this.options.offset&&this.options.offset[position]?this.options.offset[position]:{x:0,y:0}},CloudComponent.prototype.setRightTopPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_RIGHT_TOP).x,offsetY=this.getOffsetFromOptions(cloudPositions_RIGHT_TOP).y;this.position={name:cloudPositions_RIGHT_TOP,x:this.getScrollX()+this.triggerBoundingRect.right+offsetX,y:this.getScrollY()+this.triggerBoundingRect.bottom-this.cloudBoundingRect.height+offsetY}},CloudComponent.prototype.setRightBottomPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_RIGHT_BOTTOM).x,offsetY=this.getOffsetFromOptions(cloudPositions_RIGHT_BOTTOM).y;this.position={name:cloudPositions_RIGHT_BOTTOM,x:this.getScrollX()+this.triggerBoundingRect.right+offsetX,y:this.getScrollY()+this.triggerBoundingRect.top+offsetY}},CloudComponent.prototype.setLeftTopPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_LEFT_TOP).x,offsetY=this.getOffsetFromOptions(cloudPositions_LEFT_TOP).y;this.position={name:cloudPositions_LEFT_TOP,x:this.getScrollX()+this.triggerBoundingRect.left-this.cloudBoundingRect.width+offsetX,y:this.getScrollY()+this.triggerBoundingRect.bottom-this.cloudBoundingRect.height+offsetY}},CloudComponent.prototype.setLeftBottomPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_LEFT_BOTTOM).x,offsetY=this.getOffsetFromOptions(cloudPositions_LEFT_BOTTOM).y;this.position={name:cloudPositions_LEFT_BOTTOM,x:this.getScrollX()+this.triggerBoundingRect.left-this.cloudBoundingRect.width+offsetX,y:this.getScrollY()+this.triggerBoundingRect.top+offsetY}},CloudComponent.prototype.setTopPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_TOP).x,offsetY=this.getOffsetFromOptions(cloudPositions_TOP).y,height=this._.min([this.cloudMaxHeight,this.cloudBoundingRect.height]);this.position={name:cloudPositions_TOP,x:this.getScrollX()+this.triggerBoundingRect.left+this.triggerBoundingRect.width/2-this.cloudBoundingRect.width/2+offsetX,y:this.getScrollY()+this.triggerBoundingRect.top-height+offsetY}},CloudComponent.prototype.setTopLeftPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_TOP_LEFT).x,offsetY=this.getOffsetFromOptions(cloudPositions_TOP_LEFT).y,height=this._.min([this.cloudMaxHeight,this.cloudBoundingRect.height]);this.position={name:cloudPositions_TOP_LEFT,x:this.getScrollX()+this.triggerBoundingRect.right-this.cloudBoundingRect.width+offsetX,y:this.getScrollY()+this.triggerBoundingRect.top-height+offsetY}},CloudComponent.prototype.setTopRightPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_TOP_RIGHT).x,offsetY=this.getOffsetFromOptions(cloudPositions_TOP_RIGHT).y,height=this._.min([this.cloudMaxHeight,this.cloudBoundingRect.height]);this.position={name:cloudPositions_TOP_RIGHT,x:this.getScrollX()+this.triggerBoundingRect.left+offsetX,y:this.getScrollY()+this.triggerBoundingRect.top-height+offsetY}},CloudComponent.prototype.setBottomPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_BOTTOM).x,offsetY=this.getOffsetFromOptions(cloudPositions_BOTTOM).y;this.position={name:cloudPositions_BOTTOM,x:this.getScrollX()+this.triggerBoundingRect.left+this.triggerBoundingRect.width/2-this.cloudBoundingRect.width/2+offsetX,y:this.getScrollY()+this.triggerBoundingRect.bottom+offsetY}},CloudComponent.prototype.setBottomLeftPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_BOTTOM_LEFT).x,offsetY=this.getOffsetFromOptions(cloudPositions_BOTTOM_LEFT).y;this.position={name:cloudPositions_BOTTOM_LEFT,x:this.getScrollX()+this.triggerBoundingRect.right-this.cloudBoundingRect.width+offsetX,y:this.getScrollY()+this.triggerBoundingRect.bottom+offsetY}},CloudComponent.prototype.setBottomRightPosition=function(){var offsetX=this.getOffsetFromOptions(cloudPositions_BOTTOM_RIGHT).x,offsetY=this.getOffsetFromOptions(cloudPositions_BOTTOM_RIGHT).y;this.position={name:cloudPositions_BOTTOM_RIGHT,x:this.getScrollX()+this.triggerBoundingRect.left+offsetX,y:this.getScrollY()+this.triggerBoundingRect.bottom+offsetY}},CloudComponent.prototype.getDefaultPosition=function(){return this.options.defaultPosition||cloudPositions_BOTTOM},CloudComponent.prototype.setProperPosition=function(){var defaultPosition=this.getDefaultPosition();if(this.doesCloudFitInWindow(defaultPosition))return!0;for(var positions=this.options.availablePositions.filter(function(position){return position!==defaultPosition}),i=0;i<positions.length;i++)if(this.doesCloudFitInWindow(positions[i]))return!0;this.setSelectedPosition(defaultPosition)},CloudComponent.prototype.setSelectedPosition=function(position){switch(position=position||cloudPositions_BOTTOM){case cloudPositions_BOTTOM:this.setBottomPosition();break;case cloudPositions_BOTTOM_LEFT:this.setBottomLeftPosition();break;case cloudPositions_BOTTOM_RIGHT:this.setBottomRightPosition();break;case cloudPositions_TOP:this.setTopPosition();break;case cloudPositions_TOP_LEFT:this.setTopLeftPosition();break;case cloudPositions_TOP_RIGHT:this.setTopRightPosition();break;case cloudPositions_LEFT_TOP:this.setLeftTopPosition();break;case cloudPositions_LEFT_BOTTOM:this.setLeftBottomPosition();break;case cloudPositions_RIGHT_TOP:this.setRightTopPosition();break;case cloudPositions_RIGHT_BOTTOM:this.setRightBottomPosition()}},CloudComponent.prototype.doesCloudFitInWindow=function(position){position=position||cloudPositions_BOTTOM,this.setBoundingRects();var windowWidth=window.innerWidth,windowHeight=window.innerHeight;return this.setSelectedPosition(position),0<=this.position.y&&this.position.y+this.cloudBoundingRect.height<=windowHeight&&0<this.position.x&&this.position.x+this.cloudBoundingRect.width<=windowWidth},CloudComponent.prototype.isElementInViewport=function(el,container){el=el.getBoundingClientRect(),container=this._.isFunction(container.getBoundingClientRect)?container.getBoundingClientRect():{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth};return el.top>=container.top&&el.left>=container.left&&el.bottom<=container.bottom&&el.right<=container.right},CloudComponent.prototype.onScroll=function(e){e.target.contains(this.trigger)&&this.isOpen&&(this.isElementInViewport(this.trigger,e.target)?this.refreshCloudPosition():this.closeCloud())},CloudComponent.prototype.onResize=function(){this.isOpen&&this.refreshCloudPosition()},CloudComponent.prototype.onKeydown=function(e){e.keyCode===keyCodes_ESC&&this.closeCloud()},CloudComponent.prototype.addGlobalEventListeners=function(){this.getTriggerType()===triggerTypes_CLICK&&(document.addEventListener("mousedown",this.handleDocumentMouseDown,!0),document.addEventListener("click",this.handleDocumentClick,!0)),window.addEventListener("scroll",this.onScroll,!0),window.addEventListener("resize",this.onResize,!0),window.addEventListener("keydown",this.onKeydown,!0)},CloudComponent.prototype.removeGlobalEventListeners=function(){this.getTriggerType()===triggerTypes_CLICK&&(document.removeEventListener("mousedown",this.handleDocumentMouseDown,!0),document.removeEventListener("click",this.handleDocumentClick,!0)),window.removeEventListener("scroll",this.onScroll,!0),window.removeEventListener("resize",this.onResize,!0),window.removeEventListener("keydown",this.onKeydown,!0)},CloudComponent.prototype.adjustCloudMaxHeightAndPosition=function(){var heightToBottom,heightToTop,selectedPosition,defaultPosition=this.getDefaultPosition();if(this.setBoundingRects(),heightToBottom=window.innerHeight-this.triggerBoundingRect.bottom-20,(heightToTop=this.triggerBoundingRect.top-20)<=heightToBottom)if(heightToTop>this.cloud.offsetHeight)selectedPosition=defaultPosition,this.cloudMaxHeight=heightToTop;else switch(this.cloudMaxHeight=heightToBottom,defaultPosition){case cloudPositions_TOP:selectedPosition=cloudPositions_BOTTOM;break;case cloudPositions_TOP_LEFT:selectedPosition=cloudPositions_BOTTOM_LEFT;break;case cloudPositions_TOP_RIGHT:selectedPosition=cloudPositions_BOTTOM_RIGHT;break;default:selectedPosition=defaultPosition}else if(heightToBottom>this.cloud.offsetHeight)selectedPosition=defaultPosition,this.cloudMaxHeight=heightToBottom;else switch(this.cloudMaxHeight=heightToTop,defaultPosition){case cloudPositions_BOTTOM:selectedPosition=cloudPositions_TOP;break;case cloudPositions_BOTTOM_LEFT:selectedPosition=cloudPositions_TOP_LEFT;break;case cloudPositions_BOTTOM_RIGHT:selectedPosition=cloudPositions_TOP_RIGHT;break;default:selectedPosition=defaultPosition}this.setSelectedPosition(selectedPosition),this.removeCloudClasses(this.classNames),this.setCloudClassNamesByPosition(this.position.name)},CloudComponent.prototype.openCloud=function(){if(this.isOpen)return!1;this.isOpen=!0,this.onCloudOpen()},CloudComponent.prototype.getTriggerType=function(){return this.options.triggerType||triggerTypes_CLICK},CloudComponent.prototype.focusFirstInput=function(){var _this46=this;setTimeout(function(){var input=_this46.cloud.querySelector("input[type=text]");input&&_this46._.isFunction(input.focus)&&input.focus()})},CloudComponent.prototype.focusInput=function(){var _this47=this;setTimeout(function(){var input=_this47.cloud.querySelector(_this47.options.focusInput);input&&_this47._.isFunction(input.focus)&&input.focus()})},CloudComponent.prototype.onCloudOpen=function(){var _this48=this;this.appendCloudToBody(),setTimeout(function(){_this48.setCloudStyle({visibility:"hidden",display:"block"}),setTimeout(function(){_this48.setCloudPositionStyle(),_this48.options.focusFirstInput?_this48.focusFirstInput():_this48.options.focusInput&&_this48.focusInput(),_this48.addGlobalEventListeners()})}),this._.isFunction(this.options.onOpen)&&this.options.onOpen(this.trigger,this.cloud)},CloudComponent.prototype.closeCloud=function(){if(!this.isOpen)return!1;this.removeCloudFromDOM(),this.isOpen=!1,this.onCloudClose()},CloudComponent.prototype.onCloudClose=function(){this.removeGlobalEventListeners(),this.removeCloudClasses([this.CLASSES.VISIBLE]),this._.isFunction(this.options.onClose)&&this.options.onClose(this.trigger,this.cloud)},CloudComponent.prototype.setCloudPositionStyle=function(){this.options.autoFit?this.adjustCloudMaxHeightAndPosition():(this.setBoundingRects(),this.setProperPosition(),this.removeCloudClasses(this.classNames),this.setCloudClassNamesByPosition(this.position.name)),this.setCloudStyle({"z-index":2147483647,transform:"inherit",left:"".concat(this.position.x,"px"),"max-height":this.cloudMaxHeight?"".concat(this.cloudMaxHeight,"px"):null,top:"".concat(this.position.y,"px")}),this.addCloudClasses(this.classNames.concat(this.CLASSES.VISIBLE))},CloudComponent.prototype.refreshCloudPosition=function(){this.setCloudPositionStyle()},CloudComponent.prototype.getCloudElement=function(){return this.cloud},CloudComponent.prototype.toggleCloud=function(){this.isOpen?this.closeCloud():this.openCloud()},CloudComponent.prototype.handleDocumentClick=function(e){this.preventClick||!this.options.autoClose&&this.cloud.contains(e.target)||this.options.autoClose&&this.cloud.contains(e.target)&&"A"!==e.target.tagName||this.closeCloud()},CloudComponent.prototype.handleDocumentMouseDown=function(e){this.preventClick=!1,(!this.options.autoClose&&this.cloud.contains(e.target)||this.options.autoClose&&this.cloud.contains(e.target)&&"A"!==e.target.tagName)&&(this.preventClick=!0)},CloudComponent.prototype.onCloudClick=function(e){this.getTriggerType()===triggerTypes_HOVER&&this.options.autoClose&&this.closeCloud()},CloudComponent.prototype.onTriggerClick=function(e){if(e.preventDefault(),this.getTriggerType()!==triggerTypes_CLICK)return this.options.autoClose&&"A"===e.target.tagName&&this.closeCloud(),!1;this.toggleCloud()},CloudComponent.prototype.onMouseEnter=function(e){var _this49=this;if(e.preventDefault(),this.getTriggerType()!==triggerTypes_HOVER)return!1;clearTimeout(this.closingCloudTimeout),this.isMouseLeaving=!1,this.openingCloudTimeout=setTimeout(function(){_this49.openCloud()},50)},CloudComponent.prototype.onMouseLeave=function(e){var _this50=this;if(e.preventDefault(),this.getTriggerType()!==triggerTypes_HOVER||this.isMouseLeaving)return!1;clearTimeout(this.openingCloudTimeout),this.closingCloudTimeout=setTimeout(function(){_this50.isMouseLeaving=!1,_this50.closeCloud()},this.options.closingDelay),this.isMouseLeaving=!0},cloud.$inject=["_"]}(),function(){"use strict";function codeEditor(_,CodeMirror){return{restrict:"E",replace:!0,scope:{options:"=",value:"=",mode:"="},templateUrl:"/scripts/modules/core/directives/codeEditor/codeMirror.html",link:function(scope,element){CodeMirror.mimeModes["text/css"].propertyKeywords["backdrop-filter"]=!0;var codeMirror=CodeMirror.fromTextArea(element[0],_.extend({},{mode:"sass",lineNumbers:!0,lineWrapping:!0,readOnly:!0,value:"",theme:"uxpin-readonly",viewportMargin:100},scope.options));scope.$watch(function(){return scope.options?scope.options.value:""},function(val){codeMirror.setValue(val||""),window.requestAnimationFrame(function(){1<codeMirror.doc.size?(codeMirror.setOption("lineNumbers",!0),codeMirror.setOption("gutters",[])):(codeMirror.setOption("lineNumbers",!1),codeMirror.setOption("gutters",["fake-gutter"]))})}),scope.$watch(function(){return scope.value},function(val){val&&codeMirror.setValue(val||"")}),scope.$watch(function(){return scope.mode},function(val){val&&codeMirror.setOption("mode",val)})}}}angular.module("core").directive("codeEditor",codeEditor),codeEditor.$inject=["_","CodeMirror"]}(),function(){"use strict";function pvEmailsParser(ValidationHelper){return{restrict:"A",require:"ngModel",link:function(scope,el,attrs,ngModelCtrl){ngModelCtrl.$parsers.push(function(value){var value=value.split(attrs.pvEmailsParser),emails=[];return _.each(value,function(item){item=item.trim();ValidationHelper.isEmail(item)&&emails.push(item)}),emails}),ngModelCtrl.$formatters.push(function(value){var emails=[];return _.isArray(value)?(_.each(value,function(item){item=item.trim();ValidationHelper.isEmail(item)&&emails.push(item)}),emails.join(",")):""})}}}angular.module("core").directive("pvEmailsParser",pvEmailsParser),pvEmailsParser.$inject=["ValidationHelper"]}(),function(){"use strict";angular.module("core").directive("pvEnter",function(){return{restrict:"A",link:function(scope,el,attrs){el.on("keydown keypress",function(event){13===event.which&&(event.preventDefault(),scope.$apply(function(){scope.$eval(attrs.pvEnter)}))})}}})}(),function(){"use strict";function pvFocusMe($parse,$timeout){return{restrict:"A",link:function(scope,el,attrs){var model=$parse(attrs.pvFocusMe);scope.$watch(model,function(value){value&&$timeout(function(){el[0].focus()},0)}),el.on("blur",function(){scope.$apply(function(){model.assign(scope,!1)})})}}}angular.module("core").directive("pvFocusMe",pvFocusMe),pvFocusMe.$inject=["$parse","$timeout"]}(),function(){"use strict";angular.module("core").directive("pvToggler",function(){return{restrict:"E",require:["ngModel","?ngChange"],scope:{title:"@",trueLabel:"@",falseLabel:"@"},link:function(scope,el,attrs,controllers){var ngModelCtrl=controllers[0],label=el.find("a");function renderer(){var viewValue=ngModelCtrl.$viewValue;label.text(viewValue)}function formatter(value){return value?attrs.trueLabel:attrs.falseLabel}function parser(newValue){return newValue===attrs.trueLabel}function handleClick(event){event.preventDefault(),event.stopPropagation(),scope.$apply(function(){var value=ngModelCtrl.$viewValue===attrs.trueLabel?attrs.falseLabel:attrs.trueLabel;ngModelCtrl.$setViewValue(value),label.text(value)})}ngModelCtrl.$render=renderer,ngModelCtrl.$formatters.push(formatter),ngModelCtrl.$parsers.push(parser),el.on("click",handleClick)},templateUrl:"/scripts/modules/core/directives/controls/pvToggler.html"}})}(),function(){"use strict";function imageDownloader($timeout){return{restrict:"E",scope:{image:"="},templateUrl:"/scripts/modules/core/directives/imageDownloader/imageDownloader.html",link:function(scope,element){var form=element.find("form");scope.$watchCollection(function(){return scope.image},function(value){value&&(scope.name=value.name,scope.type=value.type,scope.content=value.content,$timeout(function(){form[0].submit()}))})}}}angular.module("core").directive("imageDownloader",imageDownloader),imageDownloader.$inject=["$timeout"]}(),function(){"use strict";function inputMinMaxCtrl(_,$scope,$element){var vm=this,storedValue=null,KEYS_CODES={ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,ARROW_DOWN:40,ENTER:13,ESCAPE:27,BACKSPACE:8};function handleBlur(event){(!parseInt(vm.model)||parseInt(vm.model)<vm.minValue)&&(vm.model=vm.minValue),parseInt(vm.model)>vm.maxValue&&(vm.model=vm.maxValue),_.isFunction(vm.onBlur)&&vm.onBlur(event),0}vm.incrementValue=vm.incrementValue||1,vm.shiftIncrementValue=vm.shiftIncrementValue||10,vm.handleFocus=function(event){event.target.select(),storedValue=vm.model,_.isFunction(vm.onFocus)&&vm.onFocus(event);0},vm.handleBlur=handleBlur,vm.handleKeyDown=function(event){var charCode=event.keyCode,charCode=String.fromCharCode(charCode),availableKeys=_.values(KEYS_CODES);vm.disabled||!/\d/.test(charCode)&&-1===availableKeys.indexOf(event.keyCode)?event.preventDefault():(function(event){var direction,oldValue;[KEYS_CODES.ARROW_UP,KEYS_CODES.ARROW_DOWN].indexOf(event.keyCode)<0||(direction=event.keyCode===KEYS_CODES.ARROW_UP?1:-1,oldValue=vm.model||0,vm.values.length?vm.model=function(values,value,direction){return(0<direction?function(values,value){for(var i=0;i<values.length;i++)if(value<values[i])return values[i];return values[values.length-1]}:function(values,value){for(var i=values.length-1;0<i;i--)if(value>values[i])return values[i];return values[0]})(values,value)}(vm.values,oldValue,direction):vm.model=oldValue+direction*(event.shiftKey?vm.shiftIncrementValue:vm.incrementValue),event.preventDefault(),_.isFunction(vm.onChangeValueKeyAction)&&vm.onChangeValueKeyAction(event))}(event),function(event){switch(event.keyCode){case KEYS_CODES.ENTER:handleBlur();break;case KEYS_CODES.ESCAPE:storedValue!==vm.model&&(vm.model=storedValue),handleBlur()}}(event))},vm.handleChange=function(event){_.isFunction(vm.onChange)&&vm.onChange(event)}}angular.module("core").directive("inputMinMax",function(){return{restrict:"E",replace:!0,scope:{model:"=?",values:"=?",onFocus:"=?",onBlur:"=?",onChange:"=?",onChangeValueKeyAction:"=?",disabled:"=?",minValue:"=?",maxValue:"=?",incrementValue:"@?",shiftIncrementValue:"@?"},templateUrl:"/scripts/modules/core/directives/input/inputMinMax.view.html",controller:inputMinMaxCtrl,controllerAs:"vm",bindToController:!0}}),inputMinMaxCtrl.$inject=["_","$scope","$element"]}(),function(){"use strict";function layersListCtrl($scope,Engine,$rootScope,ElementClassService,$window,$timeout){var vm=this,currentPage=Engine.getPage(),onPageLoadOff=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,function(){currentPage=currentPage||Engine.getPage();addPickerEventListeners()}),onChangePageOff=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(){vm.selectedElement=null,vm.hoveredElement=null,removePickerEventListeners(),currentPage=Engine.getPage(),addPickerEventListeners()}),arePickerEventListenersAdded=!1;function isHidden(node){return"hidden"===node.raw.stateIa}function addPickerEventListeners(){currentPage&&!arePickerEventListenersAdded&&(currentPage.on($window.uxpinEngine.Page.Events.ELEMENT_PICKED,onPick),currentPage.on($window.uxpinEngine.Page.Events.ELEMENT_HOVERED,onHover),arePickerEventListenersAdded=!0)}function removePickerEventListeners(){currentPage&&arePickerEventListenersAdded&&(currentPage.off($window.uxpinEngine.Page.Events.ELEMENT_PICKED,onPick),currentPage.off($window.uxpinEngine.Page.Events.ELEMENT_HOVERED,onHover),arePickerEventListenersAdded=!1)}function onPick(data){if(data&&data.element){vm.selectedElement=data.element.id;for(var parent=data.element.parent;parent&&(parent.isGroup()||parent.isComponent())&&!parent.isCanvas();)vm.expandStatus[parent.id]=!0,parent=parent.parent}else vm.selectedElement=null}function onHover(data){data&&data.element?vm.hoveredElement=data.element.id:vm.hoveredElement=null}vm.selectedElement=null,vm.hoveredElement=null,vm.onMouseEnter=function(e,node){e.stopPropagation(),vm.hoveredElement!==node.id&&($rootScope.$emit(PreviewEnums.LAYER_HOVERED,node.raw),vm.hoveredElement=node.id)},vm.onMouseLeave=function(e){e.stopPropagation(),null!==vm.hoveredElement&&($rootScope.$emit(PreviewEnums.LAYER_HOVERED,null),vm.hoveredElement=null)},vm.select=function(e,node){e.stopPropagation(),vm.selectedElement===node.id?(Engine.deselectAllElements(null),$rootScope.$emit(PreviewEnums.LAYER_SELECTED,null),vm.selectedElement=null):(Engine.selectElement(node.raw),vm.selectedElement=node.id,$rootScope.$emit(PreviewEnums.LAYER_SELECTED,node.raw))},vm.isSelected=function(id){return id===vm.selectedElement},vm.toggleVisibility=function(e,node){e.preventDefault(),e.stopPropagation(),isHidden(node)?node.raw.stateIa="visible":node.raw.stateIa="hidden";$rootScope.$emit(PreviewEnums.ON_CHANGE_ELEMENT_VISIBILITY,node.raw)},vm.isHidden=isHidden,vm.toggleExpandStatus=function(e,id){e.stopPropagation(),vm.expandStatus[id]=!vm.expandStatus[id]},vm.getListItemClassByType=ElementClassService.getListItemClassByType,vm.expandStatus={},$scope.$on("$destroy",function(){onPageLoadOff(),onChangePageOff(),removePickerEventListeners()}),addPickerEventListeners(),ApplicationConfiguration.userData.is_trial&&["Dashboard Example","AntD Component Patterns","MUI Component Patterns","Store Example","Blog Example","Sign-in Form Example","React Bootstrap Component Patterns","Pricing Page Example","Trial Kit"].some(function(kitName){return ApplicationConfiguration.project.name.includes(kitName)})&&$timeout(function(){vm.select({stopPropagation:function(){}},vm.collection[0])},200)}angular.module("core").directive("layersList",function(){return{restrict:"E",replace:!0,scope:{collection:"<",nodeMap:"<"},templateUrl:"/scripts/modules/core/directives/layers/layersList.view.html",controller:layersListCtrl,controllerAs:"vm",bindToController:!0}}),layersListCtrl.$inject=["$scope","Engine","$rootScope","ElementClassService","$window","$timeout"]}(),angular.module("core").controller("MediaAccessTipController",["$rootScope","$scope",function($rootScope,$scope){"use strict";$scope.isTipVisible=!1,$scope.isDenied=!1;function showTip(){$scope.isTipVisible=!0}function hideTip(){$scope.isTipVisible=!1}$scope.onClickClose=function(){hideTip()};var onMediaAccess=$rootScope.$on(PreviewEnums.MEDIA_ACCESS,function(e,value){switch(value){case PreviewEnums.MEDIA_ACCESS_TYPE.REQUEST:showTip();break;case PreviewEnums.MEDIA_ACCESS_TYPE.ALLOWED:case PreviewEnums.MEDIA_ACCESS_TYPE.HIDE:hideTip();break;case PreviewEnums.MEDIA_ACCESS_TYPE.DENIED:$scope.isDenied=!0,$scope.isTipVisible||showTip()}});$scope.$on("$destroy",function(){onMediaAccess()})}]),angular.module("core").directive("mediaAccessTip",[function(){"use strict";return{restrict:"E",replace:!0,scope:!0,controller:"MediaAccessTipController",templateUrl:"/scripts/modules/core/directives/mediaAccessTip/mediaAccessTip.directive.html"}}]),function(){"use strict";function pvCollaboratorMention(UsersService){return{restrict:"A",require:"pvMention",scope:{mentions:"=?"},link:function(scope,el,attrs,pvMentionCtrl){pvMentionCtrl.optionsCache=_.toArray(UsersService.collaboratorsMap),pvMentionCtrl.label=label,pvMentionCtrl.highlight=function(option){return'<span class="mention">'.concat(label(option),"</span>")},pvMentionCtrl.filter=function(match,options){var lowerCaseMatch=match[1].toLowerCase();return _.filter(options,function(option){return _.includes(option.name.toLowerCase(),lowerCaseMatch)})},pvMentionCtrl.encode=function(option){return"[".concat(option.name,"](mailto:").concat(option.email,")")},pvMentionCtrl.decode=function(value){value=value.split("](");return{name:value[0].replace("[",""),email:value[1].replace(/(\)|mailto:)/gi,"")}},scope.mentions&&(pvMentionCtrl.onMentionsUpdate=function(mentions){scope.mentions=mentions});function label(option){return"@".concat(option.name)}}}}angular.module("core").directive("pvCollaboratorMention",pvCollaboratorMention),pvCollaboratorMention.$inject=["UsersService"]}(),function(){"use strict";function pvMentionCtrl($scope,$element,$attrs,$document,pvMentionsUtils,EscapeHtmlService){var ngModel,PATTERN=/(?:\s+|^)@((\w|@|\.)+(?: \w+)?)$/,DECODE_PATTERN=/\[(.*?)\]\(mailto:(.*?)\)/gi,CARET_CLASS="caret",MARGIN=20,KEY_CODES=keysEnums.KEY_CODES,vm=this;vm.optionsCache=[],vm.options=[],vm.mentions=[],vm.activeOption=null,vm.searching=!1,vm.menuPosition=null,vm.init=function(model){(ngModel=model).$render=render,ngModel.$parsers.push(parser),ngModel.$formatters.push(formatter),$attrs.ngTrim="false",$element.on("keyup input change",_.debounce(handleInputChange,75)),$element.on("focus",handleFocus),$element.on("scroll",updateScrollPosition),$scope.$on("$destroy",function(){removeSearchListeners()})},vm.label=function(option){return""},vm.labelRegExp=function(option){return new RegExp("\\B".concat(vm.label(option),"\\b"),"gi")},vm.encodeRegExp=function(option){option=vm.encode(option).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");return new RegExp(option,"gi")},vm.highlight=function(option){return""},vm.filter=function(match,options){return[]},vm.select=function(option){(function(mention){vm.mentions.push(mention),vm.onMentionsUpdate(vm.mentions)})(option),ngModel.$setViewValue(function(option){var search=vm.searching,text=ngModel.$viewValue;return"".concat(text.substr(0,search.index+search[0].indexOf("@"))+vm.label(option)," ").concat(text.substr(search.index+search[0].length))}(option)),ngModel.$render(),$element[0].focus(),vm.cancel()},vm.encode=function(option){return""},vm.decode=function(text){return{}},vm.search=function(match){vm.searching=match,vm.options=vm.filter(match,vm.optionsCache),vm.searching?$document[0].addEventListener("keydown",handleKeyDown,!0):removeSearchListeners();0<vm.options.length?vm.activeOption=vm.options[0]:vm.activeOption=null},vm.cancel=cancel,vm.onMentionsUpdate=function(mentions){};var fakeTextarea=$element.next()[0],oldInputChangeMatch=null;function removeSearchListeners(){$document[0].removeEventListener("keydown",handleKeyDown,!0)}function render(){var viewValue=ngModel.$viewValue||"";renderFakeTextarea($element[0].value=viewValue)}function parser(value){var mention;updateScrollPosition(),updateMentions(function(value){for(var optionsCache=vm.optionsCache,optionsCacheLength=optionsCache.length,mentions=[],i=0;i<optionsCacheLength;i++){var mention=optionsCache[i];vm.labelRegExp(mention).test(value)&&mentions.push(mention)}return mentions}(value)),renderFakeTextarea(value);for(var mentionsLength=vm.mentions.length,i=0;i<mentionsLength;i++)mention=vm.mentions[i],value=value.replace(vm.labelRegExp(mention),vm.encode(mention));return value.trim()}function formatter(value){var mention,mentionsLength=vm.mentions.length;updateMentions(function(value){for(var mention,mentions=_.uniq(value.match(DECODE_PATTERN)),mentionsLength=mentions.length,decodedMentions=[],i=0;i<mentionsLength;i++)mention=vm.decode(mentions[i]),decodedMentions.push(mention);return decodedMentions}(value)),value=value.toString()||"";for(var i=0;i<mentionsLength;i++)mention=vm.mentions[i],value=value.replace(vm.encodeRegExp(mention),vm.label(mention));return value}function handleInputChange(e){var selectionStart,match;vm.searching&&-1<[KEY_CODES.ARROW_UP,KEY_CODES.ARROW_DOWN].indexOf(e.keyCode)||(selectionStart=(e=$element[0]).selectionStart)===e.selectionEnd&&(e=e.value,match=PATTERN.exec(e.substr(0,selectionStart)),oldInputChangeMatch||match?(oldInputChangeMatch=match,$scope.$apply(function(){match?(vm.menuPosition=function(){var caret=fakeTextarea.querySelector(".".concat(CARET_CLASS));return{top:pvMentionsUtils.toPixels(caret.offsetTop-$element[0].scrollTop+MARGIN),left:pvMentionsUtils.toPixels(caret.offsetLeft+Math.round(caret.offsetWidth/2))}}(),vm.search(match)):vm.cancel()})):oldInputChangeMatch=match)}function handleKeyDown(event){if(vm.searching)switch(event.keyCode){case KEY_CODES.ENTER:!function(event){event.stopPropagation(),event.preventDefault(),vm.activeOption&&vm.select(vm.activeOption)}(event);break;case KEY_CODES.ARROW_UP:!function(event){event.preventDefault();event=vm.options.indexOf(vm.activeOption);vm.activeOption=0<event?vm.options[event-1]:vm.options[vm.options.length-1]}(event);break;case KEY_CODES.ARROW_DOWN:!function(event){event.preventDefault();event=vm.options.indexOf(vm.activeOption);vm.activeOption=event<vm.options.length-1?vm.options[event+1]:vm.options[0]}(event)}}function handleFocus(){$document.on("mouseup",handleMouseUp)}function handleMouseUp(event){event.target!==$element[0]&&($document.off("mouseup",handleMouseUp),vm.searching)&&$scope.$evalAsync(function(){cancel()})}function updateScrollPosition(){fakeTextarea.scrollTop=$element[0].scrollTop}function cancel(){vm.searching=!1,vm.activeOption=null,removeSearchListeners()}function updateMentions(mentions){vm.mentions=mentions,vm.onMentionsUpdate(vm.mentions)}function renderFakeTextarea(text){var mention,caretMatch=function(text){return PATTERN.exec(text.substr(0,$element[0].selectionStart))}(text=EscapeHtmlService.escape(text)),mentionsLength=vm.mentions.length;text=(text=caretMatch?function(match,text){return text.substr(0,match.index+match[0].length)+'<span class="'.concat(CARET_CLASS,'"></span>')+text.substr(match.index+match[0].length)}(caretMatch,text):text).toString()||"";for(var i=0;i<mentionsLength;i++)mention=vm.mentions[i],text=text.replace(vm.labelRegExp(mention),vm.highlight(mention));fakeTextarea.innerHTML="".concat(text,"<br />")}}angular.module("core").directive("pvMention",function(){return{restrict:"A",require:["ngModel","pvMention"],compile:function(el,attrs){return el.after('<div class="mention-area"></div>'),link},link:link,controller:pvMentionCtrl,controllerAs:"$pvMention"};function link(scope,el,attrs,controllers){var ngModelCtrl=controllers[0];controllers[1].init(ngModelCtrl)}}),pvMentionCtrl.$inject=["$scope","$element","$attrs","$document","pvMentionsUtils","EscapeHtmlService"]}(),function(){"use strict";angular.module("core").factory("pvMentionsUtils",function(){return{toPixels:function(value){return"".concat(value,"px")}}})}(),function(){"use strict";function pvNotify($document){return{restrict:"E",require:["?ngModel","?ngChange"],scope:{people:"=",onOpen:"&?",onClose:"&?"},templateUrl:"/scripts/modules/core/directives/notify/pvNotify.html",link:function(scope,el,attrs,controllers){var KEY_CODES=keysEnums.KEY_CODES,vm=scope.vm,ngModelCtrl=controllers[0];function renderer(){vm.selected=ngModelCtrl.$viewValue||[],vm.updateFilters()}function closeDropdown(){vm.isOpen&&(vm.isOpen=!1,unbindEvents(),_.isFunction(scope.onClose))&&scope.onClose()}function unbindEvents(){$document[0].removeEventListener("click",onClick,!0),$document.off("keydown",onKeyDown)}function onClick(event){el[0].contains(event.target)||scope.$apply(function(){closeDropdown()})}function onKeyDown(event){event.which===KEY_CODES.ESC&&scope.$apply(function(){closeDropdown()})}function onDestroy(){unbindEvents()}vm.selected=[],vm.isOpen=!1,vm.toggle=function(){vm.isOpen?closeDropdown():vm.isOpen||(vm.isOpen=!0,$document[0].addEventListener("click",onClick,!0),$document.on("keydown",onKeyDown),_.isFunction(scope.onOpen)&&scope.onOpen())},vm.closeDropdown=closeDropdown,vm.selectProjectMembers=function(){vm.selected=vm.getProjectMembersEmails(),vm.selectFilter("projectMembers"),ngModelCtrl.$setViewValue(vm.selected)},vm.selectAll=function(){vm.selected=vm.getAllEmails(),vm.selectFilter("all"),ngModelCtrl.$setViewValue(vm.selected)},vm.selectNone=function(){vm.selected=[],vm.selectFilter("none"),ngModelCtrl.$setViewValue(vm.selected)},vm.onTextareaEnter=function(){var people;vm.customEmails&&(people=vm.getCustomPeople(),scope.people=vm.people.concat(people),people=vm.customEmails,vm.selected=_.uniq(vm.selected.concat(people)),ngModelCtrl.$setViewValue(vm.selected),vm.customEmails=[],vm.scrollToBottom=!0)},ngModelCtrl&&(ngModelCtrl.$render=renderer),scope.$on("$destroy",onDestroy)},controller:pvNotifyCtrl,controllerAs:"vm"}}function pvNotifyCtrl($scope){var vm=this;function isEmailOnList(email){return!!_.find(vm.people,function(person){return person.email===email})}function isAllSelected(){return _.every([0<vm.people.length,vm.people.length===vm.selected.length,vm.people.length!==vm.projectMembersEmails.length])}function isProjectMembersSelected(){var diff=_.difference(vm.projectMembersEmails,vm.selected);return _.every([_.isEmpty(diff),vm.projectMembersEmails.length===vm.selected.length])}function isNoneSelected(){return _.isEmpty(vm.selected)}function getProjectMembersEmails(){var emails=[];return _.each(vm.people,function(person){person.isOwner&&emails.push(person.email)}),emails}function getNewPerson(email){return{name:email,email:email,id:MD5(email)}}function deselectFilters(){_.each(vm.filters,function(value,key){vm.filters[key]=!1})}vm.people=[],vm.projectMembersEmails=[],vm.customEmails=[],vm.scrollToBottom=!1,vm.filters={projectMembers:!1,all:!1,none:!1},vm.isEmailOnList=isEmailOnList,vm.isAllSelected=isAllSelected,vm.isProjectMembersSelected=isProjectMembersSelected,vm.isNoneSelected=isNoneSelected,vm.selectFilter=function(name){deselectFilters(),vm.filters[name]=!0},vm.deselectFilters=deselectFilters,vm.getAllEmails=function(){return _.map(vm.people,function(person){return person.email})},vm.getProjectMembersEmails=getProjectMembersEmails,vm.getNewPerson=getNewPerson,vm.getCustomPeople=function(){var customPeople=[];return _.each(_.uniq(vm.customEmails),function(email){isEmailOnList(email)||customPeople.push(getNewPerson(email))}),customPeople},vm.updateFilters=function(){vm.filters.all=isAllSelected(),vm.filters.projectMembers=isProjectMembersSelected(),vm.filters.none=isNoneSelected()},$scope.$watch("people",function(newPeople){vm.people=newPeople,vm.projectMembersEmails=getProjectMembersEmails(),vm.updateFilters()})}angular.module("core").directive("pvNotify",pvNotify),pvNotify.$inject=["$document"],pvNotifyCtrl.$inject=["$scope"]}(),function(){"use strict";function onboardingWidget($state,PagesService,PreviewNavigation){var DEFAULT_CLASS="preview-widget",SIDEBAR_OPENED_CLASS="is-preview-sidebar-open",currentPage=0;return{restrict:"E",scope:{content:"=",slidesOffset:"=",customSlidesCount:"=",customPrevActions:"=",customNextActions:"=",buttonLabels:"=",customNextLabels:"=",hideButtons:"=",startPageId:"=",showSlideEvent:"="},link:function(scope,el){var vm=scope.vm,defaultActions={next:goToNextPage,prev:goToPrevPage},props={content:vm.content,additionalClasses:getClasses(vm.leftPanelVisible),slidesOffset:vm.slidesOffset,customSlidesCount:vm.customSlidesCount,defaultActions:defaultActions,customPrevActions:vm.customPrevActions,customNextActions:vm.customNextActions,defaultLabels:vm.buttonLabels,customNextLabels:vm.customNextLabels,hideButtons:vm.hideButtons,showSlideEvent:vm.showSlideEvent};function renderWidget(properties){properties=uxpinSharedComponents.React.createElement(uxpinSharedComponents.OnboardingWidget,properties);uxpinSharedComponents.ReactDOM.unmountComponentAtNode(el[0]),uxpinSharedComponents.ReactDOM.render(properties,el[0])}scope.$watch(function(){return PreviewNavigation.isLeftPanelVisible()},function(leftPanelVisible){props.additionalClasses=getClasses(leftPanelVisible),renderWidget(props)}),renderWidget(props)},controller:function($scope){currentPage=PagesService.pagesFlatList.indexOf($scope.vm.startPageId)},controllerAs:"vm",bindToController:!0,template:"<div></div>"};function getClasses(isSidebarVisible){return[DEFAULT_CLASS,isSidebarVisible?SIDEBAR_OPENED_CLASS:""].join(" ")}function goToPage(pageNumber){var pageNumber=PagesService.pagesFlatList[pageNumber],currentState=$state.current.name;$state.go(currentState,{pageId:PagesService.getPageByBreakpoint(pageNumber)})}function goToPrevPage(callback){goToPage(--currentPage),callback()}function goToNextPage(callback){goToPage(currentPage+=1),callback()}}angular.module("core").directive("onboardingWidget",onboardingWidget),onboardingWidget.$inject=["$state","PagesService","PreviewNavigation"]}(),function(){"use strict";function PreviewPinCtrl($rootScope,$scope,$document,$timeout,CommentsService,CommentsSettings,UsersService,PagesService,DocumentsService,ProjectsService,CommentsState,ApprovalsService){var pageCanvasBoundingRect,onAddingComment,onNewCommentTypeUpdate,onSelectComment,onSelected,onDeletingComment,onResolveComment,onCommentTypeUpdate,onDeleteComment,onSortComments,maxWidth=0,maxHeight=0,commentTypes=[];function initDrag(){maxWidth=function(){if(ProjectsService.isDocument())return parseInt(DocumentsService.currentDocumentProperties.size.width);var rect=getPageCanvasBundingRect(),contentWidth=PagesService.getContentWidth(),rect=rect?Math.round(rect.width):0;return Math.max(contentWidth,rect)}()-PreviewEnums.PIN_RADIUS,maxHeight=function(){if(ProjectsService.isDocument())return parseInt(DocumentsService.currentDocumentProperties.size.height);var rect=getPageCanvasBundingRect(),rect=rect?Math.round(rect.height):0;return Math.max(PagesService.currentPageProperties.size.height,rect)}()-PreviewEnums.PIN_RADIUS,$scope.isDragging=!0,updateClasses(),$document.on("mouseup",onMouseUp),$rootScope.$emit(PreviewEnums.DRAGGING_COMMENT,!0)}function onMouseMove(event){var x=$scope.dragStartPos.x+event.pageX-$scope.dragClickPos.x,y=$scope.dragStartPos.y+event.pageY-$scope.dragClickPos.y;$scope.isDragging||initDrag(),x<-PreviewEnums.PIN_RADIUS&&(x=-PreviewEnums.PIN_RADIUS),y<-PreviewEnums.PIN_RADIUS&&(y=-PreviewEnums.PIN_RADIUS),maxWidth<x&&(x=maxWidth),maxHeight<y&&(y=maxHeight),$scope.$apply(function(){$scope.comment.position.x=x,$scope.comment.position.y=y})}function onMouseUp(){$scope.dragClickPos=null,$document.unbind("mousemove",onMouseMove),$document.unbind("mouseup",onMouseUp),$timeout(function(){$scope.isDragging=!1,updateClasses()},0),computePosition(),CommentsService.updateComment($scope.comment._id,{position:$scope.comment.position}).then(function(){$scope.dragStartPos=null},function(){$scope.comment.position.x=$scope.dragStartPos.x,$scope.comment.position.y=$scope.dragStartPos.y,$scope.dragStartPos=null}),$rootScope.$emit(PreviewEnums.DRAGGING_COMMENT,!1)}function getContentId(){return ProjectsService.isDocument()?DocumentsService.currentDocumentId:PagesService.currentPageId}function getPageCanvasBundingRect(){var pageCanvas;return pageCanvasBoundingRect||(pageCanvas=$document[0].querySelector(".ng-canvas"))&&(pageCanvasBoundingRect=pageCanvas.getBoundingClientRect()),pageCanvasBoundingRect}function setSelectedDelayed(value){$timeout(function(){$scope.selectedDelayed=value,updateClasses()},0)}function updateIndex(){$scope.index=CommentsService.getIndex(getContentId(),$scope.comment._id)}function computePosition(){$scope.selected&&$timeout(function(){updateClasses()},0)}function updateClasses(){setClass("selected",$scope.selectedDelayed),setClass("adding-comment",$scope.isNew()),setClass("resolved",!$scope.isNew()&&$scope.comment.resolved.is),setClass("dragging",$scope.isDragging),setClass("hide",$scope.deleting),setClass("comment-team",$scope.isTeam()),setClass("comment-public",!$scope.isTeam())}function setClass(className,value){var index=$scope.classes.indexOf(className);value&&-1===index?$scope.classes.push(className):value||-1===index||$scope.classes.splice(index,1)}$scope.selected=!1,$scope.isDragging=!1,$scope.commentType=null,$scope.dragStartPos=null,$scope.dragClickPos=null,$scope.isTop=!0,$scope.isLeft=!0,$scope.deleting=!1,$scope.classes=[],$scope.toggle=function(){$scope.isNew()||$scope.isDragging||($scope.selected=!$scope.selected,$scope.applyVisibility())},$scope.hide=function(){if($scope.selected)return $scope.selected=!1,$scope.applyVisibility(),!0},$scope.open=function(){$scope.selected=!0,$scope.applyVisibility()},$scope.isOpen=function(){return $scope.selected},$scope.applyVisibility=function(){updateClasses(),setSelectedDelayed($scope.selected),$rootScope.$emit(PreviewEnums.SELECT_COMMENT,$scope.selected?$scope.comment._id:null,"canvas")},$scope.startDrag=function(event){CommentsService.canEdit($scope.comment)&&($scope.dragClickPos={x:event.pageX,y:event.pageY},$scope.dragStartPos={x:$scope.comment.position.x,y:$scope.comment.position.y},$scope.dragClickPos)&&$scope.dragStartPos&&$document.on("mousemove",onMouseMove)},$scope.endDrag=function(){$document.unbind("mousemove",onMouseMove)},$scope.getCommentPointStyle=function(){return{left:"".concat($scope.x,"px"),top:"".concat($scope.y,"px")}},$scope.isNew=function(){return angular.isUndefined($scope.comment)},$scope.isTeam=function(){if(ApprovalsService.getIsActive())return!0;if(!$scope.isNew())return $scope.comment.type===commentTypes.TEAM;if($scope.commentType)return $scope.commentType===commentTypes.TEAM;if(CommentsSettings.getLastUsedCommentType())return CommentsSettings.getLastUsedCommentType()===commentTypes.TEAM;return CommentsSettings.commentTypesActive()},$scope.onDblclick=function(event){event.preventDefault()},$scope.isAnonymousMode=function(){return UsersService.isAnonymous()},commentTypes=CommentsSettings.commentTypes,$scope.selected=$scope.selectedDelayed=$scope.comment&&CommentsService.selectedCommentId===$scope.comment._id,$scope.isNew()?($scope.selected=!1,onAddingComment=$rootScope.$on(PreviewEnums.ADDING_COMMENT,function(event,value){$scope.selected=value,updateClasses(),setSelectedDelayed($scope.selected),value&&(computePosition(),$scope.index=CommentsService.getIndex(getContentId()))}),onNewCommentTypeUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_TYPE_UPDATE,function(event,id,type){$scope.commentType=type,updateClasses()}),$scope.$on("$destroy",function(){onAddingComment(),onNewCommentTypeUpdate()})):(onSelectComment=$rootScope.$on(PreviewEnums.SELECT_COMMENT,function(event,id){$scope.selected&&$scope.comment._id!==id&&($scope.selected=!1,setSelectedDelayed($scope.selected)),$scope.selected||$scope.comment._id!==id||($scope.selected=!0,setSelectedDelayed($scope.selected))}),onSelected=$scope.$watch("selected",function(newValue,oldValue){!oldValue&&newValue&&computePosition()}),onDeletingComment=$rootScope.$on(PreviewEnums.DELETING_COMMENT,function(event,id,value){$scope.comment._id===id&&($scope.selected=$scope.selectedDelayed=!1,$scope.deleting=value,updateClasses())}),onResolveComment=$rootScope.$on(PreviewEnums.RESOLVE_COMMENT,function(event,id){$scope.comment._id===id&&updateClasses()}),onCommentTypeUpdate=$rootScope.$on(PreviewEnums.ON_COMMENT_TYPE_UPDATE,function(event,id){$scope.comment._id===id&&updateClasses()}),onDeleteComment=$rootScope.$on(PreviewEnums.DELETE_COMMENT,updateIndex),onSortComments=$rootScope.$on(PreviewEnums.SORT_COMMENTS,updateIndex),$scope.$on("$destroy",function(){onSelectComment(),onSelected(),onDeletingComment(),onResolveComment(),onCommentTypeUpdate(),onDeleteComment(),onSortComments()}),updateIndex(),computePosition(),updateClasses())}angular.module("core").controller("PreviewPinCtrl",PreviewPinCtrl),PreviewPinCtrl.$inject=["$rootScope","$scope","$document","$timeout","CommentsService","CommentsSettings","UsersService","PagesService","DocumentsService","ProjectsService","CommentsState","ApprovalsService"]}(),function(){"use strict";angular.module("core").directive("previewPin",function(){return{restrict:"E",replace:!0,scope:{comment:"=",x:"@",y:"@"},controller:"PreviewPinCtrl",templateUrl:"/scripts/modules/core/directives/preview-pin/preview-pin.directive.html",link:function(scope,element,attrs){scope.toggleElement=function(){var parent=element[0].parentNode;if(parent)return parent.querySelector(".comments-group")}}}})}(),function(){"use strict";angular.module("core").directive("pvProgressBar",function(){return{restrict:"E",scope:{value:"="},templateUrl:"/scripts/modules/core/directives/progressBar/pvProgressBar.html",transclude:!0}})}(),function(){"use strict";angular.module("core").factory("ScreencastifyRecorderApi",function(){var recorderApi={};return{create:function(id,api){if(recorderApi[id])throw new Error("Api for recorder id:".concat(id," already created."));recorderApi[id]=api},remove:function(id){recorderApi[id]&&delete recorderApi[id]},startRecording:function(id){recorderApi[id]&&recorderApi[id].startRecording()},stopRecording:function(id){recorderApi[id]&&recorderApi[id].stopRecording()}}})}(),function(){"use strict";function pvScreencastifyRecorderCtrl(_,$scope,ScreencastifyService,ScreencastifyRecorderApi){var RECORDER_STATES={INACTIVE:"inactive"},vm=this;function startRecording(){var config={recordConfig:{captureSource:"screen",audio:{mic:!0,system:!1}},shareUrl:location.href};ScreencastifyService.isAppConnected().then(function(isConnected){isConnected?vm.recorder.start(config).then(function(){$scope.$apply(function(){vm.isRecording=!0,_.isFunction(vm.onStartRecording)&&vm.onStartRecording()})}):ScreencastifyService.connectApp()})}function stopRecording(){vm.recorder.stop().then(function(){$scope.$apply(function(){vm.isRecording=!1,_.isFunction(vm.onStopRecording)&&vm.onStopRecording()})})}function onStateChange(state){state===RECORDER_STATES.INACTIVE&&$scope.$apply(function(){vm.isRecording=!1,_.isFunction(vm.onStopRecording)&&vm.onStopRecording()})}function onTimeChanged(time){$scope.$apply(function(){vm.duration=time})}function onSharedFiles(fileIds){return ScreencastifyService.getFile(fileIds[0]).then(function(videoData){_.isFunction(vm.onVideoReady)&&vm.onVideoReady({$videoData:videoData})}),!0}function onDestroy(){vm.recorder.state!==RECORDER_STATES.INACTIVE&&stopRecording(),vm.id&&ScreencastifyRecorderApi.remove(vm.id)}vm.recorder=null,vm.isRecording=!1,vm.duration=0,vm.startRecording=startRecording,vm.stopRecording=stopRecording,ScreencastifyService.onSharedFiles=onSharedFiles,vm.recorder=new ScreencastifyService.Recorder,vm.recorder.onStateChanged=onStateChange,vm.recorder.onTimeChanged=onTimeChanged,vm.id&&ScreencastifyRecorderApi.create(vm.id,{startRecording:startRecording,stopRecording:stopRecording}),$scope.$on("$destroy",onDestroy)}angular.module("core").directive("pvScreencastifyRecorder",function(){return{restrict:"E",scope:{id:"@",onStartRecording:"&",onStopRecording:"&",onVideoReady:"&"},templateUrl:"/scripts/modules/core/directives/screencastify/pvScreencastifyRecorder.html",controller:pvScreencastifyRecorderCtrl,controllerAs:"vm",bindToController:!0}}),pvScreencastifyRecorderCtrl.$inject=["_","$scope","ScreencastifyService","ScreencastifyRecorderApi"]}(),function(){"use strict";function pvWhenHeightKnown(_,$$rAF,$parse,$window){return{restrict:"A",link:function(scope,element,attrs){var whenHeightKnownHandler=$parse(attrs.pvWhenHeightKnown),debouncedUpdate=_.debounce(update,50);function update(){scope.$apply(function(){whenHeightKnownHandler(scope,{$height:element[0].clientHeight})})}$$rAF(function(){var windowEl=angular.element($window);update(),windowEl.bind("resize",debouncedUpdate),scope.$on("$destroy",function(){windowEl.unbind("resize",debouncedUpdate)})})}}}angular.module("core").directive("pvWhenHeightKnown",pvWhenHeightKnown),pvWhenHeightKnown.$inject=["_","$$rAF","$parse","$window"]}(),function(){"use strict";angular.module("core").directive("pvWhenScrollEnds",function(){return{restrict:"A",link:function(scope,element,attrs){var THRESHOLD=100,latestKnownScrollTop=0,ticking=!1;function update(){element[0].scrollHeight-element[0].clientHeight-latestKnownScrollTop<=THRESHOLD&&scope.$apply(attrs.pvWhenScrollEnds),ticking=!1}element.on("scroll wheel touchmove touchend",function(){latestKnownScrollTop=element[0].scrollTop,ticking||requestAnimationFrame(update),ticking=!0})}}})}(),function(){"use strict";function pvWhenScrollTop($parse){return{restrict:"A",link:function(scope,element,attrs){var THRESHOLD=100,whenScrollTopHandler=$parse(attrs.pvWhenScrollTop),prevScrollTop=0,latestKnownScrollTop=0,ticking=!1;function update(){var hiddenContentHeight=element[0].scrollHeight-element[0].clientHeight;latestKnownScrollTop<prevScrollTop&&THRESHOLD<hiddenContentHeight-latestKnownScrollTop&&scope.$apply(function(){whenScrollTopHandler(scope,{$scrollTop:latestKnownScrollTop})}),prevScrollTop=latestKnownScrollTop,ticking=!1}element.on("scroll wheel touchmove touchend",function(){latestKnownScrollTop=element[0].scrollTop,ticking||requestAnimationFrame(update),ticking=!0})}}}angular.module("core").directive("pvWhenScrollTop",pvWhenScrollTop),pvWhenScrollTop.$inject=["$parse"]}(),function(){"use strict";function pvSearchCtrl($scope){var DEFAULT_CONFIG={label:"",placeholder:"",searchKey:"text"},vm=this;function search(){vm.filteredOptions=vm.searchValue?filterOptions(vm.searchValue):vm.options,_.isFunction($scope.onSearch)&&$scope.onSearch({filteredOptions:vm.filteredOptions})}function filterOptions(value){return _.filter(vm.options,function(option){return-1<option[vm.config.searchKey].toLowerCase().indexOf(value.trim().toLowerCase())})}vm.options=[],vm.filteredOptions=[],vm.searchValue="",vm.search=search,vm.filterOptions=filterOptions,vm.resetSearch=function(){_.isEmpty(vm.searchValue)||(vm.searchValue="",vm.filteredOptions=[],_.isFunction($scope.onReset)&&$scope.onReset())},$scope.$watch("options",function(newOptions){vm.options=newOptions,vm.searchValue&&search()}),$scope.$watch("config",function(newConfig){vm.config=_.defaults(newConfig||{},DEFAULT_CONFIG),vm.searchValue&&search()})}angular.module("core").directive("pvSearch",function(){return{restrict:"E",scope:{options:"=",config:"=",onSearch:"&?",onReset:"&?"},templateUrl:"/scripts/modules/core/directives/search/pvSearch.html",controller:pvSearchCtrl,controllerAs:"vm",replace:!0}}),pvSearchCtrl.$inject=["$scope"]}(),function(){"use strict";function pvCloud($parse,$document){return{restrict:"A",link:function(scope,el,attrs){var model,KEY_CODES=keysEnums.KEY_CODES,triggerEl=el[0].querySelector("[pv-cloud-trigger]"),cloudEl=el[0].querySelector("[pv-cloud-element]");function applyModelValue(value){model(scope)!==value&&scope.$apply(function(){model.assign(scope,value)})}function toggle(){(cloudEl.classList.contains("visible")?closeCloud:openCloud)()}function openCloud(){_.isEmpty(model)||applyModelValue(!0),cloudEl.classList.add("visible"),$document[0].addEventListener("click",onClick,!0),$document[0].addEventListener("keydown",onKeyDown,!0)}function closeCloud(){_.isEmpty(model)||applyModelValue(!1),cloudEl.classList.remove("visible"),$document[0].removeEventListener("click",onClick,!0),$document[0].removeEventListener("keydown",onKeyDown,!0)}function onClick(event){el[0].contains(event.target)||closeCloud()}function onKeyDown(event){event.keyCode===KEY_CODES.ESC&&(event.stopPropagation(),closeCloud())}attrs.pvCloudOpen&&(model=$parse(attrs.pvCloudOpen),scope.$watch(model,function(value){(value?openCloud:closeCloud)()})),triggerEl.addEventListener("click",toggle),scope.$on("$destroy",function(){closeCloud()})}}}angular.module("core").directive("pvCloud",pvCloud),pvCloud.$inject=["$parse","$document"]}(),function(){"use strict";function pvMultiSelectListCtrl($scope){var vm=this;function filterOptions(value){return _.filter(vm.options,function(option){return-1<option.name.toLowerCase().indexOf(value.trim().toLowerCase())})}function updateSelection(){_.each(vm.options,function(option){option.checked=-1<vm.selected.indexOf($scope.key?option[$scope.key]:option.email)})}vm.options=[],vm.filteredOptions=[],vm.searchValue="",vm.search=function(){vm.filteredOptions=vm.searchValue?filterOptions(vm.searchValue):vm.options},vm.resetSearch=function(){vm.searchValue="",vm.filteredOptions=vm.options},vm.updateSelection=updateSelection,$scope.$watch("options",function(newOptions){vm.options=newOptions,vm.filteredOptions=filterOptions(vm.searchValue),updateSelection()})}angular.module("core").directive("pvMultiSelectList",function(){return{restrict:"E",require:["?ngModel","?ngChange"],scope:{options:"=",scrollToBottom:"=?",key:"@?"},templateUrl:"/scripts/modules/core/directives/select/pvMultiSelectList.html",link:function(scope,el,attrs,controllers){var vm=scope.vm,ngModelCtrl=controllers[0];function renderer(){vm.selected=ngModelCtrl.$viewValue||[],vm.updateSelection()}vm.selected=[],vm.select=function(option){option.checked?vm.selected.push(scope.key?option[scope.key]:option.email):(option=vm.selected.indexOf(scope.key?option[scope.key]:option.email),vm.selected.splice(option,1)),ngModelCtrl&&ngModelCtrl.$setViewValue(_.clone(vm.selected))},ngModelCtrl&&(ngModelCtrl.$render=renderer)},controller:pvMultiSelectListCtrl,controllerAs:"vm",transclude:!0}}),pvMultiSelectListCtrl.$inject=["$scope"]}(),function(){"use strict";function pvSelect($document){return{restrict:"E",require:["?ngModel","?ngChange"],scope:{options:"=",config:"=",linkClass:"@",onOpen:"&?",onClose:"&?"},templateUrl:"/scripts/modules/core/directives/select/pvSelect.html",link:function(scope,el,attrs,controllers){var KEY_CODES=keysEnums.KEY_CODES,vm=scope.vm,ngModelCtrl=controllers[0];function renderer(){vm.selectedOption=ngModelCtrl.$viewValue}function formatter(value){if(value)return _.find(scope.options,function(option){return option[vm.config.valueKey]===value})||{}}function parser(newValue){return _.isEmpty(newValue)?null:newValue[vm.config.valueKey]}function updateViewValue(newOption,oldOption){newOption!==oldOption&&ngModelCtrl.$setViewValue(newOption)}function openDropdown(){vm.config.disabled||vm.isDropdownOpen||(vm.isDropdownOpen=!0,$document[0].addEventListener("click",handleClick,!0),$document[0].addEventListener("keydown",handleKeydown,!0),_.isFunction(scope.onOpen)&&scope.onOpen())}function closeDropdown(){vm.isDropdownOpen&&(vm.isDropdownOpen=!1,unbindDropdownEvents(),_.isFunction(scope.onClose))&&scope.onClose()}function handleDestroy(){unbindDropdownEvents()}function unbindDropdownEvents(){$document[0].removeEventListener("click",handleClick,!0),$document[0].removeEventListener("keydown",handleKeydown,!0)}function handleClick(event){el[0].contains(event.target)||scope.$apply(function(){closeDropdown()})}function handleKeydown(event){var keyCode=event.keyCode;keyCode!==KEY_CODES.ENTER&&keyCode!==KEY_CODES.ESC||(event.stopPropagation(),scope.$apply(function(){closeDropdown()}))}vm.selectedOption={},vm.isDropdownOpen=!1,vm.toggleDropdown=function(){(vm.isDropdownOpen?closeDropdown:openDropdown)()},vm.openDropdown=openDropdown,vm.closeDropdown=closeDropdown,ngModelCtrl&&(ngModelCtrl.$render=renderer,ngModelCtrl.$formatters.push(formatter),ngModelCtrl.$parsers.push(parser),scope.$watch("vm.selectedOption",updateViewValue)),scope.$on("$destroy",handleDestroy)},controller:pvSelectCtrl,controllerAs:"vm",transclude:!0}}function pvSelectCtrl($scope,$window){var DEFAULT_CONFIG={valueKey:"value",labelKey:"text",placeholder:"",inputTpl:"pvDefaultInput.html",optionTpl:"pvDefaultOption.html",deselect:!1,deselectLabel:"",closeOnSelect:!0,withSearch:!1,search:{label:"",placeholder:"",searchKey:"text"}},vm=this;vm.options=[],vm.filteredOptions=[],vm.config={},vm.searchConfig={},vm.selectOption=function(option){!function(option){return vm.selectedOption===option}(option)&&(vm.selectedOption=option,vm.config.closeOnSelect&&vm.closeDropdown(),$window.mixpanel.track("comment_assigned"))},vm.deselectOption=function(){vm.config.deselect&&(vm.selectedOption={})},vm.onSearch=function(filteredOptions){vm.filteredOptions=filteredOptions},vm.onReset=function(){vm.filteredOptions=vm.options},vm.config=_.defaults($scope.config||{},DEFAULT_CONFIG),$scope.$watch("options",function(newOptions){vm.options=newOptions,vm.filteredOptions=newOptions})}angular.module("core").directive("pvSelect",pvSelect),pvSelect.$inject=["$document"],pvSelectCtrl.$inject=["$scope","$window"]}(),function(){"use strict";function pvSingleSelectListCtrl($scope){var DEFAULT_CONFIG={valueKey:"",labelKey:"text",optionTpl:"pvDefaultOption.html",withSearch:!1,search:{label:"",placeholder:"",searchKey:"text"}},vm=this;vm.options=[],vm.filteredOptions=[],vm.selectedOption={},vm.config={},vm.onSearch=function(filteredOptions){vm.filteredOptions=filteredOptions},vm.onResetSearch=function(){vm.filteredOptions=vm.options},vm.config=_.defaults($scope.config||{},DEFAULT_CONFIG),$scope.$watch("options",function(newOptions){vm.options=newOptions,vm.filteredOptions=newOptions})}angular.module("core").directive("pvSingleSelectList",function(){return{restrict:"E",require:["?ngModel","?ngChange"],scope:{options:"=",config:"="},templateUrl:"/scripts/modules/core/directives/select/pvSingleSelectList.html",link:function(scope,el,attrs,controllers){var vm=scope.vm,ngModelCtrl=controllers[0];function renderer(){vm.selectedOption=ngModelCtrl.$viewValue}function formatter(value){if(value)return _.find(scope.options,function(option){return formatOption(option)===value})||{}}function parser(newValue){return _.isEmpty(newValue)?null:formatOption(newValue)}function formatOption(value){return vm.config.valueKey?value[vm.config.valueKey]:value}vm.selectOption=function(option){!function(option){return vm.selectedOption===option}(option)&&(vm.selectedOption=option,ngModelCtrl.$setViewValue(option))},ngModelCtrl&&(ngModelCtrl.$render=renderer,ngModelCtrl.$formatters.push(formatter),ngModelCtrl.$parsers.push(parser))},controller:pvSingleSelectListCtrl,controllerAs:"vm"}}),pvSingleSelectListCtrl.$inject=["$scope"]}(),function(){"use strict";function pvShortcutCtrl($scope){var ICON_KEYS={cmd:{icon:"cmd-key",alt:"cmd"},shift:{icon:"shift-key",alt:"shift"}},vm=this;vm.keys=[],$scope.$watch("keys",function(newValue){vm.keys=_.map(newValue,function(value){var lowerCaseValue=value.toLowerCase();return void 0!==ICON_KEYS[lowerCaseValue]?_.extend({className:"only-icon-font icon-font-".concat(ICON_KEYS[lowerCaseValue].icon)},ICON_KEYS[lowerCaseValue]):{alt:value}})})}angular.module("core").directive("pvShortcut",function(){return{restrict:"E",scope:{keys:"="},templateUrl:"/scripts/modules/core/directives/shortcut/pvShortcut.html",controller:pvShortcutCtrl,controllerAs:"vm"}}),pvShortcutCtrl.$inject=["$scope"]}(),function(){"use strict";angular.module("core").directive("toastify",function(){return{restrict:"E",scope:{content:"@"},link:function(scope,el){var Toast=uxpinSharedComponents.React.createElement(uxpinSharedComponents.Toastify.ToastContainer,ToastifyEnums.SETTINGS);uxpinSharedComponents.ReactDOM.unmountComponentAtNode(el[0]),uxpinSharedComponents.ReactDOM.render(Toast,el[0])}}})}(),function(){"use strict";function updateInfoCtrl($scope,$modal,localStorageService){var vm=this;vm.ls=localStorageService,vm.modalName=$scope.modalName,vm.lsKey="".concat(PreviewEnums.UPDATE_INFO.LS.SEEN,"_").concat(vm.modalName),vm.planUniqueName=ApplicationConfiguration.userData.plan_unique_name,vm.isTrial=ApplicationConfiguration.userData.is_trial,vm.isLoggedIn=!ApplicationConfiguration.userData.is_anonymous,function(vm){return!function(vm){return vm.ls.get(vm.lsKey)}(vm)&&function(vm){var loggedInValid=UpdateInfoModals[vm.modalName].loggedInOnly&&vm.isLoggedIn||!UpdateInfoModals[vm.modalName].loggedInOnly,vm=!UpdateInfoModals[vm.modalName].loggedInOnly&&"all"!==UpdateInfoModals[vm.modalName].plan&&"all"!==UpdateInfoModals[vm.modalName].type;return loggedInValid||vm}(vm)&&function(vm){var enterprise=-1<vm.planUniqueName.toLowerCase().indexOf("enterprise"),validEnterprise=enterprise&&-1<["all","enterprise"].indexOf(UpdateInfoModals[vm.modalName].plan),enterprise=!enterprise&&-1<["all","other"].indexOf(UpdateInfoModals[vm.modalName].plan);return validEnterprise||enterprise}(vm)&&function(vm){var validTrial=vm.isTrial&&-1<["all","trial"].indexOf(UpdateInfoModals[vm.modalName].type),vm=!vm.isTrial&&-1<["all","other"].indexOf(UpdateInfoModals[vm.modalName].type);return validTrial||vm}(vm)&&function(vm){var start=new Date(UpdateInfoModals[vm.modalName].start).getTime(),vm=new Date(UpdateInfoModals[vm.modalName].end).getTime(),now=Date.now();return start<now&&now<vm}(vm)}(vm)&&($modal.open({templateUrl:"/scripts/modules/core/directives/updateInfo/updateInfo.html",controller:modalCtrl,scope:$scope}),localStorageService.set(vm.lsKey,!0))}function modalCtrl($scope,$modalInstance){var templateFile=UpdateInfoModals[$scope.$parent.modalName].content;$scope.content="".concat(PreviewEnums.UPDATE_INFO.MODAL_CONTENT_DIR,"/").concat(templateFile),$scope.closeModal=function($event){$modalInstance.close()}}angular.module("core").directive("updateInfo",function(){return{restrict:"E",scope:{modalName:"@"},controller:updateInfoCtrl,controllerAs:"vm",replace:!0}}),updateInfoCtrl.$inject=["$scope","$modal","localStorageService"],modalCtrl.$inject=["$scope","$modalInstance"]}(),function(){function uxpinBadgeCtrl(Settings){var isFree=ApplicationConfiguration.project.is_account_free,Settings=Settings.enableMirroring;this.isOpen=isFree&&!Settings,this.homepageUrl=ApplicationConfiguration.homepageURL}angular.module("core").directive("uxpinBadge",function(){return{restrict:"E",scope:{},replace:!0,templateUrl:"/scripts/modules/core/directives/uxpinBadge/uxpin-badge.html",controller:uxpinBadgeCtrl,controllerAs:"vm"}}),uxpinBadgeCtrl.$inject=["Settings"]}(),function(){"use strict";function videoStreamCtrl($rootScope,$scope,UsabilityTestService){var vm=this;vm.isMessageVisible=!0,vm.message="Waiting for participant",UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.START,function(){$scope.$apply(function(){vm.isMessageVisible=!0,vm.message="Waiting for participant"})}),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.TESTER_JOINED,function(){$scope.$apply(function(){vm.isMessageVisible=!0,vm.message="Waiting for participant to allow Camera access"})}),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.VIDEO_PARTICIPANT_JOINED,function(){$scope.$apply(function(){vm.isMessageVisible=!1,vm.message=""})}),UsabilityTestService.registerObserverCallback(LiveShare.enums.EVENTS.VIDEO_PARTICIPANT_LEFT,function(){$scope.$apply(function(){vm.isMessageVisible=!0,vm.message="Waiting for participant"})})}angular.module("core").directive("videoStream",function(){return{restrict:"E",scope:{isUsabilityTestingSession:"=",isHost:"="},controller:videoStreamCtrl,controllerAs:"vm",bindToController:!0,templateUrl:"/scripts/modules/core/directives/videoStream/videoStream.html"}}),videoStreamCtrl.$inject=["$rootScope","$scope","UsabilityTestService"]}(),function(){"use strict";function zoomCtrl(_,$scope,$rootScope,$timeout,$interval,Engine,PreviewNavigation,ProjectsService,$window,uxpinSharedComponents,$document,$state,FitCanvas){var removeZoomInListener,removeZoomOutListener,removeZoomResetListener,removeModeChangeEventListener,removeZoomUpdateListener,vm=this,ZOOM_DEFAULT_VALUE=100,ZOOM_VALUES=[1,10,25,50,75,100,200,300,400,500,1e3,5e3,1e4],PREVIEW_MODES=PreviewNavigation.PREVIEW_MODES;vm.isOpen=!1,vm.isZoomActive=!1,vm.zoom=ZOOM_DEFAULT_VALUE,vm.ZOOM_VALUES=ZOOM_VALUES,vm.MIN_VALUE=1,vm.MAX_VALUE=1e4,vm.ACTUAL_SIZE="ACTUAL_SIZE",vm.handleClick=function(event){event.preventDefault()},vm.handleMouseDownZoomIn=function(){zoomIn()},vm.handleMouseDownZoomOut=function(){zoomOut()},vm.handleZoomFocus=function(){vm.isZoomActive||(setIsActive(!0),$document[0].body.addEventListener("mousedown",handleZoomDefocus))},vm.handleZoomDefocus=handleZoomDefocus,vm.handleOnChange=function(){FitCanvas.resetStateZoomParam()},vm.setZoom=setZoom,vm.setZoomStrategy=function(strategy){$state.go($state.current.name,{zoom:strategy}),strategy||(vm.zoom=ZOOM_DEFAULT_VALUE);setZoomStrategyModel(strategy)},vm.zoomStrategies=PreviewEnums.FIT_STRATEGIES,vm.onCloudOpen=function(){vm.isOpen=!0},vm.onCloudClose=function(){vm.isOpen=!1},setZoomStrategyModel();function setZoomStrategyModel(fitStrategy){fitStrategy=fitStrategy||FitCanvas.getStrategy();fitStrategy?vm.zoomStrategy=fitStrategy:vm.zoom===ZOOM_DEFAULT_VALUE?vm.zoomStrategy=vm.ACTUAL_SIZE:vm.zoomStrategy=null}function setZoom(){var scale=vm.zoom/100;Engine.setScale(scale),$rootScope.$emit(PreviewEnums.ON_ZOOM_CHANGE)}function updateValue(value){_.isEqual(value,vm.zoom)||(vm.zoom=Math.min(Math.max(value,_.min(ZOOM_VALUES)),_.max(ZOOM_VALUES)))}function handleZoomDefocus(event){event&&$document[0].querySelector(".zoom").contains(event.target)||(setIsActive(!1),$document[0].body.removeEventListener("mousedown",handleZoomDefocus))}function setIsActive(value){vm.isZoomActive=value}function zoomReset(){updateValue(ZOOM_DEFAULT_VALUE)}function zoomIn(params){updateValue(params?vm.zoom+params.delta:function(values,value){for(var i=0;i<values.length;i++)if(value<values[i])return values[i];return values[values.length-1]}(ZOOM_VALUES,vm.zoom)),FitCanvas.resetStateZoomParam()}function zoomOut(params){updateValue(params?vm.zoom+params.delta:function(values,value){for(var i=values.length-1;0<i;i--)if(value>values[i])return values[i];return values[0]}(ZOOM_VALUES,vm.zoom)),FitCanvas.resetStateZoomParam()}function shouldZoomWork(){return PreviewNavigation.isModeActive(PREVIEW_MODES.SIMULATE)||PreviewNavigation.isModeActive(PREVIEW_MODES.SPEC)||PreviewNavigation.isModeActive(PREVIEW_MODES.DOCUMENTATION)&&!ProjectsService.isDocument()}function zoomInDesktopApp(){zoomIn(),$scope.$apply()}function zoomOutDesktopApp(){zoomOut(),$scope.$apply()}function zoomResetDesktopApp(){zoomReset(),$scope.$apply()}uxpinSharedComponents.isDesktopApp&&($window.addEventListener("EVENT_ZOOM_IN",zoomInDesktopApp),$window.addEventListener("EVENT_ZOOM_OUT",zoomOutDesktopApp),$window.addEventListener("EVENT_ZOOM_RESET",zoomResetDesktopApp)),removeZoomInListener=$rootScope.$on(PreviewEnums.ON_ZOOM_IN,function(e,params){shouldZoomWork()&&$timeout(function(){zoomIn(params)},0)}),removeZoomUpdateListener=$rootScope.$on(PreviewEnums.ON_ZOOM_UPDATE,function(e,params){shouldZoomWork()&&(vm.zoom=_.round(parseFloat(params),2))}),removeZoomOutListener=$rootScope.$on(PreviewEnums.ON_ZOOM_OUT,function(e,params){shouldZoomWork()&&$timeout(function(){zoomOut(params)},0)}),removeZoomResetListener=$rootScope.$on(PreviewEnums.ON_ZOOM_RESET,function(){shouldZoomWork()&&$timeout(function(){zoomReset()},0)}),removeModeChangeEventListener=$rootScope.$on(PreviewEnums.ON_PREVIEW_MODE_CHANGED,function(event,mode){mode&&mode===PreviewNavigation.PREVIEW_MODES.COMMENT&&vm.zoom!==ZOOM_DEFAULT_VALUE&&(zoomReset(),setZoom())}),$rootScope.$emit(PreviewEnums.ZOOM_INITIALIZED),$scope.$on("$destroy",function(){removeZoomInListener(),removeZoomOutListener(),removeZoomResetListener(),removeModeChangeEventListener(),removeZoomUpdateListener(),uxpinSharedComponents.isDesktopApp&&($window.removeEventListener("EVENT_ZOOM_IN",zoomInDesktopApp),$window.removeEventListener("EVENT_ZOOM_OUT",zoomOutDesktopApp),$window.removeEventListener("EVENT_ZOOM_RESET",zoomResetDesktopApp))}),$scope.$watch("vm.zoom",function(value){!(value=value?parseFloat(value):0)||value<1||1e4<value||(vm.zoom=_.round(value,2),setZoomStrategyModel(),setZoom())})}angular.module("core").directive("zoom",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"/scripts/modules/core/directives/zoom/zoom.view.html",controller:zoomCtrl,controllerAs:"vm",bindToController:!0}}),zoomCtrl.$inject=["_","$scope","$rootScope","$timeout","$interval","Engine","PreviewNavigation","ProjectsService","$window","uxpinSharedComponents","$document","$state","FitCanvas"]}(),function(){"use strict";function AbstractPageAnimation(Engine,_,$q,PagesService){function Animation(container,duration,delay,easing){this.container=container,this.duration=duration||800,this.delay=delay||0,this.easing=easing||"ease-out",this.nextPage=angular.element(this.container[0].querySelector(".ng-canvas")),this.currentPage=this.nextPage.clone(),this.currentPage.removeClass("ng-canvas").addClass("ng-canvas-old"),this.currentPage.css({transformOrigin:"0 0 0",webkitTransformOrigin:"0 0 0"}),this.initialTransform=this.currentPage.css("transform")||"",this.currentPageFixedPositionNodes=this.currentPage[0].querySelectorAll(".fixed-position"),this.fixedElementData=null}function getDimension(dimension){var pageDimension=PagesService.currentPageProperties.size[dimension],sketchArtboardDimension=Engine.getCanvasSketchArtboard();return pageDimension=_.isEmpty(sketchArtboardDimension)?pageDimension:pageDimension||sketchArtboardDimension[dimension]}return Animation.prototype.is=function(type){return this.type===type},Animation.prototype.getCurrentPageWidth=function(shouldBeNegative){var width=getDimension("width");return shouldBeNegative?-width:width},Animation.prototype.getCurrentPageHeight=function(shouldBeNegative){var height=getDimension("height");return shouldBeNegative?-height:height},Animation.prototype.handleFixedElements=function(nodes){for(var savedData=[],i=0;i<nodes.length;i++){var node=angular.element(nodes[i]);savedData.push({node:node,left:node.css("left"),top:node.css("top")}),node.css({position:"absolute !important",left:"",top:""})}return savedData},Animation.prototype.isZoom=function(){return 1!==this.getZoomValue()},Animation.prototype.canDoAnimation=function(){return!0},Animation.prototype.getZoomValue=function(){var match=this.initialTransform.match(/scale\((.*)\)/);return match&&match[1]?parseFloat(match[1].split(",")):1},Animation.prototype.onAnimationInit=function(){Engine.setInteractionsEnabled(!1),this.handleFixedElements(this.currentPageFixedPositionNodes)},Animation.prototype.prepareNextPage=function(){var defer;return this.nextPageFixedPositionNodes=this.nextPage[0].querySelectorAll(".fixed-position"),this.fixedElementData=this.handleFixedElements(this.nextPageFixedPositionNodes),this.nextPageImages=this.nextPage[0].querySelectorAll("img"),this.nextPageImages.length?$q.all(_.map(this.nextPageImages,function(nextPageImage){var image=new Image,deferred=$q.defer();return image.onload=deferred.resolve,image.onerror=deferred.resolve,image.src=nextPageImage.src,deferred.promise})):((defer=$q.defer()).resolve(),defer.promise)},Animation.prototype.onAnimationEnd=function(){if(Engine.setInteractionsEnabled(!0),Engine.triggerWindowLoad(),this.fixedElementData)for(var i=0;i<this.fixedElementData.length;i++){var elementData=this.fixedElementData[i];elementData.node.css({position:"",left:elementData.left,right:elementData.right})}},Animation}angular.module("core").factory("AbstractPageAnimation",AbstractPageAnimation),AbstractPageAnimation.$inject=["Engine","_","$q","PagesService"]}(),function(){"use strict";function FadeAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing){AbstractPageAnimation.apply(this,arguments)}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.prepareAnimationContainer=function(){return this.currentPage.css({opacity:"1"}),this.nextPage.css({opacity:"0"}),this.container.prepend(this.currentPage),this.nextPage},Animation.prototype.onAnimationInit=function(){AbstractPageAnimation.prototype.onAnimationInit.call(this);return{fadeInKeyFrames:{from:{opacity:"0"},to:{opacity:"1"}},fadeOutKeyFrames:{from:{opacity:"1"},to:{opacity:"0"}}}},Animation.prototype.startAnimation=function(animationNames){this.nextPage.css({animation:"".concat(animationNames.fadeInKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)}),this.currentPage.css({animation:"".concat(animationNames.fadeOutKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.currentPage.remove(),this.nextPage.css({animation:"",opacity:""})},Animation}angular.module("core").factory("FadeAnimation",FadeAnimation),FadeAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function FlipXAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing,type){AbstractPageAnimation.apply(this,arguments),this.type=type||"right",this.angle="right"===type?"180deg":"-180deg"}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.canDoAnimation=function(){return!this.isZoom()},Animation.prototype.prepareAnimationContainer=function(){var width=this.getCurrentPageWidth(),height=this.getCurrentPageHeight();return this.currentPage.css({transformOrigin:"50% 50%",transform:"rotateY(0deg)",backfaceVisibility:"hidden",webkitBackfaceVisibility:"hidden",width:"".concat(width,"px"),height:"".concat(height,"px")}),this.nextPage.css({transformOrigin:"50% 50%",transform:"rotateY(".concat(this.angle,")"),backfaceVisibility:"hidden",webkitBackfaceVisibility:"hidden",width:"".concat(width,"px"),height:"".concat(height,"px")}),this.animationContainer=angular.element("<div>").css({position:"absolute",width:"".concat(width,"px"),height:"".concat(height,"px"),perspective:"1000px",overflow:"visible"}),this.flipContainer=angular.element("<div>").append(this.currentPage).append(this.nextPage).css({position:"absolute",transform:"rotateY(0deg)",transformStyle:"preserve-3d"}),this.animationContainer.append(this.flipContainer),this.container.append(this.animationContainer),this.flipContainer},Animation.prototype.onAnimationInit=function(){return AbstractPageAnimation.prototype.onAnimationInit.call(this),{flipKeyFrames:{from:{transform:"rotateY(0deg)"},to:{transform:"rotateY(".concat(this.angle,")")}}}},Animation.prototype.startAnimation=function(animationNames){this.nextPageInitialSize={width:this.nextPage.css("width"),height:this.nextPage.css("height")},this.flipContainer.css({animation:"".concat(animationNames.flipKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.container.prepend(this.nextPage),this.animationContainer.remove(),this.nextPage.css({width:this.nextPageInitialSize.width,height:this.nextPageInitialSize.height,animation:"",transform:this.initialTransform,left:"",transformOrigin:"",backfaceVisibility:"",webkitBackfaceVisibility:""})},Animation}angular.module("core").factory("FlipXAnimation",FlipXAnimation),FlipXAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function FlowAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing,type){AbstractPageAnimation.apply(this,arguments),this.type=type||"right"}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.canDoAnimation=function(){return!this.isZoom()},Animation.prototype.prepareAnimationContainer=function(){var width=this.getCurrentPageWidth();return this.currentPage.css({transform:this.initialTransform||"scale(1)",transformOrigin:"50% 50%"}),this.nextPage.css({left:"".concat("right"===this.type?-width:width,"px"),transformOrigin:"50% 50%"}),this.flowContainer=angular.element("<div>"),this.flowContainer.append(this.currentPage),this.flowContainer.append(this.nextPage),this.flowContainer.css({width:"".concat(2*width,"px"),position:"absolute",transform:"".concat(this.initialTransform," translateX(0)")}),this.container.append(this.flowContainer),this.flowContainer},Animation.prototype.onAnimationInit=function(){AbstractPageAnimation.prototype.onAnimationInit.call(this);var width=this.getCurrentPageWidth();return{flowScale:{0:{transform:"scale(1)"},25:{transform:"scale(0.71)"},75:{transform:"scale(0.71)"},100:{transform:"scale(1)"}},flowMove:{0:{transform:"translateX(0)"},25:{transform:"translateX(0)"},75:{transform:"translateX(".concat("right"===this.type?width:-width,"px)")},100:{transform:"translateX(".concat("right"===this.type?width:-width,"px)")}}}},Animation.prototype.startAnimation=function(animationNames){this.flowContainer.css({animation:"".concat(animationNames.flowMove," ").concat(this.duration,"ms ").concat(this.easing)}),this.currentPage.css({animation:"".concat(animationNames.flowScale," ").concat(this.duration,"ms ").concat(this.easing)}),this.nextPage.css({animation:"".concat(animationNames.flowScale," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.container.prepend(this.nextPage),this.flowContainer.remove(),this.nextPage.css({animation:"",transform:this.initialTransform,left:"",transformOrigin:""})},Animation}angular.module("core").factory("FlowAnimation",FlowAnimation),FlowAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function PushXAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing,type){AbstractPageAnimation.apply(this,arguments),this.type=type||"right"}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.prepareAnimationContainer=function(){return this.nextPage.css({transform:"".concat(this.initialTransform," translateX(").concat(this.getCurrentPageWidth(this.is("right")),"px)")}),this.container.prepend(this.currentPage),this.currentPage},Animation.prototype.onAnimationInit=function(){return AbstractPageAnimation.prototype.onAnimationInit.call(this),{pushXCurrentPageKeyFrames:{from:{transform:"".concat(this.initialTransform," translateX(0)")},to:{transform:"".concat(this.initialTransform," translateX(").concat(this.getCurrentPageWidth(this.is("left")),"px)")}},pushXNextPageKeyFrames:{from:{transform:"".concat(this.initialTransform," translateX(").concat(this.getCurrentPageWidth(this.is("right")),"px)")},to:{transform:"".concat(this.initialTransform," translateX(0)")}}}},Animation.prototype.startAnimation=function(animationNames){this.currentPage.css({animation:"".concat(animationNames.pushXCurrentPageKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)}),this.nextPage.css({animation:"".concat(animationNames.pushXNextPageKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.currentPage.remove(),this.nextPage.css({animation:"",transform:this.initialTransform})},Animation}angular.module("core").factory("PushXAnimation",PushXAnimation),PushXAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function PushYAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing,type){AbstractPageAnimation.apply(this,arguments),this.type=type||"up"}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.prepareAnimationContainer=function(){return this.nextPage.css({transform:"".concat(this.initialTransform," translateY(").concat(this.getCurrentPageHeight("down"===this.type),"px)")}),this.currentPage.css({transform:"".concat(this.initialTransform," translateY(0)")}),this.container.prepend(this.currentPage),this.currentPage},Animation.prototype.onAnimationInit=function(){return AbstractPageAnimation.prototype.onAnimationInit.call(this),{pushXCurrentPageKeyFrames:{from:{transform:"".concat(this.initialTransform," translateY(0)")},to:{transform:"".concat(this.initialTransform," translateY(").concat(this.getCurrentPageHeight("up"===this.type),"px)")}},pushXNextPageKeyFrames:{from:{transform:"".concat(this.initialTransform," translateY(").concat(this.getCurrentPageHeight("down"===this.type),"px)")},to:{transform:"".concat(this.initialTransform," translateY(0)")}}}},Animation.prototype.startAnimation=function(animationNames){this.currentPage.css({animation:"".concat(animationNames.pushXCurrentPageKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)}),this.nextPage.css({animation:"".concat(animationNames.pushXNextPageKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.currentPage.remove(),this.nextPage.css({animation:"",transform:this.initialTransform})},Animation}angular.module("core").factory("PushYAnimation",PushYAnimation),PushYAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function SlideNFadeAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing,type){AbstractPageAnimation.apply(this,arguments),this.type=type||"right"}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.prepareAnimationContainer=function(){return this.currentPage.css({opacity:"1",transform:"".concat(this.initialTransform," translateX(0)")}),this.container.append(this.currentPage),this.currentPage},Animation.prototype.onAnimationInit=function(){var width=this.getCurrentPageWidth();return AbstractPageAnimation.prototype.onAnimationInit.call(this),{keyframes:{from:{opacity:"1",transform:"".concat(this.initialTransform," translateX(0)")},to:{opacity:"0",transform:"".concat(this.initialTransform," translateX(").concat("right"===this.type?width:-width,"px)")}}}},Animation.prototype.startAnimation=function(animationNames){this.currentPage.css({animation:"".concat(animationNames.keyframes," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.currentPage.remove()},Animation}angular.module("core").factory("SlideNFadeAnimation",SlideNFadeAnimation),SlideNFadeAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function SlideXAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing,type){AbstractPageAnimation.apply(this,arguments),this.type=type||"right"}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.prepareAnimationContainer=function(){return this.nextPage.css({transform:"".concat(this.initialTransform," translateX(").concat(this.getCurrentPageWidth(this.is("right")),"px)")}),this.container.prepend(this.currentPage),this.nextPage},Animation.prototype.onAnimationInit=function(){return AbstractPageAnimation.prototype.onAnimationInit.call(this),{slideXNextPageKeyFrames:{from:{transform:"".concat(this.initialTransform," translateX(").concat(this.getCurrentPageWidth(this.is("right")),"px)")},to:{transform:"".concat(this.initialTransform," translateX(0)")}},slideXCurrentPageKeyFrames:{from:{transform:"".concat(this.initialTransform," translateX(0)")},to:{transform:"".concat(this.initialTransform," translateX(").concat(this.is("right")?"10%":"-10%",")")}}}},Animation.prototype.startAnimation=function(animationNames){this.nextPage.css({animation:"".concat(animationNames.slideXNextPageKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)}),this.currentPage.css({animation:"".concat(animationNames.slideXCurrentPageKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.currentPage.remove(),this.nextPage.css({animation:"",transform:this.initialTransform})},Animation}angular.module("core").factory("SlideXAnimation",SlideXAnimation),SlideXAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function SlideYAnimation(AbstractPageAnimation){function Animation(container,duration,delay,easing,type){AbstractPageAnimation.apply(this,arguments),this.type=type||"up"}return((Animation.prototype=Object.create(AbstractPageAnimation.prototype)).constructor=Animation).prototype.prepareAnimationContainer=function(){return"up"===this.type?(this.nextPage.css({transform:"".concat(this.initialTransform," translateY(").concat(this.getCurrentPageHeight(),"px)")}),this.container.prepend(this.currentPage),this.nextPage):(this.currentPage.css({transform:"".concat(this.initialTransform," translateY(0)")}),this.container.append(this.currentPage),this.currentPage)},Animation.prototype.onAnimationInit=function(){return AbstractPageAnimation.prototype.onAnimationInit.call(this),{slideYKeyFrames:"up"===this.type?{from:{transform:"".concat(this.initialTransform," translateY(").concat(this.getCurrentPageHeight(),"px)")},to:{transform:"".concat(this.initialTransform," translateY(0)")}}:{from:{transform:"".concat(this.initialTransform," translateY(0)")},to:{transform:"".concat(this.initialTransform," translateY(").concat(this.getCurrentPageHeight(),"px)")}}}},Animation.prototype.startAnimation=function(animationNames){("up"===this.type?this.nextPage:this.currentPage).css({animation:"".concat(animationNames.slideYKeyFrames," ").concat(this.duration,"ms ").concat(this.easing)})},Animation.prototype.onAnimationEnd=function(){AbstractPageAnimation.prototype.onAnimationEnd.call(this),this.currentPage.remove(),this.nextPage.css({animation:"",transform:this.initialTransform})},Animation}angular.module("core").factory("SlideYAnimation",SlideYAnimation),SlideYAnimation.$inject=["AbstractPageAnimation"]}(),function(){"use strict";function annotationsListCtrl($rootScope,$scope,$element,$window,$timeout,Engine){var page,onChangePageOff,pageLoadOff,vm=this,TIMEOUT_DELAY=10,ANNOTATION_OFFSET_TOP=34,PIN_ID_PREFIX="doc-";function initPages(){page&&(page.off($window.uxpinEngine.Page.Events.ANNOTATION_ELEMENT_HIGHLIGHTED,delayedOnHover),page.off($window.uxpinEngine.Page.Events.ANNOTATION_ELEMENT_SELECTED,onSelect)),(page=Engine.getPage()).on($window.uxpinEngine.Page.Events.ANNOTATION_ELEMENT_HIGHLIGHTED,delayedOnHover),page.on($window.uxpinEngine.Page.Events.ANNOTATION_ELEMENT_SELECTED,onSelect)}function onDestroy(){onChangePageOff(),pageLoadOff&&pageLoadOff(),page.off($window.uxpinEngine.Page.Events.ANNOTATION_ELEMENT_HIGHLIGHTED,delayedOnHover),page.off($window.uxpinEngine.Page.Events.ANNOTATION_ELEMENT_SELECTED,onSelect)}function delayedOnHover(data){$timeout(function(){!function(data){data&&data.id?vm.hoveredElement=data.id:vm.hoveredElement=null}(data)},TIMEOUT_DELAY)}function hasBlockedHover(annotation){return annotation.idElement===vm.blockedHover}function isPinnedToElement(annotation){return annotation.idElement}function isSelected(annotation){return annotation.idElement===vm.selectedAnnotation}function onChangePage(){vm.blockedHover=null,vm.hoveredElement=null,vm.selectedAnnotation=null,vm.selectedPreviously=null}function onSelect(data){var el;data&&data.id?(data=data.id,el=$element[0].querySelector("#".concat(PIN_ID_PREFIX).concat(data)),vm.selectedAnnotation=data,scrollToElement(el,ANNOTATION_OFFSET_TOP,!1)):vm.selectedAnnotation=null}function scrollToElement(el,offsetTop,scrollCanvas){if(el&&!function(el,offsetTop,scrollCanvas){offsetTop=(el=el.getBoundingClientRect()).top>=offsetTop&&el.bottom<=window.innerHeight;return scrollCanvas?(scrollCanvas=document.getElementById("canvas-wrapper").getBoundingClientRect(),el=el.left>=scrollCanvas.left&&el.right<=scrollCanvas.width,offsetTop&&el):offsetTop}(el,offsetTop,scrollCanvas)){if(!scrollCanvas)return el.scrollIntoView();var offsetTop=el.getBoundingClientRect(),scrollCanvas=document.getElementById("canvas-wrapper"),el=scrollCanvas.getBoundingClientRect(),ngCanvasRect=scrollCanvas.querySelector(".ng-canvas").getBoundingClientRect(),elPositionY=offsetTop.top+offsetTop.height/2,offsetTop=offsetTop.left+offsetTop.width/2,elPositionY=elPositionY-ngCanvasRect.top-el.height/2,offsetTop=offsetTop-ngCanvasRect.left-el.width/2;scrollCanvas.scrollTop=elPositionY,scrollCanvas.scrollLeft=offsetTop}}vm.idPrefix=PIN_ID_PREFIX,vm.blockedHover=null,vm.hoveredElement=null,vm.selectedAnnotation=null,vm.selectedPreviously=null,vm.hasBlockedHover=hasBlockedHover,vm.isPinnedToElement=isPinnedToElement,vm.isSelected=isSelected,vm.isHovered=function(annotation){return annotation.idElement===vm.hoveredElement},vm.onMouseEnter=function(event,annotation){event.stopPropagation(),annotation.idElement&&(function(annotation){isSelected(annotation)?vm.blockedHover=annotation.idElement:vm.blockedHover=null}(annotation),Engine.setAnnotationHighlight(annotation.idElement,!hasBlockedHover(annotation)))},vm.onMouseLeave=function(event,annotation){event.stopPropagation(),annotation.idElement&&Engine.setAnnotationHighlight(annotation.idElement,!1)},vm.selectAnnotation=function(event,annotation){event.preventDefault();event=annotation.idElement;vm.selectedPreviously!==event&&Engine.setAnnotationSelection(vm.selectedPreviously,!1);isSelected(annotation)?(Engine.setAnnotationSelection(event,!1),vm.selectedAnnotation=null):(scrollToElement(document.querySelector(".ng-canvas [data-id='".concat(event,"']")),42,!0),Engine.setAnnotationSelection(vm.selectedAnnotation,!1),Engine.setAnnotationSelection(event,!0),vm.selectedAnnotation=event,vm.selectedPreviously=event)},onChangePageOff=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,onChangePage),initPages(),$scope.$on("$destroy",onDestroy),$window.useAntiFlicker&&(pageLoadOff=$rootScope.$on(PreviewEnums.ON_PAGE_LOADED,function(){initPages()}))}angular.module("documentation").directive("annotationsList",function(){return{restrict:"E",scope:{data:"="},templateUrl:"/scripts/modules/documentation/directives/annotationsList/annotationsList.html",controller:annotationsListCtrl,controllerAs:"vm",bindToController:!0}}),annotationsListCtrl.$inject=["$rootScope","$scope","$element","$window","$timeout","Engine"]}(),function(){"use strict";angular.module("experiment").controller("ExperimentController",["$rootScope","$scope","$state","$timeout","$window","LiveShareService","UsabilityTestService","ProjectsService","PagesService","UsersService","Settings","editorSocket","socket","deviceDetectorHelper","AssignHelper","Engine","PageExitService","ApprovalsService","PreviewNavigation","FeatureToggler","hotkeys","_","uxpinSharedComponents",function($rootScope,$scope,$state,$timeout,$window,LiveShareService,UsabilityTestService,ProjectsService,PagesService,UsersService,Settings,editorSocket,socket,deviceDetectorHelper,AssignHelper,Engine,PageExitService,ApprovalsService,PreviewNavigation,FeatureToggler,hotkeys,_,uxpinSharedComponents){ApprovalsService.getIsActive()&&ApprovalsService.updateSeenAt();var USER_AGENT=navigator.userAgent;$scope.PREVIEW_MODES=PreviewNavigation.PREVIEW_MODES,$scope.PREVIEW_PANELS=PreviewNavigation.PREVIEW_PANELS,$scope.MAIN_PANELS=PreviewNavigation.MAIN_PANELS,$scope.USER_AGENT=navigator.userAgent,$scope.isModeActive=PreviewNavigation.isModeActive,$scope.isPanelVisible=PreviewNavigation.isPanelVisible,$scope.isPanelExpanded=PreviewNavigation.isPanelExpanded,$scope.browser=uxpinSharedComponents.getBrowserName(USER_AGENT),$scope.OS=uxpinSharedComponents.getOS(USER_AGENT),$scope.leftPanelVisible=!1,$scope.rightPanelVisible=!1,$scope.tasksVisible=!1,$scope.specificationVisible=!1,$scope.panelFadeIn=!1,$scope.sitemapFadeIn=!1,$scope.specificationFadeIn=!1,$scope.isVisible=!1,$scope.breakpointsVisible=!ProjectsService.isDocument(),$scope.breakpoints=[],$scope.breadcrumbsVisible=!1,$scope.isLiveSession=!1,$scope.isUsabilityTestingSession=!1,$scope.dragging=!1,$scope.isLoading=!0,$scope.isParticipant=!1,$scope.isCommentsEnabled=!Settings.disableComments&&!ApprovalsService.getIsActive(),$scope.isAssignmentActive=AssignHelper.isAssignmentActive(),$scope.showCrosshairCursor=!1,$scope.isAppViewAvailable=deviceDetectorHelper.isAppViewAvailable(),$scope.isSpecModeFeature=FeatureToggler.specMode,$scope.isDocumentationModeFeature=FeatureToggler.documentationMode,$scope.canShowSpecMode=!1,$scope.canShowDocumentationMode=!1,$scope.keyDown=function(e){8!==e.which||/INPUT|SELECT|TEXTAREA/i.test(e.target.tagName)&&!e.target.disabled&&!e.target.readOnly||e.preventDefault(),$rootScope.$emit("keyDown",e)},$rootScope.$on(PreviewEnums.LOADING,function(e,value){$scope.isLoading=value}),$rootScope.$on(PreviewEnums.ON_MODE_CHANGED,function(e){$scope.isCommentsEnabled=!Settings.disableComments&&!ApprovalsService.getIsActive()}),$rootScope.$on(PreviewEnums.FEATURES_AVAILABILITY,function(e,features){$scope.canShowDocumentationMode=features.documentation,$scope.canShowSpecMode=features.specification});$scope.$watchCollection(function(){return[PreviewNavigation.isLeftPanelVisible(),PreviewNavigation.isRightPanelVisible()]},function(val){$scope.leftPanelVisible=val[0],$scope.rightPanelVisible=val[1]}),uxpinSharedComponents.setDesktopAppLoadedClassName()}])}(),function(){"use strict";function blurDataCtrl(){}angular.module("specification").directive("blurData",function(){return{restrict:"E",scope:{blur:"="},templateUrl:"/scripts/modules/specification/directives/blurData/blurData.html",controller:blurDataCtrl,controllerAs:"vm",bindToController:!0}}),blurDataCtrl.$inject=[]}(),function(){"use strict";function borderDataCtrl(_,$scope){}angular.module("specification").directive("borderData",function(){return{restrict:"E",scope:{border:"=",shouldShowBorder:"=",shouldShowBorderRadius:"=",isBorderRadiusSet:"="},templateUrl:"/scripts/modules/specification/directives/borderData/borderData.html",controller:borderDataCtrl,controllerAs:"vm",bindToController:!0}}),borderDataCtrl.$inject=["_","$scope"]}(),function(){"use strict";function canvasDataCtrl(_,BreakpointsService,GuidesService,Engine,desktopApp,$scope){var vm=this;vm.SPEC_OBJECT_TYPES=ElementEnums.TYPE,vm.areGuidesVisible=Engine.areGuidesVisible(),$scope.$watch(Engine.areGuidesVisible,function(){vm.areGuidesVisible=Engine.areGuidesVisible()}),vm.getSizeName=function(width,height){var data=_.find(BreakpointsService.breakpointsMap,function(breakpoint){return breakpoint.width===width&&breakpoint.height===height});return data?data.name:"Custom"},vm.shouldDisplayOpacity=function(){return vm.type!==vm.SPEC_OBJECT_TYPES.CANVAS&&vm.type!==vm.SPEC_OBJECT_TYPES.CODE_COMPONENT},vm.shouldDisplayBlendingMode=function(){return"normal"!==vm.mixBlendMode.toLowerCase()},vm.areGuidesAvailable=function(){return GuidesService.areGuidesAvailable()},vm.setGuides=function(isVisible){GuidesService.setGuides(isVisible),desktopApp.dispatchPageOptionsChangedEvent({areGuidesAvailable:GuidesService.areGuidesAvailable(),showGrid:Engine.getEnableGridOption(),showGuides:isVisible})}}angular.module("specification").directive("canvasData",function(){return{restrict:"E",scope:{width:"=",height:"=",left:"=",top:"=",name:"=",fixed:"=",type:"=",angle:"=",opacity:"=",mixBlendMode:"="},templateUrl:"/scripts/modules/specification/directives/canvasData/canvasData.html",controller:canvasDataCtrl,controllerAs:"vm",bindToController:!0}}),canvasDataCtrl.$inject=["_","BreakpointsService","GuidesService","Engine","desktopApp","$scope"]}(),function(){"use strict";function codeExportCtrl($scope,_,$document,$window,PrettierService,MarketingService,SpecificationService,uxpinSharedComponents,Engine,PagesService){var vm=this;vm.downloadProject=function(e){e.preventDefault();var zip=new JSZip;return _.forEach(vm.value.files,function(value,path){var path=path.split("/"),file=path.pop(),lastFolder=zip;_.forEach(path,function(folder){lastFolder=lastFolder.folder(folder)}),lastFolder.file(file,value)}),"javascript"===vm.value.stackblitzOptions.template&&zip.file("package.json",["{",'  "name": "uxpin-code-export",','  "version": "1.0.0",','  "dependencies": {',"".concat(getFormattedDependencies(vm.value.dependencies,_)),"  },",'  "scripts": {','    "start": "react-scripts start",','    "build": "react-scripts build",','    "test": "react-scripts test --env=jsdom",','    "eject": "react-scripts eject"',"  },",'  "devDependencies": {','    "react-scripts": "latest"',"   }","}"].join("\n")),zip.generateAsync({type:"blob"}).then(function(blob){!function(name,blob){var lnk=$document[0].createElement("a"),url=URL.createObjectURL(blob);lnk.download=name,lnk.setAttribute("target","_blank"),lnk.href=url,(blob=$document[0].createEvent("MouseEvents")).initEvent("click",!0,!0),lnk.dispatchEvent(blob),$document[0].body.appendChild(lnk),$window.setTimeout(function(){URL.revokeObjectURL(url),$document[0].body.removeChild(lnk)},2e3)}("app.zip",blob)})},vm.handleCopyAllToClipboard=function(e){e.preventDefault(),MarketingService.sendTrackingEvent(MarketingService.TRACKING_EVENT_COPYALL),MarketingService.openTypeformIfNotSeen()},vm.onClick=function(){var _ref11=_asyncToGenerator(_regeneratorRuntime().mark(function _callee4(e){var hash;return _regeneratorRuntime().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(MarketingService.sendTrackingEvent(MarketingService.TRACKING_EVENT_OPEN_STACKBLITZ),e.preventDefault(),MarketingService.openTypeformIfNotSeen())return _context4.abrupt("return",null);_context4.next=4;break;case 4:if(uxpinSharedComponents.isDesktopApp)return hash=$window.ApplicationConfiguration.project.hash,$window.electronAPI.openExternalLink("https://".concat($window.location.host,"/").concat(hash,"#/pages/").concat(PagesService.currentPageId,"/specification/no-panels?elementId=").concat(vm.elementPath)),_context4.abrupt("return");_context4.next=8;break;case 8:SpecificationService.openStackblitz(vm.value,!0);case 9:case"end":return _context4.stop()}},_callee4)}));return function(_x4){return _ref11.apply(this,arguments)}}(),$scope.$watch("vm.value.mainFileName",function(value){var extension=value.split(".").pop();PrettierService["html"===extension?"formatHTML":"format"](vm.value.files[value],!1).then(function(formattedValue){vm.copyValue=formattedValue})})}angular.module("specification").directive("codeExport",function(){return{restrict:"E",scope:{value:"=",elementPath:"="},templateUrl:"/scripts/modules/specification/directives/codeExport/codeExport.html",controller:codeExportCtrl,controllerAs:"vm",bindToController:!0}}),codeExportCtrl.$inject=["$scope","_","$document","$window","PrettierService","MarketingService","SpecificationService","uxpinSharedComponents","Engine","PagesService"]}(),function(){"use strict";function colorsListCtrl(_,$scope,tinycolor,ntc,Color){var vm=this;vm.MODES=Color.COLOR_TYPES,vm.TYPES=ElementEnums.TYPE,vm.offsetColorType={bottom:{x:0,y:10}},vm.selectedDesignSystem=null,vm.noMatchCopy="Don't match with design system",vm.selectedMode=Color.getSelectedColorType(),vm.name=Color.getName,vm.isRgbaMode=function(){return vm.selectedMode===vm.MODES.RGBA},vm.isHexMode=function(){return vm.selectedMode===vm.MODES.HEX},vm.setMode=function(event,mode){event.preventDefault(),vm.selectedMode=mode,Color.setSelectedColorType(mode)},vm.isSelectedDesignSystem=function(system){return vm.selectedDesignSystem===system},vm.setDesignSystem=function($event,system){vm.selectedDesignSystem=system,Color.setLibraryColors(system?system.libraryHash:null)},vm.isReadable=Color.isReadable,vm.isBright=Color.isBright,vm.getRgbaValues=Color.getRgbaString,vm.isElement=function(){return vm.type===vm.TYPES.ELEMENT},vm.isGroup=function(){return vm.type===vm.TYPES.GROUP},vm.getClipboardText=function(color){return color.gradient||(vm.isHexMode()?color.hex:color.rgba)},vm.designSystems&&vm.designSystems.length&&vm.setDesignSystem(null,vm.designSystems[0]),$scope.$watch("vm.colors",function(colors){_.isArray(colors)&&(vm.isElement()?vm.elementColors=_.uniqWith(colors,function(a,b){return a.token&&b.token?a.token.idToken===b.token.idToken:!(a.token&&!b.token||!a.token&&b.token)&&a.hex===b.hex&&a.alpha===b.alpha&&a.type===b.type}):vm.sortedColors=_.clone(colors).sort(function(a,b){return tinycolor(b.hex).getBrightness()-tinycolor(a.hex).getBrightness()}))})}angular.module("specification").directive("colorsList",function(){return{restrict:"E",scope:{colors:"=",gradients:"=",designSystems:"=",canvasBg:"=",backgroundColor:"=?",readabilityLevel:"=?",type:"="},templateUrl:"/scripts/modules/specification/directives/colorsList/colorsList.html",controller:colorsListCtrl,controllerAs:"vm",bindToController:!0}}),colorsListCtrl.$inject=["_","$scope","tinycolor","ntc","Color"]}(),function(){"use strict";function componentMetadataCtrl(){this.onClick=function(e){e.preventDefault()}}angular.module("specification").directive("componentMetadata",function(){return{restrict:"E",scope:{libraryName:"=",repositoryPointerName:"=",metadata:"="},templateUrl:"/scripts/modules/specification/directives/componentMetadata/componentMetadata.html",controller:componentMetadataCtrl,controllerAs:"vm",bindToController:!0}}),componentMetadataCtrl.$inject=["$scope"]}(),function(){"use strict";function contentDataCtrl($scope){this.onClick=function(e){e.preventDefault()}}angular.module("specification").directive("contentData",function(){return{restrict:"E",scope:{valueTrimmed:"=",isTextList:"="},templateUrl:"/scripts/modules/specification/directives/contentData/contentData.html",controller:contentDataCtrl,controllerAs:"vm",bindToController:!0}}),contentDataCtrl.$inject=["$scope"]}(),function(){"use strict";function cssCodeCtrl($scope){var vm=this;vm.options={value:vm.value},vm.onClick=function(e){e.preventDefault()},$scope.$watch("vm.value",function(value){vm.options={value:value}})}angular.module("specification").directive("cssCode",function(){return{restrict:"E",scope:{value:"="},templateUrl:"/scripts/modules/specification/directives/cssCode/cssCode.html",controller:cssCodeCtrl,controllerAs:"vm",bindToController:!0}}),cssCodeCtrl.$inject=["$scope"]}(),function(){"use strict";function dependenciesCtrl($scope,MarketingService){var vm=this;vm.options={mode:"jsx",theme:"uxpin-readonly-jsx",value:vm.value},vm.onClick=function(e){e.preventDefault(),MarketingService.sendTrackingEvent(MarketingService.TRACKING_EVENT_COPYALL),MarketingService.openTypeformIfNotSeen()},vm.isExpanded=!1,vm.toggleExpand=function(e){e.preventDefault(),vm.isExpanded=!vm.isExpanded},$scope.$watch("vm.value",function(value){vm.options=_.extend({},vm.options,{value:value})})}angular.module("specification").directive("dependencies",function(){return{restrict:"E",scope:{value:"="},templateUrl:"/scripts/modules/specification/directives/dependencies/dependencies.html",controller:dependenciesCtrl,controllerAs:"vm",bindToController:!0}}),dependenciesCtrl.$inject=["$scope","MarketingService"]}(),function(){"use strict";function designSystemCtrl($scope,UXPinService){var vm=this;$scope.$watch("vm.documentation",function(documentation){vm.documentation=documentation,vm.designSystemURL=vm.documentation.hasLibraryDesignSystem?UXPinService.getDesignSystemURL(vm.documentation.libraryHash):null})}angular.module("specification").directive("designSystem",function(){return{restrict:"E",scope:{documentation:"="},templateUrl:"/scripts/modules/specification/directives/designSystem/designSystem.html",controller:designSystemCtrl,controllerAs:"vm",bindToController:!0}}),designSystemCtrl.$inject=["$scope","UXPinService"]}(),function(){"use strict";angular.module("specification").directive("documentationText",function(){return{restrict:"E",scope:{content:"@"},link:function(scope,el,attrs){attrs.$observe("content",function(newValue){var content,TextEditorComponent=uxpinSharedComponents.React.createFactory(uxpinSharedComponents.RichTextEditor);try{content=angular.fromJson(decodeURIComponent(newValue))}catch(e){content=newValue}uxpinSharedComponents.ReactDOM.unmountComponentAtNode(el[0]),uxpinSharedComponents.ReactDOM.render(TextEditorComponent({value:content,readOnly:!0}),el[0])})}}})}(),function(){"use strict";function fontsListCtrl(_,$scope,Font,UnitService,$window){var vm=this;function mapFontSize(size){return vm.unit(parseFloat(size),!0)}function manageFonts(fonts){var fontsArray;_.isArray(fonts)&&(fontsArray=[],vm.isElement()?vm.elementFonts=_.uniqWith(fonts.map(function(font){return _.extend({},font,{variant:{name:font.localFontData.variant||Font.getVariantName(font.fontData.fvd,font.fontData.displayVariant),shorthand:font.localFontData.postscriptName||font.fontData.fvd},letterSpacing:"normal"===font.letterSpacing?0:font.letterSpacing,textAlign:"start"===font.textAlign?"left":font.textAlign})}),function(a,b){return a=_.omit(a,["color","textContent"]),b=_.omit(b,["color","textContent"]),_.isEqual(a,b)}):(_.forEach(fonts,function(font){fontsArray.push({fontFamily:font.fontFamily,fontData:font.fontData,fontName:font.fontName.replace(/['"]+/g,""),sizes:font.sizes.map(mapFontSize).sort(Font.getCompareFontSizeFn()),variants:font.variants.map(function(variantsMap,variant){return{name:Font.getVariantName(variant,variantsMap?variantsMap[variant]:null),shorthand:variant}}.bind(null,font.displayVariants)).sort(Font.getCompareVariantsFn()),weights:font.weights,italics:font.italics})}),vm.getFontFamily=Font.getFontFamily,vm.getFontStyles=Font.getFontStyles,vm.isGoogleFont=function(fontData){return $window.uxpinEngine.Page.utils.GoogleFontLoader.isGoogleFontCache[(fontData.family||"").toLowerCase()]},vm.sortedFonts=_.sortBy(fontsArray,"fontName")))}vm.TYPES=ElementEnums.TYPE,vm.unit=UnitService.convertPx,vm.isElement=function(){return vm.type===vm.TYPES.ELEMENT},vm.isBold=Font.isBold,vm.isItalic=Font.isItalic,vm.hasUnderlineDecoration=Font.hasUnderlineDecoration,vm.hasLineThroughDecoration=Font.hasLineThroughDecoration,vm.getTransform=Font.getTransform,vm.FONT_TYPES=Font.FONT_TYPES,vm.areTextStylesSet=function(font){return vm.hasUnderlineDecoration(font)||vm.hasLineThroughDecoration(font)||vm.isItalic(font)||vm.isBold(font)},$scope.$watch("vm.fonts",manageFonts),$scope.$watch(UnitService.loadMode,function(){return manageFonts(vm.fonts)})}angular.module("specification").directive("fontsList",function(){return{restrict:"E",scope:{fonts:"=",type:"="},templateUrl:"/scripts/modules/specification/directives/fontsList/fontsList.html",controller:fontsListCtrl,controllerAs:"vm",bindToController:!0}}),fontsListCtrl.$inject=["_","$scope","Font","UnitService","$window"]}(),function(){"use strict";function functionsCtrl($scope,PrettierService){var vm=this;vm.options={mode:"jsx",theme:"uxpin-readonly-jsx",value:vm.value},vm.onClick=function(e){e.preventDefault()},vm.isExpanded=!1,vm.toggleExpand=function(e){e.preventDefault(),vm.isExpanded=!vm.isExpanded},$scope.$watch("vm.value",function(value){PrettierService.format(value,!1).then(function(formattedValue){vm.options=_.extend({},vm.options,{value:formattedValue})})})}angular.module("specification").directive("functions",function(){return{restrict:"E",scope:{value:"="},templateUrl:"/scripts/modules/specification/directives/functions/functions.html",controller:functionsCtrl,controllerAs:"vm",bindToController:!0}}),functionsCtrl.$inject=["$scope","PrettierService"]}(),function(){"use strict";function gradientCtrl(_,$scope,Color,tinycolor,CssService){var vm=this;vm.MODES=Color.COLOR_TYPES,vm.isCopiedInfoVisible=[!1,0],vm.isRgbaMode=function(){return vm.mode===vm.MODES.RGBA},vm.isHexMode=function(){return vm.mode===vm.MODES.HEX},vm.gradientName=Color.getGradientName,vm.colorName=Color.getName,vm.getRgbaValues=function(color){return Color.getRgbaValues(color).join(",")},vm.isBright=Color.isBright,vm.extractGradientData=function(gradient){return CssService.extractGradientData(gradient)},vm.isAngleValid=function(angle){angle=parseInt(angle);return!_.isNaN(angle)&&_.isNumber(angle)},$scope.$watch("vm.mode",function(mode){vm.gradientData&&(vm.gradientCssStyle=CssService.getGradientCssStyle(mode,vm.gradientData))}),$scope.$watch("vm.gradient",function(gradient){gradient&&(vm.gradientData=vm.extractGradientData(gradient),vm.gradientCssStyle=CssService.getGradientCssStyle(vm.mode,vm.gradientData))})}angular.module("specification").directive("gradient",function(){return{restrict:"E",scope:{gradient:"=",mode:"=",skipCopyInfo:"=?"},templateUrl:"/scripts/modules/specification/directives/gradient/gradient.html",controller:gradientCtrl,controllerAs:"vm",bindToController:!0}}),gradientCtrl.$inject=["_","$scope","Color","tinycolor","CssService"]}(),function(){"use strict";function gridDataCtrl(_,Engine,$state,desktopApp,GuidesService,$scope){var vm=this;function shouldValueBeAuto(value){return""===value||null===value}vm.isGridVisible=Engine.isGridVisible(vm.gridType),vm.getColumnWidth=function(value){return null!==value?value:Engine.getGridComputedColumnWidth(vm.gridType)},vm.getGridValue=function(value){if(shouldValueBeAuto(value))return"auto";return value},vm.shouldValueBeAuto=shouldValueBeAuto,vm.setGridVisibility=function(isGridVisible){Engine.setGridVisibility(vm.gridType,isGridVisible),isGridVisible&&desktopApp.dispatchPageOptionsChangedEvent({areGuidesAvailable:GuidesService.areGuidesAvailable(),showGrid:isGridVisible,showGuides:Engine.areGuidesVisible()})},$scope.$watch(function(){return Engine.isGridVisible(vm.gridType)},function(){vm.isGridVisible=Engine.isGridVisible(vm.gridType)})}angular.module("specification").directive("gridData",function(){return{restrict:"E",scope:{sectionTitle:"=",gridType:"=",grid:"="},templateUrl:"/scripts/modules/specification/directives/gridData/gridData.html",controller:gridDataCtrl,controllerAs:"vm",bindToController:!0}}),gridDataCtrl.$inject=["_","Engine","$state","desktopApp","GuidesService","$scope"]}(),function(){"use strict";function headerCanvasCtrl(){}angular.module("specification").directive("headerCanvas",function(){return{restrict:"E",scope:{currentPageName:"=",lastUpdatedDate:"=",lastUpdatedDateTitle:"="},templateUrl:"/scripts/modules/specification/directives/headerCanvas/headerCanvas.html",controller:headerCanvasCtrl,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function headerDesignSystemCtrl(){}angular.module("specification").directive("headerDesignSystem",function(){return{restrict:"E",scope:{element:"=",documentation:"=",selectElement:"="},templateUrl:"/scripts/modules/specification/directives/headerDesignSystem/headerDesignSystem.html",controller:headerDesignSystemCtrl,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function headerGroupCtrl(){}angular.module("specification").directive("headerGroup",function(){return{restrict:"E",scope:{name:"=",type:"=",class:"=",hasParent:"=",elementParent:"=",elementParentType:"=",elementParentTypeClass:"=",selectElement:"=",isMultistate:"=",selectedState:"=",changeState:"=",states:"="},templateUrl:"/scripts/modules/specification/directives/headerGroup/headerGroup.html",controller:headerGroupCtrl,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function headerElementCtrl(){}angular.module("specification").directive("headerElement",function(){return{restrict:"E",scope:{name:"=",class:"=",hasParent:"=",elementParent:"=",elementParentType:"=",elementParentTypeClass:"=",selectElement:"=",isMultistate:"=",selectedState:"=",changeState:"=",states:"="},templateUrl:"/scripts/modules/specification/directives/headerElement/headerElement.html",controller:headerElementCtrl,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function jsxCodeCtrl($scope,PrettierService){var vm=this;vm.options={mode:"jsx",theme:"uxpin-readonly-jsx",value:vm.value},vm.onClick=function(e){e.preventDefault()},vm.isExpanded=!1,vm.toggleExpand=function(e){e.preventDefault(),vm.isExpanded=!vm.isExpanded},$scope.$watch("vm.value",function(value){("true"===vm.isCss?PrettierService.formatCSS(value):PrettierService.formatHTML(value)).then(function(formattedValue){vm.options=_.extend({},vm.options,{value:formattedValue})})})}angular.module("specification").directive("htmlCode",function(){return{restrict:"E",scope:{isCss:"@",header:"@header",value:"="},templateUrl:"/scripts/modules/specification/directives/htmlCode/htmlCode.html",controller:jsxCodeCtrl,controllerAs:"vm",bindToController:!0}}),jsxCodeCtrl.$inject=["$scope","PrettierService"]}(),function(){"use strict";function assetBackgroundCtrl(_,$scope,BackgroundService){var vm=this;vm.position,vm.positionClass,vm.behaviour,$scope.$watch("vm.background",function(background){!function(background){var positionXY,repeat,posX,posY;_.isEmpty(background)||_.isEmpty(background.position)||(positionXY=background.position.split(" "),repeat=background.repeat,background=background.size,posX=positionXY[0],posY=positionXY[1],vm.position=_.isEqual(posX,posY)?posX:_.reverse(positionXY).join(" "),vm.positionClass=BackgroundService.getPositionClass(posX,posY),vm.behaviour=BackgroundService.getBehaviour(repeat,background))}(background)})}angular.module("specification").directive("assetBackground",function(){return{restrict:"E",scope:{background:"="},templateUrl:"/scripts/modules/specification/directives/imagesList/assetBackground.html",controller:assetBackgroundCtrl,controllerAs:"vm",bindToController:!0}}),assetBackgroundCtrl.$inject=["_","$scope","BackgroundService"]}(),function(){"use strict";function imageMetaCtrl(_,$scope,$q,ImageService){var vm=this,promises=[];function setMetadata(size,width,height){vm.isLoaded=!0,vm.imageMeta={size:"".concat(Math.ceil(size/1024),"kB"),width:"".concat(Math.round(width),"px"),height:"".concat(Math.round(height),"px")}}vm.imageMeta={},vm.isLoaded=!1,vm.image&&("url"===vm.image.type?(promises.push(vm.image.width&&vm.image.height?{width:vm.image.width,height:vm.image.height}:ImageService.getImageDimensions(vm.image.path)),vm.withoutSize||promises.push(ImageService.getImageSize(vm.image.path)),$q.all(promises).then(function(data){setMetadata(data[1]||0,data[0].width,data[0].height)})):"svg"===vm.image.type&&setMetadata(vm.image.size,vm.image.width,vm.image.height))}angular.module("specification").directive("imageMeta",function(){return{restrict:"E",scope:{image:"=",withoutSize:"@?"},templateUrl:"/scripts/modules/specification/directives/imagesList/imageMeta.html",controller:imageMetaCtrl,controllerAs:"vm",bindToController:!0}}),imageMetaCtrl.$inject=["_","$scope","$q","ImageService"]}(),function(){"use strict";function imagesListCtrl(_,$scope,exportImage,$q){var vm=this,forbiddenImages=["/p/imagepixel.png","/p/elements/video/"],currentIteration=(vm.exportType=exportImage.IMAGE_TYPES.PNG,vm.scale=1,vm.currentImage=null,0);vm.exportWeb=function(event,image){event.preventDefault(),exportImage.exportWeb(image).then(function(blob){exportImage.downloadBlob("web.zip",blob)})},vm.exportIOS=function(event,image){event.preventDefault(),exportImage.exportIOS(image).then(function(blob){exportImage.downloadBlob("ios.zip",blob)})},vm.exportAndroid=function(event,image){event.preventDefault(),exportImage.exportAndroid(image).then(function(blob){exportImage.downloadBlob("android.zip",blob)})},vm.download=function(event,image){event.preventDefault(),exportImage.export(image,vm.scale,vm.exportType).then(function(data){exportImage.downloadBlob("".concat(image.file.name,".").concat(vm.exportType),data)})},vm.downloadOriginal=function(event,image){event.preventDefault(),exportImage.export(image,1,image.file.extension.toLowerCase(),!0).then(function(data){return exportImage.downloadBlob("".concat(image.file.name,".").concat(image.file.extension),data)})},$scope.$watch("vm.images",function(images,nextImages){if(function(images,nextImages){images=_.map(images,function(image){return _.pick(image,["width","height","path"])}),nextImages=_.map(nextImages,function(image){return _.pick(image,["width","height","path"])});return _.isEqual(images,nextImages)}(images,nextImages))return null;vm.imagesList=_.reduce(images,function(data,image){return function(image){return forbiddenImages.some(function(forbiddenImage){return-1!==image.path.indexOf(forbiddenImage)})}(image)?data:data.concat(image)},[]),currentIteration++,function(images,iteration){$q.all(_.map(images,function(image){return image.file.extension.toLowerCase()!==exportImage.IMAGE_TYPES.SVG?Object.assign({},image):exportImage.export(image,1,image.file.extension).then(function(preview){return Object.assign({},image,{preview:URL.createObjectURL(preview)})})})).then(function(images){iteration===currentIteration&&(vm.imagesList=images)})}(vm.imagesList,currentIteration)}),$scope.$watch("vm.background",function(background){vm.background=background})}angular.module("specification").directive("imagesList",function(){return{restrict:"E",scope:{images:"=",background:"="},templateUrl:"/scripts/modules/specification/directives/imagesList/imagesList.html",controller:imagesListCtrl,controllerAs:"vm",bindToController:!0}}),imagesListCtrl.$inject=["_","$scope","exportImage","$q"]}(),function(){"use strict";function inspector(inspectorService,_,$timeout,$rootScope,Engine,UnitService,ElementService,$window){return{restrict:"E",scope:{},templateUrl:"/scripts/modules/specification/directives/inspector/inspector.html",link:function(scope,element){!function(scope,element,inspectorService,_,$timeout,$rootScope,Engine,UnitService,ElementService,$window){var currentSource,currentTarget,hoveredBox,hoveredBoxAncestor,selectedBoxAncestor,selectedBox,highlightedSelectedGroup,highlightedHoverdGroup,scrollTimeout,canvasWrapper,canvasContainer,removeRefreshEventListener,removeZoomChangeEventListener,removePageLoadEventListener,removeSourceChangedEventListener,removeTargetChangedEventListener,linesContainer=angular.element(element[0].querySelector(".lines-container")),boxesContainer=angular.element(element[0].querySelector(".boxes-container")),scale=Engine.getScale(),INSPECTOR_SOURCE_CHANGED=PreviewEnums.INSPECTOR_SOURCE_CHANGED,INSPECTOR_TARGET_CHANGED=PreviewEnums.INSPECTOR_TARGET_CHANGED,ON_PAGE_LOADED=PreviewEnums.ON_PAGE_LOADED,ON_ZOOM_CHANGE=PreviewEnums.ON_ZOOM_CHANGE,SPEC_MODE_REFRESH_ELEMENT_SELECTION=PreviewEnums.SPEC_MODE_REFRESH_ELEMENT_SELECTION,SPEC_MODE_RESET_ELEMENT_SELECTION=PreviewEnums.SPEC_MODE_RESET_ELEMENT_SELECTION;function init(){(canvasWrapper=document.getElementById("canvas-wrapper"))&&(clear(),angular.element(canvasWrapper).off("click",resetElementSelection),angular.element(canvasWrapper).on("click",resetElementSelection),canvasContainer=canvasWrapper.querySelector(".ng-canvas-container"))}function resetElementSelection(e){Engine.isSpecMode()&&"canvas-wrapper"===e.target.id&&$rootScope.$emit(SPEC_MODE_RESET_ELEMENT_SELECTION)}function onScroll(e){var source;Engine.isSpecMode()&&canvasWrapper.contains(e.target)&&((source=inspectorService.getSource())&&source.fixed||canvasWrapper.contains(e.target))&&(inspectorService.setSource(null),inspectorService.setTarget(null),scope.$apply(),$timeout.cancel(scrollTimeout),scrollTimeout=$timeout(function(){inspectorService.setSource(currentSource),inspectorService.setTarget(currentTarget)},100))}function createLineElement(){return angular.element("<div></div>")}function clear(){clearLines(),hoveredBox&&hoveredBox.remove(),hoveredBoxAncestor&&hoveredBoxAncestor.remove(),selectedBoxAncestor&&selectedBoxAncestor.remove(),selectedBox&&selectedBox.remove(),boxesContainer.html("")}function clearLines(){linesContainer.html("")}function findPoint(point,line){return line.pointType===point}function drawLines(data){clearLines();var lines=[],switchedLines=function(data){var switched={},bottom=_.find(data,findPoint.bind(this,inspectorService.POINT_TYPES.BOTTOM)),top=_.find(data,findPoint.bind(this,inspectorService.POINT_TYPES.TOP)),left=_.find(data,findPoint.bind(this,inspectorService.POINT_TYPES.LEFT)),data=_.find(data,findPoint.bind(this,inspectorService.POINT_TYPES.RIGHT));return bottom&&parseInt(bottom.size)<40&&data&&parseInt(data.size)<50&&(switched[bottom.pointType]=!0),bottom&&left&&!switched[bottom.pointType]&&parseInt(bottom.size)<40&&parseInt(left.size)<50&&(switched[left.pointType]=!0),bottom&&data&&switched[bottom.pointType]&&parseInt(bottom.size)<40&&parseInt(data.size)<50&&(switched[data.pointType]=!0),data&&top&&!switched[data.pointType]&&parseInt(top.size)<40&&parseInt(data.size)<50&&(switched[top.pointType]=!0),switched}(data);_.forEach(data,function(line){lines.push(function(type,size,left,top,isSwitched){var line;return parseInt(size)?((line=createLineElement()).addClass("distance-line"),line.addClass(type),line.append('<span class="value code">'.concat(UnitService.convertPx(parseInt(size)/scale),"</span>")),line.css({left:left,top:top}),isSwitched&&line.addClass("switch-value"),(type===inspectorService.LINE_TYPES.HORIZONTAL?line.css({width:size,height:"1px"}):line.css({height:size,width:"1px"}))[0].outerHTML):null}(line.type,line.size,line.left,line.top,switchedLines[line.pointType])),line.helper&&lines.push(function(type,size,left,top){var line;return parseInt(size)?((line=createLineElement()).addClass("distance-line-helper"),line.addClass(type),line.css({left:left,top:top}),(type===inspectorService.LINE_TYPES.HORIZONTAL?line.css({width:size,height:"1px"}):line.css({height:size,width:"1px"}))[0].outerHTML):null}(line.helper.type,line.helper.size,line.helper.left,line.helper.top))}),linesContainer.html(_.compact(lines).join(""))}function drawBox(boundingRect,className){var box;return boundingRect.isCanvasBoundingRect?null:((box=angular.element("<div></div>")).addClass(className),box.css({width:"".concat(boundingRect.width,"px"),height:"".concat(boundingRect.height,"px"),left:"".concat(boundingRect.x,"px"),top:"".concat(boundingRect.y,"px")}),box)}function getShiftData(el){var clippedAncestor,shiftData={};if(el)return el.fixed&&ElementService.canBeFixed(el)||ElementService.isAncestorFixed(el)?shiftData=(clippedAncestor=ElementService.getClippedAncestor(el))&&clippedAncestor.view.domElement?{x:(shiftData=getCanvasWrapperScrollPosition()).x-clippedAncestor.view.domElement.scrollLeft,y:shiftData.y-clippedAncestor.view.domElement.scrollTop}:getCanvasWrapperScrollPosition():el&&el.isCanvasBoundingRect||(shiftData=function getScrollPosition(el){var scrollPosition={x:0,y:0};if(!el||!el.parentNode)return scrollPosition;scrollPosition=mergeScrollPosition(scrollPosition,{x:-el.parentNode.scrollLeft,y:-el.parentNode.scrollTop});if(el.parentNode!==canvasContainer)return mergeScrollPosition(scrollPosition,getScrollPosition(el.parentNode));return{x:scrollPosition.x/scale,y:scrollPosition.y/scale}}(el.view.domElement)),shiftData}function getCanvasWrapperScrollPosition(){return canvasWrapper?{x:canvasWrapper.scrollLeft,y:canvasWrapper.scrollTop}:null}function mergeScrollPosition(oldScrollPosition,newScrollPosition){return _.mergeWith(oldScrollPosition,newScrollPosition,function(a,b){if(_.isNumber(a)&&_.isNumber(b))return a+b})}function getSourceBoundingRect(){var source=inspectorService.getSource();return inspectorService.getSourceBoundingRect(getShiftData(source))}function drawHoveredBox(boundingRect,eventSource){var group,opacityClass="",layerHoveredClass="";hoveredBox&&hoveredBox.remove(),hoveredBoxAncestor&&(hoveredBoxAncestor.remove(),highlightedHoverdGroup=null),boundingRect&&(currentTarget=inspectorService.getTarget(),(group=ElementService.getGroupAncestor(currentTarget))&&highlightedSelectedGroup!==group?(function(boundingRect){hoveredBoxAncestor=drawBox(boundingRect,"element-outline semi-transparent"),boxesContainer.append(hoveredBoxAncestor)}(inspectorService.getElementBoundingRect(group,getShiftData(group))),highlightedHoverdGroup=group):ElementService.isGroup(currentTarget)&&(opacityClass="semi-transparent"),eventSource===inspectorService.EVENT_SOURCES.LAYERS&&(layerHoveredClass="layer-hovered"),hoveredBox=drawBox(boundingRect,"element-outline hovered ".concat(opacityClass," ").concat(layerHoveredClass)),boxesContainer.append(hoveredBox))}function drawSelectedBox(boundingRect){var group;selectedBox&&selectedBox.remove(),selectedBoxAncestor&&(selectedBoxAncestor.remove(),highlightedSelectedGroup=null),boundingRect&&(currentSource=inspectorService.getSource(),(group=ElementService.getGroupAncestor(currentSource))&&(function(boundingRect){selectedBoxAncestor=drawBox(boundingRect,"element-outline semi-transparent"),boxesContainer.append(selectedBoxAncestor)}(inspectorService.getElementBoundingRect(group,getShiftData(group))),highlightedHoverdGroup===(highlightedSelectedGroup=group))&&hoveredBoxAncestor&&(hoveredBoxAncestor.remove(),highlightedHoverdGroup=null),selectedBox=drawBox(boundingRect,"element-outline selected"),boxesContainer.append(selectedBox))}function getTargetBoundingRect(){var target=inspectorService.getTarget();return inspectorService.getTargetBoundingRect(getShiftData(target))}function refreshSelection(){var target=inspectorService.getTarget(),source=inspectorService.getSource(),source=inspectorService.getLineAndHelpersData(getShiftData(source),getShiftData(target));scale=Engine.getScale(),source?(drawLines(source),drawSelectedBox(getSourceBoundingRect()),drawHoveredBox(getTargetBoundingRect())):clear()}$window.addEventListener("scroll",onScroll,!0),removeRefreshEventListener=$rootScope.$on(SPEC_MODE_REFRESH_ELEMENT_SELECTION,function(e,el){el&&inspectorService.setTarget(el),refreshSelection()}),removeZoomChangeEventListener=$rootScope.$on(ON_ZOOM_CHANGE,refreshSelection),removeSourceChangedEventListener=$rootScope.$on(INSPECTOR_SOURCE_CHANGED,function(){var boundingRect=getSourceBoundingRect();clearLines(),drawSelectedBox(boundingRect)}),removeTargetChangedEventListener=$rootScope.$on(INSPECTOR_TARGET_CHANGED,function(event,eventSource){var boundingRect=getTargetBoundingRect(),target=inspectorService.getTarget(),source=inspectorService.getSource();(source=inspectorService.getLineAndHelpersData(getShiftData(source),getShiftData(target)))?drawLines(source):clear(),drawHoveredBox(boundingRect,eventSource)}),scope.$watch(UnitService.loadMode,refreshSelection),init(),removePageLoadEventListener=$rootScope.$on(ON_PAGE_LOADED,init),element.on("$destroy",function(){$window.removeEventListener("scroll",onScroll,!0),angular.element(canvasWrapper).off("click",resetElementSelection),removePageLoadEventListener(),removeRefreshEventListener(),removeZoomChangeEventListener(),removeTargetChangedEventListener(),removeSourceChangedEventListener()})}(scope,element,inspectorService,_,$timeout,$rootScope,Engine,UnitService,ElementService,$window)}}}angular.module("specification").directive("inspector",inspector),inspector.$inject=["inspectorService","_","$timeout","$rootScope","Engine","UnitService","ElementService","$window"]}(),function(){"use strict";function interactionsCtrl(){this.areInteractionsAvailable=!1}angular.module("specification").directive("interactions",function(){return{restrict:"E",scope:{interactions:"="},templateUrl:"/scripts/modules/specification/directives/interactions/interactions.html",controller:interactionsCtrl,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function jsxCodeCtrl($scope,PrettierService,MarketingService){var vm=this;vm.options={mode:"jsx",theme:"uxpin-readonly-jsx",value:vm.value},vm.onClick=function(e){e.preventDefault(),MarketingService.sendTrackingEvent(MarketingService.TRACKING_EVENT_COPYALL),MarketingService.openTypeformIfNotSeen()},vm.isExpanded=!1,vm.toggleExpand=function(e){e.preventDefault(),vm.isExpanded=!vm.isExpanded},$scope.$watch("vm.value",function(value){PrettierService.format(value).then(function(formattedValue){vm.options=_.extend({},vm.options,{value:formattedValue})})})}angular.module("specification").directive("jsxCode",function(){return{restrict:"E",scope:{value:"="},templateUrl:"/scripts/modules/specification/directives/jsxCode/jsxCode.html",controller:jsxCodeCtrl,controllerAs:"vm",bindToController:!0}}),jsxCodeCtrl.$inject=["$scope","PrettierService","MarketingService"]}(),function(){"use strict";function metadataCtrl(_,CODE_EDITOR){this.TYPES={LIST:"list",CODE:"code",TEXT:"text"},this.findCodeOptionLabel=function(codeLang){var match=_.find(CODE_EDITOR.MODES_OPTIONS,function(option){return codeLang===option.value});return match?match.text:codeLang},this.getSelectedOption=function(options,value){if(!_.isEmpty(options))return(_.find(options,function(option){return option.value===value})||options[0]).text},this.onClick=function(e){e.preventDefault()}}angular.module("specification").directive("metadata",function(){return{restrict:"E",scope:{metadata:"="},templateUrl:"/scripts/modules/specification/directives/metadata/metadata.html",controller:metadataCtrl,controllerAs:"vm",bindToController:!0}}),metadataCtrl.$inject=["_","CODE_EDITOR"]}(),function(){"use strict";function shadowsListCtrl($scope,Color){var vm=this;vm.name=Color.getName,vm.COLOR_TYPES=Color.COLOR_TYPES,vm.getRgbaValues=function(color){return Color.getRgbaValues(color).join(", ")},$scope.$watch(Color.getSelectedColorType,function(colorType){vm.colorType=colorType})}angular.module("specification").directive("shadowsList",function(){return{restrict:"E",scope:{shadows:"=",sectionLabel:"@"},templateUrl:"/scripts/modules/specification/directives/shadowsList/shadowsList.html",controller:shadowsListCtrl,controllerAs:"vm",bindToController:!0}}),shadowsListCtrl.$inject=["$scope","Color"]}(),function(){"use strict";function stateSwitcherCtrl(){}angular.module("specification").directive("stateSwitcher",function(){return{restrict:"E",scope:{isMultistate:"=",selectedState:"=",changeState:"=",states:"="},templateUrl:"/scripts/modules/specification/directives/stateSwitcher/stateSwitcher.html",controller:stateSwitcherCtrl,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function storybookCtrl($scope){var vm=this;vm.onClick=function(e){e.preventDefault()},vm.url=formatUrl(vm.url),$scope.$watch("vm.url",function(value){value&&(vm.formattedUrl=formatUrl(value))})}function formatUrl(url){try{var parsedURL=new URL(url);return"".concat(function(url){if(!url)return"";try{var splittedUrl,formattedUrl=(formattedUrl=new URL(url)).href.replace(formattedUrl.search,"");/\/iframe.html.*$/.test(formattedUrl)&&((splittedUrl=formattedUrl.split("/")).pop(),formattedUrl=splittedUrl.join("/"));var href=new URL(formattedUrl).href;return"/"===href.slice(-1)?href.slice(0,-1):href}catch(e){return""}}(url),"/?path=/story/").concat(parsedURL.searchParams.get("id"))}catch(e){return url}}angular.module("specification").directive("storybook",function(){return{restrict:"E",scope:{url:"="},templateUrl:"/scripts/modules/specification/directives/storybook/storybook.html",controller:storybookCtrl,controllerAs:"vm",bindToController:!0}}),storybookCtrl.$inject=["$scope"]}(),function(){"use strict";function tokenCtrl(_,$scope,Color,CssService){var vm=this;vm.MODES=Color.COLOR_TYPES,vm.isCopiedInfoVisible=[!1,0],vm.isRgbaMode=function(){return vm.mode===vm.MODES.RGBA},vm.isGradient=function(){return CssService.isGradient(vm.color.token)},vm.getGradientData=function(){return CssService.extractGradientData(vm.color.token)},vm.isHexMode=function(){return vm.mode===vm.MODES.HEX},vm.getRgbaValues=function(color){return Color.getRgbaValues(color).join(",")},vm.colorName=Color.getName,$scope.$watch("vm.color.token",function(gradient){gradient&&"gradient"===gradient.type&&(vm.gradientData=vm.getGradientData(),vm.gradientCssStyle=CssService.getGradientCssStyle(vm.mode,vm.gradientData))}),vm.isBright=Color.isBright}angular.module("specification").directive("token",function(){return{restrict:"E",scope:{color:"=",mode:"=",skipCopyInfo:"=?"},templateUrl:"/scripts/modules/specification/directives/token/token.html",controller:tokenCtrl,controllerAs:"vm",bindToController:!0}}),tokenCtrl.$inject=["_","$scope","Color","CssService"]}(),function(){"use strict";function unitSwitcherCtrl(UnitService){var vm=this;vm.offsetColorType={bottom:{x:0,y:10}},vm.UNIT_MODES=UnitService.UNIT_MODES,vm.activeMode=UnitService.getActiveMode(),vm.changeMode=function(e,mode){e.preventDefault(),UnitService.changeMode(mode),vm.activeMode=mode}}angular.module("specification").directive("unitSwitcher",function(){return{restrict:"E",scope:{unitSwitcher:"="},templateUrl:"/scripts/modules/specification/directives/unitSwitcher/unitSwitcher.html",controller:unitSwitcherCtrl,controllerAs:"vm",bindToController:!0}}),unitSwitcherCtrl.$inject=["UnitService"]}(),function(){"use strict";function colorsGuideListCtrl(_,$scope,tinycolor,Color){var vm=this;vm.sortedColors=[],vm.name=Color.getNameForStyleGuide,vm.getBoxShadow=function(color){var shadowMono=tinycolor("black").setAlpha(.1),shadowColor=tinycolor(color).setAlpha(.3),color=Color.isWhite(color)?shadowMono:shadowColor;return"0 10px 30px ".concat(color.toRgbString())},vm.getRgbValues=function(color){color=Color.getRgbaValues(color);return _.dropRight(color).join(", ")},vm.getRgb=function(color){return tinycolor(color).toRgbString()},$scope.$watch("vm.colors",function(colors){_.isArray(colors)&&(vm.sortedColors=_.clone(colors).sort(function(a,b){return tinycolor(b.hex).getBrightness()-tinycolor(a.hex).getBrightness()}))}),$scope.$watch("vm.designSystems",function(designSystems){designSystems.length&&(designSystems=vm.designSystems[0],vm.selectedDesignSystem=designSystems,Color.setLibraryColors(designSystems?designSystems.libraryHash:null))})}angular.module("styleguide").directive("colorsGuideList",function(){return{restrict:"E",scope:{colors:"=",designSystems:"="},templateUrl:"/scripts/modules/styleguide/directives/colorsGuideList/colorsGuideList.html",controller:colorsGuideListCtrl,controllerAs:"vm",bindToController:!0}}),colorsGuideListCtrl.$inject=["_","$scope","tinycolor","Color"]}(),function(){"use strict";function downloadFontCtrl(Font,$window){var vm=this;vm.isFontDownloadError=!1,vm.isFontDownloading=!1,vm.isCustomFont=Font.isCustomFont,vm.isTypekitFont=Font.isTypekitFont,vm.getGoogleFontLink=Font.getGoogleFontLink,vm.getTypekitFontLink=Font.getTypekitFontLink,vm.downloadCustomFont=function($event,font){$event.preventDefault(),vm.isFontDownloadError=!1,vm.isFontDownloading=!0,Font.downloadCustomFont(font.fontName,_.map(font.variants,"shorthand")).then(function(data){data&&!data.isDownloading&&data.url&&($window.location.href=data.url,vm.isFontDownloading=!1)}).catch(function(){vm.isFontDownloadError=!0,vm.isFontDownloading=!1})},vm.isGoogleFont=function(fontData){return Font.isGoogleFont(fontData)||$window.uxpinEngine.Page.utils.GoogleFontLoader.isGoogleFontCache[(fontData.family||"").toLowerCase()]}}angular.module("styleguide").directive("downloadFont",function(){return{restrict:"E",scope:{font:"="},templateUrl:"/scripts/modules/styleguide/directives/downloadFont/downloadFont.html",controller:downloadFontCtrl,controllerAs:"vm",bindToController:!0}}),downloadFontCtrl.$inject=["Font","$window"]}(),function(){"use strict";function downloadImagesCtrl(_,ImageService,$window,SvgService){var vm=this;vm.isImagesDownloadError=!1,vm.isImagesDownloading=!1,vm.downloadImages=function($event){$event.preventDefault(),vm.isImagesDownloadError=!1,vm.isImagesDownloading=!0;$event=vm.images.map(function(image){return"svg"===image.type&&image.element?SvgService.getSvgImage(image.element).then(function(svgData){return{type:image.type,name:"".concat(image.name,".").concat(image.type),content:svgData.rawSource}}):{type:image.type,name:"".concat(image.name,".").concat(image.extension),content:image.path}});Promise.all($event).then(function(imagesData){ImageService.downloadImages(vm.projectName,imagesData).then(function(data){data&&!data.isDownloading&&data.url&&($window.location.href=data.url,vm.isImagesDownloading=!1)}).catch(function(){vm.isImagesDownloadError=!0,vm.isImagesDownloading=!1})})}}angular.module("styleguide").directive("downloadImages",function(){return{restrict:"E",scope:{images:"=",projectName:"="},templateUrl:"/scripts/modules/styleguide/directives/downloadImages/downloadImages.html",controller:downloadImagesCtrl,controllerAs:"vm",bindToController:!0}}),downloadImagesCtrl.$inject=["_","ImageService","$window","SvgService"]}(),function(){"use strict";function fontsGuideListCtrl($scope,Font){var vm=this;vm.getFontFamily=Font.getFontFamily,vm.getFontStyles=Font.getFontStyles,vm.sortedFonts=[],$scope.$watch(function(){return vm.fonts},function(fonts){var fontsArray;_.isArray(fonts)&&(fontsArray=[],_.forEach(fonts,function(font){fontsArray.push({fontFamily:font.fontFamily,fontData:font.fontData,fontName:font.fontName.replace(/['"]+/g,""),variants:font.variants.map(function(variantsMap,variant){return{name:Font.getVariantName(variant,variantsMap?variantsMap[variant]:null),shorthand:variant}}.bind(null,font.displayVariants)).sort(Font.getCompareVariantsFn()),weights:font.weights,italics:font.italics})}),vm.sortedFonts=_.sortBy(fontsArray,"fontName"))})}angular.module("styleguide").directive("fontsGuideList",function(){return{restrict:"E",scope:{fonts:"="},templateUrl:"/scripts/modules/styleguide/directives/fontsGuideList/fontsGuideList.html",controller:fontsGuideListCtrl,controllerAs:"vm",bindToController:!0}}),fontsGuideListCtrl.$inject=["$scope","Font"]}(),function(){"use strict";function imagesGuideListCtrl($scope,_,SvgService,FileService,$rootScope){var vm=this,nameCounter={},removeLoadListener=(vm.currentImage=null,vm.setCurrentImage=function(event,image){event.preventDefault(),"svg"===image.type&&image.element?SvgService.getSvgImage(image.element).then(function(svg){vm.currentImage={timestamp:Date.now(),type:image.type,name:"".concat(image.name,".svg"),content:svg.rawSource}}):vm.currentImage={timestamp:Date.now(),type:image.type,name:"".concat(image.name,".").concat(image.extension),content:image.path}},vm.isLoading={},$rootScope.$on("IMAGE_LOADED",function(e,index){vm.isLoading[index]=!1})),removeInitLoadListener=$rootScope.$on("IMAGE_INIT_SVG_LOADING",onImageInitLoad);function onImageInitLoad(e,index){vm.isLoading[index]=!0}function transformSvg(svg){return _.isUndefined(nameCounter[svg.name])?nameCounter[svg.name]=0:svg.name+="-".concat(++nameCounter[svg.name]),{extension:"svg",type:"svg",name:svg.name,width:svg.width,height:svg.height,element:svg}}function sortByName(image){return image.name.toLowerCase()}function removeEmptyName(image){return!!image.name}function transformImage(image){return _.isObject(image)?_.extend({},FileService.getFilename(image.src,!1,image.name),{type:"url",path:image.src}):_.extend({},FileService.getFilename(image),{type:"url",path:image})}function compareSvgs(prev,next){var nextToCompare,prevSvg=angular.element("<svg>").html(prev.exportedSVG||prev.view.domElement.innerHTML).find("path"),nextSvg=angular.element("<svg>").html(next.exportedSVG||next.view.domElement.innerHTML).find("path");return prevSvg[0]&&nextSvg[0]?prevSvg[0].outerHTML===nextSvg[0].outerHTML:(prevSvg=!0,prev.color&&next.color&&(nextSvg=_.isObject(prev.color)?prev.color.id:prev.color.toLowerCase(),nextToCompare=_.isObject(next.color)?next.color.id:next.color.toLowerCase(),prevSvg=nextSvg.color===nextToCompare.color),(prev.exportedSVG||prev.view.domElement.innerHTML)===(next.exportedSVG||next.view.domElement.innerHTML)&&prevSvg)}$scope.$watchCollection(function(){return{svgs:vm.svgs,images:vm.images}},function(data){var uniqueSvgs=_.uniqWith(data.svgs,compareSvgs)||[],data=_.uniq(data.images)||[],data=_.map(data,transformImage)||[],data=_.filter(data,removeEmptyName)||[];vm.allImages=_.sortBy(_.concat(_.map(uniqueSvgs,transformSvg),data),sortByName)}),$scope.$on("$destroy",function(){removeLoadListener(),removeInitLoadListener()}),$rootScope=URL.createObjectURL(new Blob(["(",function(){var _this51=this;this.onmessage=function(e){if("PRELOADING_INIT"===e.data.type){var url=e.data.url;_this51.postMessage({type:"PRELOADING_START",index:e.data.index});try{fetch(url,{mode:"cors"}).then(function(){return _this51.postMessage({type:"PRELOADING_FINISH",index:e.data.index,url:url})}).catch(function(){return _this51.postMessage({type:"PRELOADING_FINISH",index:e.data.index,url:url})})}catch(error){_this51.postMessage({type:"PRELOADING_FINISH",index:e.data.index,url:url})}}}}.toString(),")()"],{type:"application/javascript"})),$rootScope=new Worker($rootScope),(vm.lazyImageWorker=$rootScope).onmessage=function(e){"PRELOADING_START"===e.data.type&&(onImageInitLoad(0,e.data.index),$scope.$apply())}}angular.module("styleguide").directive("imagesGuideList",function(){return{restrict:"E",scope:{images:"=",svgs:"=",projectName:"="},templateUrl:"/scripts/modules/styleguide/directives/imagesGuideList/imagesGuideList.html",controller:imagesGuideListCtrl,controllerAs:"vm",bindToController:!0}}),imagesGuideListCtrl.$inject=["$scope","_","SvgService","FileService","$rootScope"]}(),function(){"use strict";function lazyImageCtrl($scope,_,SvgService,$rootScope){var vm=this,removeRootScopeListener=$rootScope.$on("IMAGE_VISIBLE",function(e,index){vm.index===index&&("svg"===vm.image.type?($rootScope.$emit("IMAGE_INIT_SVG_LOADING",vm.index),function(svg){return SvgService.getSvgImage(svg).then(function(svgData){return{path:svgData.image,rawSource:svgData.rawSource,extension:"svg",type:"svg",name:svg.name,width:svg.width,height:svg.height,elementType:svgData.type}})}(vm.image.element).then(function(decoratedImage){vm.path=decoratedImage.path,vm.svg=decoratedImage,$rootScope.$emit("IMAGE_LOADED",vm.index)})):(vm.worker.postMessage({type:"PRELOADING_INIT",index:vm.index,url:vm.image.path}),vm.worker.addEventListener("message",function(e){"PRELOADING_FINISH"===e.data.type&&e.data.index===vm.index&&(vm.path=e.data.url,$rootScope.$emit("IMAGE_LOADED",vm.index),$scope.$apply())})),removeRootScopeListener())})}angular.module("styleguide").directive("lazyImage",function(){return{restrict:"E",scope:{image:"=",index:"=",worker:"="},templateUrl:"/scripts/modules/styleguide/directives/lazyImage/lazyImage.html",controller:lazyImageCtrl,controllerAs:"vm",bindToController:!0}}),lazyImageCtrl.$inject=["$scope","_","SvgService","$rootScope","$window"]}(),function(){"use strict";function pageLoader(PagesService,Engine,_,$rootScope,$q,exportImage){return{restrict:"E",scope:{pagesIds:"="},templateUrl:"/scripts/modules/styleguide/directives/pageLoader/pageLoader.html",link:function(scope,element){this.PagesService=PagesService,this.Engine=Engine,this._=_,this.$rootScope=$rootScope,this.$q=$q,this.exportImage=exportImage,function(scope,element){function loadPagesData(pagesData){specProperties=[],lastUpdates=[],loadPageData(pagesData,0)}var specProperties,lastUpdates,loadedPages=[],loadPageData=function(pagesData,i){var self=this;this.Engine.loadPageInContainer(pagesData[i]).then(function(_ref12){var canvas=_ref12.canvas,_ref12=_ref12.page;return onLoad.call(self,pagesData,i,canvas,_ref12)})}.bind(this),onPagesIdsChange=function(pagesIds){pagesIds&&pagesIds.length&&(this.$rootScope.$emit(PreviewEnums.ON_STYLEGUIDE_DATA_LOAD_STARTED),this.PagesService.getAllPagesData(pagesIds).then(loadPagesData))}.bind(this),onLoad=function(pagesData,i,canvas,page){var _this52=this,styleguideData=(loadedPages.push(page),lastUpdates.push(pagesData[i].last_update),specProperties.push(canvas.getSpecProperties()),++i<pagesData.length?loadPageData(pagesData,i):element.empty(),getStyleGuideData(specProperties));preloadSvgBackgroundImages(styleguideData).then(function(){decorateSvg(styleguideData),_this52.$rootScope.$emit(PreviewEnums.ON_STYLEGUIDE_DATA_LOAD_FINISHED,_this52._.extend({},styleguideData,{lastUpdates:lastUpdates})),i===pagesData.length&&(loadedPages.forEach(function(loadedPage){loadedPage.clear()}),loadedPages=null)})},decorateSvg=function(styleguideData){styleguideData.svgs=this._.map(styleguideData.svgs,function(svg){return svg.exportedSVG||(svg.exportedSVG=this._.isFunction(svg.exportSVG)?svg.exportSVG():null),svg}.bind(this))}.bind(this),preloadSvgBackgroundImages=function(styleguideData){var _this53=this,styleguideData=styleguideData.svgs;return this.$q.all(this._.map(styleguideData,function(svg){var image,deferred=_this53.$q.defer();return svg.backgroundImage?((image=new Image).onload=function(){var _this54=this;this.exportImage.getFileContentFromUrl("".concat(svg.backgroundImage,"?").concat(Date.now()),"blob").then(function(file){return _this54.exportImage.blobToDataURI(file)}).then(function(){deferred.resolve()}).catch(function(){deferred.resolve()})}.bind(_this53),image.onerror=function(){deferred.resolve()},image.src="".concat(svg.backgroundImage,"?").concat(Date.now())):deferred.resolve(),deferred.promise}))}.bind(this),getStyleGuideData=function(specProperties){return specProperties.reduce(function(prevValue,currentValue){var data={};return data.colors=mergeColors(prevValue,currentValue),data.images=mergeImages(prevValue,currentValue),data.svgs=mergeSvgs(prevValue,currentValue),data.fonts=mergeFonts(prevValue,currentValue),data},{})},mergeColors=function(prevValue,currentValue){return this._.uniqBy(this._.compact(this._.concat(prevValue.colors,currentValue.colors,prevValue.backgroundColor)),function(color){return color.hex})}.bind(this),mergeImages=function(prevValue,currentValue){prevValue=this._.map(prevValue.images,removeParams),currentValue=this._.map(currentValue.images,removeParams);return this._.uniqWith(this._.compact(this._.concat(prevValue,currentValue)),function(prev,next){return prev===next})}.bind(this),mergeSvgs=function(prevValue,currentValue){return this._.compact(this._.concat(prevValue.svgs,currentValue.svgs))}.bind(this),mergeFonts=function(prevValue,currentValue){var _this55=this;return this._.merge({},prevValue.fonts,currentValue.fonts,function(a,b){if(_this55._.isArray(a))return _this55._.union(a.concat(b))})}.bind(this),removeParams=function(image){return this._.isObject(image)&&image.src?{src:image.src.split("?")[0],name:image.name}:image.split("?")[0]}.bind(this);element.css("display","none"),scope.$watchCollection(function(){return scope.pagesIds},onPagesIdsChange)}.apply(this,arguments)}}}angular.module("styleguide").directive("pageLoader",pageLoader),pageLoader.$inject=["PagesService","Engine","_","$rootScope","$q","exportImage"]}(),function(){"use strict";function ActionsCtrl(_,$scope,$state,$modal,$window,$rootScope,UsersService,ProjectsService,ExportService,UXPinService,PreviewNavigation,uxpinSharedComponents){var vm=this,onChangePageOff=$rootScope.$on(PreviewEnums.ON_CHANGE_PAGE,function(){vm.params.currentDocumentURL=UXPinService.getCurrentDocumentURL($state.params.port)});function getPreviewUrl(){return"".concat($window.location.origin+$window.location.pathname,"#pages/").concat($state.params.pageId)}$scope.$on("$destroy",function(){onChangePageOff()}),vm.hideUsabilityTestingInfo=!0,vm.hideLivePresentationInfo=!!ApplicationConfiguration.experimental,vm.onClickUsabilityTestSession=function(event){event.preventDefault();if(uxpinSharedComponents.isDesktopApp)return $window.electronAPI.openExternalLink("".concat(getPreviewUrl(),"/usability-test/").concat(1));$state.go("home.page.usability-test",{step:1})},vm.onConfigureLiveShareSession=function($event){if($event.preventDefault(),uxpinSharedComponents.isDesktopApp)return $window.electronAPI.openExternalLink("".concat(getPreviewUrl(),"/live-presentation-configuration"));PreviewNavigation.setActiveMode(PreviewNavigation.PREVIEW_MODES.SIMULATE),$modal.open({templateUrl:"/scripts/modules/core/views/liveShare/configuration.view.html",controller:"LiveShareConfigurationController"})},vm.isOpen=!1,vm.onCloudOpen=function(){vm.isOpen=!0},vm.hasAccessToEditor=UsersService.hasAccessToEditor,vm.onCloudClose=function(){vm.isOpen=!1},vm.isOriginalProject=ProjectsService.isOriginalProject(),vm.desktopAppDownoadLink=uxpinSharedComponents.getDesktopDownloadLink(),vm.params={editLabel:ApplicationConfiguration.experimental?"Go to editor":"Edit prototype",features:ExportService.isExport()?{}:ProjectsService.currentProjectFeatures,isDocument:ProjectsService.isDocument(),isOwner:UsersService.me.is_owner,isUXTestDocument:ProjectsService.isUXTestDocument(),logOutUrl:UXPinService.getLogOutURL(),noSeparator:ApplicationConfiguration.experimental&&!UsersService.me.is_owner,showBackToDashboard:!ApplicationConfiguration.experimental,upgradePlanURL:ApplicationConfiguration.upgradePlanURL},UsersService.me.is_owner?(vm.params.currentDocumentURL=UXPinService.getCurrentDocumentURL($state.params.port),vm.params.dashboardURL=UXPinService.getCurrentCollectionURL()):(vm.params.currentDocumentURL=null,vm.params.dashboardURL=UXPinService.getDashboardURL()),vm.offset={bottomRight:{x:0,y:10}},vm.upgradePlanTest=function(event){event.preventDefault(),$modal.open({templateUrl:"/scripts/modules/core/views/planUpgrade/modalUpgrade.view.html",controller:"PlanUpgradeController",windowClass:"iframe-modal-box upgrade-plan-modal-box no-spinner"})},vm.upgradePlan=function(event){event.preventDefault(),$modal.open({templateUrl:"/scripts/modules/core/views/planUpgrade/modal.view.html",controller:"PlanUpgradeController"})},vm.isOwner=function(){return vm.params.isOwner},vm.isWireframe=function(){return!vm.params.isDocument},vm.showDesktopAppDownload=function(){return!uxpinSharedComponents.isDesktopApp&&(uxpinSharedComponents.isMac||uxpinSharedComponents.isWindows)&&!ApplicationConfiguration.experimental},vm.desktopAppLinkClick=function(){$window.mixpanel.track("desktop_app_downloaded")},vm.canShowUsabilityTesting=function(){return vm.params.features.user_testing&&!$window._failedLoadingUserTestingScript},vm.canShowLivePresentation=function(){return vm.params.features.live_share}}angular.module("core").directive("actions",function(){return{restrict:"E",scope:{},templateUrl:"/scripts/modules/core/directives/topBar/actions/actions.html",controller:ActionsCtrl,controllerAs:"vm",bindToController:!0}}),ActionsCtrl.$inject=["_","$scope","$state","$modal","$window","$rootScope","UsersService","ProjectsService","ExportService","UXPinService","PreviewNavigation","uxpinSharedComponents"]}(),function(){"use strict";function filterCtrl(_,$rootScope,PreviewNavigation,CommentsFilterSettings,COMMENTS_FILTER,UsersService){var vm=this,CLASS_NAMES=(vm.isAnonymous=UsersService.isAnonymous(),{PUBLIC:"comment-public",TEAM:"comment-team",ALL:"comment-all",ASSIGN:"with-assign"}),LABEL={FILTERED:"Filtered",ALL:"All",NONE:"None"};function setClassNames(){var typeFilters=CommentsFilterSettings.getTypeFilters(),typeClassArray=(CommentsFilterSettings.getAssignmentFilter(),[]);vm.label=LABEL.NONE,vm.assignmentClass="",vm.typeClass="";for(var i=0;i<typeFilters.length;i++)switch(typeFilters[i]){case COMMENTS_FILTER.TYPE_VALUES.PUBLIC_COMMENTS:typeClassArray.push(CLASS_NAMES.PUBLIC);break;case COMMENTS_FILTER.TYPE_VALUES.TEAM_COMMENTS:typeClassArray.push(CLASS_NAMES.TEAM)}typeClassArray.length===_.size(COMMENTS_FILTER.TYPE_VALUES)?(vm.label=LABEL.ALL,vm.isAnonymous||(vm.typeClass=CLASS_NAMES.ALL)):typeClassArray.length&&(vm.label=LABEL.FILTERED,vm.typeClass=typeClassArray.join(" ")),CommentsFilterSettings.isAssignmentFilterDisabled()||(vm.assignmentClass=CLASS_NAMES.ASSIGN)}vm.PREVIEW_PANELS=PreviewNavigation.PREVIEW_PANELS,$rootScope.$on(PreviewEnums.ON_COMMENTS_FILTER_CHANGE,setClassNames),setClassNames()}angular.module("core").directive("filter",function(){return{restrict:"E",scope:{togglePanel:"=",isPanelVisible:"="},templateUrl:"/scripts/modules/core/directives/topBar/filter/filter.html",controller:filterCtrl,controllerAs:"vm",bindToController:!0}}),filterCtrl.$inject=["_","$rootScope","PreviewNavigation","CommentsFilterSettings","COMMENTS_FILTER","UsersService"]}(),function(){"use strict";function liveShareCtrl(_,$scope,$rootScope,$state,$timeout,LiveSessionInstanceService){var vm=this,LiveSessionInstance=LiveSessionInstanceService.get();function updateCollaboratorsList(inScope){inScope?vm.collaborators=LiveSessionInstance.getCollaboratorsData():$scope.$apply(function(){vm.collaborators=LiveSessionInstance.getCollaboratorsData()})}vm.isHostSession=LiveSessionInstance.isHostSession(),vm.settingsPanelVisibilityModel=!1,vm.muted=!1,vm.inviteURL=LiveSessionInstance.getInviteURL(),vm.collaborators=LiveSessionInstance.getCollaboratorsData(),vm.isUserTestingMode=LiveSessionInstance.getType()===LiveShare.enums.SESSION_TYPES.TESTING,vm.host=null,vm.onCloudOpen=function(){vm.isOpen=!0},vm.onCloudClose=function(){vm.isOpen=!1},vm.toggleMute=function(event){event.preventDefault(),vm.muted=LiveSessionInstance.muted=!LiveSessionInstance.muted,LiveSessionInstance.mute(vm.muted),updateCollaboratorsList(!0)},vm.removeUser=function(userID){LiveSessionInstance.removeCollaborator(userID)},vm.getCollaboratorAvatar=function(collaborator){return collaborator.customData.avatar||"/img/transparent.png"},LiveSessionInstance.getConfigurationOptions().then(function(options){vm.configuration=options}),vm.setOption=function(option){LiveSessionInstance.setOption(option.param,option.value)},vm.inputFocus=function(event){event.target.select()},vm.onCopySuccess=function(){vm.isCopied=!0,$timeout(function(){vm.isCopied=!1},1e3)},vm.isHostSession||(vm.host=LiveSessionInstance.getHostData(),LiveSessionInstance.registerObserverCallback("followCursorOff",function(){$scope.$apply(function(){vm.host=LiveSessionInstance.getHostData()})})),vm.onClickFollowHost=function(event){event.preventDefault(),vm.host.isFollowed=!0,LiveSessionInstance.followCursor(vm.host.id)},LiveSessionInstance.registerObserverCallback("mute",updateCollaboratorsList.bind(this,!1)),LiveSessionInstance.registerObserverCallback("collaboratorJoin",updateCollaboratorsList.bind(this,!1)),LiveSessionInstance.registerObserverCallback("collaboratorLeft",updateCollaboratorsList.bind(this,!1)),LiveSessionInstance.registerObserverCallback("finish",function(data){var stateName=vm.isHostSession&&vm.isUserTestingMode&&LiveSessionInstance.hasVideoData()?"home.page.usability-test-video-upload":"home.page.live-share-finish";vm.collaborators=[],$state.go(stateName,data),$rootScope.$emit(PreviewEnums.MEDIA_ACCESS,PreviewEnums.MEDIA_ACCESS_TYPE.HIDE)})}angular.module("core").directive("liveShare",function(){return{restrict:"E",scope:{isHostSession:"=",isLiveShareSession:"=",isUserTestingSession:"="},templateUrl:"/scripts/modules/core/directives/topBar/liveShare/liveShare.html",controller:liveShareCtrl,controllerAs:"vm",bindToController:!0}}),liveShareCtrl.$inject=["_","$scope","$rootScope","$state","$timeout","LiveSessionInstanceService"]}(),function(){"use strict";function mirrorAppCtrl($rootScope,$window,ProjectsService,PagesService){var vm=this,pageIdWatcher=(vm.isOpen=!1,vm.onCloudOpen=function(){vm.isOpen=!0},vm.onCloudClose=function(){vm.isOpen=!1},vm.getUrl=getUrl,vm.currentUrl=getUrl(),$rootScope.$watch(function(){return PagesService.currentPageId},function(newPageId){newPageId&&(vm.currentUrl=getUrl())}));function getUrl(){var projectHash=ProjectsService.currentProjectHash,userId=ApplicationConfiguration.userData.is_anonymous?null:ApplicationConfiguration.userData.id_user,currentPageId=PagesService.currentPageId,hostname=$window.location.hostname.replace(/^app\./,"preview."),hostname="".concat($window.location.protocol,"//").concat(hostname,"/").concat(projectHash,"#/")+"pages/".concat(currentPageId,"/simulate/no-panels?mode=ir");return userId?"".concat(hostname,"&userId=").concat(userId):hostname}vm.$onInit=function(){vm.$onDestroy=pageIdWatcher}}angular.module("core").directive("mirrorApp",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"/scripts/modules/core/directives/topBar/mirrorApp/mirrorApp.view.html",controller:mirrorAppCtrl,controllerAs:"vm",bindToController:!0}}),mirrorAppCtrl.$inject=["$rootScope","$window","ProjectsService","PagesService"]}(),function(){"use strict";angular.module("core").directive("qrCode",["uxpinSharedComponents",function(uxpinSharedComponents){return{restrict:"E",scope:{value:"="},link:function(scope,el){var props={value:scope.value,size:160};function renderQRCode(properties){properties=uxpinSharedComponents.React.createElement(uxpinSharedComponents.QRCode,properties);uxpinSharedComponents.ReactDOM.unmountComponentAtNode(el[0]),uxpinSharedComponents.ReactDOM.render(properties,el[0])}renderQRCode(props),scope.$watch("value",function(newValue,oldValue){newValue!==oldValue&&(props.value=newValue,renderQRCode(props))})}}}])}(),angular.module("core").directive("zenMode",zenMode),zenMode.$inject=["Settings","ZenModeService"];
//# sourceMappingURL=maps/app.js.map
